2025-09-18T16:27:11: [4:27:11 pm] 🚀 Starting Tailor Shop Bot...
2025-09-18T16:27:11: [4:27:11 pm] 🔑 Initializing Google Sheets API...
2025-09-18T16:27:11: [4:27:11 pm] ✅ Google Sheets API initialized
2025-09-18T16:27:11: [4:27:11 pm] 📱 Initializing Enhanced WhatsApp client...
2025-09-18T16:27:11: 🔄 Initializing WhatsApp client...
2025-09-18T16:27:11: 📁 Loaded 0 sent messages from file
2025-09-18T16:27:11: [4:27:11 pm] ⏳ Waiting for WhatsApp connection...
2025-09-18T16:27:11: [4:27:11 pm] ⏳ Waiting for WhatsApp connection... (1/60)
2025-09-18T16:27:11: 🔄 Connecting to WhatsApp...
2025-09-18T16:27:11: [4:27:11 pm] 🌐 Dashboard running at http://localhost:3001
2025-09-18T16:27:11: [4:27:11 pm] 📊 Open the dashboard to view status and test messages
2025-09-18T16:27:11: 📁 Loaded 0 customer histories from file
2025-09-18T16:27:11: 📁 Loaded 0 message hashes from file
2025-09-18T16:27:11: 📁 Loaded statistics from file
2025-09-18T16:27:11: ✅ Duplicate Prevention Manager initialized
2025-09-18T16:27:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-18T16:27:12: ✅ WhatsApp connected successfully!
2025-09-18T16:27:21: [4:27:21 pm] ✅ WhatsApp connected successfully!
2025-09-18T16:27:21: [4:27:21 pm] ✅ Admin commands system initialized
2025-09-18T16:27:21: [4:27:21 pm] 🔄 Starting automatic polling...
2025-09-18T16:27:21: [4:27:21 pm] 🔄 Starting sheet polling...
2025-09-18T16:27:21: [4:27:21 pm] 🔍 Polling all sheets...
2025-09-18T16:27:21: [4:27:21 pm] 📊 Checking Main Orders...
2025-09-18T16:27:21: [4:27:21 pm] ✅ Polling started - checking sheets every 3 minutes
2025-09-18T16:27:21: [4:27:21 pm] ✅ Tailor Shop Bot is ready!
2025-09-18T16:27:21: [4:27:21 pm] 📊 Dashboard: http://localhost:3001
2025-09-18T16:27:22: [4:27:22 pm] 📋 Main Orders: Found 2 data rows
2025-09-18T16:27:22: [4:27:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:27:22: [4:27:22 pm] 📋 Row 2: Order=TVU17092514, Phone=7375938371 (col 2), Status=Delivered
, Valid=true
2025-09-18T16:27:22: [4:27:22 pm] 🔍 Debug: Checking order TVU17092514 with status "Delivered
" (cleaned: "delivered") for phone 7375938371
2025-09-18T16:27:22: [4:27:22 pm] 🔍 Debug: Duplicate check passed for order TVU17092514
2025-09-18T16:27:22: [4:27:22 pm] 🔍 Debug: deliveryNotifiedIndex=21, rowData[deliveryNotifiedIndex]="Yes"
2025-09-18T16:27:22: [4:27:22 pm] 🔍 Debug: deliverySent=true
2025-09-18T16:27:22: [4:27:22 pm] 📋 Order TVU17092514: Delivery notification already sent - skipping
2025-09-18T16:27:22: [4:27:22 pm] 📋 Row 2: Should send=false
2025-09-18T16:27:22: [4:27:22 pm] 📋 Row 3: Order=, Phone= (col 3), Status=, Valid=false
2025-09-18T16:27:22: [4:27:22 pm] ⚠️ Row 3: Invalid phone number '' - skipping
2025-09-18T16:27:24: [4:27:24 pm] 📊 Checking Fabric Orders...
2025-09-18T16:27:24: [4:27:24 pm] 📋 Fabric Orders: Found 1 data rows
2025-09-18T16:27:24: [4:27:24 pm] 📋 Headers: Order ID | Customer Name | Contact Number | Address | Customer Type | Purchase Date | Payment Status | Session | Note | Brand Name | Fabric For | Fabric Type | Fabric Color | Quantity (meters) | Price per Meter | Fabric Total | Master Order ID | Welcome Notified | Purchase Notified | Payment Notified | Payment Reminder Count | Last Payment Reminder Date | Advance/Partial Payment | Remaining Amount
2025-09-18T16:27:24: [4:27:24 pm] 🔍 DEBUG FABRIC: Order=FAA18092508, rowData[6]="Partial", rowData[8]="NA", status="Partial"
2025-09-18T16:27:24: [4:27:24 pm] 📋 Row 2: Order=FAA18092508, Phone=7375938371 (col 2), Status=Partial, Valid=true
2025-09-18T16:27:24: [4:27:24 pm] 🔍 Debug: Checking order FAA18092508 with status "Partial" (cleaned: "partial") for phone 7375938371
2025-09-18T16:27:24: [4:27:24 pm] 🔍 Debug: Duplicate check passed for order FAA18092508
2025-09-18T16:27:24: [4:27:24 pm] 🔍 Debug: Checking if "partial" is in trigger statuses: true
2025-09-18T16:27:24: [4:27:24 pm] 📋 Row 2: Should send=true
2025-09-18T16:27:24: [4:27:24 pm] 🎯 Processing order: FAA18092508 for Deepak Saini
2025-09-18T16:27:24: [4:27:24 pm] ✅ Marking welcome as notified for Deepak Saini (existing customer)
2025-09-18T16:27:24: [4:27:24 pm] 🔍 Debug Fabric Order Data: {
  "order_id": "FAA18092508",
  "customer_name": "Deepak Saini",
  "phone": "7375938371",
  "garment_type": "Mafatlal Dress Chiffon",
  "status": "Partial",
  "delivery_date": "2025-09-18",
  "purchase_date": "2025-09-18",
  "total_amount": "360",
  "advance_amount": "300",
  "advance_payment": "300",
  "remaining_amount": "60",
  "fabric_brand": "Mafatlal",
  "fabric_for": "Dress",
  "fabric_type": "Mafatlal Dress Chiffon",
  "fabric_color": "Navy",
  "quantity": "1.2",
  "price_per_meter": "300",
  "shop_phone": "8824781960",
  "shop_name": "RS Tailor & Fabric"
}
2025-09-18T16:27:24: [4:27:24 pm] 🔄 Trying range format: S2
2025-09-18T16:27:25: [4:27:25 pm] ✅ Updated Fabric Orders - S2 = Yes (welcome)
2025-09-18T16:27:25: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T16:27:25: ✅ Message sent successfully to 917375938371
2025-09-18T16:27:25: [4:27:25 pm] ✅ fabric purchase confirmation message sent to Deepak Saini (FAA18092508)
2025-09-18T16:27:25: [4:27:25 pm] 🔄 Trying range format: T2
2025-09-18T16:27:26: [4:27:26 pm] ✅ Updated Fabric Orders - T2 = Yes (fabric purchase confirmation)
2025-09-18T16:27:28: [4:27:28 pm] 📊 Checking Combined Orders...
2025-09-18T16:27:28: [4:27:28 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:27:30: [4:27:30 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:27:30: [4:27:30 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:27:30: [4:27:30 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:27:30: [4:27:30 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:27:41: 💾 Data synced to files successfully
2025-09-18T16:28:11: 💾 Data synced to files successfully
2025-09-18T16:28:41: 💾 Data synced to files successfully
2025-09-18T16:29:11: 💾 Data synced to files successfully
2025-09-18T16:29:37: [4:29:37 pm] 🚀 Starting Tailor Shop Bot...
2025-09-18T16:29:37: [4:29:37 pm] 🔑 Initializing Google Sheets API...
2025-09-18T16:29:37: [4:29:37 pm] ✅ Google Sheets API initialized
2025-09-18T16:29:37: [4:29:37 pm] 📱 Initializing Enhanced WhatsApp client...
2025-09-18T16:29:37: 🔄 Initializing WhatsApp client...
2025-09-18T16:29:38: [4:29:38 pm] ⏳ Waiting for WhatsApp connection...
2025-09-18T16:29:38: [4:29:38 pm] ⏳ Waiting for WhatsApp connection... (1/60)
2025-09-18T16:29:38: 🔄 Connecting to WhatsApp...
2025-09-18T16:29:38: [4:29:38 pm] 🌐 Dashboard running at http://localhost:3001
2025-09-18T16:29:38: [4:29:38 pm] 📊 Open the dashboard to view status and test messages
2025-09-18T16:29:38: 📁 Loaded 0 sent messages from file
2025-09-18T16:29:38: 📁 Loaded 0 customer histories from file
2025-09-18T16:29:38: 📁 Loaded 0 message hashes from file
2025-09-18T16:29:38: 📁 Loaded statistics from file
2025-09-18T16:29:38: ✅ Duplicate Prevention Manager initialized
2025-09-18T16:29:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-18T16:29:39: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:29:39: [47m[30m ▄▄▄▄▄▄▄     ▄▄▄  ▄▄▄▄▄▄     ▄ ▄▄ ▄  ▄   ▄▄▄      ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄ ▄▀   ▀   █▀ ▄▀█ ▀▀█ █▄  █▀███▄█▄▀▀▀ █▄█▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ███ ▀▀█   █▄▄▀ ▀▀▀ ▀▄█▄▄▄▀██▀▄█▄ ▄ █▄▀█▀█▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ █▀▄▀█ █ ▄▀▄ ▄ █▀█ ▄ █▀▄▀█ ▄ █ █ ▄▀▄▀█▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀██▀ ▄▄▄▄▀ ▄ ▀ ▀█▀▀ █▄▄▄██▄▄▄▀█   ▄▄ █▄▄██▄█▄ ▄▄▄▄▄   [0m
[47m[30m ▀██▄▀ ▄▄█ █  ▄▄▄    ▀█  ▄ ▀█▀▀██▀ ▄▄▀▀ ▀▀██▀▄ ▄███▄▄ ▄▀ ▀  ▀▄ [0m
[47m[30m ▄▄ ▀ ▀▄▄██████▀  ▀▄  ▀ ▄█▄▀ ▄█▀▄▀▄ ██▄▄▀  ▄▀▀█▀▀▄  ▀▀▀█▄▀▀▄▀  [0m
[47m[30m ▀  ▄▄ ▄█▀▄▀  ▀█▀▄▀▄▄  ███▄▄▄▄██▄▀▄▄█▀▀ █ ▀▀▀█▄  ▀▀ ▄▄▄▀▀█  █▄ [0m
[47m[30m ▄  ▀▀▄▄▄ █▄▀▄▀▄▄ ▀▀ ▀▀  █▄  ▄█▀ ▀█▀▀█ ▄▄ ▀▄▀ ▀▀ █▀  ▄  █▀▄▄▄█ [0m
[47m[30m █   ▀█▄ ▄▀█ █ ▀▀▀▄▀▀ ▀▄▄█  ▄█▀██ ▄▄▀█▀▄▄ ██▀  ▄█▀▀▄ ▄██▄▀█▄▀▄ [0m
[47m[30m ▄▀▄ ▀ ▄██ █▀  ▀ ▄▄██▀▄▀▀█▀ ▄ ██ ▀█ ▄█▄▀▀ ▀▀ ▀▄ ▄▄█ █▄  ▄ ▄ ▀▀ [0m
[47m[30m ▄▄█ ██▄▀▄▀ ▄ ▀▄▀▄█▄▀ ▀█▀ █   ▀ ▀▀  ▄ ▀ ▄▀███▄▄ ▄▄▄▄ ▄█▀▀  ▄▀▄ [0m
[47m[30m █▀█ █▄▄▄ ▀▄▄▀▀▄██▄ █▄█▄██▄ ▀ ▀▄ █▀ ▄▄▄ █▀▄█▄▀▀ ▄█ ▄ ██▀▄ ▄ ▄▄ [0m
[47m[30m ▄▄▀▄ ▀▄█▄ ▀ █▀▀▀▄█▄█ ▄▀▄█▄▄█ ▀▀▄▄▀ █▀▄  ▄▄██ ▀  █▄▄  ██▀▄█▀▀▄ [0m
[47m[30m ▄██▄▄▄▄▄█▀█ ▀▄▀▄▄▀  █ ▄ █▀▀ ▄▄█▄█▀  ▄█▄  ▄▄▄▀▀▄▀▄▄▄▀▄▄█▄▄▄▄▀█ [0m
[47m[30m █▀█ █ ▄ █▄▀▄ ▄▄▀█   ▄▄▀█▀▄███ ▄ ██▄█▀▀ █▄▀█▀█  ▀█▀ ▄█ ▄ █ ▄▄▄ [0m
[47m[30m ▄▀█ █▄▄▄█▄▄▄ ▄█▀ █ █▄ ▄ ▀█ ▄█▄▄▄█▀ ▄▄ ▄▄▀▀ ▄ ▀ ▄▄▀ ██▄▄▄█▄ ▀▀ [0m
[47m[30m ▄█▄ █▀▄▀▀ ▄▄▄▀ ▄▄█ ▄▀▄ █▀▀▀▄█  █▀ ▄ ██ ▀▄▀█▀▄▄ ▀▄▀ ▀ ▀█▀▄▀ ▄▄ [0m
[47m[30m  █▄▄ ▄▄▄▀  █▀█  ▄▄█▄▄▄▄▀█▀ █▀██▀  █▄▀▄▄▀▄  ▄▄▀▄▀▄▄▀███▄ ▄▀▄█▄ [0m
[47m[30m ▀███▀█▄ ▄█ █▄▄██▀▄▀█▀  █▀▄█▄▀▀█▄█ ▄▄ ▀ ▀█▄▀▄█ ▄▀ ▀  ▀▄█  █ █▀ [0m
[47m[30m ▄▄▀ ▀▄▄ ▄▀ ▀▀▀▄▄▄▀▀▀▀█▄ █▄█ ▄▄█▄▄  ▄▄▄█▀  ▀▀▀ ▀██ ▄▄▀▀▀▀▄   █ [0m
[47m[30m  ▄▀ ▀▄▄▀▄ ▄▄█ █▄  ▀▄  █▀  ▄▄█▀▀▀ ▄   █▄▀ ▀▀▄    █▀   ▄▄▀ ▀▀▄█ [0m
[47m[30m ▀▄ ▀ ▄▄█ ▀▀  █▀█▀▄▄▀██ █ ▄▀█ ███▄▄█▄█▀█▄▀▀ █ ▄███▄▀▄▄▀▄ ▄  ▄▄ [0m
[47m[30m █  █ ▀▄▀ ▀██▄█▄▀▄▄▄▀ ▀█ ▀▄▄▀▀ ▄██▄▀▄█▀▀▄▀▀▄█ ▄▀█▀█▄█▀█▄█▄████ [0m
[47m[30m ▄▄█▀▄▄▄▄▄█ ██▀▄██  ██ ▀▀█▀▀ ▀▀██▄ █▀▄ ▀▀ ▀▄▄ ▀ ▄█▀▄▄▀▀ ▀  ▄▀▀ [0m
[47m[30m  ▀▄█▄▄▄▀▄▄▀▄ ▀▄▀█▄▄ ▄ ▄▀▀█▀█▀█▀▄▀▄ █▀▀▄▀ ▄▀ ▄▄ █▀█ ▄▄▄▄▀▄██▄█ [0m
[47m[30m ███▄▀ ▄▀▀▀█ ▀  █▀ ▄ ▀▄▄███▀▀██▄▄▄█▀█▄▄ ▀ ▀▀▄ ▄█▀▄█ ████▄▄ ▄▀▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█▀█▄ █  ██▀▀▀▄▀█▄█ █ ▄ █▄▄▄ ▄▄▄ ▀▀█▄  ▀▄▀ ▀█ ▄ █▄ ▄▄ [0m
[47m[30m █ ▄▄▄ █ █  █▀▄▄█▀ █▄▀▄ ▀▀█▀██▄▄▄█  ▀█▄ ▄  ▀▀ ▄▄▄▄▄ ▀█▄▄▄█  ▄█ [0m
[47m[30m █ ███ █ ██▄ ██▄ ▄█ ▀ ▄▄█▀▀  ▀▀█▀   ▀█▄▄▄ █▀▀    ▄▀▄▀▀██▄ ██ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀  ▀█ ▄▀▀▀▀ ▀▄▄▄▀ ▀  ██ ▀▀▄▄▀ ▄▀  ▀▀  ███▀▀▀█▀▀▄  ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:29:39: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:29:48: [4:29:48 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:29:48: [4:29:48 pm] ⏳ Waiting for WhatsApp connection... (2/60)
2025-09-18T16:29:58: [4:29:58 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:29:58: [4:29:58 pm] ⏳ Waiting for WhatsApp connection... (3/60)
2025-09-18T16:30:07: 💾 Data synced to files successfully
2025-09-18T16:30:08: [4:30:08 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:30:08: [4:30:08 pm] ⏳ Waiting for WhatsApp connection... (4/60)
2025-09-18T16:30:18: [4:30:18 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:30:18: [4:30:18 pm] ⏳ Waiting for WhatsApp connection... (5/60)
2025-09-18T16:30:28: [4:30:28 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:30:28: [4:30:28 pm] ⏳ Waiting for WhatsApp connection... (6/60)
2025-09-18T16:30:37: 💾 Data synced to files successfully
2025-09-18T16:30:38: [4:30:38 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:30:38: [4:30:38 pm] ⏳ Waiting for WhatsApp connection... (7/60)
2025-09-18T16:30:39: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:30:39: [47m[30m ▄▄▄▄▄▄▄      ▄▄▄  ▄▄▄   ▄ ▄▄ ▄▄▄▄ ▄ ▄ ▄▄ ▄▄ ▄▄▄  ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █  ██ ▀█▄█▀█▄▄▄█▀▀█▀▄█ ▄▄▄ ▄ ▄▄██  ▀ ▀▀▄ ▀▄▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █  ▀ ▀ ██▄ ▀▄▀  █  ▄▄█▄▄██▄██▄ ▀▀  █▀  ██ ▄▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ ▄ █▀█ ▄▀█▀▄ █▀▄▀█ ▄ █▀▄▀▄▀█ █ ▄▀█▀▄▀▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄ ▄▄ ▄▀ ▄▀▄▄ ▀▄▀▄ ██▄▄▀▀▄█▄▄▄█▀▀▀█▀▄▄▄██▄ ▀  ██ ▀▀▄ ▄      [0m
[47m[30m ▄▄▀ █▀▄█▀▄█▀▀▀   ▀▀██▀ ▀███▀▀ ▄ █▄ █  ▄▀ ▄ ██ ▄█▄▄   ▄▄ ▀▄  █ [0m
[47m[30m ▀███▀█▄█ ▀▀█▄▄▄▄▄▀█▀██▄▄▄█▄▄ █ █▄ ▄█▄ ▀█▄▄▄███ ██▀███▀▄ ▄█ ▀▀ [0m
[47m[30m ██  ▄▀▄█▀ ▄█▀▀██▀▄█▄ ▄  ▄▄▄ ▀ ▄▄▀ ▀▀▄▀  █▄▄▀▄▄▀███  ▀▀  ▀▄█▄█ [0m
[47m[30m ▀▄▄█▀█▄▀▄▀▄ █▄  ▄  ▀▀█ █ ▀▄▄▄▄ ██▀▀ ▄█    █▄▄█▀▀▄▄▄▄▄▀▀ █ ▄██ [0m
[47m[30m ▄ █▄██▄▀▀▀▀██▀  ▄ ▄█▄█▄ ▀▀█ ▀▀▄▄█  ▀▄ ▀ ▄█▄ █▄ █  ▀▄ █▄█▄▀ ▀█ [0m
[47m[30m █▀ ▄▄█▄██ █▀▀███▀▀▄██  ▀▄▀  █ ▄ ▀▀█▀▄▄▀██▄  ▀ █▀██ █▀█▀▄  █▄  [0m
[47m[30m █▀█ █▄▄▄  ▄   ▄ █▀▄▀▄▀ ██ ▄▄  ▀▄█▄ █▀▄▄ ▀▄▄    ██▀ ▄ ▄ ▄▄ ▄ █ [0m
[47m[30m ▄ ▄▄▀▄▄▀▀ ▀█ █▀ ▀▀ ▄ ▄▀█▄▄██▄▀████▄▄███▀█▄▄█▄█▄▄▄▀▀█ █▄██▄ ▄█ [0m
[47m[30m █▄█▄█▄▄▄ ███▄▀ █▀ ▄█  ▄▀▄██▀█▀ ▄▄██  ▄ ▄▀▀▄█ ███▄▄▄▄█ ▄▀▄▀▄▄█ [0m
[47m[30m █ ▀ ██▄▄███▀ ▀█ ▄ ▀█▀▄▄▀▄▄█▄▄█▄██ ▄▀█▄▄▄▀▄▄▄█ █ █ ██▄█▄██ ▄ ▄ [0m
[47m[30m  ▄ ▄█ ▄ █ █▄▀█▀█▀ ▀▀▀ ██ █ ▀█ ▄ █▄ █ █▀  ▀▄ █▄▄█▄▄█ █ ▄ █▄ ▄█ [0m
[47m[30m   █▄█▄▄▄█ ▀▀▀▄███ ▀█▄▄▀█ █  █▄▄▄███▄█▀▀█▄█▀█  ▀ ▄  ▀█▄▄▄█ █▄  [0m
[47m[30m  ▄ ▄▀▀▄  ▄▄██▄▄ ▄▄▀▀█  ▄ ▄█ █ ▀ █▄▄  ▄▄▄█▄▄█▀ ▄█▄▀ █ ▀██ █ █▄ [0m
[47m[30m ▀▀▀  █▄▄▄▄▄█▄▄█▄ ▄▄█▀  ▀▄ █▀██▄ █▄▀▄ █▀█  ▀█▀█ ▀██▄▀▀▄█▀▀█ █▄ [0m
[47m[30m  ▄█▀▀ ▄ ▄▀▀██ ▀▀ █ ██▄▀  ▄█ ▄▄▄▄█▄▀▀▀▀ █ ▀ ▄█▄▀▄▀▀ ▄▄▀▄█▄▀█   [0m
[47m[30m █▀▀▄▀▄▄█ ▄▀▀▄▄██▄ █▄██▄▀▄▀▀▄▄█▄▀ ▄ ██▀▀█ ▀ ▄█▄▀▄▄█  █  █▀ ▄▀▄ [0m
[47m[30m ▀█▀ █▄▄ ▀▀█▀▀█   ▄▄▄ ▀▀▀▀▀█  ▀  █ ▄ ▀▄▀█▄▀ ██▄▄ ▄ ██▄▄█ ██ ▄▄ [0m
[47m[30m  ▄█▀█▀▄█ ▄▄█ █▄ ▄ █ ▄ █ ▀▄ ▄█ ▄█▄  ▀▄▀█ ▄▄▀█    ▄▄▀▀▄▄█ ▄ █▀█ [0m
[47m[30m ▄█▄▄  ▄▄▄▄▄▄█▀▀█▄██▄▄▄█▀ ▀▀█▀▀█▄█ ▀█▄▄█ ▀ █ ▄ ▀▄   ▀▀▄█  ▀█▄▄ [0m
[47m[30m ██▀▄ ▄▄██▀▄█▄ ▀▀▀ ▀▄ ▄█▀▄ ▄▄█▀▄▄█▀ ▀█▄▀▄█  ▄█ ▄▄▄▄█ █▀▀ █▄ ▀  [0m
[47m[30m ▀▀▄███▄▄  ▄▀▀▀▄█ ▀█ ▄▄▀▄ █▀▀▄▄▄▄  ▀  ▀▄ ▄▄ █  ▀▄▄▀▄ ▀ ▄▀▄▀ ▀▄ [0m
[47m[30m ███▄▀ ▄ ▀██▀ █▄▀▀▀███ ▄▄▄ ██████▄▀▀██▀▄█ █  █▄▀▄██ ▀█▄██▄▄▄ █ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▀███▀ ▄▄█▄ ▄█ ▀▄█ ▄█ ▄ █  ▄▀█▀ ▀▀▄ ▀█ ▄ █▀██ ▄ █ ▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▀▄█▄▄▄▄▀▄█▄▄▀ █▄▄█▀▀█▄▄▄█▄█▄▄▄  ██ ▀  ▀▀█▄ ██▄▄▄█▄█ ▀ [0m
[47m[30m █ ███ █ ▀█ ▄ ▄ ▀▄ █▄▀    ▄▄▄▀  ▄▄▄  ▄▀   ▄ ▄▄▄ ▀█▄ █▀█▀▀▄ ▀▀▄ [0m
[47m[30m █▄▄▄▄▄█ ▄    ▀ ▄█ ▄█▄█ ▄▄ ██▄ ▄▄███▄█ █ █ ▀ ▄▄▄█▄▄▄██▄  █ ▄▄▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:30:39: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:30:48: [4:30:48 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:30:48: [4:30:48 pm] ⏳ Waiting for WhatsApp connection... (8/60)
2025-09-18T16:30:58: [4:30:58 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:30:58: [4:30:58 pm] ⏳ Waiting for WhatsApp connection... (9/60)
2025-09-18T16:30:59: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:30:59: [47m[30m ▄▄▄▄▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄      ▄▄   ▄ ▄▄▄▄▄▄▄   ▄▄▄ ▄▄   ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄▄▀█▀█ ▄▄▀▀█▀▀▀   ▀█▄▀▀▀▀▀█ ▄█▀▄▀▄ ▀▀▄█▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄█ ▄▀▀▄▀▀  ▄▀█▄█▀▀█ █▄▄▄█ ▄▀▀▄ █▀  █▀ ▄██▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▄▀█▀▄ ▄▀█ ▄ █▀▄ █ █ ▄ █ █ █ ▄▀▄▀█ ▄ █ █▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄▀▀ ▀██ ▀ ▀▀ ▄▀█▄ ▀█▄▄▄█  ▄▄▄▄ █▀█▀▀██▄▄██▄ ▄  ▄ ▄▄▄ [0m
[47m[30m ██ █▀▀▄▄ ▀▄▄ ▄▀█▀▄  ▄▄▀▄▄ ▄▄ ███▄ █ ▀▄▀██ ▀█ ▀▀▀██▀█▀█▀█▄▀▀█▄ [0m
[47m[30m █ ▄ ▀▀▄ ▀▄  █▀█▀█▄▄▄▄ █▀█ █▀▀ ▀ ███ ▄█▄ █  ▀▄▄▄▀█   ▄▄█▀▄ ▀▄  [0m
[47m[30m ▄ ▀██▄▄  ██  ▄▄  ▀▄▀▀▀▀██▀██ ██▀ █ ██ ▀▀█▀▀▄▀▀▄██▄██ ▄▀▀█▀▄▄█ [0m
[47m[30m ▀▀█   ▄▄█▄██ ▀▀█▀█▀ ▄ ▀▄▀▄█▀█▀▀ ▄▄ ██ ▀█▀█▄▀█  ▄█▀███▄ █▄████ [0m
[47m[30m █▄▄▀▄ ▄▄  ▄▄█ ▀▄▄█▀▄▄ ▀▄▀▄▄█▄▄█▀▄█▀▄██ ██ ██▄▀▀ ▀█ ██ █ █▄▀▄▄ [0m
[47m[30m ▄▄█▀█ ▄ ▄██ ▀██▄█ ██▄█▄█▀▄▀█▄███ ▄▄▄█▀  ▄▀▀█ █▄▄▄ ▀▀▄  ▀▀█▄▀▀ [0m
[47m[30m ▄▄▄ ▄▀▄▀▀▄▀█▀█  █ ▄▄▀▀██▀█▀  █ ▄▄▀▀  ▀██ ▀██▀█▀ ▄▄▀█▀▀▀▀█▄ █▄ [0m
[47m[30m ██▀▄ ▀▄█▄▄▀▀▀▀ ▄▀▀ ▀▀▄▄▀█ █ █▄▄▄  █▀▄ ▄▄▄▀█ █ █▀█▄   ▄█ ▄██▀▄ [0m
[47m[30m ▄▀ █▄▀▄▄▀▀▄ █▄▀  █▄ ▀██▄█ █▄▄▄▀▀█ ▄█▀▀▀▀ ▄█ ▀ ▄ █▀█▀▄▀▀▄█▄█▀▄ [0m
[47m[30m ▄█ █▄▄▄▄█ ▄▄▀▄▄███   ▀█▄█▀▄▀███▄▄█▀▄▄ ▀█ ██▄▄██ ▄██ ███▄▄████ [0m
[47m[30m █▀▀▀█ ▄ ██▄▀     █ ▄ █▄ ▀ ▀▄█ ▄ ███ ▀█ █▄▄██▄ ▀▄ █▄██ ▄ █▀▀▀▄ [0m
[47m[30m █▄▄▀█▄▄▄██ ▄ ▀▄ ▄█  █▀  ▀ ▀██▄▄▄█ ▄██▀  █▄▀▄ ▀ █▄▄▀▄█▄▄▄██▄▀▀ [0m
[47m[30m ▀█▀▀▄█▄▄▄▀█ ▄▀███▀ ▄▄█▀▀▀▀▄█▄█▀█▄▀█▄▄█▀█▀█▀ ▀█▀  ▀█ ▀▀▄▀█ ▀ ▄ [0m
[47m[30m █▀ █  ▄▀▄▀█▄█▀▄█▀▀█  █▀▄██▄▄▄ ██▄▀ ▀▀   ▀█    ▀▄▄ █▄ ▀██▀ ▀█▄ [0m
[47m[30m ▀ ▄▄█ ▄██▄ ▄▄▀ ▀ ▄█▀▄▀▄█▀▀▄██▀█▀▄▀ ▄ ▄▀ ▀▄▀▀▄▀ ▀ ▄▀▀▀▄█▄█▄▄█▀ [0m
[47m[30m ▄▄ █  ▄ ▀ █▀▀▀  █ █ ▀▀▀▄█▄ ▀█ █▄▀▀▀ ▄▄  ▀▄▀▀▄▀ ▀█ ▀█▀█▀ ▀█▀▄█ [0m
[47m[30m   ▀▀▄▀▄█ ▄▄█▄█ ▀▀▀▄ ▄▀▄▄  ▄▄ ▄▀█▄███ ▀  █▄▀ ▄▀████▄ ▄▀▄█▄ ▀▀█ [0m
[47m[30m ▀▀█▀▄▄▄ ▀▀▄  ▄▄█▄▄█▄▄ ▀█    ▄██ ██▀▄█▄▄██▀  ▀█▀██▀ ▄█▀▄███ ▄▄ [0m
[47m[30m █ ▄▄▀█▄▀█ ▄▀▄▄▀ █ █▀█▀█▄▀█   ▄▄▀ █  █▀▄█ █▄███ ▀▀█▀▀▀▀▄█▀▄▄▀█ [0m
[47m[30m ▄   ▀▀▄ ▄▄█ ██ ▄ █ ▀▀▀▄▄███▀▄▄██ ██▄▄ ██▄▄▄ ▄ ▄▀▄▀▀█▄▄▄█▄▀▀▄▀ [0m
[47m[30m   █▄▄▄▄▄▄██▄ ▄█ ▀▄▄██▀ ▀▀  ▄█▀█ ▀█▄█▀▄▀▀█▀█ ▀█ ▄▄ ██ █▄▄█▄▀▄█ [0m
[47m[30m ███▄▀ ▄   ▄▄▀ █▄ ▄▄ ▄██▀██▄ ▄▄█▄█▄  ▄█▀█ ▄ ▀▄ ▄ ▄█ ▄▄▄▄▄█▀██▄ [0m
[47m[30m ▄▄▄▄▄▄▄ █▄▄ ▄▄▀▀█ ███ ▀▄█ ▀▀█ ▄ ██▀█▀  ▄▀ █▄▀ ▀▀█▀▄ █ ▄ ███ ▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄▀▀▀█ █ █▀ █▄██  ▄█▄▄▄█▀▄▀█▀▀█▄ ▀▄▀█ ▄▄▀▀ █▄▄▄█▀▄▄▄ [0m
[47m[30m █ ███ █ ▀▄█▀▄▀▀▄ █▄▄▄█▀█▀▀█▀ ▀▀▀█▀▀██▄▀█▀▀▀▀█▀▀▄▄▀▀  ██▄█ ▄▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄█▄ ▀  █▀██▀▀██▀▄█▄ ███▀▄ ▄▀▄█▄█▄█ ██▀█ █▀█ ▄▄▀ ▄██▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:30:59: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:31:07: 💾 Data synced to files successfully
2025-09-18T16:31:08: [4:31:08 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:31:08: [4:31:08 pm] ⏳ Waiting for WhatsApp connection... (10/60)
2025-09-18T16:31:18: [4:31:18 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:31:18: [4:31:18 pm] ⏳ Waiting for WhatsApp connection... (11/60)
2025-09-18T16:31:19: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:31:19: [47m[30m ▄▄▄▄▄▄▄ ▄▄▄▄▄ ▄ ▄▄▄ ▄▄  ▄▄▄   ▄ ▄▄▄▄▄▄▄   ▄▄▄ ▄▄   ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▀█ ▄▄▀▀▀▀▄▀▄█▀ ▀▄  ▀█▄▀▀▀▀▀█ ▄█▀▄▀▄ ▀▀▄█▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄  ▄▀█ ▀▀ ▀▄▀ ▄█▀▀█ █▄▄▄█ ▄▀▀▄ █▀  █▀ ▄██▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▄▀█▀▄ ▄▀█ ▄ █▀▄ █ █ ▄ █ █ █ ▄▀▄▀█ ▄ █ █▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄▀▀ ▀██ ▀ ▀▀ ▄▀█▄ ▀█▄▄▄█ ▄▄▄█ ▀██ ▀ ▄▄▄█▄█▄ ▄  ▄ ▄▄▄ [0m
[47m[30m ▀▀ █ ▀▄▄▀▀▄▄ ▄▀█▀▄  ▄▄▀▄▄ ▄▄ ███▄▀▀ ▀██▄██▀▄▀█▀▀ ▀▀█▀▀██ ▀▀█▄ [0m
[47m[30m ▄▀▄ ▄▀▄ ▀▄  █▀█▀█▄▄▄▄ █▀█ █▀▀ ▀ ███▀██  ▄▀▀ █ ▄▄▄▀  ▄▄█▀▄ ▀▄  [0m
[47m[30m ▀ ▀███▄  ██  ▄▄  ▀▄▀▀▀▀██▀██ ██▀ █  ▀▄█▀█▀██▄   ▄▄▀█ ▄▀▄▄▀▄▄▄ [0m
[47m[30m █▀█   ▄▄█▄██ ▀▀█▀█▀▄▄ ▀ █▄█▀█▀▀ ▄▄ ██ ▀█▀█▄▀█  ▄█▀███▄ █▄██▀▄ [0m
[47m[30m ▄▄▄▀▄ ▄▄ ▄    ▀▀▀██ ▄ ██ ▄▄█ ▄█▀▄█▀▄██ ██ ██▄▀▀ ▀█ ██ █ █▄▀▄▄ [0m
[47m[30m ▄▄███ ▄ ▄▀▄█ █▀▀▄█ ▀██▄▀ ▄▀█ ███ ▄▄▄█▀  ▄▀▀█ █▄▄▄ ▀▀   ▀▀█▄▀▀ [0m
[47m[30m ▄▄▄█▄▀▄▀▀█▄▄ ▀▄▀▀▀█▀█▄█▀▀██  █ █▄▀▀  ▀██ ▀██▀█▀ ▄▄▀█▀▀▀▀██▀█▄ [0m
[47m[30m ██ █ ▀▄ █▀▀▀▀▀█▄ ▄▀ ▀▄█▀███ █▄▄█  █▀▄ ▄▄▄▀█ █ █▀█▄ ▀▀█▄ ▄▀▀▀▄ [0m
[47m[30m ▄▀█▄▄▀▄ █ █ ██▀  █▄ ▀██▄█ ▄▄▄█ ▀█ ▄█▀▀▀▀ ▄█ ▀ ▄ █▀█▀▄▀█▄█▄█▀▄ [0m
[47m[30m ▄█▀█▄█▄██ ▄▄▀▄▄███   ▀█▄█▀▄▀███▄▄▄ ▄▄▄▀█  █▄▄█ ▄▄█▀ █▄█▄▄████ [0m
[47m[30m ▀▀▀▀█ ▄ ██▄▀     █ ▄ █▄ ▀ ▀▄█ ▄ █▀█ ▀▀▄▀█▀▀ ▄█▀██▀ ██ ▄ █▀▀▀▄ [0m
[47m[30m  ▀▄▀█▄▄▄██ ▄ ▀▄ ▄█  █▀  ▀ ▀██▄▄▄█ ▄▀▄▀▀ █▄█    █▄ ▀▄█▄▄▄██▄▀▀ [0m
[47m[30m ▄█▀▀ █▄▄█▀█ ▄▀███▀ ▄▄█▀▀▀▀▄█▄█▀█▄▀█▄▀██▀ ██ ▄▀█▀ ▀█ ▀█▄▀█ ▀▀█ [0m
[47m[30m ██ █▄▄▄ ▄▀█▄▀▀▄█▀▀█ ▄█▀▄██▄▄▄ ██▄▀ ▀▀   ▀█    ▀▄▄ █▄ ▀▄▄  ▀▄█ [0m
[47m[30m   ▄▄▀▄▄██  ▄▄▀ ▄█▄▀█▀█▄█▀▀▄██▀█▀▄▀ ▄ ▄▀ ▀▄▀▀▄▀ ▀ ▄▀▀█▄█▀▀▄▄█▀ [0m
[47m[30m ▄▄▄▀▀ ▄ ▀  █ █ █▀  ▀▀█▀▄█▄ ▀█ █▄▀▀▀ ▄▄  ▀▄▀▀▄▀ ▀█ ▀█▄█▀▀ ▀▀▄█ [0m
[47m[30m   █ ▄▀▄█ ▄▀▀▄▀█▄▀▀  ▀▄ ▄ ▄▄█ ▄▀█▄███ ▀  █▄▀ ▄▀████▄ ▄▀▄█▄██▀█ [0m
[47m[30m ▀▀ █▄▄▄ ▀  ▀ ▄██▄ █▄▄ ██   ▀▄██ ██▀▄█▄▄██▀  ▀█▀██▀ ██▀▄███▄▄▄ [0m
[47m[30m █ ▄█▀█▄▀█▀█▀▄█  █▀█▀█▀▄▄▀▄   ▄▄▀▄█  █▀▄█ █▄███ ▀▀█▀▄ ▀▄█▀▄▄▀█ [0m
[47m[30m ▄ ▀▀▀▀▄  ▄█ ██ ▄ █ ▀▀▀▄▄███▀▄▄█▀▄▄█▄▄▄▀ ██▄ █▄▄ ▄▄▀█▄ ▄█▄▀▀▄▀ [0m
[47m[30m   █▄▄▄▄▀▄██▄ ▄█ ▀▄▄██▀ ▀▀  ▄█▀█▀▀  █▀▄▀█▄▀█▀▀  ▀█▄██ ▄▄▄█▄▀▄█ [0m
[47m[30m ███▄▀ ▄▄  ▄▄▀ █▄ ▄▄ ▄██▀██▄ ▄▄▄▄█▄ ▀█▄█    ████▄▄▀▀▄▄▄▄▄█▀██▄ [0m
[47m[30m ▄▄▄▄▄▄▄ █▄▄ ▄▄▀▀█ ███ ▀▄█ ▀▀█ ▄ ██▀█▀  ▀ ▄█ █▀▀▄▀█▄ █ ▄ ███▀▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄▀█▀█ ▀ █▀ █▄██  ▄█▄▄▄█▀▄▀█▀▀█▄ ▀▄▀█ ▄▄▀▀ █▄▄▄█▀▄ █ [0m
[47m[30m █ ███ █ ▀ █ ▀█▀▀█▀▄█▄▀▀█▀▀█▀ ▄▀▀█▀▀██▄▀█▀▀▀▀█▀▀▄▄▀▀  ▀ ▀▄▄▀▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄█ ▄▀█▀▀▄██▄▀▀▀ ██▄ ███▀▄ ▄▀▄█▄█▄█ ██▀█ █▀█ ▄▄▀▄██▀▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:31:19: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:31:28: [4:31:28 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:31:28: [4:31:28 pm] ⏳ Waiting for WhatsApp connection... (12/60)
2025-09-18T16:31:37: 💾 Data synced to files successfully
2025-09-18T16:31:38: [4:31:38 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:31:38: [4:31:38 pm] ⏳ Waiting for WhatsApp connection... (13/60)
2025-09-18T16:31:39: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:31:39: [47m[30m ▄▄▄▄▄▄▄ ▄ ▄ ▄   ▄ ▄ ▄▄   ▄▄  ▄▄ ▄▄▄▄▄▄▄   ▄▄▄ ▄▄   ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▄ ▀▀█▄ █▄ ▄▀▀ ▀█ █ ▀█▄▀▀▀▀▀█ ▄█▀▄▀▄ ▀▀▄█▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄█▄▄▀▀ ▀▀ ▀▄▀ ▄█▀▀▀ █▄█▄█ ▄▀▀▄ █▀  █▀ ▄██▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▄▀█▀▄ ▄▀█ ▄ █▀▄ █ █ ▄ █ █ █ ▄▀▄▀█ ▄ █ █▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄▀▀ ▀██ ▀ ▀▀ ▄▀█▄ ▀█▄▄▄█  ▄▄▀ ▀█▄▄  ▀▀█▄█▄▄ ▄  ▄ ▄▄▄ [0m
[47m[30m ██ █▀█▄▀▀▀▄▄ ▄▀█▀▄  ▄▄▀▄▄ ▄▄ ███▄ █ ▀██▄████▄ █▄▀███▀█▀▀▀▀▀█▄ [0m
[47m[30m  █▄ ▄▀▄ ▀▄  █▀█▀█▄▄▄▄ █▀█ █▀▀ ▀ ███▀██▄█▄ ▀ ▄ ▀█▄ ▄ ▄▄███ ▀▄  [0m
[47m[30m  █▀███▄  ██  ▄▄  ▀▄▀▀▀▀██▀██ ██▀ █ ▀▀▄██▄██▀▀█▄ ▀▄██ ▄▀ █▀▄█▄ [0m
[47m[30m ▀▀█   ▄▄█▄██▄▀▀███▀ ▄ ▀▄▀▄█▀█▀▀ ▄▄ ██ ▀█▀█▄▀█  ▄█▀█▀█▄ █▄██▄▄ [0m
[47m[30m ▄▄▄▀▄ ▄▄ ▄▄██ █▀█▀▀ ▄ ▀██▄▄▀▄▄█▀▄█▀▄██ ██ ██▄▀▀ ▀█ ██ █ █▄▀▄▄ [0m
[47m[30m ▄▄███ ▄ ▄██ ▄█▀▄▀ █ █▄█▀█▄▀█ ███ ▄▄▄█▀  ▄▀▀█ █▄▄▄ ▀█▄  ▀▀█▄▀▀ [0m
[47m[30m ▄▄█▄▄▀▄▀▀▀█▄▄██▄▀█▀  █▀▄█▀█  █ █▄▀▀  ▀██ ▀██▀█▀ ▄▄▀█▀▀▀▀█▄██▄ [0m
[47m[30m ██ ▀ ▀▄ █▄▄  ▀▄▄▀ █▀ ▄█▀▄█▄ █▄▄██ █▀▄ ▄▄▄▀█ █ █▀█▄ ▀ ▀▀ ▄ ▀▀▄ [0m
[47m[30m ▄▀▄▀▄▀▄▀█ █ █▄▀  ██ ▀▄█▄█ ▄▄▄█▀▀█ ▄█▀▀▀▀ ▄█ ▀ ▄ █▀█▀▄▀▀▄█▄█▀▄ [0m
[47m[30m ▄█▀██▄▄█▄ ▄▄▀▄▄███   ▀█▄█▀▄▀███▄▄ ▀▄▄█▀ ▀▀ █▄▄██▄▄█ ███▄█████ [0m
[47m[30m ▀█▀▀█ ▄ ██▄▀     █ ▄ █▄ ▀ ▀▄█ ▄ █ ▀ ▀█ ▄▄▄█▀▄█▀ ▄▀ ██ ▄ █▀▀▀▄ [0m
[47m[30m ▄▄▄▀█▄▄▄██ ▄ ▀▄ ▄█  █▀  ▀ ▀██▄▄▄█ ▄█▄ ▀▀▄▀▀ ▀▀ ▀▄▀▀▄█▄▄▄██▄▀▀ [0m
[47m[30m █▄▀▀█▀▄▄▀▀█ ▄▀███▀ ▄▄█▀▀▀▀▄█▄▄ █▄▀█ ▄██▀▄▀█ ▄▀█▄▀▄▀ ▀▀▄▀▀ ▀▀▄ [0m
[47m[30m ▀▄ ██▀▄ ▄▀█ █▀▄▀▀▀█ ▄█▀▄██▄▄▄ ██▄▀ ▀▀   ▀█    ▀▄▄ █▄  ██  ▀ ▀ [0m
[47m[30m  ▀▄▄▄█▄██▄  ▀▀  ▀▄▀▀▄▀▄█▀▀▄██▀█▀▄▀ ▄ ▄▀ ▀▄▀▀▄▀ ▀ ▄▀▀█▄█ █▄▄█▀ [0m
[47m[30m ▄▄▄▀▀ ▄ ▀▀█ ▀ ▄▀█▄ █▄  ▄█▄ ▀█ █▄▀▀▀ ▄▄  ▀▄▀▀▄▀ ▀█ ▀▄▄█▀▀▀▀▀▄█ [0m
[47m[30m   ▀ ▄▀▄█  ▄  ▄██▀ █ █▄ ▄ ▄ █ ▄▀█▄███ ▀  █▄▀ ▄▀████▄█▄▀▄█▄ ▀▀█ [0m
[47m[30m ▀▀▄█▄▄▄ ▀▀▀   ▀██ ▄▄▄  █  ▀▀███ ██▀▄█▄▄██▀  ▀█▀██▀ ▄█▀▄███▄▄▄ [0m
[47m[30m █   ▀█▄▀█▀▄▀▄█▀ █▀▄▀█ █▄▀█   ▄▄█ █  █▀▄█ █▄███ ▀▀█▀█▀▀▄█▀▄▄▀█ [0m
[47m[30m ▄ ▀▀▀▀▄ ▄▄█ ██ ▄ █ ▀▀▀▄▄███▀▄▄█▀ ▄▀▄▄ █ ▄▄ ▀▄██ █▀▄█▄▄▄█▄▀▀▄▀ [0m
[47m[30m   █▄▄▄▄█▀██▄ ▄█ ▀▄▄██▀ ▀▀  ▄█▀▀ ▀▀ █▀▄▀█ ▀█▄▀▀▄▀▄▄▀█ █▄▄█▄▀▄█ [0m
[47m[30m ███▄▀ ▄█  ▄▄▀ █▄ ▄▄ ▄██▀██▄ ▄██▄█▄  ▄▄█▄ ▀▀▀▄ ▀ █▄█▄▄▄▄▄█▀██▄ [0m
[47m[30m ▄▄▄▄▄▄▄ █▄▄ ▄▄▀▀█ ███ ▀▄█ ▀▀█ ▄ ██▀▀█  ▀▀▄▀ ▄▀▀█ ▀▄ █ ▄ ███▀▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄▀█▀█ █ ██▄█▄██  ▄█▄▄▄█▀▄▀█▀▀█▄ ▀▄▀█ ▄▄▀▀ █▄▄▄█▀▄██ [0m
[47m[30m █ ███ █ ▀▄▀▀███▀██▄▀ █▀▀▀▀█▀ ▄▀▀█▀▀██▄▀█▀▀▀▀█▀▀▄▄▀▀  ▄▀▀▄▀▀▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄▄█▄▄▀▄▀▀  ▄▄▀▄ ██▄ ███▀▄ ▄▀▄█▄█▄█ ██▀█ █▀█ ▄▀▀▀ ▀█▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:31:39: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:31:48: [4:31:48 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:31:48: [4:31:48 pm] ⏳ Waiting for WhatsApp connection... (14/60)
2025-09-18T16:31:58: [4:31:58 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:31:58: [4:31:58 pm] ⏳ Waiting for WhatsApp connection... (15/60)
2025-09-18T16:31:59: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:31:59: [47m[30m ▄▄▄▄▄▄▄     ▄▄▄ ▄▄   ▄▄▄▄ ▄▄ ▄ ▄▄ ▄ ▄ ▄▄ ▄▄ ▄▄▄  ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █  ▀█▀▀▄    ▄ █▄█▀▄ ██ ▀█▄ ▄ ▄▄██  ▀ ▀▀▄ ▀▄▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █   █▀ █▄▄ ▀▄▀ ▀█  ▄ █▄█▄█▄██▄ ▀▀  █▀  ██ ▄▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ ▄ █▀█ ▄▀█▀▄ █▀▄▀█ ▄ █▀▄▀▄▀█ █ ▄▀█▀▄▀▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄ ▄▄ ▄▀ ▄▀▄▄ ▀▄▀▄ ██▄▄▀▀▄█▄▄▄██▀▀█   ▄▄▄▄ ▄▀▀▄ █▀▀▄ ▄      [0m
[47m[30m  ▄▀   ▄▀▄▄█▀▀▀   ▀▀██▀ ▀███▀▀ ▄ █▄ █ ▄ █  ▄▀██▄   ▄  █ ▀█▄  █ [0m
[47m[30m ▄ ██▄ ▄█ ▀▀█▄▄▄▄▄▀█▀██▄▄▄█▄▄ █ █▄ ▄████▄▄█▄█▄▀▀██▀███▀▄▄██ ▀▀ [0m
[47m[30m  ▀  ▀▀▄█▀ ▄█▀▀██▀▄█▄ ▄  ▄▄▄ ▀ ▄▄▀ ▀█▄█▄█▄▄ ▀ ▄▀▀▀▄▄ ▀▀  ▀▄█ ▄ [0m
[47m[30m  ▄▄█▀█▄▀▄▀▄▄▀▄ ▄▄  ▀▀█ █▄▀▄▄▄▄ ██▀▀ ▄█    █▄▄█▀▀▄▄▄▄▄▀▀ █ ▄▀▀ [0m
[47m[30m █ █▄██▄▀▀▀▀  ▀  ▄  ▄▄▀ ▀█▀█▄█▀▄▄█  ▀▄ ▀ ▄█▄ █▄ █  ▀  █▄█▄▀ ▀█ [0m
[47m[30m █▀▄▄▄█▄██▀ ▄ ▀▄  ▄▄███▄▄▀▀ ▄▀ ▄ ▀▀█▀▄▄▀██▄  ▀ █▀██  ▄█▀▄  █▄  [0m
[47m[30m █▀▀▄█▄▄▄ █ ▄ ▄ ██ ▀▀ █▀ ▀▄▄▄▀ ▀▀█▄ █▀▄▄ ▀▄▄    ██▀   ▄ ▄▄▄  █ [0m
[47m[30m ▄  ▀▀▄▄█▄ ██▀▄▀▀▀▀█▄ ▀█▄█▄██▄▀█▀▄█▄▄███▀█▄▄█▄█▄▄▄▀▀▄ ▄ ███ ▄█ [0m
[47m[30m █▄  █▄▄ ▄█▄█▄  █▀▀██ ▀█▀▄██▀█▀ ▄▄██  ▄ ▄▀▀▄█ ███▄▄▄▄█  ▀▄▀▄▄█ [0m
[47m[30m █  ▀█▄▄▄▄██▀ ▀█ ▄ ▀█▀▄▄▀▄▄█▄▄▄▄███▄▀█ ▀█ ▀▀▀▄▄ █▄▄ █▄▄▄▄█ ▄ ▄ [0m
[47m[30m ▄▄ ▄█ ▄ █ █▄▀█▀█▀ ▀▀▀ ██ █ ▀█ ▄ ██ █  █▀██▄ ▄▄▄▀  █ █ ▄ █▄ ▄█ [0m
[47m[30m ▄ █▄█▄▄▄█ ▀▀▀▄███ ▀█▄▄▀█ █  █▄▄▄███ ▄ █▄█▄ █▀█▄▀█▀▄▀█▄▄▄█ █▄  [0m
[47m[30m ██ ▄▄ ▄ ▄▄▄██▄▄ ▄▄▀▀█  ▄ ▄█ █▀  █▄▄ ▄ ▄▄▀ ▄▀█  ██  █ ▄█▀▄█ ██ [0m
[47m[30m ██▀ █▄▄▄█▄▄█▄▄█  ▄▄█▀  ▀▄ █▀██▄ █▄▀▄ █▀█  ▀█▀█ ▀██▄▀▀███▄█ ██ [0m
[47m[30m ▀██▀ ▄▄ ▄▀▀█▀▄▀█ █▄▄█▄█  ▄█ ▄▄▄▄█▄▀▀▀▀ █ ▀ ▄█▄▀▄▀▀ ▄▄▀▄█▄▀█   [0m
[47m[30m █▀▀▄▀█▄█ ▄▄  █ ▀█▀▄▀▄ ▄▀▄▀▀▄ █▄▀ ▄ ██▀▀█ ▀ ▄█▄▀▄▄█  █  ▄   ▀▄ [0m
[47m[30m ▀█ ▀█▄▄ ▀▀▄▀█▀▄█ ▄ ▄▄  ▀▀██ ▀▀  █ ▄ ▀▄▀█▄▀ ██▄▄ ▄ ██ ▄█ █▀▄▄▄ [0m
[47m[30m  ▄█ █▀▄█ █▄█▀██▀▄▄█ ▄██ ▀█ ▀█ ▄█▄  ▀▄▀█ ▄▄▀█    ▄▄▀ ▄▄█ ▄▄▀▀█ [0m
[47m[30m ▄█▀█  ▄▄▄▄█▄█  █▄▄█▄▄▄█▀   █▀▀█ ▀ ▀█▄▄█ ▀ █ ▄ ▀▄   █▀▄█  ▀█▄▄ [0m
[47m[30m ██ █ ▄▄▀█▀▄█▄ ▀▀▀ ▀▄ ▄█▀▄ ▄▄█▀▄▄██ ▀█▄ ▄▄▄██▄▄ ██ ▀ █▀█ █▄ ▀  [0m
[47m[30m ▀▀▄███▄█  ▄▀▀▀▄█ ▀█ ▄▄▀▄ █▀▀▄ ▄█ ▄▀  █ █ ▄ █  ▀▄  ▄ ▀ ▄▀▄▀ ▀▄ [0m
[47m[30m ███▄▀ ▄▀ ██▀ █▄▀▀▀███ ▄▄▄ ███▄██▄▀▀▄█▀▄▄▀█▄▀▄  █▄▀█▀██▄█▄▄▄ █ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▀███▀ ▄▄█▄ ▄█ ▀▄█ ▄█ ▄ █  █▄█▀▄▄▀  ██ █▀▄███ ▄ █ ▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▀▄█  ▄▄▀ █▄ █ █ ▄█▀▀█▄▄▄█▄█▄▄▄  ██ ▀  ▀▀█▄ ██▄▄▄█▄█ ▄ [0m
[47m[30m █ ███ █ ▀█▄▀▄  ▄█ ▀▀    ▄▄▄▄▀ ▄▄▄▄  ▄▀   ▄ ▄▄▄ ▀█▄ █▀▄  ▄▄█▀▄ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▀▄█▀▄▀ █ ▀█ ▀█▄ ██▄ ▄▄███▄█ █ █ ▀ ▄▄▄█▄▄▄███▄▀  ▄▄▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:31:59: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:32:07: 💾 Data synced to files successfully
2025-09-18T16:32:08: [4:32:08 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:32:08: [4:32:08 pm] ⏳ Waiting for WhatsApp connection... (16/60)
2025-09-18T16:32:18: [4:32:18 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:32:18: [4:32:18 pm] ⏳ Waiting for WhatsApp connection... (17/60)
2025-09-18T16:32:19: 🔌 Connection closed. Reason: undefined
2025-09-18T16:32:19: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:32:22: 🔄 Initializing WhatsApp client...
2025-09-18T16:32:22: 🔄 Connecting to WhatsApp...
2025-09-18T16:32:23: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:32:23: [47m[30m ▄▄▄▄▄▄▄ ▄       ▄ ▄▄ ▄▄  ▄▄  ▄▄ ▄ ▄▄▄ ▄▄▄▄▄ ▄ ▄▄▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄█▀ ▀ ▀▀▄█▄█ ▀▀▄█ ▀▄▄▀▀▀▄███ ▀█▀▄█▄▄ ▄ █▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄▄█ ▄▄█▄ ▄ ▀▄▄ █▄▀█ █▄█▄██▀▀██▄██▀▄▄▀  ▀█▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄ █▀█ █ █ █▀█ ▄▀▄▀▄ █ ▄ █▀▄ █▀█▀▄ █▀▄ ▄▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄ ▀▄ █  ▄██ █▀ ▄▄█▀▀█▄▄▄█▀  ▄▀  ▄▀█▀ █ ▀▄▀██▄▄  ▄ ▄▄▄ [0m
[47m[30m ▄ ▄█▄█▄ ▄ ▀▄▀▀▄▄▄▄▄ ▄▄█▀▄   ▄▄▄██ █ █▀█▄▀▀▀▄▄ ███▄▀██▀█▄▄▀▀█▄ [0m
[47m[30m ▀▀  ██▄█ ▄▄▄█▀▄▀ ██▀█▀  ▄█▄▀▀█▀▀█▀ ▀▄ ▀▀██  █ ▀ █▀ ██▄  █▀▀▄▀ [0m
[47m[30m    ▄▀▄▄▀▀ █▀██▄▄▀█ ▀ ▀▀ ▀     ▀ ▀█▄█▀▀██  ▀▄ ▀▄ ▀▄██▄▀▀  █▀▄█ [0m
[47m[30m █ ██▀▄▄██▀ ▄ ▄▀ █ ██▄█▀█ █▄ ▀▀▀█▄█▀ █▄▀▀▀▀ ▄▄▀█ █▄▄▀█▄▀██▀█ █ [0m
[47m[30m ▀▀▄  ▀▄▄ ▄█ ▄▄▄▄██▀ ▀█▄ ▀▄▄   █▀▄██  █ ▀▄ ▀ ▄█▀▀▄█ ▄▀█▀▄▀▄▀▄▄ [0m
[47m[30m ██ ▄▄▀▄▀ █ █ ██  █ ▀▄ ▄▄▄▄▀▄ ▄▀▄▀ █▀▄ ▀ ▄▀█▀ ▀█▄█▄█▀▀▄▄  █▄█▀ [0m
[47m[30m ▄██ ▀█▄▄ ▄█▀ ▀   ██    ▀█▀█ ▀█ ▀▄██▄▄▄▀▀▄█▀█████▄██▄▀ ▀ ▀█▄ █ [0m
[47m[30m ▀██▀  ▄▄▀▄▀▀  ▄█ ▀▄ █▄ ▀▄▀▄ █▄▄ ▀▀▄▀▄▄█ ▄█ ▀▄█▀▄▄▄█▀▀▀█ █▀▀ █ [0m
[47m[30m ▀ ▀▀█▄▄ ▄█▄ ▄█▀▄█▄▀ ▀▄▀▄█ ▄▄   ▀█▄▄ █▄▀▀▄██▀▀▀  ▀▄▀▀▄ ▀▄▀▀█▀▄ [0m
[47m[30m     ▄█▄▄█▀▄  ▄ ▄▄▄ █▄▄▄▄▀█▄▀███▄▄   █▀██  ▄▄█▀█▀▄████▄▄█▄▄█   [0m
[47m[30m ▀▀ ▀█ ▄ █ ▄▄ ▀▄ ▄█▄ █ ▀▄█▄▀██ ▄ ██▀▄▀  █ ▄▀▀█▀▀▀▄▀  █ ▄ ██▀▀█ [0m
[47m[30m ▄▀▄▄█▄▄▄█▀█ ██▄▄█▀▄  ▄▀█▀█▀ █▄▄▄███▄▄ ▀▀█▄ ▀▀▄▀▄▄▀█ █▄▄▄█▀▄█▄ [0m
[47m[30m   ▄ █▀▄▀▀█▄ ▀▀▀▄██ ▄▀▄▄▀█▀ ▄▄ ▀▀ █▀▀ █▀█ ██▀▀█▀▀▄▀█ █▀█ █▄▀ █ [0m
[47m[30m ▄▀█▀ ▄▄█ █   █▄ ▄▄█▄█    ███▄ ▄█ ▀█▀▄▄▀ ▄█▄ █▄▀ ▄▄ ▄▄ ▄▄█▄▀▀▄ [0m
[47m[30m █▄█▄▀█▄▀▀▀█ █▀▄ ▀ ▄██▄▀▀█ ▄▄█ ▄▀▄█▄ ▀▀██▀██ ▀█▄█▄▄▀▄█▄█ ▀▄▄▄  [0m
[47m[30m ▀█▀█▀█▄▀██▄  ▀▀▀▄ ▄▀▄▄█▄▄▄ █  █ ▀█▄ ▄█▀ ▀█████ ▀█ █▄▄█ ▀▀█▀▄█ [0m
[47m[30m ▄█▄▀█ ▄▀█▄▄█ ▀  █▄▄█▀▄▄▄ ▄ █▄▀▀ █▀██▄▀ █▄ █▄▄▀▀▄▄█ █▄ ▄▀ ▀█▀▄ [0m
[47m[30m █▀█▀▄ ▄▀▄▀▄ ▄ ▀ ▀▄▀ ▀▄▀▀ ▀▀██▀█▄██▀█▄▄▄▀▄██▄ █▄▀▄█ ▄▀▄█▀█▀▄▀█ [0m
[47m[30m ▀ █▀ ▀▄ ▀▀▀▄█▀▄▀ ▀▄▄▄  ▀▀▀   ▄▄▀ █ ▄██▀▄▄▀█▀ ▀█▀█▄▀█▄▀▄███  ▄ [0m
[47m[30m █▀█▄▀ ▄▀▀▄ ▄▄█ ▀█ ██ ▀█▄▀ ▄▀▄▄█▀▄  ▀██▄ █ █▀█▀▀ ▄▄▄█▀▀▀▀  ▀▀█ [0m
[47m[30m   ▄▄▄█▄█ ██▀▄▀▀█ ▀█ ▀▄▄▀█▀▄███▀▀   ██▄▀▄ ████▀▄▄▄ ████▄▀▀  ▄█ [0m
[47m[30m ███▄▀ ▄ ▀▄▀▄▄▄ ▄ ▄▄▄▄▀█▀ ▀█ ▄█▄▄█  ▄▄▄██ ▀▄▀▄▄▄█▄▄ ▄▄█▄▄██▀▄▄ [0m
[47m[30m ▄▄▄▄▄▄▄ █▄ ██ ███▄▄ ▄ ▀ ▀ █▀█ ▄ ██▀▀▄▀▄ █ ▀▀▄ ▀ █▀▄ █ ▄ █▀  ▄ [0m
[47m[30m █ ▄▄▄ █ ██▀▄▀█▀▄███▄▄▀  ▄  ██▄▄▄█  ▄▄▀▀ ▄▄█▄  ▄█▄▀▄ █▄▄▄██▄█  [0m
[47m[30m █ ███ █ ▀  ▄█▄█▀ ▀▀  ▀█▀█ █▀ ▀▀▀███ ███▄██▀████ █▀█ ▀ ▀▄▄█▄▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄▄█ ▀██ ▀ █▄▀▄  ██▄▀▄█▄ ▄▄▀▀▄▄▄▀▄▀▄▀▄ █ █▀███▄▀▄▀ ▀▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:32:23: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:32:28: [4:32:28 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:32:28: [4:32:28 pm] ⏳ Waiting for WhatsApp connection... (18/60)
2025-09-18T16:32:37: 💾 Data synced to files successfully
2025-09-18T16:32:38: [4:32:38 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:32:38: [4:32:38 pm] ⏳ Waiting for WhatsApp connection... (19/60)
2025-09-18T16:36:40: [4:36:40 pm] 🚀 Starting Tailor Shop Bot...
2025-09-18T16:36:40: [4:36:40 pm] 🔑 Initializing Google Sheets API...
2025-09-18T16:36:40: [4:36:40 pm] ✅ Google Sheets API initialized
2025-09-18T16:36:40: [4:36:40 pm] 📱 Initializing Enhanced WhatsApp client...
2025-09-18T16:36:40: 🔄 Initializing WhatsApp client...
2025-09-18T16:36:40: [4:36:40 pm] ⏳ Waiting for WhatsApp connection...
2025-09-18T16:36:40: [4:36:40 pm] ⏳ Waiting for WhatsApp connection... (1/60)
2025-09-18T16:36:40: 🔄 Connecting to WhatsApp...
2025-09-18T16:36:40: [4:36:40 pm] 🌐 Dashboard running at http://localhost:3001
2025-09-18T16:36:40: [4:36:40 pm] 📊 Open the dashboard to view status and test messages
2025-09-18T16:36:40: 📁 Loaded 0 sent messages from file
2025-09-18T16:36:40: 📁 Loaded 0 customer histories from file
2025-09-18T16:36:40: 📁 Loaded 0 message hashes from file
2025-09-18T16:36:40: 📁 Loaded statistics from file
2025-09-18T16:36:40: ✅ Duplicate Prevention Manager initialized
2025-09-18T16:36:40: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-18T16:36:42: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:36:42: [47m[30m ▄▄▄▄▄▄▄     ▄    ▄ ▄▄▄      ▄ ▄▄     ▄ ▄ ▄▄ ▄   ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄██ █▀▄█▀█▀▄▄█ ▀▀ ▀▀█▄▄▄    █▀▄██ ▄ ▄  ██▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▀▀▄ ▄ ▀ █▄▄▄▄   █▄▀█▄█▄▄▄▀▀▀  ▄▄██▀ █▀▀▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ █ ▄▀▄▀▄ █▀▄ █▀▄▀█ ▄ █ █ ▄▀█ ▄ ▄▀▄ █▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▀ ▀▀█▀ █ ▄▀ ▀▄ █▄ ▄█▄▄▄█ █▀▄▄▄▀▀▀█▀▀▀▄ ▄▀ ▀▄ ▄▄▄▄▄   [0m
[47m[30m ▄ ▀ ▄▄▄ ▀ ▄█▄▀█▀█▄▀█ █▀█▄▄██▄▄██  ▄▄██▄  ▀▀▀   ▀█▄▄▄▄▄▀█▄█▄▀▄ [0m
[47m[30m ▀██▀█▄▄██▀█▄██▄ ▄▀█▄▀▀█ ▄▄▀▄▄▀██ ▀▄ ▄█ ▀▀ ██  █▄▄█▄█▄▄▀█ ▄ █▄ [0m
[47m[30m ▄█▄▄▄█▄█▄ ▄█▀▄▄███▀▄███▀▀▀█▀▄█▀█ ▄ ▀▀█▄█▄██▄ ▄▄▀ ▀ █▄▀█▄▀█▀██ [0m
[47m[30m ▄▀▀▄█ ▄█  ▄██▀ ▄ ▀▀ ▀▄ ▀   █ ▀▀▄▀ ▀▄▄ ▀▄▀  █ ▀▄████▀  ▀▄   ▀█ [0m
[47m[30m  ▄▀█ ▀▄▄█ ▀█  ▀▄▄  ▀█  ▀▀▀▀▀▄██▄▀▀▄ ▀█ ▀ █▀█ ▄ █▄▀ ▄▄▀▀█▄█▄▀▄ [0m
[47m[30m ▄▀█  ▀▄█▄█ █▀▀▀▄█ ▀█▄▀█ ▄▀ █▄▄▀▄█ ▄▄█▄▄  █▄▄ ▄▄██ ▀█ ██▀▀▄ █▀ [0m
[47m[30m ▄▄▀▄█▄▄▀▄ ▄ █▀ ▄▀  █▄ ██▄▀   ▀ ▄ ▄▄█ ▀▄▀▀▀▀▀█ ▄▄ █ ▄▄██▄▄██▄█ [0m
[47m[30m ▀   ▄▀▄▄▄█▄█▄▄▀▄▀█  ▀▄▄▄█▀▀▀ ▀▄▄▄ ▀█▄▄▀▀▀▄ ▄ ▄ ▄█ ▀▀▀ ▀▄ ▀▄▀▀ [0m
[47m[30m ▀█▀▀ ▀▄▀▄██ ▄██▄▄████▀▄▄█▀█▀▄▀ ▄▄█  ▄▀ ▄▄▀█▀█ ▄███ ▄▄▀▀▀▄ ▀▄█ [0m
[47m[30m ▄▀▀▄▄▄▄▄▄▄█▀   ▀▄▄▄▀▄█▀ █▄ █▄██▄█▀▄▄█▄ ▀▀▀ ▄▀████  ▀█▄▄▄▄█▄   [0m
[47m[30m ▀ ▀ █ ▄ █▀███▄█▄▄ ▀▄   ▀█   █ ▄ █ ▄▀▄▄▄█▄█▀▄▀█▄▀█▀  █ ▄ █▄▀█▄ [0m
[47m[30m ██▀▀█▄▄▄███ ▀▀██▀▀█ ███▄▄▀▀▀█▄▄▄██▀▄█▄▄   █▄ ▀ ▄▄ █▀█▄▄▄█▄ ▀▀ [0m
[47m[30m ▄▄███▄▄ █ ██▄▄ █  ▀▄▀█████▀▄█ ▄█▀ ▄█▄▀▄▄ █▀█▀▄▄ █▀ ████▀▄█▄█▄ [0m
[47m[30m ▄▀▄███▄██▄▀▀▀  █▄  ██▄▄▀▀█▀▀▄▄▄█▄█▀▄█▄▀▀▀██▄ ▀▄▄█▀█▄▄ ▄▀▄▀▄▄█ [0m
[47m[30m ▄ ██ ▄▄█ ▄█▀▄ ▄█▄█▄▀▄▄▀▀▀▄█▄▄ ███ ▄▀▄█ ▀▀▀▀▀█ ▄▄▄█▄ ███▀ █ ▄  [0m
[47m[30m  █▀█ ▀▄▀█ █ ▄▄▀▄▄▀▄▀▄ ▄ █▄█████  █▀▄▄▀█▄▀▄█ ▀▄ ▄▄▀▄▄█▄▀▀▄▀▄ █ [0m
[47m[30m  █▄█▀█▄▄ ▀▄▀▄█▀ ▀  █ ▀█▀ ▄ ▄█▄ ▀▀  ▀█▀ ▄▀█▀▄█▄▄  █ ▀▄▄██▄  ██ [0m
[47m[30m  ▀ ▀ █▄▀  ▄█ ████▄ ▀█▀▄█ ▄ █▀▀██▄▄█▄▄█ ▀  ▀ ▀▄▄█▄ ▄▄█▀▀ ▄ ▄▀▄ [0m
[47m[30m ██▄▄█▄▄█▀█▄▀ ▀ ▀█▀▄█▀  ▀▀██▀▀ ▄▀▄▄▀█ ▄▄▀▀▄▀▀▀▄  ▄▀ █▀▄▄▀▄▄▀██ [0m
[47m[30m ▀█▄▀▄ ▄▄▀ ██▀▀▀▄▀█▀▀▄ ▀▄█▄▀ █▀██▄▀▀▀▄▀ ▄▀▀█▄▀▀█▀▄█▄█▀██▄▄▄▄ ▄ [0m
[47m[30m  ▀▄██▄▄ █ ██   ▀ ▀▀█▄ ▄▀█▄▄▄ ██▄▀▄  ▄█▄ ▀█▀▀▀▄▄▄▀▀ ██▄▄ ▄▀██▄ [0m
[47m[30m ███▄▀ ▄▄   ▀▄▄▄▄█▄  ▀▀ █ ▀ ▀██▄▄▄ ▄██▄   ▄▀▄  ███▄ ▄████▄ ▄▀  [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▄▄█ █ ▀▄▄█▄▄ ██▀▄▀▀█ ▄ █▄▄ ▀▀▄██▄▀▄ ▀▄▀▀▀▄██ ▄ █▀▄▀▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄  ▄  █▄ ▄█▄▀█▀█▀▄█▄▄▄██▄███▄▀ █▀▄▀█ ▄▄ ▀▄█▄▄▄█  ▄▄ [0m
[47m[30m █ ███ █ █▀ █▄ █ ██▄ █▄██▀ ▀█▀▀▀▀ ▄▄██ ▄ ▀▀█▀▄ ▄█▀▀ ▀ ▄ █ ▄  █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀ █▀ █▀██ ██  ██▀ ▀ ▀ ▄▀█▀▀▄█ ▀▀▀█▄▀ █▄█▀▄▄▀█▀▀ ▀▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:36:42: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:36:50: [4:36:50 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:36:50: [4:36:50 pm] ⏳ Waiting for WhatsApp connection... (2/60)
2025-09-18T16:37:00: [4:37:00 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:37:00: [4:37:00 pm] ⏳ Waiting for WhatsApp connection... (3/60)
2025-09-18T16:37:10: 💾 Data synced to files successfully
2025-09-18T16:37:10: [4:37:10 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:37:10: [4:37:10 pm] ⏳ Waiting for WhatsApp connection... (4/60)
2025-09-18T16:37:20: [4:37:20 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:37:20: [4:37:20 pm] ⏳ Waiting for WhatsApp connection... (5/60)
2025-09-18T16:37:30: [4:37:30 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:37:30: [4:37:30 pm] ⏳ Waiting for WhatsApp connection... (6/60)
2025-09-18T16:37:40: 💾 Data synced to files successfully
2025-09-18T16:37:40: [4:37:40 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:37:40: [4:37:40 pm] ⏳ Waiting for WhatsApp connection... (7/60)
2025-09-18T16:37:42: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:37:42: [47m[30m ▄▄▄▄▄▄▄  ▄  ▄▄▄▄ ▄▄  ▄ ▄▄   ▄▄ ▄     ▄ ▄ ▄▄ ▄   ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄█▄▀▄  █▄█ ██▄▄▀▀▀▀███▄    █▀▄██ ▄ ▄  ██▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▄▄▄  ▄▀ ▄▄▄▄▀▀  █▄▀█▄█▄▄▄▀▀▀  ▄▄██▀ █▀▀▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀▄ █▀▄▀▄ ▄ █ █ █▀▄▀█ ▄ █ █ ▄▀█ ▄ ▄▀▄ █▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀█▀▀▀ █ ██▀▀ ▄▀ ██▀▄█▄▄▄█▀▄█▄ █▀▀▄█▄ █████ ▀▄ ▄▄▄▄▄   [0m
[47m[30m  ▄▀ ▄ ▄▄▀ ██▄▀▄▀█▄▀█ █▀█▄███▄█▄█ ▄▄ ▀▀ █▄█▀█▀  ▀██ ▄▄▄▀▄ █▄▀▄ [0m
[47m[30m ▀▀█▀▄█▄██▀█ ▀█▄ ▄▀█ █▀█▄ ▄▀▄▄▄▀█ ▀▄█▄██  █▄▀▀█ █▄▄ █▄▄▀▄ ▄  ▀ [0m
[47m[30m  ▀▄▄▄▀▄█▄ ▄▀ ▄▄▄▄█▀ ▀██▄▀▀█▀▄█▀█ ▄ ▄▄▄▄  ▀▀▄▄   ▀█▄█▄▀█▄▀█▀▀▄ [0m
[47m[30m ▄ ▀▄ ▄▄█  ▄▀▀▀  ▀▀▀▄▀▄ ██  █▄▀▀▄▀ ▀▄▄ ▀▄▀  █ ▀▄████▀▄ ▀▄   ▀▄ [0m
[47m[30m  ▀█▀█▄▄▄█ ██▀ █ ▀   ▀ ▄██▀▀█▄██▄▀▀▄ ▀█ ▀ █▀█ ▄ █▄▀ ▄ ▀▀█▄█▄▀▄ [0m
[47m[30m █ ▀  ▀▄█▄  ██▄█▄  ▄▀▄██ ▄▀ ▄ ▄▀█  ▄▄█▄▄  █▄▄ ▄▄██ ▀  ██▀▀▄ █▀ [0m
[47m[30m ▄▄▀▀█▄▄▄ ▄ ▄█ ▄▀ ▀█ ▄█▀██▀ ▀ ▀ ▄▀▄▄█ ▀▄▀▀▀▀▀█ ▄▄ █   ██▄▄█ ▄█ [0m
[47m[30m ▀ █▀▄▀▄█ ▄▀▄█ ▄▄▀▄▄▀  █▄▄█▀▀ ▀▄▀  ▀█▄▄▀▀▀▄ ▄ ▄ ▄█ ▀  ▄▀▄ █▄▀▀ [0m
[47m[30m ▀██  ▀▄ ▀▀▀ ▄▄ ▄▄ ▄██▄█▄█  ▀▄ ▄▄▄█  ▄▀ ▄▄▀█▀█ ▄███ ▄▄█▀▀▄ ▀▄█ [0m
[47m[30m ▄▀▀██▄▄▄▄▄ ▀ ▀█▀▄  ▀▄▄  ██▀█▄██▄█▄█▄▄▀▀▀▀ ▀█▀▀▄█▄ ▄▀██████▄   [0m
[47m[30m █▄▀ █ ▄ █▀▄██▄█▄▄▀ ▄   ▀█ ▀ █ ▄ █▀▄▄▄▀ █▄██▀ █▄▀█ ▄ █ ▄ █▄▀▀▄ [0m
[47m[30m ▄▄▀▀█▄▄▄███ ▀▀███▀█▄▀██▄▄▀▀▀█▄▄▄█▀ █▄ ▀ ▀  ▄ ▀▀▀▄▀▄▀█▄▄▄█▄ ▄▄ [0m
[47m[30m   ███▀▄ ▄ █ ▄▄  ▀ ▀▄▀█████▀▄██▄█▀▄▄▀▀█ ▄▀█▀ █▀▄ ▄▄▄██▄█▀ █▄▄█ [0m
[47m[30m ▄  ██ ▄█▄▄▀▄█  ▀█   ▀▄▄█▀█▀▀▄▀██▄█▀▄█▄▀▀▀██▄ ▀▄▄█▀█▄▄▀█ ▄▀▄██ [0m
[47m[30m ▄▄▀█▀█▄█  ██▀▄▄▀ █▄██ ███▄███▀▄██ ▄▀▄█ ▀▀▀▀▀█ ▄▄▄█▄ ████ █ ▄  [0m
[47m[30m  █▀▄█▀▄▀█▀▄ ▄ ▀▀  █▀ ▄  █▄█ ▄██  █▀▄▄▀█▄▀▄█ ▀▄ ▄▄▀▄██▄▀ █ ▄ █ [0m
[47m[30m  ▄ ▄ ▄▄▄  ▄▄▀▀▄ ▀▀▄▀  ▀▀ ▄ █▀▄ ▀▀  ▀█▀ ▄▀█▀▄█▄▄  █ █▄▄██▄▀███ [0m
[47m[30m  ▀█ ▀▄▄▀ ▀▄▄  ▀█▄▄▀▀▄▄▀█ ▄▀█▀▀██ ▄█▄▄█ ▀  ▀ ▀▄▄█▄ ▄█▀▀▀ ▄▄▄▀▄ [0m
[47m[30m ███ █▄▄▄▄▀█▀ ▀ ▀██▄█▀▄ ▀▀█▄▀▀ ▄▀ ▄▀█ ▄▄▀▀▄▀▀▀▄  ▄▀   ▄▄▀▄▄▀██ [0m
[47m[30m ▀██▀▄ ▄ █  █▀█▄▄▀▄▄▀▄▀█▄██  █▀█▀   ▄▄▀█    █  █▄████▀▀█▄▄▄▄ ▄ [0m
[47m[30m  ▀▄██▄▄▀█ ██ ▀▀▀ ▀ █▄ █▀█▄▄▄ ██▄    ▄▀▄▄▄▀▀█▄  ▄▄▀▄██▄█ ▄▀███ [0m
[47m[30m ███▄▀ ▄█▄  █ ▄▄▄█▄  █▀ █▄▀ ▀███▄▄ █▀▄ ▀▀▀▀██ ▀▄▄▄▄ ▄████▄ ▄ █ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▄▄███  ▄▄█   ██▀▄▀▀█ ▄ █▄ ▀▄█▄ ▄▀▀▀▄▄▄ ▀█ ██ ▄ █▀▄██ [0m
[47m[30m █ ▄▄▄ █ █ ▄▀▀▄ ▀▄▄ ██▄▀▀██▀▄█▄▄▄██▄███▄▀ █▀▄▀█ ▄▄ ▀▄█▄▄▄█  ▀█ [0m
[47m[30m █ ███ █ █▀▄▄▄▄█▄▄▀▄▀  █▀▀ ▀█▀▀█▀ ▄▄██ ▄ ▀▀█▀▄ ▄█▀▀ ▀  ▀▀▀▄  █ [0m
[47m[30m █▄▄▄▄▄█ ▄█▄   ▄█▄▄▀ █▄█▄█▀ ▀  ▄▄▀█▀▀▄█ ▀▀▀█▄▀ █▄█▀▄▄▀▀▀▄▄  ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:37:42: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:37:50: [4:37:50 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:37:50: [4:37:50 pm] ⏳ Waiting for WhatsApp connection... (8/60)
2025-09-18T16:38:00: [4:38:00 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:38:00: [4:38:00 pm] ⏳ Waiting for WhatsApp connection... (9/60)
2025-09-18T16:38:02: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:38:02: [47m[30m ▄▄▄▄▄▄▄  ▄   ▄ ▄  ▄ ▄▄ ▄▄   ▄▄▄▄     ▄ ▄ ▄▄ ▄   ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄▀██▀▄▄ ▀ ▀▄▄▄▄ ▀▄▀███▄    █▀▄██ ▄ ▄  ██▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ███▄ ▄ ▀ ▀ ▄▄██  █ ▀█▄▄▄▄▄▀▀▀  ▄▄██▀ █▀▀▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ █▀█▀▄ ▄ █▀▄ █ █▀█ ▄ █ █ ▄▀█ ▄ ▄▀▄ █▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▄▄▀▀▀▀ █ ▄▀ ▄█ ██▀▄█▄▄▄█▀ ▄█▄   █ ▀▀█▄▄▄█▄▀▄ ▄▄▄▄▄   [0m
[47m[30m   ▀  ▀▄█  ██▄ █▀█▄▀█ █ █▄▄▄█▄ ██ ▄▄▀▄█▄▄▄▄▀▀▄▄ ▄▀▄▄▄▄▀▀███▄▀▄ [0m
[47m[30m █ █▀▄▀▄██▀█ ▀█▄▄ ▀█ █▀█▄▄▄▀▄▄▀██   ██   ▀▄█▄ ▄▄█▄█▄█▄▄▀▀▀▄ █▄ [0m
[47m[30m ▀▀▄▄ ▄▄█▄ ▄█ ▄▄▀ █▀▀███▀█▀██▄█▀█ █▄▄ █▄  ▄▀██▄▄██▀▄█▄▀█▄██▀▄▄ [0m
[47m[30m █ █ █▀▄█  ▄█ ▀  █▀▀▀▄▄ ▀█  ▄▄▀▀▄▀ ▀▄▄ ▀▄▀  █ ▀▄█████  ▀▄      [0m
[47m[30m   ▄▀▀▀▄▄█ ▀█▀▄▀  ▄▄▄▄  ▀▄▀▀ ▄███▀▀▄ ▀█ ▀ █▀█ ▄ █▄▀ ▄▄▀▀█▄█▄▀▄ [0m
[47m[30m ▄██▄ ▀▄█▄▀▀▄▄█▄▄█ ▀▀ ▄▀ █▀ ▀▄▄▀ ▄ ▄▄█▄▄  █▄▄ ▄▄██ ▀▄▄██▀▀▄ █▀ [0m
[47m[30m █▄▄▄█▄▄██▀▀ ▄▄▄▄  ▄▀ ██▀ █ ▀ ▀ ▄ ▄▄█ ▀▄▀▀▀▀▀█ ▄▄ █ ▄ ██▄▄▀ ▄█ [0m
[47m[30m ▀ ▀ ▄▀▄ █ ▄██▀██ ▀█▀▀█▀██  ▀ ▀▄ █ ▀█▄▄▀▀▀▄ ▄ ▄ ▄█ ▀   ▀▄   ▀▀ [0m
[47m[30m ▀█▀  ▀▄▄█▀  ▄▄█▄▄█▄██  ▄██▀▀▄█ ▄▄█  ▄▀ ▄▄▀█▀█ ▄███ ▄▄▀▀▀▄ ▀▄█ [0m
[47m[30m ▄▀▀█▄█▄▄██▄▀ ▀ ▀▄▄▄▀▄█  █▄▀█▄██▄█▀▄███▄▀ ▀▀█▀██▄▄▄ ▀█▄▄▄██▄   [0m
[47m[30m ▀ ▀ █ ▄ █ ▄██▄█▄▄ ▀▄   ▀█   █ ▄ █▄ █▄█ █▀▄▀▀▀  ▀▀ ▄ █ ▄ █▄▀█▄ [0m
[47m[30m ▀█▀▀█▄▄▄███▄█▀█▀█▀█ ███▄▄▀▀▀█▄▄▄█▀█▄█▄▄▄▀ ▀▄▀█▀▀▄▄ ▀█▄▄▄█▄ ▄▄ [0m
[47m[30m ▀███▄█▄▄█ █ █▄ ▄▄ ▀▀▀█████▀▄█▀ █▀ ▄█▀█▄▄ ▀▀ ▀▄▄███▄██▀█ ▄█▄█▄ [0m
[47m[30m  ▀▄█▄ ▄▄▄▄▀▄   ▀█  ▀▄▄▄▀▀█▀▀ ▄██▄█▀▄█▄▀▀▀██▄ ▀▄▄█▀█▄▄▀▄ ▀▀▄▀█ [0m
[47m[30m ▀████▄▄█ ▄▀ █▄▄▀▀▀ ▄▄ ███▄██▀▀▄██ ▄▀▄█ ▀▀▀▀▀█ ▄▄▄█▄ ████ █ ▄  [0m
[47m[30m ▀   █▄▄▀█   ▄ ▀█ ▀▀▀  ▄▀█▄██▀██  █▀▄▄▀█▄▀▄█ ▀▄ ▄▄▀▄▄ ▄▀ ▄▀▄ █ [0m
[47m[30m ▀██▀█ ▄▄   ▀█▀█ ▄▄  ▀▀▀▀  ▄▄▀▄ ▀▀  ▀█▀ ▄▀█▀▄█▄▄  █  ▄▄██▄█▄██ [0m
[47m[30m  ▀█ ▀▄▄▀▄▄▀█   ▄▄ ▀▀▄ ▀█ ▄ █▀▀██▄▄█▄▄█ ▀  ▀ ▀▄▄█▄ ▄▄█▀▀ ▄  ▀▄ [0m
[47m[30m ██▀ █▄▄▄▄█ ▀ █▄▀█▀ █▀▀▀▀▀▄█▀▀ ▄ █▄▀█ ▄▄▀▀▄▀▀▀▄  ▄▀ █ ▄▄▀▄▄▀██ [0m
[47m[30m ▀██▀▄ ▄ ▄▄▄█▀▀▄▄▀ ▀▀▄▄█▄██  █▀█▀▄▀ █▄█ ▄▀ █▀▀▀ ▄████▀▀█▄▄▄▄ ▄ [0m
[47m[30m  ▀▄██▄▄ ▄▀▄█ ▀▀▀ ▀ █▄▀█▀█▄▄▄ ▀██ ▄ ▄ █  ▀█▀▄   ▄█▀ ██▄▄ ▄▀█▀▄ [0m
[47m[30m ███▄▀ ▄▀█  █▄▄▄▄█▄  █▀ ▀ ▀ ▀█▄█▄▄▀▀▄█  ▄▀▄█▄  ▄▄██ ▄█▄██▄ ▄▄  [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▄▄ ██ █▀▄█ ▄ █▀▀▄▀▀█ ▄ █▄▄ ▀▀  ▀▀▀  ▄  ▀▀ ██ ▄ █▀▄██ [0m
[47m[30m █ ▄▄▄ █ █ ▄▄▀▄   ▄ ▄▀▄▀ ▄█▀▄█▄▄▄██▄███▄▀ █▀▄▀█ ▄▄ ▀▄█▄▄▄█  ▄█ [0m
[47m[30m █ ███ █ ██▄   █▄▀█ █▀▄▀██ ▀█▀██▀ ▄▄██ ▄ ▀▀█▀▄ ▄█▀▀ ▀ ▄█▄▀▄▄ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▀▄▀▄██▀▄▀ ▄█▀▄█▀ ▀ ▄█▄▀█▀▀▄█ ▀▀▀█▄▀ █▄█▀▄▄▀██▀▄▄ ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:38:02: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:38:10: 💾 Data synced to files successfully
2025-09-18T16:38:10: [4:38:10 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:38:10: [4:38:10 pm] ⏳ Waiting for WhatsApp connection... (10/60)
2025-09-18T16:38:20: [4:38:20 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:38:20: [4:38:20 pm] ⏳ Waiting for WhatsApp connection... (11/60)
2025-09-18T16:38:22: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:38:22: [47m[30m ▄▄▄▄▄▄▄ ▄▄ ▄  ▄▄▄▄▄ ▄▄  ▄▄▄  ▄▄ ▄ ▄▄  ▄▄▄ ▄▄  ▄▄▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ██  █▀▀ ▀  ▄▀▄▀ ▀ ▀██▀▀▀▄ █▄█▄▀ ▄██▀▄██▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄▀▀  █  ▀▄▄▄▀ ▄▄ ▀▀ ▄██▄██ █▀ ███▀█▀█▄ █▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▄▀█▀▄ █ █ █ █▀█ █ █ ▄ █▀▄▀▄▀█▀█▀▄▀▄▀▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄█▀▀▀▄▀▀▀▄▄▄▀██ █▀▀██▄▄▄██▀▄██▄▀█▀▀▀ █ ▄▄▄█  ▄  ▄ ▄▄▄ [0m
[47m[30m   ▄▀█▄▄██▀▄▀▄   ▄▀▀███▀▀▄▄▀▄█▄▀██ ███▄▀▀  ▀████▄▀████▀▀█ ▄██▄ [0m
[47m[30m ▀▄▀   ▄▀▀  █▀▀ ▀█▄█▄▀  ▀▄ ██▀▄█▀▄▀█▀▄▄▀▀▄█▀▀███▀█▄▀▄▀▀▀ ▄██▄  [0m
[47m[30m ▄▄██▀ ▄ █▀ ▀▄▀████▀▀ ▄▀█ ▄▄  █▀ ▀█▄█  ▀ ▄▀█ ▄█  ▄▀█▄ ▀█▄█▄█▄▄ [0m
[47m[30m ▀▄▄▀ ▀▄██▀█▄▀▀█▀▄█▀█ █▀▀▀ █ ▀█▀▄▄▀  ▄ ▄█ ▄ ██ █▀██  ▀▄▀▄█▀▀▀  [0m
[47m[30m █▄▀▄▄ ▄ ▀▀ █▀ █ ██▄▄▄▀▀█▀██▀▀ █ ▄ ▀█▀▀▄ █ ▀▀▄██ ▄█▄█▀▄▀▀ ▄▀▄▄ [0m
[47m[30m ▀▄▄ ▄▀▄█▀█▄█▀▀▄▄▄█ ▄ █ █▀▄▀▀ ▄▀  ▀ ▄█▀█▀▄█▄▀▀█ ███ ▄▀██▄ █▄█▀ [0m
[47m[30m █▄█ ▄ ▄▄▀█ ▀▄▀█  ▄▄██    ▀█ ▀█ ▄▄██▀ ▀▀  █▀▀ ▀█  ██▀█▀█▄▀█  █ [0m
[47m[30m ▀▄▀▀▀▄▄▀▀ ▀ █▀▄████▄█ █ ▄▀█ █▄▄ █▀▄ ▄ █ ▄▀  ▄██▀█▄█ █▄█ ▄ ▀▄▀ [0m
[47m[30m ▀ ▄ ▄▀▄██ █ ▄ ██ ▄█ ▄▀▄▄█▀   ▄▄▀█▄▄ ▄▄▀█ ▀█▄▄▀ ██ ▀█ ▀█▄█▀█▄█ [0m
[47m[30m ▄▀▄▄▄▄▄██  █ ▀  █▄▀▀▀▄▀▄██▄▄███▄▄ █ █▄█ ▀ █▄▄▀▄ ▄█▀ ▄▄▄▄▄▄█▄  [0m
[47m[30m █ █▀█ ▄ █ ▀ █ ▀█▀█  ▄ ▄▄█▄▄▀█ ▄ ██▀▄▄▀▄▀▄ ▀▄ █▀█▀  ▀█ ▄ ██▄▀▄ [0m
[47m[30m █▄  █▄▄▄█▄▀▄█▄▄▄▀▀██ ▄▀▄▄▄  █▄▄▄█▀▀▄▄▀███ ▀█   ▄▄▀  █▄▄▄██▄██ [0m
[47m[30m    ▄▄▀▄ ▀▀▄▄ ▄██▄▄▀██▄▄▀██▄█▄▄▀█▄▄█▄▀██▄██▀▄▄▀▀▀▄▀▀▄▄██ ▀▄█ █ [0m
[47m[30m █▀ ▄▄▄▄  █▄██▄▄▄██   █▀▄▀▀█ ▀▀█▀ ▄▄▀█ █ ▄ █ ▄ ▀▀██▀█▀▄▄█  ▀▄▄ [0m
[47m[30m █ ▄▄▄ ▄ ▀▀█ █▀▀███ ▄▀██▀▀▀▄█ ▀█ ▄▀ ▀▄ ▀ █▀▀▄▄▀ ▄▄ █▀▀██▄█▄▄▄  [0m
[47m[30m  ▄█ ▀█▄▀   █▄▄▀ ▄▀ ▄▄▀ █▄▄ ▄ ▀█ █▄  ▄▀ █  █ ▄█▀ ▄▀▀█  ▀▀  █▄█ [0m
[47m[30m ▀  █▀█▄ ▄ ██▀▄ ▀ █▄█▀█▄▄   █▄▀ ▀▀▀█▄██▄█▄ ▀ ▀█▀█ ▀▄▀ ▀█▀ ██ █ [0m
[47m[30m  ▄▀▀█▄▄ ▀▀▀█▀█▀█ ▄█▄█▄ █ ▀▀██▀█ ██▀▄▄ ▀ ▄ ▀█ █ █▄███▄▀▀██▀▄▀▄ [0m
[47m[30m ███▄▄ ▄ ▀▀▀█ ▄▀ ▄▀ █▄▄ █▀▀█  ▄▄███ ▀ ▄▀   ▀▀▄█▀▄▄▀█▀  ▄▀▀█ ▀█ [0m
[47m[30m ▀▀▀▀▀█▄▄▄█▀ ▀ ██▄ ██ ▀▀▀█ █▀ ▄█▀▄▀ ▀█▄▀ ▄█▀▀█▄  ██ ▄▄▄█  █▀█▄ [0m
[47m[30m   █▄█▄▄█▀  █ █  ▄▀  █▀ ▀█▀▄█▄█▀▀▀▀ █▀ ▀█▄▀▀█ ▀  █ █▄▀▄▄██ ▀██ [0m
[47m[30m ███▄▀ ▄  ▀▀▀ ▄▀█      ▀█▄▀█ ▄█▄▄█▀▄▀████  █▄█  ▀▄▀▀█▄▄███▀██▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ██▀▀▀▀▄█▀▀███▀  █ █ █ ▄ █▀█▄▄█ ▀ ▀▀▄▄ ▀▄▀▀ ▄█ ▄ █ ▀▀█ [0m
[47m[30m █ ▄▄▄ █ █▀ ▀▄▀▀ ▀▄ ▄▀██▀▀  ██▄▄▄█▄ ██ █ ▄█▀▀ ▄▄▄▄█ ██▄▄▄█▀▄▀▀ [0m
[47m[30m █ ███ █ ▀▄▀ ▀▄  ██ █▄▀ ▀▀ ▄▄ █▀▀███▀█ ▀▀ ██▀▀▀█▀▀▀█ ▀▄▄▀▄  ▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄  ▀▄  ▄ ▀ ▀▀ ▄ ██▄▀▄ █ █▄▄▄▄▀▄ ▄▄█ █▀ ▀██ █▄▄▀ ▄█▀▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:38:22: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:38:30: [4:38:30 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:38:30: [4:38:30 pm] ⏳ Waiting for WhatsApp connection... (12/60)
2025-09-18T16:38:40: 💾 Data synced to files successfully
2025-09-18T16:38:40: [4:38:40 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:38:40: [4:38:40 pm] ⏳ Waiting for WhatsApp connection... (13/60)
2025-09-18T16:38:42: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:38:42: [47m[30m ▄▄▄▄▄▄▄    ▄▄▄▄ ▄ ▄    ▄▄   ▄▄▄▄     ▄ ▄ ▄▄ ▄   ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄  ▀██▀▄█▄ ▄▄▄▀▄▀▄█▀█▄█▄    █▀▄██ ▄ ▄  ██▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ███▄   ▀ ▄▄▄▄▄█  ▀ ▀█▄▄▄▄▄▀▀▀  ▄▄██▀ █▀▀▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀▄ █▀▄▀▄▀█ █ █ █ █▀█ ▄ █ █ ▄▀█ ▄ ▄▀▄ █▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▀▄▀▀ ▀ ██▄▀  ▄ ██ ▄█▄▄▄█▀ ▄▄ █▀▀█▀█  ███▀ ▀▄ ▄▄▄▄▄   [0m
[47m[30m ▄ ▀ ▀▀▄█▄▀██▄ ▄▀██ █ ▄▀█▄▄▄█▄███   ▄█▀ █▄██▀▄▄▄ ▀▄▄▄▄▀█▄ █▄▀▄ [0m
[47m[30m ▀▀█▀██▄██▀█▄▀█▄  ▀█▄▀▀█  ▄▀▄▄▀▀█   █▄▄▀ ▀▀█▀▀██▄▄▀ █▄▄▀█ ▄ ▀▄ [0m
[47m[30m ▀ ▄▄█ ▄█▄ ▄█▀▄▄█ █▀▀ ██▄▄▀█▀ █▀█  ▄▄██▄██▀▀ ▄ ▄▄▄█▄█▄▀█▀▀█▀▄█ [0m
[47m[30m   ▀ ▀█▄█  ▄▀▄▀ █ ▀▀▄█▄ ▄    ▄▀▀▄▀ ▀▄▄ ▀▄▀  █ ▀▄████▀  ▀▄   ▄  [0m
[47m[30m ▀▄▀▄▀▄▄▄█ ▀█  █▄▄  ▄▄   ▄▀▀▄▀██▄ ▀▄ ▀█ ▀ █▀█ ▄ █▄▀  ▄▀▀█▄█▄▀▄ [0m
[47m[30m  ███ ▀▄▄█▀ █▀▄██▄▀▀▀▄███ ▀  ▄▄▀█▀ ▄▄█▄▄  █▄▄ ▄▄██ ▀█▄██▀▀▄ █▀ [0m
[47m[30m ▄▄███▄▄██ ▀▀█ ▀▀▄▄ ▀█▀▄ ▀▀▄  ▀ ▄ ▄▄█ ▀▄▀▀▀▀▀█ ▄▄ █  ▄██▄▄▄ ▄█ [0m
[47m[30m ▀ ▀▄▄▀▄ ▀█▀█▄▄ ▄▀ ▀▀▀  ███▀▀ ▀▄   ▀█▄▄▀▀▀▄ ▄ ▄ ▄█ ▀▀▀▀█▄ ▄▄▀▀ [0m
[47m[30m ▀█▄▄ ▀▄▀▄▄▀ ▄▀ ▄▄▄▀██▀▄▄█▄▀▀▄█ ▄▄█  ▄▀ ▄▄▀█▀█ ▄███ ▄▄█▀▀▄ ▀▄█ [0m
[47m[30m ▄▀▀▄▄▄▄█▄█ ▀ ▄ ▀▄ ▄▀▄ ▄ █▄▀█▄██▄█ ▄▄███   ▀▄  ████▄▀██▄█▄█▄   [0m
[47m[30m ▀▄▀ █ ▄ █ █████▄▄ ▀▄ ▀▀▀█ ▀ █ ▄ █    ▀▄▄ ▄▀▀▀▄▄▄██▄ █ ▄ █▄▀█▄ [0m
[47m[30m ▄ ▀▀█▄▄▄███ ▀▀██▀▀█ ▀██▄▄▀▀▀█▄▄▄██▄▄▄ ▀ ▀ ▀▄▀█ ▀▄█ ▀█▄▄▄█▄ ▄▄ [0m
[47m[30m ▀▄██▀█▄▀▄ █ █▄  ▀ ▀  █████▀▄██▀█▀▄▄▀▄▀▄▀▀▀▀█▀▄ ▀ █ ██▄██▄█▄▄▄ [0m
[47m[30m  █▄█▀▀▄▄▄▄▀█▄  ▄    █▄▄▀▀█▀▀ ███▄█▀▄█▄▀▀▀██▄ ▀▄▄█▀█▄▄ ▄ ▄▀▄▀▄ [0m
[47m[30m █▀▀  █▄█ ▄▀▄ ▄ ▄▄█  ▄▄▀██▄█▄  ▄██ ▄▀▄█ ▀▀▀▀▀█ ▄▄▄█▄ ▀██▀▄█ ▄  [0m
[47m[30m ▄▄ ▄██▄▀██ ▄▀ ▄ █▄▄ █▄▀ █▄█▄ ██  █▀▄▄▀█▄▀▄█ ▀▄ ▄▄▀▄█▀▄▀ █▄▄ █ [0m
[47m[30m  ▄█▀▄ ▄▄ ▀ █  █ ▄ ▀ ▀▀▀▀ ▄▄▄▀▄ ▀▀  ▀█▀ ▄▀█▀▄█▄▄  █ █ ▄██▄ ▀██ [0m
[47m[30m  ▀▀  █▄▀  █▄ ▄█▄▄ ▀ ▄ ██ █ ▄ ▀██▄▄█▄▄█ ▀  ▀ ▀▄▄█▄ ▄█▀▀▀ ▄▄▄▀▄ [0m
[47m[30m ██▀▄█▄▄█ █▄▀ ██▀██▀█▀  ▀▀ ▀▀▀ ▄█▀▄▀█ ▄▄▀▀▄▀▀▀▄  ▄▀   ▄▄▀▄▄▀██ [0m
[47m[30m ▀█▄▀▄ ▄▄▀█▄█▀▄▄▄▀ ▄▀▄▄ ▄██  █▀█▀▄▀ ▄█▀▄▄▀▄▀█   ▄▄ ██▀▀▀▄▄▄▄ ▄ [0m
[47m[30m  ▀▄██▄▄▀▀ ▄█ ▀▀▀ ▀ █▄ █▀█▄█▄ ██▄ ▄▄██▀ ▀ ▀█▄▀▄ █▄▀▄██▄▄ ▄▀█▄█ [0m
[47m[30m ███▄▀ ▄ ▄  █▄▄▄ ▀▄  ▀▀ █ ▀ ▀█▄▄▄▄█▀█▄ ▄▀ ▄█▄ ▀█▄▄▄ ▄█▄▄█▄ ▄   [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▄▄▀▄█ ▀▀▄█▀  █▀█▄▀▀█ ▄ █▄▄██▀▄▄█▀█▄▄  ▀ █ ██ ▄ █▀▄█▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄▀ ▄ ▀▀▄ ▀ ▄▀███▀▄█▄▄▄██▄███▄▀ █▀▄▀█ ▄▄ ▀▄█▄▄▄█  ▀▄ [0m
[47m[30m █ ███ █ █▀  █ ▀ ██  █ ▀██ ▀█▀█▀▀ ▄▄██ ▄ ▀▀█▀▄ ▄█▀▀ ▀  ▀▄ ▀█ █ [0m
[47m[30m █▄▄▄▄▄█ ▄█▀██▄▀█▀▀▀▀▄▀ ▄▄▀ ▄▀▀█▄▀█▀▀▄█ ▀▀▀█▄▀ █▄█▀▄▄▀██ ▀▄▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:38:42: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:38:50: [4:38:50 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:38:50: [4:38:50 pm] ⏳ Waiting for WhatsApp connection... (14/60)
2025-09-18T16:39:00: [4:39:00 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:39:00: [4:39:00 pm] ⏳ Waiting for WhatsApp connection... (15/60)
2025-09-18T16:39:02: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:39:02: [47m[30m ▄▄▄▄▄▄▄ ▄▄ ▄▄   ▄▄ ▄  ▄▄▄▄▄   ▄ ▄ ▄▄  ▄▄▄ ▄▄  ▄▄▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▄█▄█▄█▄▄▀ ██▄▀▀▀▀▀ ▀█▄▀▀▀▄ █▄█▄▀ ▄██▀▄██▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄▄▀  █  ▀█▄▄▀▄▄▄ ▄▀ ▄▄▄▄██ █▀ ███▀█▀█▄ █▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄ ▄▀█ ▄ █▀█ █ █▀█ ▄ █ ▄ █▀▄▀▄▀█▀█▀▄▀▄▀▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄█▄▀▀▀▀▀▀  ▄▀▄█ █  ██▄▄▄█▀▄▄▄▄█▀▄█▀▄  ▄▄▄ █  ▄  ▄ ▄▄▄ [0m
[47m[30m   ▄▀█ ▄▀▄ █▀▄▀▀ ▄ ▀███▀▀▄▄ ▄█▄▄█████ ██ ▀█▀▀█▀█▄█▀███▄▀▀▀▄██▄ [0m
[47m[30m ▀█▀ ▀▄▄▀▀  ▀▀▀ ▀▀▄█ ▀  █▄ ██▀▄█▀▄▀█▄▄▄█ ▄▀▄ ▄▄  █  ▄▀▀▀▀████▀ [0m
[47m[30m ▄▀██▄▄▄ █▀  ▄▀█▀▀█▀▀ ▄▀ ▄▄▄ ▄█▀ ▀▀▄▀▀▀█▄ █▀▄ █▄█▄ ▀▄ ▀█▄█▄██▄ [0m
[47m[30m █  █▀▄▄██▀██▄▀██▄█▀▀▄█▀█  █▀██▀▄▄▀  ▄ ▄█ ▄ ██ █▀██  ▀▄▀▄█▀▀▄▄ [0m
[47m[30m ▀▄▄▄  ▄ ▀▀▄▀  ▀█▀▀▄▄ ██▄▀██▄█ █ ▄ ▀█▀▀▄ █ ▀▀▄██ ▄█▄█▀▄▀▀ ▄▀▄▄ [0m
[47m[30m ▀▀▀▀▄▀▄██  █▀ ▀ ▀███▄█ ▄▄▄▀█ ▄▀▄▀▀ ▄█▀█▀▄█▄▀▀█ ███ █▄██▄ █▄█▀ [0m
[47m[30m ▄█ █▄ ▄▄ ▀  ▄▀▄▀▀█▄▄█▀▀ ▀▀█ ▀█ ▀▄██▀ ▀▀  █▀▀ ▀█  ██▀█▀█▄▀▄█ █ [0m
[47m[30m ▀▄▀▀▀▄▄▀▄  ▀█▄▀█▄▄ ██▀█▀▄ █ █▄▄▀▀▀▄ ▄ █ ▄▀  ▄██▀█▄█ █ █ ▄█▀▄▀ [0m
[47m[30m ▀ █ ▄▀▄█ ▀█ ▄ ██ ▄  ▄▀▀▄█▄▄  ▄▄▀█▄▄ ▄▄▀█ ▀█▄▄▀ ██ ▀█ █▀▄█▀█▄█ [0m
[47m[30m ▄▀█▄▄█▄▄▄▄ █ ▄▀ █▀█▀▀▀▀▄█▄▄▄███▄▄▀▀ █▄▄▀ ▀▀▀▄▄▄▀▄ ▀ ▄█▄▄█▄█▄  [0m
[47m[30m █▄█▀█ ▄ █▀  █  █▀▄▀ ▄ █▄███▀█ ▄ ██▀ █▀▄▀▀█▀▀█ ▀  █ ▀█ ▄ ██▄▄▄ [0m
[47m[30m █▀  █▄▄▄█▄▀▄▀▄▄ ▀▀██▄▄▀▄▄▄  █▄▄▄█ ▄█▄▀ ▀▄ ▀▀ █▀██ ▀ █▄▄▄██▄▄▄ [0m
[47m[30m ▀  ▄▄▀▄██▀▄▀▄▄█  ▄▀▄ ▄▄▀██▄█▄▄▄█▄█▀ ▄██▄▄█▀ ▄██ ▄▀█▄▄█▄▀▀▄█▀█ [0m
[47m[30m ▀█▄  █▄ ▀█▄█▀▄▄███  ▄█▀ █▀█ ▀ █▀ ▄▄▀█ █ ▄ █ ▄ ▀▀██▀█▀▄▄▀  ▀█▀ [0m
[47m[30m   █▀▄█▄ ▀▀▀▄█▀██▄█ █▀███▀▀▄▄▀ █ ▄▀ ▀▄ ▀ █▀▀▄▄▀ ▄▄ █▀████▀▄▄▄  [0m
[47m[30m ▀  ▀▄ ▄▀ ▀▄▀▄█▀██▀▄ █▄▄▄█▄ ██▀█ █▄  ▄▀ █  █ ▄█▀ ▄▀▀▄  ▀ ▀█▀▄█ [0m
[47m[30m   ▄▀ █▄ ▄▀▀▄   ▀██▀▄ ▄▀▄  ▄█▄▀ ▀█▀█▄██▄█▄ ▀ ▀█▀█ ▀▄ █▀█▀ ▄▀ █ [0m
[47m[30m  ▄▀▄▄█▄▄▀ █▄▀▄██ ▄▀▄█ ██ ▀ ██▀█ ▀█▀▄▄ ▀ ▄ ▀█ █ █▄████▀▀██  ▀▄ [0m
[47m[30m ██ █▄ ▄ ▄█ █ ▀▄ ▄ ▀█▄▀██▀▀   ▄▄ ▀█ ▀ ▄▀   ▀▀▄█▀▄▄▀█▄  ▄▀▀█ ▀█ [0m
[47m[30m ▀▀▀▀▀█▄█▄▄█ ▀███▄▀▄█ ▄█▀██▄▀ ▄██▄▄▄▄▄   █▀ ▀▄███▄▄█▄▄▄█  █▀█▄ [0m
[47m[30m   █▄█▄▄▀   █ ▄  ▄▀▀ █▀ ▀█ ▄█▄▀▀ ▀█▄ ▄▄█▀▄██▄▀▀ ▀ ▄█▄▀█▄██ ▀▀▄ [0m
[47m[30m ███▄▀ ▄██▀▀▀ ▄▀▀▄  ▄  ▀▀ ▀█ ▄▄▄▄█▀▀▀█  ▀ ▀ ▄▄█▄ █▄▀█▄▄▄██▀█▄▀ [0m
[47m[30m ▄▄▄▄▄▄▄ ██▀▀▀▀▄ █▀██ ▀ ██ █ █ ▄ █▀█▀▄▀▄█▄▄▀▄▀ ▀▀█▄ ▄█ ▄ █ ▀ ▄ [0m
[47m[30m █ ▄▄▄ █ █▀ █ ▀▀▀█▄  ▄███▀  ██▄▄▄█▄ ██ █ ▄█▀▀ ▄▄▄▄█ ██▄▄▄█▀▄▀█ [0m
[47m[30m █ ███ █ ▀▄██▀▄▄▀██▄█ █▄▄█ ▄▄ █▀▀███▀█ ▀▀ ██▀▀▀█▀▀▀█ ▀██▀▄▀█▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄▄▄ ▄▀▄ █▄▄▄ ▄█ ██▄█▄▄  █▄▄▄▄▀▄ ▄▄█ █▀ ▀██ █▄▀▀█ ▀▀▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:39:02: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:39:10: 💾 Data synced to files successfully
2025-09-18T16:39:10: [4:39:10 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:39:10: [4:39:10 pm] ⏳ Waiting for WhatsApp connection... (16/60)
2025-09-18T16:39:20: [4:39:20 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:39:20: [4:39:20 pm] ⏳ Waiting for WhatsApp connection... (17/60)
2025-09-18T16:39:22: 🔌 Connection closed. Reason: undefined
2025-09-18T16:39:22: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:39:25: 🔄 Initializing WhatsApp client...
2025-09-18T16:39:25: 🔄 Connecting to WhatsApp...
2025-09-18T16:39:26: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:39:27: [47m[30m ▄▄▄▄▄▄▄  ▄▄▄▄▄▄ ▄▄  ▄▄▄▄▄   ▄ ▄▄   ▄ ▄  ▄▄▄▄▄  ▄ ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▀▄██▀█▄ ▀▄  ▀█▄ ▀█▀█ ▄▄ ▄▄█  ██▀▀ █ ▀▄█  ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ███▄ ▄▄██▄ ▄█▀ █▀▄▄ ▄█▄▄▄▄ ▄▀▄ ▄ ▄█▀ ▀▀██▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ ▄▀█ █▀▄▀█▀▄▀█ ▄▀█▀█ ▄ █ █ █ █▀▄▀█ ▄▀█▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀ ██▄▀  ▀ ██▄▄ ▀▄ ▀▀█▄▄▄██▀▄██▄▀  ▄▀▀▄ ▄███▀▀ ▄▄▄▄▄   [0m
[47m[30m ▀▄█▀▄▀▄ ▄▀█ ▄▄▀█▄███ ▀▄ ▄█▀█▀▄▀▀▀▄ ▄█▀   ▀▀█ █▄▀▄▀▄▄▄ ▀█▄▄ ▀▄ [0m
[47m[30m ██▀▄▄ ▄█▄█▀▄▄ ▄▄█ ████▄███▀ ▄▀▀▀▀█▀█▄▀▄   ▀█ ▄ ▀▄▄▀▄██ █ ▄▄█▄ [0m
[47m[30m  ▄█▄▄█▄▄▄▄███▄██▀ ▄▄▀█ █  ▄▄▀ ▄▄ ▄ ▀▀▀▄▀▀▀█    ▀▀▄▄▄▄▀█ ▀ █▀▄ [0m
[47m[30m █  █▄▀▄▀▄███▀ █▄▀ ▀▀▄▄▄  ▄  ▄███ █▀███ ▀▀▀▀▄ ▀▀▄█▀██▀▄ ▄  ▄▀█ [0m
[47m[30m █▀▄▄ █▄▄ ▀▀██▄ █▄▀ ▀ ▀▄▄█▀ ▄█ ▄▄ ▄   ▄▄ ▀█▀▀█▀▄ ▄▄▄  ▄▀ ▀█▄▀▄ [0m
[47m[30m ▀▄▄  ▀▄ █▀▀ ▄▀▀ █  ▄▄▄▄▀▄▀ ▄ ▄▀▄ ▄ ▄█▀ █▀███▀██▄▄▀▄██ ▄ ▀▄ █▀ [0m
[47m[30m ▄  █  ▄█▄█  █ ▀██▀▄█▀▀ █ █  ▀▀ ▀▀▀▄▀█▀▄█▄█▀▄▄ ▄ █▀▄▄ ▀▀ ▀█ ▄▄ [0m
[47m[30m ▄ █▄▄█▄ ▀▀█▀▄▄▀█▀██▀ ▀█▄▄█▀▀ ▀▄█  ▀▄▄▄█▄▀ ▄█ ▄▀▄▄ ▀▄▄▀▀ ▀█▄██ [0m
[47m[30m ▄▀▀ ▀█▄█▀▄▀▄▀█▀▄  ▄█▄  ▄█  ▀ ▀▀▄▄█ ▄ █▄▀▀▄▀▀  ▄▄██▄▄▄██▄  ▀▄▄ [0m
[47m[30m █ █▄▄█▄██ ▀▀▄▀▄█▄█ █▀▄▄▄▀▄▀ ▄██▄█  ▄▄██▀▀█ █▀ █▀▄▄▀▄▄▄▄▄██▄▄█ [0m
[47m[30m █▀  █ ▄ █▄ █ ▀▄█ ▄ ▀▀ ▀██▄▄ █ ▄ █▄▄▀▀▀▄▄▄██▀█▄▄███ ▀█ ▄ █ ██▄ [0m
[47m[30m ▄▄ ██▄▄▄█▄▀█▄▄ █▄ █▄  █▀█▀ ██▄▄▄████▄▀▀ ▀▄ █   █▄  ██▄▄▄█ ▄██ [0m
[47m[30m ▀█▀▄▄█▄▀█  ███ ▄ █ ███▀▀▀▀▀▄ ▀▀█▀  ▄ █▄██▀▀ █▀▄ ▄█▄ ▄█▄▀▄▄▄▀▄ [0m
[47m[30m ▀█▀▀▀▀▄▄███▄▀ ▀▀  ▀▀▀█ ▀█▀▀ ▀▄██▄▄███ ▀▀▀▄▀▄▀ ▄▀▄▀▄▄▀▄██▀▄▄▀  [0m
[47m[30m ▄▄▄█▀ ▄▄▀▄▄██ ▀▄▄ █ ██▀▀▀████▀ ▀▀▄▄█▄▀▄ ▀█▀ ▀▄ █ █ ▄ ███ █ ▄  [0m
[47m[30m ▀ ▄ ██▄▄▄▀▄▄▀█▄ █  ▀ ▀▀▀█▄█▄▀▄██▄█▀█▄ ▄ ▀ █▄ █▀█▄▀▄▄▀██▄▄▄▄ █ [0m
[47m[30m  ███▄▀▄█▄▀ █ ▄▄▄▀▄ █▄ ▄▀   ▄▀█▀▄█▄  ▀▀ ▀▄▀▀▀▀▄▄█▄▀▄█▀▄▄ ▄▀██▄ [0m
[47m[30m  ▀  █▀▄  ▄▄ █▄█▀▄▀▀ ▀▀ █ ▀ ▄▀▀██▄▄█▄▄   ▀██▄▀█ ██ ▄▄▀▄▀ ▀ ▄ █ [0m
[47m[30m █ ██▀ ▄▄██ ▀▄▄█ █ █▄▀▄█▀▀█▀▀▀ ▄ █▄▀▄▄▀ ▀▀▄▀  ▀▄██▀▄▀▄ ██▄▄▀▀▄ [0m
[47m[30m █▄▀ ▀▄▄▀ ▀▀ █ ▄▄█▄▄    █ ▄  █▀██  █▀▄ ▄     ▀█▀▄█ ▀▄▀▀ █ ▄  ▀ [0m
[47m[30m ▀ █▄▄▄▄ ▀█▄█ ▀  ▀█▀▄█▀▄▀███▄ ▀▀█▀▄▄▀█▀  █▀█▄▀▄  ▄▀▄█▀███▄█▀▄▄ [0m
[47m[30m ███▄▀ ▄▀▄███▀▄  ██▄█▀▄▀█ ▀ ▀█▄█▄▄██▄▄  ▀▀▄▄▄▀▄ ██▀ ██▄▄▄▄ ▄█▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█ ▄█▄▄█▄▀▄█▄█▀ ▀▄▀██ ▄ ██▄ ▀█▄▀  ▀▀  ▄  ▀ ██ ▄ █  ▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄▄▄▄▀█ ██▀▄▄▄ ▀▄ ▄█▄▄▄█▀ ▄▄▄▀▀  █▀▀  ▄▄█ ▀█▄▄▄█▄ ▄▄ [0m
[47m[30m █ ███ █ █ ▄█▀▄ ▀  █ ▀ ▀▀▀ ▀█▀▀█▀ █▄▄ ▄▄▄▄█▀▄▀ ▄▀██▄▄▀█▀▄ ▀  █ [0m
[47m[30m █▄▄▄▄▄█ ▄▄ ▄█▄█ ▀▀█▄▀▀ ██▀    ▀▄▀▀█▄█▀ ▀▀▀▄▄ ▀▀█▄█ ▄ ▀█ ▄▄ ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:39:27: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:39:30: [4:39:30 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:39:30: [4:39:30 pm] ⏳ Waiting for WhatsApp connection... (18/60)
2025-09-18T16:39:40: 💾 Data synced to files successfully
2025-09-18T16:39:40: [4:39:40 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:39:40: [4:39:40 pm] ⏳ Waiting for WhatsApp connection... (19/60)
2025-09-18T16:39:50: [4:39:50 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:39:50: [4:39:50 pm] ⏳ Waiting for WhatsApp connection... (20/60)
2025-09-18T16:40:00: [4:40:00 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:40:00: [4:40:00 pm] ⏳ Waiting for WhatsApp connection... (21/60)
2025-09-18T16:40:10: 💾 Data synced to files successfully
2025-09-18T16:40:10: [4:40:10 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:40:10: [4:40:10 pm] ⏳ Waiting for WhatsApp connection... (22/60)
2025-09-18T16:40:21: [4:40:21 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:40:21: [4:40:21 pm] ⏳ Waiting for WhatsApp connection... (23/60)
2025-09-18T16:40:27: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:40:27: [47m[30m ▄▄▄▄▄▄▄     ▄▄ ▄   ▄   ▄▄   ▄  ▄   ▄ ▄  ▄▄▄▄▄  ▄ ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄ ▄▄█ ▀▀▄ ▄█ ▀███▄▀▀██▄▄ ▄▄█  ██▀▀ █ ▀▄█  ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▀▄▄ ▄ ██ █▄██▀█▀▀  ▄▄▄▄▄▄ ▄▀▄ ▄ ▄█▀ ▀▀██▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █▀█▀█▀▄▀█▀▄ ▄ ▄▀▄▀█ ▄ █ █ █ █▀▄▀█ ▄▀█▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀ ▀█▄▄█ ▀▄▄█▄▄▀▀▄█ ▀█▄▄▄█████ █  ▀█▄ ▀ ▄█▀█▀▀ ▄▄▄▄▄   [0m
[47m[30m ▀▄█▀▀▀▄██▀█ ▄▄▀█▄███  ▄ ▄▄▀█▀█▀▀▀▄ ▄▄█ ▀▀▀█▄ ▀▄█▄█ ▄▄▀▀▀ ▄ ▀▄ [0m
[47m[30m ██▀▄▀█▄█▄█▀▄  ▄▄█ █▀▀█▄▀▀█▀ ▄▀█▀▀██▄█ ▄▀ ▀▄█▀█▄▄▄▄█▄██ ▄▀▄▄██ [0m
[47m[30m ▄ █▄▀▄▄▄▄▄█▀█▄█ █ ▄  █ ▄▀ ▄ █ ▄▄ ▀▄▄▀▀▄▄ ▀▀▀▄▀▄▀▀ ▄▄▄▀█▀▀ ██▄ [0m
[47m[30m  ▀▄▀█▄▄▀▄██▄█ █▀█ ▀ █▄▄▀ ▄ ▀ ███ █▀███ ▀▀▀▀▄ ▀▀▄█▀███▄ ▄  ▄▄  [0m
[47m[30m █▀  ▄ ▄▄ ▀██▄▄ █▄█ ▄█▀▄█▀▀ █  ▄▄ ▄   ▄▄ ▀█▀▀█▀▄ ▄▄▄▄ ▄▀ ▀█▄▀▄ [0m
[47m[30m █▀▀█ ▀▄██▄ ▀▀▄█ ▄   ██▀██▀ ▄ ▄▀█▀▄ ▄█▀ █▀███▀██▄▄▀▄▄▄ ▄ ▀▄ █▀ [0m
[47m[30m █ ▀█  ▄█▄ ██ █    ▀▄ ▄ ▄▄█▄▀ ▀ ▄▀▀▄▀█▀▄█▄█▀▄▄ ▄ █▀▄  ▀▀ ▀▀ ▄▄ [0m
[47m[30m ▄ ▄▀▄█▄  █▀▀█ ▄█ ▀▄  █ █▄ ▀▀ ▀▄ ▀ ▀▄▄▄█▄▀ ▄█ ▄▀▄▄ ▀██   ▀ ▄██ [0m
[47m[30m ▄▀  ▀█▄▀ ▀ ▄▀ █▄ █ █▄▀▀▄█▀▀▀ ▀ ▄▄█ ▄ █▄▀▀▄▀▀  ▄▄██▄▄▄██▄  ▀▄▄ [0m
[47m[30m █ ▄███▄▄█▄ ▀▄  █▄▀██▀▀▀▄▀▀  ▄██▄█▄█▄█▄▀▀ ██▄▀▀ ▄█ █▄▄▄█▄██▄▄█ [0m
[47m[30m ▀█  █ ▄ ██ █  ██ █ ▀▀ ▀████ █ ▄ █  ▀ █  ▀█▀ ▀▄▄▀▀▀▄▀█ ▄ █ █▄█ [0m
[47m[30m █▄ ██▄▄▄█▄▀█ ▄ █▄ █   █▀█▀ ██▄▄▄██▀▄▄▄▀  ▀██▀█▀▄▄▄███▄▄▄█ ▄█▀ [0m
[47m[30m █▀▀▄  ▄ ▄  ▀▀█ █▀█ ▄▀█▀▀▀▀▀▄   █▀▄▄▀ █▄█████ ▄  ▄▀▄ ▄███ ▄▄▄█ [0m
[47m[30m ▄▀███ ▄▄▄███  ▀▀▀ ▀█▀█ █▀▀▀ ▀▄██▄▄███ ▀▀▀▄▀▄▀ ▄▀▄▀▄▄▀▄▄█ ▄▄▀█ [0m
[47m[30m ▀█▀██▄▄▄▀▄ ▄█ ██▄ █▀▀▀▀████▄▀▀ ▀▀▄▄█▄▀▄ ▀█▀ ▀▄ █ █ ▄▄███ █ ▄  [0m
[47m[30m   █▀█ ▄▄▄▀▄ ▀▄▀ ▄▄▄███ ▀▄▄█▀▄▄██▄█▀█▄ ▄ ▀ █▄ █▀█▄▀▄▄▀██▄▄▀▄ █ [0m
[47m[30m  ▄▀▀▄ ▄█▄█  ▄▄ ▀▄▀ ▀▄▄█▀ ▄ █▀█▀▄█▄  ▀▀ ▀▄▀▀▀▀▄▄█▄▀▄█ ▄▄ ▄█▀█▄ [0m
[47m[30m  ▀█ █ ▄  ▄▀▀█ ▀▀█▄▄▀▀▀▀█ ▄▀█▀▀█▄▄▄█▄▄   ▀██▄▀█ ██ ▄█▀▄▀ ▀ ▄ █ [0m
[47m[30m █   ▀ ▄▄ ▀▀▀▄ █ █  ▄▀▀ ▀▀ ▄▀▀ ▄  ▄▀▄▄▀ ▀▀▄▀  ▀▄██▀▄█▄ ██▄▄▀▀▄ [0m
[47m[30m █▄▀ ▀▄▄▄█▀█ █▄▀▄██▀  ▄▄█ █  █▀██▄▀ ▄▄▀ ▀▀▄▄▄▀▀ ▀▄ ▀▄▀▀▄█ ▄  ▀ [0m
[47m[30m ▀ █▄▄▄▄▀▀███ ▀▀ ▀█ ▄█ █▀█▄█▄ ▀▀█▀▄ ▄▄█▄▀ ▄▀▄   ▀▄█ █▀▀██▄█▀▄▄ [0m
[47m[30m ███▄▀ ▄▀▄██▀█▄ ▄██▄█▀▄▀▀▄▀ ▀██▄▄▄▄█ ▄█   ▄█▄ ▄ ▄▄▄████▄▄▄ ▄██ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█   ▄▄▄█▀▄▄▀█▀██▄▀██ ▄ █▄▄ ▄▄▄  █▀▀▀▀▄ ▄█▄██ ▄ █  ▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄▄▄▄▀▀████▄▄▄▄▀▄ ▄█▄▄▄█▀ ▄▄▄▀▀  █▀▀  ▄▄█ ▀█▄▄▄█▄ █▄ [0m
[47m[30m █ ███ █ █  ▀▀▄▄▄  ███ ▀▄▀ ▀█▀▀▀▀ █▄▄ ▄▄▄▄█▀▄▀ ▄▀██▄▄▀▀ ▄ █  █ [0m
[47m[30m █▄▄▄▄▄█ ▄ ▄  ▄▄▄▄▀▄▀█  ▄█▀  ▀ ▄▄▀▀█▄█▀ ▀▀▀▄▄ ▀▀█▄█ ▄ ███▀▄▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:40:27: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:40:31: [4:40:31 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:40:31: [4:40:31 pm] ⏳ Waiting for WhatsApp connection... (24/60)
2025-09-18T16:40:40: 💾 Data synced to files successfully
2025-09-18T16:40:41: [4:40:41 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:40:41: [4:40:41 pm] ⏳ Waiting for WhatsApp connection... (25/60)
2025-09-18T16:40:47: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:40:47: [47m[30m ▄▄▄▄▄▄▄   ▄▄   ▄▄▄          ▄ ▄▄   ▄ ▄  ▄▄▄▄▄  ▄ ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▀▀ ▀▄▄▀██ ▀█▄█  ▀█▀█▄▄▄ ▄▄█  ██▀▀ █ ▀▄█  ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █ █▄   ██▀ ▄█  █▀ ▄ ▄█▄▄▄▄ ▄▀▄ ▄ ▄█▀ ▀▀██▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █▀█ █▀▄ █▀▄▀▄ ▄▀▄▀█ ▄ █ █ █ █▀▄▀█ ▄▀█▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀███▄▀█ ▀▄██▄▀▄▀▄▀ ▀█▄▄▄██▀▀▄ ▄▀ ▄▀█▀▀███▄ ▀▀ ▄▄▄▄▄   [0m
[47m[30m ▀▄█▀▀▀▄█ ▀█ ▄█▀█▄███ ▀█ ▄█▀█▀▄▄▀▀ ▄  █▄ ▄█▀▀▄▄▄ █▀▄▄▄███▀▄ ▀▄ [0m
[47m[30m  ▀▀▄▀▄▄█▄█▀▄▄ ▄▄█ ████▄███▀ ▄██▀▀▀ ██▄▄ ▀▄█▄▀▀▄▄█▀▄▄██ ▄ ▄▄▀▄ [0m
[47m[30m █▄█▄▄ ▄▄▄▄█ ▄▄█▀█ ▄▄ █ ▀█ ▄ ▀ ▄▄ ▄▄▀▀█▄▄██▀▀▀  ▀█▄▄▄▄▀█▀█ █▄█ [0m
[47m[30m ▄▄▄▀  ▄▀▄██▀█ █▄▀ ▀▀▀▄▄▄ ▄ ▄▄███ █▀███ ▀▀▀▀▄ ▀▀▄█▀██▀▄ ▄  ▄   [0m
[47m[30m ▀▄ █▀▄▄▄ █▀    ▀ ▀  ▀█▄█▄▀ █  ▄▀▀▄   ▄▄ ▀█▀▀█▀▄ ▄▄▄ ▄▄▀ ▀█▄▀▄ [0m
[47m[30m ▀▄   ▀▄▀ █▄█▀▄ ▄█▀▀██▄█▄▀▀ ▄ ▄▀▀▄▄ ▄█▀ █▀███▀██▄▄▀▄ ▀ ▄ ▀▄ █▀ [0m
[47m[30m ▄ ▀▀  ▄█▀▀█▄▄ █▀█ █ ▀███ █▄▀▀▀ ▄▀▀▄▀█▀▄█▄█▀▄▄ ▄ █▀▄▄▄▀▀ ▀▀▀▄▄ [0m
[47m[30m ▄  ▄▄█▄█▄▀▀▀█▄██▀ █▀ ▀ ▄██▀▀ ▀▄██ ▀▄▄▄█▄▀ ▄█ ▄▀▄▄ ▀▄▄▄█ ▀▄▄██ [0m
[47m[30m ▄▀ ▄▀█▄▄▀█ ▄▀  ▄ ▀▀█▄█ ▄█▄ ▀ ▄▀▄▄█ ▄ █▄▀▀▄▀▀  ▄▄██▄▄▄██▄  ▀▄▄ [0m
[47m[30m █ ▄▄▄█▄▄▄██▀▄▀▀█▄▄██▀█▄▄▀█  ▄██▄█▀ ██▄▀▀▀▄▄▄ ▀▀▀▄▄▀▄▄▄█▄▄█▄▄█ [0m
[47m[30m █▀  █ ▄ █▄ █  ██ ▄ ▀▀▀ ████ █ ▄ █  █ ▀▄█▀██▄█▄ ▄▄▀▄▀█ ▄ █ █▄▄ [0m
[47m[30m ▀▀ ██▄▄▄█▄▀▀ ▄ █  █   █▀█▀ ██▄▄▄█▄█▀▄▄▀█▀▄██▀█▀▄▄▄ ██▄▄▄█ ▄ █ [0m
[47m[30m █▄▀▄▀ ▄ █  ▀ █ ▄▀█ ▄▄█▀▀▀▀▀▄   █▀▄▄▀█▀▄▄▄▀▀▀█▄▄█▀▀▄ ▄▀▄▀▄▄▄█▄ [0m
[47m[30m ▄ ▀█▀▄▄▄▄██ █ ▀▀█ ▀ ██ ▀█▀▀ █▄▄█▄▄███ ▀▀▀▄▀▄▀ ▄▀▄▀▄▄▀▄▄▀▄▄▄ ▄ [0m
[47m[30m   ▀█▀█▄▄▀   ▄ █   █▀▀▀██▀██▄█  ▀▀▄▄█▄▀▄ ▀█▀ ▀▄ █ █ ▄ ██ ▄█ ▄  [0m
[47m[30m ▀▀█▄ ▄▄▄▄  █  █▀▀▄  ██▀▀█▄█▄▀▄██▄█▀█▄ ▄ ▀ █▄ █▀█▄▀▄▄ ███▄▀▄ █ [0m
[47m[30m ▀▄▄▀ ▄▄█▄ ▀▄█▄█ ██ ▀▀▄ ▀ ▄▄█▀█▀▄█▄  ▀▀ ▀▄▀▀▀▀▄▄█▄▀▄▄█▄▄ ▄ ▀█▄ [0m
[47m[30m  ▀ ██ ▄▄▄▄▀▀▄██▀▄  ▀ ▀ █ █ ▀▀▀█▀▄▄█▄▄   ▀██▄▀█ ██ ▄▄▄▄▀ ▀▀▄ █ [0m
[47m[30m █ ▀█▀ ▄▄▀▄ ▀▄▀▀ █ █▄▀  ▀▀▀█▀▀ ▄▀▄▄▀▄▄▀ ▀▀▄▀  ▀▄██▀▄█▄ ██▄▄▀▀▄ [0m
[47m[30m █▄  ▀▄▄ █ ▀ █▀▄▄█▄   ▀ █ █  █▀█▀▄█▀▄█▀▄   ▀▄ ▀▀█▄▄▄▄▀█▄█ ▄  ▀ [0m
[47m[30m ▀ █▄▄▄▄█████  ▀ ▀▄▀▄█ █▀███▄ █▀█▀▄▄▀█▀▄▄█ ▀▄  ▄  █ █▀▄██▄█▀█▄ [0m
[47m[30m ███▄▀ ▄ ▀████▄  ██▄██▄▀█▄▀ ▀██▄▄▄▀█▄▄█▀ ▀█▄ ▀▀▀▄█▄▄██▄▄▄▄ ▄██ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█ █▀▄▄▄ ▀▄▄ █▀█▀▄▀██ ▄ █▄ ▄██  █ ▀▄ ▀▄▄█▀▄██ ▄ █  ▄█ [0m
[47m[30m █ ▄▄▄ █ █ ▄██▄▀▀▄████▄▄ ▀▄ ▄█▄▄▄█▀ ▄▄▄▀▀  █▀▀  ▄▄█ ▀█▄▄▄█▄  ▄ [0m
[47m[30m █ ███ █ █▄ ██▄ ██▄█▄▀▄█▀▀ ▀█▀▀█▀ █▄▄ ▄▄▄▄█▀▄▀ ▄▀██▄▄▀▄ ▄▀▄▄ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▄▀▄▀█ ▄██▀██ █▄▄▀ ▄▀▄ ▄▀▀█▄█▀ ▀▀▀▄▄ ▀▀█▄█ ▄ ▄▀█▀  ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:40:47: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:40:51: [4:40:51 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:40:51: [4:40:51 pm] ⏳ Waiting for WhatsApp connection... (26/60)
2025-09-18T16:41:19: [4:41:19 pm] 🚀 Starting Tailor Shop Bot...
2025-09-18T16:41:19: [4:41:19 pm] 🔑 Initializing Google Sheets API...
2025-09-18T16:41:19: [4:41:19 pm] ✅ Google Sheets API initialized
2025-09-18T16:41:19: [4:41:19 pm] 📱 Initializing Enhanced WhatsApp client...
2025-09-18T16:41:19: 🔄 Initializing WhatsApp client...
2025-09-18T16:41:19: [4:41:19 pm] ⏳ Waiting for WhatsApp connection...
2025-09-18T16:41:19: [4:41:19 pm] ⏳ Waiting for WhatsApp connection... (1/60)
2025-09-18T16:41:19: 🔄 Connecting to WhatsApp...
2025-09-18T16:41:19: [4:41:19 pm] 🌐 Dashboard running at http://localhost:3001
2025-09-18T16:41:19: [4:41:19 pm] 📊 Open the dashboard to view status and test messages
2025-09-18T16:41:19: 📁 Loaded 0 sent messages from file
2025-09-18T16:41:19: 📁 Loaded 0 customer histories from file
2025-09-18T16:41:19: 📁 Loaded 0 message hashes from file
2025-09-18T16:41:19: 📁 Loaded statistics from file
2025-09-18T16:41:19: ✅ Duplicate Prevention Manager initialized
2025-09-18T16:41:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-18T16:41:20: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:41:20: [47m[30m ▄▄▄▄▄▄▄   ▄▄▄ ▄▄ ▄  ▄▄▄     ▄  ▄   ▄   ▄▄▄▄▄▄▄  ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▀▄██▀▄ ▀▀▀█▄█▄█▀ ▀▀█▄▄▄  ▄▄██▀▀█ ▀   ▀  ▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▄▀▄ ▀▀█  ▄▀▀▄▀ █▀  ███▄▄▄▀█▀▄ ▀ ▄▄█ ▀▀██▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ ▄ █ ▄▀▄ ▄▀█ ▄▀▄▀█ ▄ █ █ █ █▀▄▀█▀█▀█▀█ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀ ▄█▄▀▀▀▀▄██▄█ ▄ ▀▀██▄▄▄█▄  ▄▄▄ ▀▀ ▄  ▀█▄█ █  ▄▄▄▄▄   [0m
[47m[30m ▀▀█ ▀▀▄█▄ █ ▄█▄▀▄█ ▄█ █▄  ██▄ █▄▀▀▄█▄▀▄▀▀▄▀ ▄▀▄ ▀▀ ▄▄▄▀ ▄ ▄▀▄ [0m
[47m[30m   ▀ ▀█▄ █ █ █▀ █▄  █ ▄▀▄▀▄▀▄ ▄▀▄▄ ███▄▀▀▀██▄▀▀ ▄█▀▄█  ▄▄▀  ▀▀ [0m
[47m[30m  █▄█▄▀▄ ▀ █▀█▄  █ ▄█  ▄▄▄  ▀▀▀█▄▀ ▄██▀▄ █▀▀ █  █ ▀▄▄ █▀▀▀ ▄█▄ [0m
[47m[30m   ▄▀█▄▄ ▄▀█▄█▀▀ ▄▄▄ ▄▄▀█▄    ▀█▄ █▀▄▄ ▀▀ ▀██ ▀▄█▄█▀ ▄█▄▀▀  ▄▀ [0m
[47m[30m ▀██▄▀█▄▄█  █▀  ▀▀▀█ █  ▄  ▀ ▄█ █   ▄ ▄▄  ██▀▄▀▄█ ▀▄█ █▀█ █▄▀▄ [0m
[47m[30m ▀▀▀▀▀ ▄ ▄▄▄█▀▀▄██▀▀   █ ▄▀   ▄▀█▀ ▄█▄█   ▀ █▀█▀▄▄█  ▄ ▄▄ ▄ █▀ [0m
[47m[30m ▄▄ ▄▄ ▄ ▄▄▀  ▄▄ ▄▀▄▄▄ ▀█▀▀   ▀ █ ▀▄▀█▄▄▄▀▀█▀ ▀▄▀█▀▄ ▄█▀▀▀▀ ▄█ [0m
[47m[30m  ▀▀▄ ▄▄▀█ ██ █▄█▀█▄█▄▀▄▄██▀▀ ▀▄█▄ ▀▄▄▀█▄▀█▀▄ ▀▀▄▄ █  ▄ █  ▄▀█ [0m
[47m[30m  █▄ ▄▀▄  █▄ ▀▀ ▀█▀▄ ▄▄ ▄█ ▄▀▄█▀▄▄█ █ ▀▄ ▀██▀ ▄ ▀█▀  ▄▀▀▄  ▀▀▄ [0m
[47m[30m ██▄███▄██▀▀▀▄ ▀▀▀█ ▄▀ ▄▄█▀▀▄▄██▄██▀███ ▀  ▀▀▀▀ ▄▄ ▀█▄▄▄███▄   [0m
[47m[30m   ███ ▄ █▄▄ ▄███▀▀▀▄  ████▀▄█ ▄ █▄ ▀ ▀ ▄▄█▀█▀▀▄ ▀█▄▀█ ▄ █▄ ██ [0m
[47m[30m ▄ █▀█▄▄▄█▄▄▀█▄▄ ▄▀▄▀ █  █▀ ██▄▄▄█  ▀▄▄█▀▀▀▄█▀█  ▄█▄▀█▄▄▄█▄ ▀█ [0m
[47m[30m ▄██▀▀ ▄ ▀ ▄▀ ▀▄  ▀▀██ ▀██▀█▄█▀▀▀█▄▄█▀▀ █▄▀█▀▄▄  ▀▀▄▄▀▄█▄ █▀▄▄ [0m
[47m[30m ▀█ ██ ▄ █▄█▄ █ ▄▄ ▄ █▄█ ▄▀▀▀▄██▀ ██▄█ ▀▄▀█▀▄▀█▀▄▄▄███▀   ▄▄█▄ [0m
[47m[30m █▄█▄ █▄█ ▀ ▄▄ █▀▄████ ▄████▄█ █▄█▀▄ ▀▀▄▄▄██▀ ▄▄▄██▄▄████ █ ▄  [0m
[47m[30m █ ▄  ▀▄ ▄▄█ ▄▄ ██▀▄██▄▀▀█▄██▀▄▄▄ ▀ ██▀ ▀▀▄▄█ █ ▄▄██▄████▄▄  █ [0m
[47m[30m ▄█ ▀▀▄▄ █  ▄  ▀█ █▄    ▀   ▄█▄▀▄▀▄▄▄▄█ ▄▀▀▀▀█▄▄█▄▀ ▀▄███ █▀▀▄ [0m
[47m[30m ▀▀▀▄ ▄▄▀█▀ █  ▀█▀ ▀▀▄█▀█ █ ▄ ▀██ ▄█▄█▄ ▀▀█▀▀▀▄▀▄▄ █▄▄ ▄ ▀▄ ▄█ [0m
[47m[30m   ▄█▀█▄█▄▄██▀▀▄█▀▀  ▄▀▀▀▀▄ ▀▀ ▄▀▀▄▀▀▄█▄▄▄▀██▀▄ ▀▄█▄▀ █▄█ ▄▀██ [0m
[47m[30m ▄▀▀▀  ▄█▄▄█ ▀ ▄  ▄▀▀  ▄▀██▀ ▀▀██▄▀  ▄ ▀   ▀█  ▄██▄ ▄▀▄ █   ▀█ [0m
[47m[30m ▀ █▄▄█▄▀▄ ██▄█ ▀█▀▀▄▀█▀▀████▀██▄ ▄▄▀▄█ ▄▄▀█ ▀▄▄ ▀▄▄  █▄▀ █▄▀▄ [0m
[47m[30m ███▄▀ ▄▀▄▄█▄▀██ ▄█ ██▄▀▀ ▀ ▀█▄▄▄▄ ▄▄▄▀▀▀  ▄▀▀▄ ▄█ ▄█████▄▄ ▀  [0m
[47m[30m ▄▄▄▄▄▄▄ ▀██▀█  ▀▀▀████▄▀▀ ▀██ ▄ █▄ ▀█▄▄▄ ▀▀▀   ▀▄█ ██ ▄ █ ▀██ [0m
[47m[30m █ ▄▄▄ █ ██ █ █▄ █ ▀▀█▀▀ █▄ ▄█▄▄▄█▀ █▄██▀▀ ▄▄  ▀██▄▄▄█▄▄▄█▄▄▄  [0m
[47m[30m █ ███ █ █▀▀█ ▀█ ▀▄▄█▄▀▀▀█  █▄█▀▀ ▄ ▀▀▀ ▄██▀▄█ ▄▀▀▀▄▄▀▀██▀▀▄ █ [0m
[47m[30m █▄▄▄▄▄█ ▄█▀ ▄ ▀█   ▄▀▄▀▄▄▀ ▄▀▀▄█▀ ███▀▄ ▀██ ▀████ ▀▄▄██▀▀▄ ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:41:20: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:41:29: [4:41:29 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:41:29: [4:41:29 pm] ⏳ Waiting for WhatsApp connection... (2/60)
2025-09-18T16:41:39: [4:41:39 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:41:39: [4:41:39 pm] ⏳ Waiting for WhatsApp connection... (3/60)
2025-09-18T16:41:49: 💾 Data synced to files successfully
2025-09-18T16:41:49: [4:41:49 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:41:49: [4:41:49 pm] ⏳ Waiting for WhatsApp connection... (4/60)
2025-09-18T16:41:59: [4:41:59 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:41:59: [4:41:59 pm] ⏳ Waiting for WhatsApp connection... (5/60)
2025-09-18T16:42:08: {"level":50,"time":1758193928226,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{"code":"515"}},"msg":"stream errored out"}
2025-09-18T16:42:08: 🔌 Connection closed. Reason: undefined
2025-09-18T16:42:08: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:42:09: [4:42:09 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:42:09: [4:42:09 pm] ⏳ Waiting for WhatsApp connection... (6/60)
2025-09-18T16:42:11: 🔄 Initializing WhatsApp client...
2025-09-18T16:42:11: 🔄 Connecting to WhatsApp...
2025-09-18T16:42:13: ✅ WhatsApp connected successfully!
2025-09-18T16:42:19: 💾 Data synced to files successfully
2025-09-18T16:42:19: [4:42:19 pm] ✅ WhatsApp connected successfully!
2025-09-18T16:42:19: [4:42:19 pm] ✅ Admin commands system initialized
2025-09-18T16:42:19: [4:42:19 pm] 🔄 Starting automatic polling...
2025-09-18T16:42:19: [4:42:19 pm] 🔄 Starting sheet polling...
2025-09-18T16:42:19: [4:42:19 pm] 🔍 Polling all sheets...
2025-09-18T16:42:19: [4:42:19 pm] 📊 Checking Main Orders...
2025-09-18T16:42:19: [4:42:19 pm] ✅ Polling started - checking sheets every 3 minutes
2025-09-18T16:42:19: [4:42:19 pm] ✅ Tailor Shop Bot is ready!
2025-09-18T16:42:19: [4:42:19 pm] 📊 Dashboard: http://localhost:3001
2025-09-18T16:42:21: [4:42:21 pm] 📋 Main Orders: Found 2 data rows
2025-09-18T16:42:21: [4:42:21 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:42:21: [4:42:21 pm] 📋 Row 2: Order=TVU17092514, Phone=7375938371 (col 2), Status=Delivered
, Valid=true
2025-09-18T16:42:21: [4:42:21 pm] 🔍 Debug: Checking order TVU17092514 with status "Delivered
" (cleaned: "delivered") for phone 7375938371
2025-09-18T16:42:21: [4:42:21 pm] 🔍 Debug: Duplicate check passed for order TVU17092514
2025-09-18T16:42:21: [4:42:21 pm] 🔍 Debug: deliveryNotifiedIndex=21, rowData[deliveryNotifiedIndex]="Yes"
2025-09-18T16:42:21: [4:42:21 pm] 🔍 Debug: deliverySent=true
2025-09-18T16:42:21: [4:42:21 pm] 📋 Order TVU17092514: Delivery notification already sent - skipping
2025-09-18T16:42:21: [4:42:21 pm] 📋 Row 2: Should send=false
2025-09-18T16:42:21: [4:42:21 pm] 📋 Row 3: Order=, Phone= (col 3), Status=, Valid=false
2025-09-18T16:42:21: [4:42:21 pm] ⚠️ Row 3: Invalid phone number '' - skipping
2025-09-18T16:42:23: [4:42:23 pm] 📊 Checking Fabric Orders...
2025-09-18T16:42:23: [4:42:23 pm] 📋 Fabric Orders: Found 1 data rows
2025-09-18T16:42:23: [4:42:23 pm] 📋 Headers: Order ID | Customer Name | Contact Number | Address | Customer Type | Purchase Date | Payment Status | Session | Note | Brand Name | Fabric For | Fabric Type | Fabric Color | Quantity (meters) | Price per Meter | Fabric Total | Master Order ID | Welcome Notified | Purchase Notified | Payment Notified | Payment Reminder Count | Last Payment Reminder Date | Advance/Partial Payment | Remaining Amount
2025-09-18T16:42:23: [4:42:23 pm] 🔍 DEBUG FABRIC: Order=FAA18092508, rowData[6]="Partial", rowData[8]="NA", status="Partial"
2025-09-18T16:42:23: [4:42:23 pm] 📋 Row 2: Order=FAA18092508, Phone=7375938371 (col 2), Status=Partial, Valid=true
2025-09-18T16:42:23: [4:42:23 pm] 🔍 Debug: Checking order FAA18092508 with status "Partial" (cleaned: "partial") for phone 7375938371
2025-09-18T16:42:23: [4:42:23 pm] 🔍 Debug: Duplicate check passed for order FAA18092508
2025-09-18T16:42:23: [4:42:23 pm] 🔍 Debug: Checking if "partial" is in trigger statuses: true
2025-09-18T16:42:23: [4:42:23 pm] 📋 Row 2: Should send=true
2025-09-18T16:42:23: [4:42:23 pm] 🎯 Processing order: FAA18092508 for Deepak Saini
2025-09-18T16:42:23: [4:42:23 pm] ✅ Marking welcome as notified for Deepak Saini (existing customer)
2025-09-18T16:42:23: [4:42:23 pm] 🔍 Debug Fabric Order Data: {
  "order_id": "FAA18092508",
  "customer_name": "Deepak Saini",
  "phone": "7375938371",
  "garment_type": "Mafatlal Dress Chiffon",
  "status": "Partial",
  "delivery_date": "2025-09-18",
  "purchase_date": "2025-09-18",
  "total_amount": "360",
  "advance_amount": "300",
  "advance_payment": "300",
  "remaining_amount": "60",
  "fabric_brand": "Mafatlal",
  "fabric_for": "Dress",
  "fabric_type": "Mafatlal Dress Chiffon",
  "fabric_color": "Navy",
  "quantity": "1.2",
  "price_per_meter": "300",
  "shop_phone": "8824781960",
  "shop_name": "RS Tailor & Fabric"
}
2025-09-18T16:42:23: [4:42:23 pm] 🔄 Trying range format: S2
2025-09-18T16:42:24: [4:42:24 pm] ✅ Updated Fabric Orders - S2 = Yes (welcome)
2025-09-18T16:42:25: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T16:42:25: ✅ Message sent successfully to 917375938371
2025-09-18T16:42:25: [4:42:25 pm] ✅ fabric purchase confirmation message sent to Deepak Saini (FAA18092508)
2025-09-18T16:42:25: [4:42:25 pm] 🔄 Trying range format: T2
2025-09-18T16:42:25: [4:42:25 pm] ✅ Updated Fabric Orders - T2 = Yes (fabric purchase confirmation)
2025-09-18T16:42:27: [4:42:27 pm] 📊 Checking Combined Orders...
2025-09-18T16:42:28: [4:42:28 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:42:30: [4:42:30 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:42:30: [4:42:30 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:42:30: [4:42:30 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:42:30: [4:42:30 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:42:49: 💾 Data synced to files successfully
2025-09-18T16:43:19: 💾 Data synced to files successfully
2025-09-18T16:43:49: 💾 Data synced to files successfully
2025-09-18T16:44:19: 💾 Data synced to files successfully
2025-09-18T16:44:49: 💾 Data synced to files successfully
2025-09-18T16:45:19: 💾 Data synced to files successfully
2025-09-18T16:45:19: [4:45:19 pm] 🔍 Polling all sheets...
2025-09-18T16:45:19: [4:45:19 pm] 📊 Checking Main Orders...
2025-09-18T16:45:20: [4:45:20 pm] 📋 Main Orders: Found 2 data rows
2025-09-18T16:45:20: [4:45:20 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:45:20: [4:45:20 pm] 📋 Row 2: Order=, Phone= (col 3), Status=, Valid=false
2025-09-18T16:45:20: [4:45:20 pm] ⚠️ Row 2: Invalid phone number '' - skipping
2025-09-18T16:45:20: [4:45:20 pm] 📋 Row 3: Order=, Phone= (col 3), Status=, Valid=false
2025-09-18T16:45:20: [4:45:20 pm] ⚠️ Row 3: Invalid phone number '' - skipping
2025-09-18T16:45:22: [4:45:22 pm] 📊 Checking Fabric Orders...
2025-09-18T16:45:23: [4:45:23 pm] 📋 Fabric Orders: Found 1 data rows
2025-09-18T16:45:23: [4:45:23 pm] 📋 Headers: Order ID | Customer Name | Contact Number | Address | Customer Type | Purchase Date | Payment Status | Session | Note | Brand Name | Fabric For | Fabric Type | Fabric Color | Quantity (meters) | Price per Meter | Fabric Total | Master Order ID | Welcome Notified | Purchase Notified | Payment Notified | Payment Reminder Count | Last Payment Reminder Date | Advance/Partial Payment | Remaining Amount
2025-09-18T16:45:23: [4:45:23 pm] 🔍 DEBUG FABRIC: Order=FAA18092508, rowData[6]="Partial", rowData[8]="NA", status="Partial"
2025-09-18T16:45:23: [4:45:23 pm] 📋 Row 2: Order=FAA18092508, Phone=7375938371 (col 2), Status=Partial, Valid=true
2025-09-18T16:45:23: [4:45:23 pm] 🔍 Debug: Checking order FAA18092508 with status "Partial" (cleaned: "partial") for phone 7375938371
2025-09-18T16:45:23: [4:45:23 pm] 🚫 Cooldown active for customer 7375938371 (122s remaining)
2025-09-18T16:45:23: [4:45:23 pm] 🔍 Debug: Duplicate check failed for order FAA18092508
2025-09-18T16:45:23: [4:45:23 pm] 📋 Row 2: Should send=false
2025-09-18T16:45:25: [4:45:25 pm] 📊 Checking Combined Orders...
2025-09-18T16:45:25: [4:45:25 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:45:27: [4:45:27 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:45:27: [4:45:27 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:45:27: [4:45:27 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:45:27: [4:45:27 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:45:49: 💾 Data synced to files successfully
2025-09-18T16:46:19: 💾 Data synced to files successfully
2025-09-18T16:46:49: 💾 Data synced to files successfully
2025-09-18T16:47:19: 💾 Data synced to files successfully
2025-09-18T16:47:49: 💾 Data synced to files successfully
2025-09-18T16:47:55: {"level":50,"time":1758194275574,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:47:55: 🔌 Connection closed. Reason: undefined
2025-09-18T16:47:55: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:47:58: 🔄 Initializing WhatsApp client...
2025-09-18T16:47:58: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:00: ✅ WhatsApp connected successfully!
2025-09-18T16:48:04: {"level":50,"time":1758194284521,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:04: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:04: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:07: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:07: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:09: ✅ WhatsApp connected successfully!
2025-09-18T16:48:13: {"level":50,"time":1758194293201,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:13: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:13: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:16: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:16: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:17: ✅ WhatsApp connected successfully!
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error: UNKNOWN: unknown error, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\baileys_auth\creds.json'
    at async open (node:internal/fs/promises:641:25)
    at async writeFile (node:internal/fs/promises:1215:14)
    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/use-multi-file-auth-state.js:35:17
2025-09-18T16:48:17: Unhandled Rejection at: Promise {
  <rejected> Error: UNKNOWN: unknown error, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\baileys_auth\creds.json'
      at async open (node:internal/fs/promises:641:25)
      at async writeFile (node:internal/fs/promises:1215:14)
      at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/use-multi-file-auth-state.js:35:17 {
    errno: -4094,
    code: 'UNKNOWN',
    syscall: 'open',
    path: 'C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\baileys_auth\\creds.json'
  }
} reason: Error: UNKNOWN: unknown error, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\baileys_auth\creds.json'
    at async open (node:internal/fs/promises:641:25)
    at async writeFile (node:internal/fs/promises:1215:14)
    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/use-multi-file-auth-state.js:35:17 {
  errno: -4094,
  code: 'UNKNOWN',
  syscall: 'open',
  path: 'C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\baileys_auth\\creds.json'
}
2025-09-18T16:48:17: [4:48:17 pm] Unhandled Rejection: Error: UNKNOWN: unknown error, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\baileys_auth\creds.json'
2025-09-18T16:48:19: 💾 Data synced to files successfully
2025-09-18T16:48:19: [4:48:19 pm] 🔍 Polling all sheets...
2025-09-18T16:48:19: [4:48:19 pm] 📊 Checking Main Orders...
2025-09-18T16:48:20: [4:48:20 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T16:48:20: [4:48:20 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:48:20: [4:48:20 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T16:48:20: [4:48:20 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T16:48:20: [4:48:20 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T16:48:20: [4:48:20 pm] 🔍 Debug: Checking if "pending" is in trigger statuses: true
2025-09-18T16:48:20: [4:48:20 pm] 📋 Row 2: Should send=true
2025-09-18T16:48:20: [4:48:20 pm] 🎯 Processing order: TLW17092514 for Yogendra Singh
2025-09-18T16:48:20: ✅ Message sent to 916350454667@s.whatsapp.net
2025-09-18T16:48:20: ✅ Message sent successfully to 916350454667
2025-09-18T16:48:20: [4:48:20 pm] ✅ Welcome message sent to Yogendra Singh
2025-09-18T16:48:20: [4:48:20 pm] 🔄 Trying range format: S2
2025-09-18T16:48:21: [4:48:21 pm] ✅ Updated Main Orders - S2 = Yes (welcome)
2025-09-18T16:48:21: {"level":50,"time":1758194301656,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:21: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:21: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:24: ❌ Failed to send message: WhatsApp not connected
2025-09-18T16:48:24: [4:48:24 pm] ✅ order confirmation message sent to Yogendra Singh (TLW17092514)
2025-09-18T16:48:24: [4:48:24 pm] 🔄 Trying range format: T2
2025-09-18T16:48:24: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:24: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:24: [4:48:24 pm] ✅ Updated Main Orders - T2 = Yes (order confirmation)
2025-09-18T16:48:26: [4:48:26 pm] 📊 Checking Fabric Orders...
2025-09-18T16:48:27: ✅ WhatsApp connected successfully!
2025-09-18T16:48:27: [4:48:27 pm] 📋 Fabric Orders: Found 1 data rows
2025-09-18T16:48:27: [4:48:27 pm] 📋 Headers: Order ID | Customer Name | Contact Number | Address | Customer Type | Purchase Date | Payment Status | Session | Note | Brand Name | Fabric For | Fabric Type | Fabric Color | Quantity (meters) | Price per Meter | Fabric Total | Master Order ID | Welcome Notified | Purchase Notified | Payment Notified | Payment Reminder Count | Last Payment Reminder Date | Advance/Partial Payment | Remaining Amount
2025-09-18T16:48:27: [4:48:27 pm] 🔍 DEBUG FABRIC: Order=FAA18092508, rowData[6]="Partial", rowData[8]="NA", status="Partial"
2025-09-18T16:48:27: [4:48:27 pm] 📋 Row 2: Order=FAA18092508, Phone=7375938371 (col 2), Status=Partial, Valid=true
2025-09-18T16:48:27: [4:48:27 pm] 🔍 Debug: Checking order FAA18092508 with status "Partial" (cleaned: "partial") for phone 7375938371
2025-09-18T16:48:27: [4:48:27 pm] 🔍 Debug: Duplicate check passed for order FAA18092508
2025-09-18T16:48:27: [4:48:27 pm] 🔍 Debug: Checking if "partial" is in trigger statuses: true
2025-09-18T16:48:27: [4:48:27 pm] 📋 Row 2: Should send=true
2025-09-18T16:48:27: [4:48:27 pm] 🎯 Processing order: FAA18092508 for Deepak Saini
2025-09-18T16:48:27: [4:48:27 pm] ✅ Marking welcome as notified for Deepak Saini (existing customer)
2025-09-18T16:48:27: [4:48:27 pm] 🔍 Debug Fabric Order Data: {
  "order_id": "FAA18092508",
  "customer_name": "Deepak Saini",
  "phone": "7375938371",
  "garment_type": "Mafatlal Dress Chiffon",
  "status": "Partial",
  "delivery_date": "2025-09-18",
  "purchase_date": "2025-09-18",
  "total_amount": "360",
  "advance_amount": "300",
  "advance_payment": "300",
  "remaining_amount": "60",
  "fabric_brand": "Mafatlal",
  "fabric_for": "Dress",
  "fabric_type": "Mafatlal Dress Chiffon",
  "fabric_color": "Navy",
  "quantity": "1.2",
  "price_per_meter": "300",
  "shop_phone": "8824781960",
  "shop_name": "RS Tailor & Fabric"
}
2025-09-18T16:48:27: [4:48:27 pm] 🔄 Trying range format: S2
2025-09-18T16:48:27: [4:48:27 pm] ✅ Updated Fabric Orders - S2 = Yes (welcome)
2025-09-18T16:48:28: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T16:48:28: ✅ Message sent successfully to 917375938371
2025-09-18T16:48:28: [4:48:28 pm] ✅ fabric purchase confirmation message sent to Deepak Saini (FAA18092508)
2025-09-18T16:48:28: [4:48:28 pm] 🔄 Trying range format: T2
2025-09-18T16:48:28: [4:48:28 pm] ✅ Updated Fabric Orders - T2 = Yes (fabric purchase confirmation)
2025-09-18T16:48:30: {"level":50,"time":1758194310324,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:30: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:30: [4:48:30 pm] 📊 Checking Combined Orders...
2025-09-18T16:48:31: [4:48:31 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:48:33: [4:48:33 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:48:33: [4:48:33 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:48:33: [4:48:33 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:48:33: [4:48:33 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:48:33: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:33: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:35: ✅ WhatsApp connected successfully!
2025-09-18T16:48:39: {"level":50,"time":1758194319085,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:39: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:39: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:42: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:42: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:43: ✅ WhatsApp connected successfully!
2025-09-18T16:48:48: {"level":50,"time":1758194328312,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:48: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:48: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:49: 💾 Data synced to files successfully
2025-09-18T16:48:51: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:51: 🔄 Connecting to WhatsApp...
2025-09-18T16:48:52: ✅ WhatsApp connected successfully!
2025-09-18T16:48:56: {"level":50,"time":1758194336776,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:48:56: 🔌 Connection closed. Reason: undefined
2025-09-18T16:48:56: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:48:59: 🔄 Initializing WhatsApp client...
2025-09-18T16:48:59: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:02: ✅ WhatsApp connected successfully!
2025-09-18T16:49:05: {"level":50,"time":1758194345343,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:05: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:05: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:08: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:08: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:09: ✅ WhatsApp connected successfully!
2025-09-18T16:49:13: {"level":50,"time":1758194353476,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:13: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:13: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:16: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:16: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:18: ✅ WhatsApp connected successfully!
2025-09-18T16:49:19: 💾 Data synced to files successfully
2025-09-18T16:49:22: {"level":50,"time":1758194362603,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:22: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:22: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:25: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:25: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:27: ✅ WhatsApp connected successfully!
2025-09-18T16:49:30: {"level":50,"time":1758194370626,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:30: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:33: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:33: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:34: ✅ WhatsApp connected successfully!
2025-09-18T16:49:38: {"level":50,"time":1758194378607,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:38: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:38: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:41: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:41: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:43: ✅ WhatsApp connected successfully!
2025-09-18T16:49:47: {"level":50,"time":1758194387227,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:47: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:47: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:49: 💾 Data synced to files successfully
2025-09-18T16:49:50: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:50: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:51: ✅ WhatsApp connected successfully!
2025-09-18T16:49:55: {"level":50,"time":1758194395361,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:49:55: 🔌 Connection closed. Reason: undefined
2025-09-18T16:49:55: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:49:58: 🔄 Initializing WhatsApp client...
2025-09-18T16:49:58: 🔄 Connecting to WhatsApp...
2025-09-18T16:49:59: ✅ WhatsApp connected successfully!
2025-09-18T16:50:04: {"level":50,"time":1758194404074,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:04: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:04: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:07: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:07: 🔄 Connecting to WhatsApp...
2025-09-18T16:50:08: ✅ WhatsApp connected successfully!
2025-09-18T16:50:12: {"level":50,"time":1758194412694,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:12: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:12: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:15: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:15: 🔄 Connecting to WhatsApp...
2025-09-18T16:50:17: ✅ WhatsApp connected successfully!
2025-09-18T16:50:19: 💾 Data synced to files successfully
2025-09-18T16:50:21: {"level":50,"time":1758194421343,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:21: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:21: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:24: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:24: 🔄 Connecting to WhatsApp...
2025-09-18T16:50:25: ✅ WhatsApp connected successfully!
2025-09-18T16:50:30: {"level":50,"time":1758194430457,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:30: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:33: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:33: 🔄 Connecting to WhatsApp...
2025-09-18T16:50:35: ✅ WhatsApp connected successfully!
2025-09-18T16:50:38: {"level":50,"time":1758194438762,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:38: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:38: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:41: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:41: 🔄 Connecting to WhatsApp...
2025-09-18T16:50:43: ✅ WhatsApp connected successfully!
2025-09-18T16:50:47: {"level":50,"time":1758194447394,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:47: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:47: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:49: 💾 Data synced to files successfully
2025-09-18T16:50:50: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:50: 🔄 Connecting to WhatsApp...
2025-09-18T16:50:51: ✅ WhatsApp connected successfully!
2025-09-18T16:50:55: {"level":50,"time":1758194455648,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:50:55: 🔌 Connection closed. Reason: undefined
2025-09-18T16:50:55: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:50:58: 🔄 Initializing WhatsApp client...
2025-09-18T16:50:58: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:00: ✅ WhatsApp connected successfully!
2025-09-18T16:51:04: {"level":50,"time":1758194464312,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:04: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:04: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:07: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:07: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:09: ✅ WhatsApp connected successfully!
2025-09-18T16:51:12: {"level":50,"time":1758194472996,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:12: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:12: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:16: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:16: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:17: ✅ WhatsApp connected successfully!
2025-09-18T16:51:19: 💾 Data synced to files successfully
2025-09-18T16:51:19: [4:51:19 pm] 🔍 Polling all sheets...
2025-09-18T16:51:19: [4:51:19 pm] 📊 Checking Main Orders...
2025-09-18T16:51:20: [4:51:20 pm] 📋 Main Orders: Found 2 data rows
2025-09-18T16:51:20: [4:51:20 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:51:20: [4:51:20 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T16:51:20: [4:51:20 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T16:51:20: [4:51:20 pm] 🚫 Cooldown active for customer 6350454667 (124s remaining)
2025-09-18T16:51:20: [4:51:20 pm] 🔍 Debug: Duplicate check failed for order TLW17092514
2025-09-18T16:51:20: [4:51:20 pm] 📋 Row 2: Should send=false
2025-09-18T16:51:20: [4:51:20 pm] 📋 Row 3: Order=TLW17042514, Phone=6375623182 (col 2), Status=Pending, Valid=true
2025-09-18T16:51:20: [4:51:20 pm] 🔍 Debug: Checking order TLW17042514 with status "Pending" (cleaned: "pending") for phone 6375623182
2025-09-18T16:51:20: [4:51:20 pm] 🔍 Debug: Duplicate check passed for order TLW17042514
2025-09-18T16:51:20: [4:51:20 pm] 📋 Order TLW17042514: Welcome and confirmation already sent - skipping
2025-09-18T16:51:20: [4:51:20 pm] 📋 Row 3: Should send=false
2025-09-18T16:51:21: {"level":50,"time":1758194481804,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:21: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:21: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:22: [4:51:22 pm] 📊 Checking Fabric Orders...
2025-09-18T16:51:22: [4:51:22 pm] 📋 Fabric Orders: Found 1 data rows
2025-09-18T16:51:22: [4:51:22 pm] 📋 Headers: Order ID | Customer Name | Contact Number | Address | Customer Type | Purchase Date | Payment Status | Session | Note | Brand Name | Fabric For | Fabric Type | Fabric Color | Quantity (meters) | Price per Meter | Fabric Total | Master Order ID | Welcome Notified | Purchase Notified | Payment Notified | Payment Reminder Count | Last Payment Reminder Date | Advance/Partial Payment | Remaining Amount
2025-09-18T16:51:22: [4:51:22 pm] 🔍 DEBUG FABRIC: Order=FAA18092508, rowData[6]="Partial", rowData[8]="NA", status="Partial"
2025-09-18T16:51:22: [4:51:22 pm] 📋 Row 2: Order=FAA18092508, Phone=7375938371 (col 2), Status=Partial, Valid=true
2025-09-18T16:51:22: [4:51:22 pm] 🔍 Debug: Checking order FAA18092508 with status "Partial" (cleaned: "partial") for phone 7375938371
2025-09-18T16:51:22: [4:51:22 pm] 🚫 Cooldown active for customer 7375938371 (126s remaining)
2025-09-18T16:51:22: [4:51:22 pm] 🔍 Debug: Duplicate check failed for order FAA18092508
2025-09-18T16:51:22: [4:51:22 pm] 📋 Row 2: Should send=false
2025-09-18T16:51:24: [4:51:24 pm] 📊 Checking Combined Orders...
2025-09-18T16:51:24: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:24: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:25: [4:51:25 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:51:26: ✅ WhatsApp connected successfully!
2025-09-18T16:51:27: [4:51:27 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:51:27: [4:51:27 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:51:27: [4:51:27 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:51:27: [4:51:27 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:51:30: {"level":50,"time":1758194490593,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:30: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:33: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:33: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:36: ✅ WhatsApp connected successfully!
2025-09-18T16:51:39: {"level":50,"time":1758194499153,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:39: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:39: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:42: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:42: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:43: ✅ WhatsApp connected successfully!
2025-09-18T16:51:47: {"level":50,"time":1758194507317,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:47: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:47: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:49: 💾 Data synced to files successfully
2025-09-18T16:51:50: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:50: 🔄 Connecting to WhatsApp...
2025-09-18T16:51:51: ✅ WhatsApp connected successfully!
2025-09-18T16:51:56: {"level":50,"time":1758194516720,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:51:56: 🔌 Connection closed. Reason: undefined
2025-09-18T16:51:56: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:51:59: 🔄 Initializing WhatsApp client...
2025-09-18T16:51:59: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:01: ✅ WhatsApp connected successfully!
2025-09-18T16:52:04: {"level":50,"time":1758194524980,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:04: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:04: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:07: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:08: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:09: ✅ WhatsApp connected successfully!
2025-09-18T16:52:13: {"level":50,"time":1758194533145,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:13: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:13: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:16: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:16: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:18: ✅ WhatsApp connected successfully!
2025-09-18T16:52:19: 💾 Data synced to files successfully
2025-09-18T16:52:21: {"level":50,"time":1758194541868,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:21: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:21: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:24: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:24: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:26: ✅ WhatsApp connected successfully!
2025-09-18T16:52:30: {"level":50,"time":1758194550164,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:30: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:33: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:33: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:35: ✅ WhatsApp connected successfully!
2025-09-18T16:52:38: {"level":50,"time":1758194558990,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:38: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:38: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:42: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:42: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:43: ✅ WhatsApp connected successfully!
2025-09-18T16:52:47: {"level":50,"time":1758194567524,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:47: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:47: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:49: 💾 Data synced to files successfully
2025-09-18T16:52:50: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:50: 🔄 Connecting to WhatsApp...
2025-09-18T16:52:52: ✅ WhatsApp connected successfully!
2025-09-18T16:52:55: {"level":50,"time":1758194575692,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:52:55: 🔌 Connection closed. Reason: undefined
2025-09-18T16:52:55: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:52:58: 🔄 Initializing WhatsApp client...
2025-09-18T16:52:58: 🔄 Connecting to WhatsApp...
2025-09-18T16:53:00: ✅ WhatsApp connected successfully!
2025-09-18T16:53:04: {"level":50,"time":1758194584988,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:53:04: 🔌 Connection closed. Reason: undefined
2025-09-18T16:53:04: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:53:07: 🔄 Initializing WhatsApp client...
2025-09-18T16:53:08: 🔄 Connecting to WhatsApp...
2025-09-18T16:53:09: ✅ WhatsApp connected successfully!
2025-09-18T16:53:13: {"level":50,"time":1758194593293,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:53:13: 🔌 Connection closed. Reason: undefined
2025-09-18T16:53:13: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:53:16: 🔄 Initializing WhatsApp client...
2025-09-18T16:53:16: 🔄 Connecting to WhatsApp...
2025-09-18T16:53:17: ✅ WhatsApp connected successfully!
2025-09-18T16:53:19: 💾 Data synced to files successfully
2025-09-18T16:53:21: {"level":50,"time":1758194601679,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:53:21: 🔌 Connection closed. Reason: undefined
2025-09-18T16:53:21: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:53:24: 🔄 Initializing WhatsApp client...
2025-09-18T16:53:24: 🔄 Connecting to WhatsApp...
2025-09-18T16:53:26: ✅ WhatsApp connected successfully!
2025-09-18T16:53:49: 💾 Data synced to files successfully
2025-09-18T16:54:19: 💾 Data synced to files successfully
2025-09-18T16:54:19: [4:54:19 pm] 🔍 Polling all sheets...
2025-09-18T16:54:19: [4:54:19 pm] 📊 Checking Main Orders...
2025-09-18T16:54:20: [4:54:20 pm] 📋 Main Orders: Found 3 data rows
2025-09-18T16:54:20: [4:54:20 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:54:20: [4:54:20 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T16:54:20: [4:54:20 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T16:54:20: [4:54:20 pm] 📋 Row 2: Should send=false
2025-09-18T16:54:20: [4:54:20 pm] 📋 Row 3: Order=TLW17042514, Phone=6375623182 (col 2), Status=Pending, Valid=true
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Checking order TLW17042514 with status "Pending" (cleaned: "pending") for phone 6375623182
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Duplicate check passed for order TLW17042514
2025-09-18T16:54:20: [4:54:20 pm] 📋 Order TLW17042514: Welcome and confirmation already sent - skipping
2025-09-18T16:54:20: [4:54:20 pm] 📋 Row 3: Should send=false
2025-09-18T16:54:20: [4:54:20 pm] 📋 Row 4: Order=TLW17043514, Phone=6375623182 (col 2), Status=Pending, Valid=true
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Checking order TLW17043514 with status "Pending" (cleaned: "pending") for phone 6375623182
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Duplicate check passed for order TLW17043514
2025-09-18T16:54:20: [4:54:20 pm] 🔍 Debug: Checking if "pending" is in trigger statuses: true
2025-09-18T16:54:20: [4:54:20 pm] 📋 Row 4: Should send=true
2025-09-18T16:54:20: [4:54:20 pm] 🎯 Processing order: TLW17043514 for Deepak
2025-09-18T16:54:20: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T16:54:20: ✅ Message sent successfully to 916375623182
2025-09-18T16:54:20: [4:54:20 pm] ✅ Welcome message sent to Deepak
2025-09-18T16:54:20: [4:54:20 pm] 🔄 Trying range format: S4
2025-09-18T16:54:21: [4:54:21 pm] ✅ Updated Main Orders - S4 = Yes (welcome)
2025-09-18T16:54:24: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T16:54:24: ✅ Message sent successfully to 916375623182
2025-09-18T16:54:24: [4:54:24 pm] ✅ order confirmation message sent to Deepak (TLW17043514)
2025-09-18T16:54:24: [4:54:24 pm] 🔄 Trying range format: T4
2025-09-18T16:54:24: [4:54:24 pm] ✅ Updated Main Orders - T4 = Yes (order confirmation)
2025-09-18T16:54:26: [4:54:26 pm] 📊 Checking Fabric Orders...
2025-09-18T16:54:27: [4:54:27 pm] 📋 Fabric Orders: Found 1 data rows
2025-09-18T16:54:27: [4:54:27 pm] 📋 Headers: Order ID | Customer Name | Contact Number | Address | Customer Type | Purchase Date | Payment Status | Session | Note | Brand Name | Fabric For | Fabric Type | Fabric Color | Quantity (meters) | Price per Meter | Fabric Total | Master Order ID | Welcome Notified | Purchase Notified | Payment Notified | Payment Reminder Count | Last Payment Reminder Date | Advance/Partial Payment | Remaining Amount
2025-09-18T16:54:27: [4:54:27 pm] 🔍 DEBUG FABRIC: Order=FAA18092508, rowData[6]="Partial", rowData[8]="NA", status="Partial"
2025-09-18T16:54:27: [4:54:27 pm] 📋 Row 2: Order=FAA18092508, Phone=7375938371 (col 2), Status=Partial, Valid=true
2025-09-18T16:54:27: [4:54:27 pm] 🔍 Debug: Checking order FAA18092508 with status "Partial" (cleaned: "partial") for phone 7375938371
2025-09-18T16:54:27: [4:54:27 pm] 🔍 Debug: Duplicate check passed for order FAA18092508
2025-09-18T16:54:27: [4:54:27 pm] 🔍 Debug: Checking if "partial" is in trigger statuses: true
2025-09-18T16:54:27: [4:54:27 pm] 📋 Row 2: Should send=true
2025-09-18T16:54:27: [4:54:27 pm] 🎯 Processing order: FAA18092508 for Deepak Saini
2025-09-18T16:54:27: [4:54:27 pm] ✅ Marking welcome as notified for Deepak Saini (existing customer)
2025-09-18T16:54:27: [4:54:27 pm] 🔍 Debug Fabric Order Data: {
  "order_id": "FAA18092508",
  "customer_name": "Deepak Saini",
  "phone": "7375938371",
  "garment_type": "Mafatlal Dress Chiffon",
  "status": "Partial",
  "delivery_date": "2025-09-18",
  "purchase_date": "2025-09-18",
  "total_amount": "360",
  "advance_amount": "300",
  "advance_payment": "300",
  "remaining_amount": "60",
  "fabric_brand": "Mafatlal",
  "fabric_for": "Dress",
  "fabric_type": "Mafatlal Dress Chiffon",
  "fabric_color": "Navy",
  "quantity": "1.2",
  "price_per_meter": "300",
  "shop_phone": "8824781960",
  "shop_name": "RS Tailor & Fabric"
}
2025-09-18T16:54:27: [4:54:27 pm] 🔄 Trying range format: S2
2025-09-18T16:54:27: [4:54:27 pm] ✅ Updated Fabric Orders - S2 = Yes (welcome)
2025-09-18T16:54:28: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T16:54:28: ✅ Message sent successfully to 917375938371
2025-09-18T16:54:28: [4:54:28 pm] ✅ fabric purchase confirmation message sent to Deepak Saini (FAA18092508)
2025-09-18T16:54:28: [4:54:28 pm] 🔄 Trying range format: T2
2025-09-18T16:54:28: [4:54:28 pm] ✅ Updated Fabric Orders - T2 = Yes (fabric purchase confirmation)
2025-09-18T16:54:30: [4:54:30 pm] 📊 Checking Combined Orders...
2025-09-18T16:54:31: [4:54:31 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:54:33: [4:54:33 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:54:33: [4:54:33 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:54:33: [4:54:33 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:54:33: [4:54:33 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:54:49: 💾 Data synced to files successfully
2025-09-18T16:55:19: 💾 Data synced to files successfully
2025-09-18T16:55:49: 💾 Data synced to files successfully
2025-09-18T16:56:19: 💾 Data synced to files successfully
2025-09-18T16:56:49: 💾 Data synced to files successfully
2025-09-18T16:57:19: [4:57:19 pm] 🔍 Polling all sheets...
2025-09-18T16:57:19: [4:57:19 pm] 📊 Checking Main Orders...
2025-09-18T16:57:19: 💾 Data synced to files successfully
2025-09-18T16:57:20: [4:57:20 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T16:57:20: [4:57:20 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T16:57:20: [4:57:20 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T16:57:20: [4:57:20 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T16:57:20: [4:57:20 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T16:57:20: [4:57:20 pm] 🔍 Debug: Checking if "pending" is in trigger statuses: true
2025-09-18T16:57:20: [4:57:20 pm] 📋 Row 2: Should send=true
2025-09-18T16:57:20: [4:57:20 pm] 🎯 Processing order: TLW17092514 for Yogendra Singh
2025-09-18T16:57:20: ✅ Message sent to 916350454667@s.whatsapp.net
2025-09-18T16:57:21: ✅ Message sent successfully to 916350454667
2025-09-18T16:57:21: [4:57:21 pm] ✅ Welcome message sent to Yogendra Singh
2025-09-18T16:57:21: [4:57:21 pm] 🔄 Trying range format: S2
2025-09-18T16:57:21: [4:57:21 pm] ✅ Updated Main Orders - S2 = Yes (welcome)
2025-09-18T16:57:24: ✅ Message sent to 916350454667@s.whatsapp.net
2025-09-18T16:57:24: ✅ Message sent successfully to 916350454667
2025-09-18T16:57:24: [4:57:24 pm] ✅ order confirmation message sent to Yogendra Singh (TLW17092514)
2025-09-18T16:57:24: [4:57:24 pm] 🔄 Trying range format: T2
2025-09-18T16:57:25: [4:57:25 pm] ✅ Updated Main Orders - T2 = Yes (order confirmation)
2025-09-18T16:57:27: [4:57:27 pm] 📊 Checking Fabric Orders...
2025-09-18T16:57:27: [4:57:27 pm] 📝 Fabric Orders: No data rows found
2025-09-18T16:57:29: [4:57:29 pm] 📊 Checking Combined Orders...
2025-09-18T16:57:30: [4:57:30 pm] 📝 Combined Orders: No data rows found
2025-09-18T16:57:32: [4:57:32 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T16:57:32: [4:57:32 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T16:57:32: [4:57:32 pm] 💳 Processing enhanced payment reminders...
2025-09-18T16:57:32: [4:57:32 pm] 📝 No orders need enhanced payment reminders
2025-09-18T16:57:35: {"level":50,"time":1758194855527,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:57:35: 🔌 Connection closed. Reason: undefined
2025-09-18T16:57:35: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:57:38: 🔄 Initializing WhatsApp client...
2025-09-18T16:57:38: 🔄 Connecting to WhatsApp...
2025-09-18T16:57:40: ✅ WhatsApp connected successfully!
2025-09-18T16:57:44: {"level":50,"time":1758194864112,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:57:44: 🔌 Connection closed. Reason: undefined
2025-09-18T16:57:44: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:57:47: 🔄 Initializing WhatsApp client...
2025-09-18T16:57:47: 🔄 Connecting to WhatsApp...
2025-09-18T16:57:48: ✅ WhatsApp connected successfully!
2025-09-18T16:57:49: 💾 Data synced to files successfully
2025-09-18T16:57:53: {"level":50,"time":1758194873023,"pid":4840,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T16:57:53: 🔌 Connection closed. Reason: undefined
2025-09-18T16:57:53: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T16:59:22: [4:59:22 pm] 🚀 Starting Tailor Shop Bot...
2025-09-18T16:59:22: [4:59:22 pm] 🔑 Initializing Google Sheets API...
2025-09-18T16:59:22: [4:59:22 pm] ✅ Google Sheets API initialized
2025-09-18T16:59:22: [4:59:22 pm] 📱 Initializing Enhanced WhatsApp client...
2025-09-18T16:59:22: 🔄 Initializing WhatsApp client...
2025-09-18T16:59:22: [4:59:22 pm] ⏳ Waiting for WhatsApp connection...
2025-09-18T16:59:22: [4:59:22 pm] ⏳ Waiting for WhatsApp connection... (1/60)
2025-09-18T16:59:22: 🔄 Connecting to WhatsApp...
2025-09-18T16:59:22: [4:59:22 pm] 🌐 Dashboard running at http://localhost:3001
2025-09-18T16:59:22: [4:59:22 pm] 📊 Open the dashboard to view status and test messages
2025-09-18T16:59:22: 📁 Loaded 0 sent messages from file
2025-09-18T16:59:22: 📁 Loaded 0 customer histories from file
2025-09-18T16:59:22: 📁 Loaded 0 message hashes from file
2025-09-18T16:59:22: 📁 Loaded statistics from file
2025-09-18T16:59:22: ✅ Duplicate Prevention Manager initialized
2025-09-18T16:59:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-18T16:59:24: 📱 QR Code received. Please scan with WhatsApp:
2025-09-18T16:59:24: [47m[30m ▄▄▄▄▄▄▄ ▄  ▄  ▄▄ ▄▄ ▄▄  ▄▄▄▄▄▄▄ ▄▄  ▄ ▄▄▄▄▄▄    ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █  █▀ ▀ ▀ ██ █ █▀▄██  ▀  █▀ █ ▄▀▀▀ ▄█▄▄▄▀██ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ██▀█▀▀█▀▄█▀▄▄█▄█▄█ ▄▄█▄▄▄ ▀█▄▀█████▄▄▄▀▄ ▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀█ █ █ ▄▀█▀▄ █▀█▀▄ █ ▄ █▀█ ▄ ▄ █ ▄ █ █▀█ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄   ▄ ▄▄█ █▀ █ █ ▀▀▀ █▀  ██▀█▄▄▄██ ██  █▀▄▄ ▄█ ▀██ ▀▄▄▄▄▄▄  ▄ [0m
[47m[30m  ▄▀█▀▄▄███▀▀ ▀█▀█▄█ ▄█▀▀▀ ▄ ▄▀█▄ █ ▄▀ █ ▀ █▀██ █▄ ▀█ ▀▀▄▀█ █  [0m
[47m[30m ▄▄█▀ █▄▄▄▀▄▀▄ ██▀▄▀▀▀ ▀▀▄▄▄▄█  █▀▄▄ ██ █  ▄ ▄▄▄█▄▄▀█▄▄▄ ▄██▄  [0m
[47m[30m ▀█ ▄▀ ▄ ▄▄ ▀▀  █▄▀██▄ ▀ ▄ ▄█▀▀▀█ ▀ ▄  █ █ █▀▀█▄▀███  ██ ▀▄█▀▀ [0m
[47m[30m ▀▀▄█▄▄▄█▄▄▀▀▄█▀▀ █▄ ▄ ▀▄▄ █▄▀  ▄█▀ ▄▄▀ ▄ ▄▄ ▄▀▄ ██  █  ▄█ ▀▄▄ [0m
[47m[30m █▄▀ ▄▄▄█ ▄██ ▄██  ▀▀ █▀▀ ▀▀▀ ▀█  ▀▄█▄ ▀▀ █▀ ▄█ ██ ▀▀▄███▀▄ █  [0m
[47m[30m ▄▀▄▀▀▀▄▀ ▀   █   ▀█ █ ▀  █▄▀▀█ ▄ ▀  █ ▀▄ ▄█ ▄▄▄██ ▀▄▄█▀▀▄ ▀▄  [0m
[47m[30m █▀ ▀█▀▄█   █ ████  █▄▀███▄█▀▄█▄  ▀▄▀  ██ █▀ ██▄ ▀ ██ █▀▄▀  ▀▀ [0m
[47m[30m   ▀▄ ▄▄▄ ▄█ ▀█ ▄▄▄▀█  ▀█▄▀▄█▀ █ ▄▄ █▄█ ▀ █████▀ █▄█▀▄▀▀██▄██▄ [0m
[47m[30m  ▀ ▀ █▄█  ▄ █▀  █▄ ▀ ▄▀ ▀   ▄█▀██▄▄▀▀ █▄▄▀▀ ██ ██ ▀ ▄██▀█▀█   [0m
[47m[30m ▀ ▀▀▄█▄█▄▄ █ ▄▀▄ ██▄▀▀ █ ▀█ █▄▄▄█▄█ █ ▀█▀▄ ▀▄▀██▄▀▄████▄▄▀█▄▀ [0m
[47m[30m ▄▀ ▄█ ▄ █  ▄▀  █▀█▀▄ ▀ ▄▀ █▄█ ▄ █     █▀██▀  █  ▀██▀█ ▄ █   ▀ [0m
[47m[30m █ ▀▀█▄▄▄█ ██  ▄▀█▀▀ ▀▀ ▀▄▄▄ █▄▄▄█▀ ██ █▄▀▄ ██████ █▀█▄▄▄█▄▀ █ [0m
[47m[30m ██▄▄  ▄█▀ ▀▄▄▀ █▀▄▄▀  ▀█▀▄ █ ▀  ▄▀ ▄▄ █▀█ █▄▀▀ ██ ██▄ ▀ ██ ▀  [0m
[47m[30m ▀█ █ █▄  ▀█▀██   ▄█  █▀▀█▀█ ▀▀█▀▄ █▀█  █▀▄█ ▄▄ █▄▀▄    ▀▀ █▄█ [0m
[47m[30m ██▄▄██▄▀▄▀█  █▀ ▄ █▀█▀▄█▀██▄█ ▄█▀▀▄██ █ ▄▄█  ▀ ▀ ▄▀██▄ █▀▄▄ ▄ [0m
[47m[30m ▀█ ▄█ ▄ █ ▀▀ ▀█▄▄▄ █▄██▀▄ ▀█▀▄██▄ █ █▄▀  █ ▀▄▀█▄▄█ ▀  ▀▄▀ █▀▄ [0m
[47m[30m █▀ ▄█▀▄  ▄▄▀█ █▄ ▄▀  ▀██▄▀▀██ █▀▀▀▄   █▄▄▀██ █ █  █▀▀▀▀ ▀▄▄ ▀ [0m
[47m[30m ▀█▄▀█▀▄▀ ▄▄█▀▄ ▀▀▀ █ ▀▄▄█ █   ▄▀  ▄▄▄▄▀▄  ▄▀█▄ ▄█▀█▀ █ ▄█ ██▄ [0m
[47m[30m ▄ ▄ ▄ ▄▀▄▀ ▀█  ▀▀   ▀▄ ██▄▀ █▄ ▄▄██▀▄ ▀▀▀█▀ █▄  █ ▀█▄  ▄▀██ ▀ [0m
[47m[30m █▀█▄ █▄ ▄▀█▀█▄█▄ █▄▄ █ ▀█ ▄▄▄ ▄▄ ▀▀█▄█ ▄▀ █ ▄████▀▄▀▄▀▀ █ █▄▄ [0m
[47m[30m ▀ █▄▄▄▄ ▀█ █ ▀ ▀▄█ ▀▀▀▄█▀█▄▄███▄▀▀ ▀▄ ██▀███ █▄██ ▀ ▀▀ ▄██▄█  [0m
[47m[30m ███▄▀ ▄ ▄▄▄▀▄▀█▄  █▄█▄█▄▀█▄█▄▄▄▄▄▄█▄▄ ▄█ ▄▄██▄████ ▀▄██▄▄ █▀▀ [0m
[47m[30m ▄▄▄▄▄▄▄ ██▀█▄▀▀▀▄▀█  ▀▄ ▀█▄▄█ ▄ ██▄ █ ▀█▀██▀ █ ▀ ▄█▄█ ▄ █▄ █  [0m
[47m[30m █ ▄▄▄ █ ▄ █▀█▀▄▀██▄▀▄█▄▄▄▀█ █▄▄▄███▄▄▀█▄▀█▀ █▄▀█▄  ██▄▄▄███▀  [0m
[47m[30m █ ███ █  ▀█▀▀ ▀▄█▄ ▄▀▀▄█▀  ▄▀▀▀ ▀▀  ▀▀██▄█▀▄▄▀▄█▀ ▀██▄ █▀█▀▄▀ [0m
[47m[30m █▄▄▄▄▄█ ▄▄▄  ▀█▀▀  ▀██▀█▄█▄▄ ▄▀▀▄ ▀█▄██▄ ▀▀██ ▀▄██▀▀█ ▄█ ▄▀█▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-18T16:59:24: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-18T16:59:32: [4:59:32 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:59:32: [4:59:32 pm] ⏳ Waiting for WhatsApp connection... (2/60)
2025-09-18T16:59:42: [4:59:42 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:59:42: [4:59:42 pm] ⏳ Waiting for WhatsApp connection... (3/60)
2025-09-18T16:59:52: 💾 Data synced to files successfully
2025-09-18T16:59:52: [4:59:52 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T16:59:52: [4:59:52 pm] ⏳ Waiting for WhatsApp connection... (4/60)
2025-09-18T17:00:02: [5:00:02 pm] 📱 QR Code available - check dashboard to scan
2025-09-18T17:00:02: [5:00:02 pm] ⏳ Waiting for WhatsApp connection... (5/60)
2025-09-18T17:00:05: {"level":50,"time":1758195005458,"pid":16748,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{"code":"515"}},"msg":"stream errored out"}
2025-09-18T17:00:05: 🔌 Connection closed. Reason: undefined
2025-09-18T17:00:05: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T17:00:08: 🔄 Initializing WhatsApp client...
2025-09-18T17:00:08: 🔄 Connecting to WhatsApp...
2025-09-18T17:00:10: ✅ WhatsApp connected successfully!
2025-09-18T17:00:12: [5:00:12 pm] ✅ WhatsApp connected successfully!
2025-09-18T17:00:12: [5:00:12 pm] ✅ Admin commands system initialized
2025-09-18T17:00:12: [5:00:12 pm] 🔄 Starting automatic polling...
2025-09-18T17:00:12: [5:00:12 pm] 🔄 Starting sheet polling...
2025-09-18T17:00:12: [5:00:12 pm] 🔍 Polling all sheets...
2025-09-18T17:00:12: [5:00:12 pm] 📊 Checking Main Orders...
2025-09-18T17:00:12: [5:00:12 pm] ✅ Polling started - checking sheets every 3 minutes
2025-09-18T17:00:12: [5:00:12 pm] ✅ Tailor Shop Bot is ready!
2025-09-18T17:00:12: [5:00:12 pm] 📊 Dashboard: http://localhost:3001
2025-09-18T17:00:13: [5:00:13 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T17:00:13: [5:00:13 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T17:00:13: [5:00:13 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T17:00:13: [5:00:13 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T17:00:13: [5:00:13 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T17:00:13: [5:00:13 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T17:00:13: [5:00:13 pm] 📋 Row 2: Should send=false
2025-09-18T17:00:15: [5:00:15 pm] 📊 Checking Fabric Orders...
2025-09-18T17:00:15: [5:00:15 pm] 📝 Fabric Orders: No data rows found
2025-09-18T17:00:17: [5:00:17 pm] 📊 Checking Combined Orders...
2025-09-18T17:00:18: [5:00:18 pm] 📝 Combined Orders: No data rows found
2025-09-18T17:00:20: [5:00:20 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T17:00:20: [5:00:20 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T17:00:20: [5:00:20 pm] 💳 Processing enhanced payment reminders...
2025-09-18T17:00:20: [5:00:20 pm] 📝 No orders need enhanced payment reminders
2025-09-18T17:00:22: 💾 Data synced to files successfully
2025-09-18T17:00:52: 💾 Data synced to files successfully
2025-09-18T17:01:22: 💾 Data synced to files successfully
2025-09-18T17:01:52: 💾 Data synced to files successfully
2025-09-18T17:02:22: 💾 Data synced to files successfully
2025-09-18T17:02:52: 💾 Data synced to files successfully
2025-09-18T17:03:12: [5:03:12 pm] 🔍 Polling all sheets...
2025-09-18T17:03:12: [5:03:12 pm] 📊 Checking Main Orders...
2025-09-18T17:03:13: [5:03:13 pm] 📋 Main Orders: Found 2 data rows
2025-09-18T17:03:13: [5:03:13 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T17:03:13: [5:03:13 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T17:03:13: [5:03:13 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T17:03:13: [5:03:13 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T17:03:13: [5:03:13 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T17:03:13: [5:03:13 pm] 📋 Row 2: Should send=false
2025-09-18T17:03:13: [5:03:13 pm] 📋 Row 3: Order=TCT18092511, Phone=8094452095 (col 2), Status=Pending, Valid=true
2025-09-18T17:03:13: [5:03:13 pm] 🔍 Debug: Checking order TCT18092511 with status "Pending" (cleaned: "pending") for phone 8094452095
2025-09-18T17:03:13: [5:03:13 pm] 🔍 Debug: Duplicate check passed for order TCT18092511
2025-09-18T17:03:13: [5:03:13 pm] 🔍 Debug: Checking if "pending" is in trigger statuses: true
2025-09-18T17:03:13: [5:03:13 pm] 📋 Row 3: Should send=true
2025-09-18T17:03:13: [5:03:13 pm] 🎯 Processing order: TCT18092511 for Yogesh Saini 
2025-09-18T17:03:14: ✅ Message sent to 918094452095@s.whatsapp.net
2025-09-18T17:03:14: ✅ Message sent successfully to 918094452095
2025-09-18T17:03:14: [5:03:14 pm] ✅ Welcome message sent to Yogesh Saini 
2025-09-18T17:03:14: [5:03:14 pm] 🔄 Trying range format: S3
2025-09-18T17:03:14: [5:03:14 pm] ✅ Updated Main Orders - S3 = Yes (welcome)
2025-09-18T17:03:17: ✅ Message sent to 918094452095@s.whatsapp.net
2025-09-18T17:03:17: ✅ Message sent successfully to 918094452095
2025-09-18T17:03:17: [5:03:17 pm] ✅ order confirmation message sent to Yogesh Saini  (TCT18092511)
2025-09-18T17:03:17: [5:03:17 pm] 🔄 Trying range format: T3
2025-09-18T17:03:17: 📨 Received message from: 918094452095@s.whatsapp.net
2025-09-18T17:03:17: [5:03:17 pm] 📨 Raw message from: 918094452095@s.whatsapp.net, type: notify
2025-09-18T17:03:17: [5:03:17 pm] 📨 Message from 918094452095@s.whatsapp.net has no text content
2025-09-18T17:03:18: [5:03:18 pm] ✅ Updated Main Orders - T3 = Yes (order confirmation)
2025-09-18T17:03:20: [5:03:20 pm] 📊 Checking Fabric Orders...
2025-09-18T17:03:20: [5:03:20 pm] 📝 Fabric Orders: No data rows found
2025-09-18T17:03:22: 💾 Data synced to files successfully
2025-09-18T17:03:22: [5:03:22 pm] 📊 Checking Combined Orders...
2025-09-18T17:03:22: [5:03:22 pm] 📝 Combined Orders: No data rows found
2025-09-18T17:03:24: [5:03:24 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T17:03:24: [5:03:24 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T17:03:24: [5:03:24 pm] 💳 Processing enhanced payment reminders...
2025-09-18T17:03:24: [5:03:24 pm] 📝 No orders need enhanced payment reminders
2025-09-18T17:03:52: 💾 Data synced to files successfully
2025-09-18T17:04:22: 💾 Data synced to files successfully
2025-09-18T17:04:52: 💾 Data synced to files successfully
2025-09-18T17:05:22: 💾 Data synced to files successfully
2025-09-18T17:05:52: 💾 Data synced to files successfully
2025-09-18T17:06:12: [5:06:12 pm] 🔍 Polling all sheets...
2025-09-18T17:06:12: [5:06:12 pm] 📊 Checking Main Orders...
2025-09-18T17:06:13: [5:06:13 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T17:06:13: [5:06:13 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T17:06:13: [5:06:13 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T17:06:13: [5:06:13 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T17:06:13: [5:06:13 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T17:06:13: [5:06:13 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T17:06:13: [5:06:13 pm] 📋 Row 2: Should send=false
2025-09-18T17:06:15: [5:06:15 pm] 📊 Checking Fabric Orders...
2025-09-18T17:06:16: [5:06:16 pm] 📝 Fabric Orders: No data rows found
2025-09-18T17:06:18: [5:06:18 pm] 📊 Checking Combined Orders...
2025-09-18T17:06:18: [5:06:18 pm] 📝 Combined Orders: No data rows found
2025-09-18T17:06:20: [5:06:20 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T17:06:20: [5:06:20 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T17:06:20: [5:06:20 pm] 💳 Processing enhanced payment reminders...
2025-09-18T17:06:20: [5:06:20 pm] 📝 No orders need enhanced payment reminders
2025-09-18T17:06:22: 💾 Data synced to files successfully
2025-09-18T17:06:52: 💾 Data synced to files successfully
2025-09-18T17:07:22: 💾 Data synced to files successfully
2025-09-18T17:07:52: 💾 Data synced to files successfully
2025-09-18T17:08:22: 💾 Data synced to files successfully
2025-09-18T17:08:52: 💾 Data synced to files successfully
2025-09-18T17:08:58: 🔌 Connection closed. Reason: undefined
2025-09-18T17:08:58: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T17:08:58: {"level":50,"time":1758195538578,"pid":16748,"hostname":"SAURABH","msg":"error in sending keep alive"}
2025-09-18T17:09:01: 🔄 Initializing WhatsApp client...
2025-09-18T17:09:01: 🔄 Connecting to WhatsApp...
2025-09-18T17:09:01: 🔌 Connection closed. Reason: undefined
2025-09-18T17:09:01: 🔄 Reconnecting... (Attempt 2/5)
2025-09-18T17:09:04: 🔄 Initializing WhatsApp client...
2025-09-18T17:09:04: 🔄 Connecting to WhatsApp...
2025-09-18T17:09:04: 🔌 Connection closed. Reason: undefined
2025-09-18T17:09:04: 🔄 Reconnecting... (Attempt 3/5)
2025-09-18T17:09:07: 🔄 Initializing WhatsApp client...
2025-09-18T17:09:07: 🔄 Connecting to WhatsApp...
2025-09-18T17:09:07: 🔌 Connection closed. Reason: undefined
2025-09-18T17:09:07: 🔄 Reconnecting... (Attempt 4/5)
2025-09-18T17:09:10: 🔄 Initializing WhatsApp client...
2025-09-18T17:09:10: 🔄 Connecting to WhatsApp...
2025-09-18T17:09:10: 🔌 Connection closed. Reason: undefined
2025-09-18T17:09:10: 🔄 Reconnecting... (Attempt 5/5)
2025-09-18T17:09:12: [5:09:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:09:13: 🔄 Initializing WhatsApp client...
2025-09-18T17:09:13: 🔄 Connecting to WhatsApp...
2025-09-18T17:09:13: 🔌 Connection closed. Reason: undefined
2025-09-18T17:09:13: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-18T17:09:22: 💾 Data synced to files successfully
2025-09-18T17:09:52: 💾 Data synced to files successfully
2025-09-18T17:10:22: 💾 Data synced to files successfully
2025-09-18T17:10:52: 💾 Data synced to files successfully
2025-09-18T17:11:22: 💾 Data synced to files successfully
2025-09-18T17:11:52: 💾 Data synced to files successfully
2025-09-18T17:12:12: [5:12:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:12:22: 💾 Data synced to files successfully
2025-09-18T17:12:52: 💾 Data synced to files successfully
2025-09-18T17:13:22: 💾 Data synced to files successfully
2025-09-18T17:13:52: 💾 Data synced to files successfully
2025-09-18T17:14:22: 💾 Data synced to files successfully
2025-09-18T17:14:52: 💾 Data synced to files successfully
2025-09-18T17:15:12: [5:15:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:15:22: 💾 Data synced to files successfully
2025-09-18T17:15:52: 💾 Data synced to files successfully
2025-09-18T17:16:22: 💾 Data synced to files successfully
2025-09-18T17:16:52: 💾 Data synced to files successfully
2025-09-18T17:17:22: 💾 Data synced to files successfully
2025-09-18T17:17:52: 💾 Data synced to files successfully
2025-09-18T17:18:12: [5:18:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:18:22: 💾 Data synced to files successfully
2025-09-18T17:18:52: 💾 Data synced to files successfully
2025-09-18T17:19:22: 💾 Data synced to files successfully
2025-09-18T17:19:52: 💾 Data synced to files successfully
2025-09-18T17:20:22: 💾 Data synced to files successfully
2025-09-18T17:20:52: 💾 Data synced to files successfully
2025-09-18T17:21:12: [5:21:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:21:22: 💾 Data synced to files successfully
2025-09-18T17:21:52: 💾 Data synced to files successfully
2025-09-18T17:22:22: 💾 Data synced to files successfully
2025-09-18T17:22:52: 💾 Data synced to files successfully
2025-09-18T17:23:22: 💾 Data synced to files successfully
2025-09-18T17:23:52: 💾 Data synced to files successfully
2025-09-18T17:24:12: [5:24:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:24:22: 💾 Data synced to files successfully
2025-09-18T17:24:52: 💾 Data synced to files successfully
2025-09-18T17:25:22: 💾 Data synced to files successfully
2025-09-18T17:25:52: 💾 Data synced to files successfully
2025-09-18T17:26:22: 💾 Data synced to files successfully
2025-09-18T17:26:52: 💾 Data synced to files successfully
2025-09-18T17:27:12: [5:27:12 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T17:40:17: [5:40:17 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T18:25:18: [6:25:18 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T18:25:18: 💾 Data synced to files successfully
2025-09-18T18:25:18: 💾 Data synced to files successfully
2025-09-18T18:25:48: 💾 Data synced to files successfully
2025-09-18T18:26:18: 💾 Data synced to files successfully
2025-09-18T18:26:48: 💾 Data synced to files successfully
2025-09-18T18:27:18: 💾 Data synced to files successfully
2025-09-18T18:27:48: 💾 Data synced to files successfully
2025-09-18T18:28:18: [6:28:18 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T18:28:18: 💾 Data synced to files successfully
2025-09-18T18:28:48: 💾 Data synced to files successfully
2025-09-18T18:29:18: 💾 Data synced to files successfully
2025-09-18T18:53:23: [6:53:23 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T18:53:23: 💾 Data synced to files successfully
2025-09-18T18:53:53: 💾 Data synced to files successfully
2025-09-18T18:54:23: 💾 Data synced to files successfully
2025-09-18T18:54:53: 💾 Data synced to files successfully
2025-09-18T18:55:23: 💾 Data synced to files successfully
2025-09-18T18:55:53: 💾 Data synced to files successfully
2025-09-18T18:56:23: [6:56:23 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T18:56:23: 💾 Data synced to files successfully
2025-09-18T18:56:53: 💾 Data synced to files successfully
2025-09-18T18:57:23: 💾 Data synced to files successfully
2025-09-18T18:57:53: 💾 Data synced to files successfully
2025-09-18T18:58:23: 💾 Data synced to files successfully
2025-09-18T18:58:53: 💾 Data synced to files successfully
2025-09-18T18:59:23: [6:59:23 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T18:59:23: 💾 Data synced to files successfully
2025-09-18T18:59:53: 💾 Data synced to files successfully
2025-09-18T19:00:23: 💾 Data synced to files successfully
2025-09-18T19:00:53: 💾 Data synced to files successfully
2025-09-18T19:01:23: 💾 Data synced to files successfully
2025-09-18T19:01:53: 💾 Data synced to files successfully
2025-09-18T19:02:23: [7:02:23 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T19:02:23: 💾 Data synced to files successfully
2025-09-18T19:02:53: 💾 Data synced to files successfully
2025-09-18T19:03:23: 💾 Data synced to files successfully
2025-09-18T19:03:53: 💾 Data synced to files successfully
2025-09-18T19:04:23: 💾 Data synced to files successfully
2025-09-18T19:04:53: 💾 Data synced to files successfully
2025-09-18T19:05:23: [7:05:23 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T19:05:23: 💾 Data synced to files successfully
2025-09-18T19:05:53: 💾 Data synced to files successfully
2025-09-18T19:06:23: 💾 Data synced to files successfully
2025-09-18T19:06:53: 💾 Data synced to files successfully
2025-09-18T19:07:23: 💾 Data synced to files successfully
2025-09-18T19:07:53: 💾 Data synced to files successfully
2025-09-18T19:08:23: [7:08:23 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T19:08:23: 💾 Data synced to files successfully
2025-09-18T19:08:53: 💾 Data synced to files successfully
2025-09-18T19:09:11: [7:09:11 pm] 🚀 Starting Tailor Shop Bot...
2025-09-18T19:09:11: [7:09:11 pm] 🔑 Initializing Google Sheets API...
2025-09-18T19:09:11: [7:09:11 pm] ✅ Google Sheets API initialized
2025-09-18T19:09:11: [7:09:11 pm] 📱 Initializing Enhanced WhatsApp client...
2025-09-18T19:09:11: 🔄 Initializing WhatsApp client...
2025-09-18T19:09:11: 📁 Loaded 0 sent messages from file
2025-09-18T19:09:11: [7:09:11 pm] ⏳ Waiting for WhatsApp connection...
2025-09-18T19:09:11: [7:09:11 pm] ⏳ Waiting for WhatsApp connection... (1/60)
2025-09-18T19:09:11: 🔄 Connecting to WhatsApp...
2025-09-18T19:09:11: [7:09:11 pm] 🌐 Dashboard running at http://localhost:3001
2025-09-18T19:09:11: [7:09:11 pm] 📊 Open the dashboard to view status and test messages
2025-09-18T19:09:11: 📁 Loaded 0 customer histories from file
2025-09-18T19:09:11: 📁 Loaded 0 message hashes from file
2025-09-18T19:09:11: 📁 Loaded statistics from file
2025-09-18T19:09:11: ✅ Duplicate Prevention Manager initialized
2025-09-18T19:09:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-18T19:09:12: {"level":50,"time":1758202752839,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"3ABB0169F050AC77FD29","participant":"916367374800@s.whatsapp.net","participantLid":"171798893191303@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 916367374800.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:12: {"level":50,"time":1758202752842,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"3ABB0169F050AC77FD29","participant":"916367374800@s.whatsapp.net","participantLid":"171798893191303@lid"},"err":{"type":"Error","message":"No session found to decrypt message","stack":"Error: No session found to decrypt message\n    at Object.awaitable (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Signal/Group/group_cipher.js:43:23)\n    at async _asyncQueueExecutor (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Signal/Group/queue-job.js:10:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:12: {"level":50,"time":1758202752852,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"ACE10AFE81ED6456733BA53E951177E0","participant":"919950291264@s.whatsapp.net","participantLid":"147381937016897@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 919950291264.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:12: {"level":50,"time":1758202752854,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"ACE10AFE81ED6456733BA53E951177E0","participant":"919950291264@s.whatsapp.net","participantLid":"147381937016897@lid"},"err":{"type":"Error","message":"No session found to decrypt message","stack":"Error: No session found to decrypt message\n    at Object.awaitable (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Signal/Group/group_cipher.js:43:23)\n    at async _asyncQueueExecutor (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Signal/Group/queue-job.js:10:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:13: ✅ WhatsApp connected successfully!
2025-09-18T19:09:21: Closing stale open session for new outgoing prekey bundle
2025-09-18T19:09:21: Closing session: SessionEntry {
  _chains: {
    BTSDCtaggWbe6ssNmrXFIMGv68MoWpObBZt1DsiD0ssJ: { chainKey: [Object], chainType: 2, messageKeys: {} },
    'BRjzpSmxflWHxOC0QlRw158G4skMvD9GmP+iRSxWn9kt': { chainKey: [Object], chainType: 1, messageKeys: {} }
  },
  registrationId: 1921195293,
  currentRatchet: {
    ephemeralKeyPair: {
      pubKey: <Buffer 05 18 f3 a5 29 b1 7e 55 87 c4 e0 b4 42 54 70 d7 9f 06 e2 c9 0c bc 3f 46 98 ff a2 45 2c 56 9f d9 2d>,
      privKey: <Buffer 38 fb 48 17 6f a2 48 62 49 0a ed 6a 5e 97 05 8e 68 93 d6 e8 ce a6 d0 e5 ad 84 70 bf 5d 35 a2 74>
    },
    lastRemoteEphemeralKey: <Buffer 05 34 83 0a d6 a0 81 66 de ea cb 0d 9a b5 c5 20 c1 af eb c3 28 5a 93 9b 05 9b 75 0e c8 83 d2 cb 09>,
    previousCounter: 0,
    rootKey: <Buffer f6 8e a1 e1 70 5d 1d f2 e8 52 ae 77 ad 82 4c 85 9c fc 6e 3f 5e 89 6c 92 4b 34 95 6f 0b 0d 6a 0a>
  },
  indexInfo: {
    baseKey: <Buffer 05 f8 7c 72 e7 c7 4b cc 15 e9 60 71 bd b9 ab 64 20 cd f1 7e cb 00 45 f3 a6 87 49 24 15 9e d2 fa 29>,
    baseKeyType: 2,
    closed: -1,
    used: 1758195011024,
    created: 1758195011024,
    remoteIdentityKey: <Buffer 05 90 75 8a f9 4f 73 b0 e2 db 39 76 9f 0e 99 6b 07 f2 61 23 23 45 ff f4 f1 4d e8 11 a3 35 1b dc 09>
  }
}
2025-09-18T19:09:21: {"level":50,"time":1758202761341,"pid":18376,"hostname":"SAURABH","key":{"id":"","fromMe":true,"participant":"918824781960@s.whatsapp.net"},"ids":["3EB05CDD487523BF41CF94"],"trace":"TypeError: Cannot destructure property 'user' of 'jidDecode(...)' as it is undefined.\n    at relayMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:257:17)\n    at sendMessagesAgain (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:493:23)\n    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:557:37\n    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/make-mutex.js:16:36\n    at async Promise.all (index 0)\n    at async handleReceipt (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:523:13)\n    at async processNodeWithBuffer (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:842:9)","msg":"error in sending message again"}
2025-09-18T19:09:21: {"level":50,"time":1758202761473,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"3ABB0169F050AC77FD29","participant":"916367374800@s.whatsapp.net","participantLid":"171798893191303@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 916367374800.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:21: 📨 Received message from: status@broadcast
2025-09-18T19:09:21: [7:09:21 pm] ✅ WhatsApp connected successfully!
2025-09-18T19:09:21: [7:09:21 pm] ✅ Admin commands system initialized
2025-09-18T19:09:21: [7:09:21 pm] 🔄 Starting automatic polling...
2025-09-18T19:09:21: [7:09:21 pm] 🔄 Starting sheet polling...
2025-09-18T19:09:21: [7:09:21 pm] 🔍 Polling all sheets...
2025-09-18T19:09:21: [7:09:21 pm] 📊 Checking Main Orders...
2025-09-18T19:09:21: [7:09:21 pm] ✅ Polling started - checking sheets every 3 minutes
2025-09-18T19:09:21: [7:09:21 pm] ✅ Tailor Shop Bot is ready!
2025-09-18T19:09:21: [7:09:21 pm] 📊 Dashboard: http://localhost:3001
2025-09-18T19:09:22: [7:09:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:09:22: [7:09:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:09:22: [7:09:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:09:22: [7:09:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:09:22: [7:09:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:09:22: [7:09:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:09:22: [7:09:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:09:24: [7:09:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:09:25: [7:09:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:09:25: {"level":50,"time":1758202765751,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"ACE10AFE81ED6456733BA53E951177E0","participant":"919950291264@s.whatsapp.net","participantLid":"147381937016897@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 919950291264.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:25: 📨 Received message from: status@broadcast
2025-09-18T19:09:25: [7:09:25 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:25: [7:09:25 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:26: {"level":50,"time":1758202766120,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"3ABB0169F050AC77FD29","participant":"916367374800@s.whatsapp.net","participantLid":"171798893191303@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 916367374800.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:26: 📨 Received message from: status@broadcast
2025-09-18T19:09:26: [7:09:26 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:26: [7:09:26 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:26: 📨 Received message from: status@broadcast
2025-09-18T19:09:26: [7:09:26 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:26: [7:09:26 pm] 📨 Received message from: status@broadcast
2025-09-18T19:09:26: [7:09:26 pm] 📨 Message text: "Check out this video on Moj: https://mojapp.in/@poija5120/video/3794805110?referrer=Ux9QPuf-vRyidL-3&source=link"
2025-09-18T19:09:26: [7:09:26 pm] 📨 Processing admin command...
2025-09-18T19:09:26: {"level":30,"time":1758202766246,"pid":18376,"hostname":"SAURABH","msg":"Admin commands received message: \"Check out this video on Moj: https://mojapp.in/@poija5120/video/3794805110?referrer=Ux9QPuf-vRyidL-3&source=link\" from status@broadcast"}
2025-09-18T19:09:26: {"level":30,"time":1758202766246,"pid":18376,"hostname":"SAURABH","msg":"Checking if sender status@broadcast is admin. Admin phones: 917375938371, 919166758467, 916375623182"}
2025-09-18T19:09:26: {"level":30,"time":1758202766247,"pid":18376,"hostname":"SAURABH","msg":"Sender status@broadcast is not an admin"}
2025-09-18T19:09:26: {"level":30,"time":1758202766247,"pid":18376,"hostname":"SAURABH","msg":"Message not from admin, ignoring. Sender: status@broadcast"}
2025-09-18T19:09:27: [7:09:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:09:27: {"level":50,"time":1758202767443,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"ACE10AFE81ED6456733BA53E951177E0","participant":"919950291264@s.whatsapp.net","participantLid":"147381937016897@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 919950291264.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:27: 📨 Received message from: status@broadcast
2025-09-18T19:09:27: [7:09:27 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:27: [7:09:27 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:28: [7:09:28 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:09:28: [7:09:28 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:09:28: [7:09:28 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:09:28: [7:09:28 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:09:28: [7:09:28 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:09:28: [7:09:28 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:09:28: [7:09:28 pm] 📋 Row 2: Should send=false
2025-09-18T19:09:28: [7:09:28 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:09:28: {"level":50,"time":1758202768102,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"3ABB0169F050AC77FD29","participant":"916367374800@s.whatsapp.net","participantLid":"171798893191303@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 916367374800.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:28: 📨 Received message from: status@broadcast
2025-09-18T19:09:28: [7:09:28 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:28: [7:09:28 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:28: {"level":50,"time":1758202768776,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"ACE10AFE81ED6456733BA53E951177E0","participant":"919950291264@s.whatsapp.net","participantLid":"147381937016897@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 919950291264.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:28: 📨 Received message from: status@broadcast
2025-09-18T19:09:28: [7:09:28 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:28: [7:09:28 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:30: {"level":50,"time":1758202770000,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"ACE10AFE81ED6456733BA53E951177E0","participant":"919950291264@s.whatsapp.net","participantLid":"147381937016897@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 919950291264.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:30: 📨 Received message from: status@broadcast
2025-09-18T19:09:30: [7:09:30 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:30: [7:09:30 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:30: [7:09:30 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:09:30: [7:09:30 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:09:30: [7:09:30 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:09:30: [7:09:30 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:09:30: {"level":50,"time":1758202770313,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"status@broadcast","fromMe":false,"id":"3ABB0169F050AC77FD29","participant":"916367374800@s.whatsapp.net","participantLid":"171798893191303@lid"},"err":{"type":"Error","message":"Bad MAC","stack":"Error: Bad MAC\n    at Object.verifyMAC (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\crypto.js:87:15)\n    at SessionCipher.doDecryptWhisperMessage (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:250:16)\n    at async 916367374800.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:207:31)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)"},"msg":"failed to decrypt message"}
2025-09-18T19:09:30: 📨 Received message from: status@broadcast
2025-09-18T19:09:30: [7:09:30 pm] 📨 Raw message from: status@broadcast, type: notify
2025-09-18T19:09:30: [7:09:30 pm] 📨 Message from status@broadcast has no text content
2025-09-18T19:09:41: 💾 Data synced to files successfully
2025-09-18T19:10:11: 💾 Data synced to files successfully
2025-09-18T19:10:31: {"level":50,"time":1758202831822,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"917375938371@s.whatsapp.net","fromMe":false,"id":"AC281BC05D62D9635A14C1437B696EF0","senderLid":"13018096242760@lid"},"err":{"type":"SessionError","message":"No session record","stack":"SessionError: No session record\n    at 917375938371.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:169:23)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)","name":"SessionError"},"msg":"failed to decrypt message"}
2025-09-18T19:10:31: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:10:31: [7:10:31 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:10:31: [7:10:31 pm] 📨 Message from 917375938371@s.whatsapp.net has no text content
2025-09-18T19:10:37: {"level":50,"time":1758202837571,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"917375938371@s.whatsapp.net","fromMe":false,"id":"AC281BC05D62D9635A14C1437B696EF0","senderLid":"13018096242760@lid"},"err":{"type":"SessionError","message":"No session record","stack":"SessionError: No session record\n    at 917375938371.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:169:23)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)","name":"SessionError"},"msg":"failed to decrypt message"}
2025-09-18T19:10:37: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:10:37: [7:10:37 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:10:37: [7:10:37 pm] 📨 Message from 917375938371@s.whatsapp.net has no text content
2025-09-18T19:10:38: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:10:38: [7:10:38 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:10:38: [7:10:38 pm] 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:10:38: [7:10:38 pm] 📨 Message text: "STATUS"
2025-09-18T19:10:38: [7:10:38 pm] 📨 Processing admin command...
2025-09-18T19:10:38: {"level":30,"time":1758202838289,"pid":18376,"hostname":"SAURABH","msg":"Admin commands received message: \"STATUS\" from 917375938371@s.whatsapp.net"}
2025-09-18T19:10:38: {"level":30,"time":1758202838289,"pid":18376,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182"}
2025-09-18T19:10:38: {"level":30,"time":1758202838290,"pid":18376,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-18T19:10:38: {"level":30,"time":1758202838290,"pid":18376,"hostname":"SAURABH","msg":"Admin command received: STATUS from 917375938371@s.whatsapp.net"}
2025-09-18T19:10:40: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T19:10:40: ✅ Message sent successfully to 917375938371
2025-09-18T19:10:40: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-18T19:10:40: ✅ Message sent successfully to 919166758467
2025-09-18T19:10:41: 💾 Data synced to files successfully
2025-09-18T19:10:41: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T19:10:41: ✅ Message sent successfully to 916375623182
2025-09-18T19:10:45: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:10:45: [7:10:45 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:10:45: [7:10:45 pm] 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:10:45: [7:10:45 pm] 📨 Message text: "STATUS"
2025-09-18T19:10:45: [7:10:45 pm] 📨 Processing admin command...
2025-09-18T19:10:45: {"level":30,"time":1758202845582,"pid":18376,"hostname":"SAURABH","msg":"Admin commands received message: \"STATUS\" from 917375938371@s.whatsapp.net"}
2025-09-18T19:10:45: {"level":30,"time":1758202845582,"pid":18376,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182"}
2025-09-18T19:10:45: {"level":30,"time":1758202845582,"pid":18376,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-18T19:10:45: {"level":30,"time":1758202845582,"pid":18376,"hostname":"SAURABH","msg":"Admin command received: STATUS from 917375938371@s.whatsapp.net"}
2025-09-18T19:10:46: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T19:10:46: ✅ Message sent successfully to 917375938371
2025-09-18T19:10:46: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-18T19:10:46: ✅ Message sent successfully to 919166758467
2025-09-18T19:10:47: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T19:10:47: ✅ Message sent successfully to 916375623182
2025-09-18T19:11:11: 💾 Data synced to files successfully
2025-09-18T19:11:41: 💾 Data synced to files successfully
2025-09-18T19:12:11: 💾 Data synced to files successfully
2025-09-18T19:12:21: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:12:21: [7:12:21 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:12:21: [7:12:21 pm] 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:12:21: [7:12:21 pm] 📨 Message text: "HELP"
2025-09-18T19:12:21: [7:12:21 pm] 📨 Processing admin command...
2025-09-18T19:12:21: {"level":30,"time":1758202941433,"pid":18376,"hostname":"SAURABH","msg":"Admin commands received message: \"HELP\" from 917375938371@s.whatsapp.net"}
2025-09-18T19:12:21: {"level":30,"time":1758202941433,"pid":18376,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182"}
2025-09-18T19:12:21: {"level":30,"time":1758202941433,"pid":18376,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-18T19:12:21: {"level":30,"time":1758202941433,"pid":18376,"hostname":"SAURABH","msg":"Admin command received: HELP from 917375938371@s.whatsapp.net"}
2025-09-18T19:12:21: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T19:12:21: ✅ Message sent successfully to 917375938371
2025-09-18T19:12:21: [7:12:21 pm] 🔍 Polling all sheets...
2025-09-18T19:12:21: [7:12:21 pm] 📊 Checking Main Orders...
2025-09-18T19:12:21: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-18T19:12:21: ✅ Message sent successfully to 919166758467
2025-09-18T19:12:22: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T19:12:22: ✅ Message sent successfully to 916375623182
2025-09-18T19:12:22: [7:12:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:12:22: [7:12:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:12:22: [7:12:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:12:22: [7:12:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:12:22: [7:12:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:12:22: [7:12:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:12:22: [7:12:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:12:24: [7:12:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:12:25: [7:12:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:12:27: [7:12:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:12:27: [7:12:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:12:27: [7:12:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:12:27: [7:12:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:12:27: [7:12:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:12:27: [7:12:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:12:27: [7:12:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:12:27: [7:12:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:12:27: [7:12:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:12:29: [7:12:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:12:29: [7:12:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:12:29: [7:12:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:12:29: [7:12:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:12:41: 💾 Data synced to files successfully
2025-09-18T19:13:05: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:13:05: [7:13:05 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:13:05: [7:13:05 pm] 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:13:05: [7:13:05 pm] 📨 Message text: "TEMPLATE LIST"
2025-09-18T19:13:05: [7:13:05 pm] 📨 Processing admin command...
2025-09-18T19:13:05: {"level":30,"time":1758202985412,"pid":18376,"hostname":"SAURABH","msg":"Admin commands received message: \"TEMPLATE LIST\" from 917375938371@s.whatsapp.net"}
2025-09-18T19:13:05: {"level":30,"time":1758202985412,"pid":18376,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182"}
2025-09-18T19:13:05: {"level":30,"time":1758202985412,"pid":18376,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-18T19:13:05: {"level":30,"time":1758202985413,"pid":18376,"hostname":"SAURABH","msg":"Admin command received: TEMPLATE LIST from 917375938371@s.whatsapp.net"}
2025-09-18T19:13:05: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T19:13:05: ✅ Message sent successfully to 917375938371
2025-09-18T19:13:05: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-18T19:13:05: ✅ Message sent successfully to 919166758467
2025-09-18T19:13:06: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T19:13:06: ✅ Message sent successfully to 916375623182
2025-09-18T19:13:11: 💾 Data synced to files successfully
2025-09-18T19:13:41: 💾 Data synced to files successfully
2025-09-18T19:14:11: 💾 Data synced to files successfully
2025-09-18T19:14:41: 💾 Data synced to files successfully
2025-09-18T19:14:57: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:14:57: [7:14:57 pm] 📨 Raw message from: 917375938371@s.whatsapp.net, type: notify
2025-09-18T19:14:57: [7:14:57 pm] 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T19:14:57: [7:14:57 pm] 📨 Message text: "ORDERS"
2025-09-18T19:14:57: [7:14:57 pm] 📨 Processing admin command...
2025-09-18T19:14:57: {"level":30,"time":1758203097340,"pid":18376,"hostname":"SAURABH","msg":"Admin commands received message: \"ORDERS\" from 917375938371@s.whatsapp.net"}
2025-09-18T19:14:57: {"level":30,"time":1758203097340,"pid":18376,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182"}
2025-09-18T19:14:57: {"level":30,"time":1758203097340,"pid":18376,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-18T19:14:57: {"level":30,"time":1758203097340,"pid":18376,"hostname":"SAURABH","msg":"Admin command received: ORDERS from 917375938371@s.whatsapp.net"}
2025-09-18T19:14:58: [7:14:58 pm] ❌ Error getting all orders: Unable to parse range: Main Orders!A:Z
2025-09-18T19:14:58: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T19:14:58: ✅ Message sent successfully to 917375938371
2025-09-18T19:14:58: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-18T19:14:58: ✅ Message sent successfully to 919166758467
2025-09-18T19:14:58: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-18T19:14:58: ✅ Message sent successfully to 916375623182
2025-09-18T19:15:11: 💾 Data synced to files successfully
2025-09-18T19:15:21: [7:15:21 pm] 🔍 Polling all sheets...
2025-09-18T19:15:21: [7:15:21 pm] 📊 Checking Main Orders...
2025-09-18T19:15:22: [7:15:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:15:22: [7:15:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:15:22: [7:15:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:15:22: [7:15:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:15:22: [7:15:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:15:22: [7:15:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:15:22: [7:15:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:15:24: [7:15:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:15:24: [7:15:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:15:26: [7:15:26 pm] 📊 Checking Combined Orders...
2025-09-18T19:15:27: [7:15:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:15:27: [7:15:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:15:27: [7:15:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:15:27: [7:15:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:15:27: [7:15:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:15:27: [7:15:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:15:27: [7:15:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:15:27: [7:15:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:15:29: [7:15:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:15:29: [7:15:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:15:29: [7:15:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:15:29: [7:15:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:15:41: 💾 Data synced to files successfully
2025-09-18T19:16:11: 💾 Data synced to files successfully
2025-09-18T19:16:41: 💾 Data synced to files successfully
2025-09-18T19:17:11: 💾 Data synced to files successfully
2025-09-18T19:17:41: 💾 Data synced to files successfully
2025-09-18T19:18:11: 💾 Data synced to files successfully
2025-09-18T19:18:21: [7:18:21 pm] 🔍 Polling all sheets...
2025-09-18T19:18:21: [7:18:21 pm] 📊 Checking Main Orders...
2025-09-18T19:18:22: [7:18:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:18:22: [7:18:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:18:22: [7:18:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:18:22: [7:18:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:18:22: [7:18:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:18:22: [7:18:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:18:22: [7:18:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:18:24: [7:18:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:18:25: [7:18:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:18:27: [7:18:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:18:27: [7:18:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:18:27: [7:18:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:18:27: [7:18:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:18:27: [7:18:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:18:27: [7:18:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:18:27: [7:18:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:18:27: [7:18:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:18:27: [7:18:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:18:29: [7:18:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:18:29: [7:18:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:18:29: [7:18:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:18:29: [7:18:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:18:41: 💾 Data synced to files successfully
2025-09-18T19:19:11: 💾 Data synced to files successfully
2025-09-18T19:19:41: 💾 Data synced to files successfully
2025-09-18T19:20:11: 💾 Data synced to files successfully
2025-09-18T19:20:41: 💾 Data synced to files successfully
2025-09-18T19:21:11: 💾 Data synced to files successfully
2025-09-18T19:21:21: [7:21:21 pm] 🔍 Polling all sheets...
2025-09-18T19:21:21: [7:21:21 pm] 📊 Checking Main Orders...
2025-09-18T19:21:22: [7:21:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:21:22: [7:21:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:21:22: [7:21:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:21:22: [7:21:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:21:22: [7:21:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:21:22: [7:21:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:21:22: [7:21:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:21:24: [7:21:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:21:24: [7:21:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:21:27: [7:21:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:21:27: [7:21:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:21:27: [7:21:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:21:27: [7:21:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:21:27: [7:21:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:21:27: [7:21:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:21:27: [7:21:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:21:27: [7:21:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:21:27: [7:21:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:21:29: [7:21:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:21:29: [7:21:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:21:29: [7:21:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:21:29: [7:21:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:21:41: 💾 Data synced to files successfully
2025-09-18T19:22:11: 💾 Data synced to files successfully
2025-09-18T19:22:41: 💾 Data synced to files successfully
2025-09-18T19:23:11: 💾 Data synced to files successfully
2025-09-18T19:23:41: 💾 Data synced to files successfully
2025-09-18T19:24:11: 💾 Data synced to files successfully
2025-09-18T19:24:21: [7:24:21 pm] 🔍 Polling all sheets...
2025-09-18T19:24:21: [7:24:21 pm] 📊 Checking Main Orders...
2025-09-18T19:24:22: [7:24:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:24:22: [7:24:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:24:22: [7:24:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:24:22: [7:24:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:24:22: [7:24:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:24:22: [7:24:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:24:22: [7:24:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:24:24: [7:24:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:24:26: [7:24:26 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:24:28: [7:24:28 pm] 📊 Checking Combined Orders...
2025-09-18T19:24:29: [7:24:29 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:24:29: [7:24:29 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:24:29: [7:24:29 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:24:29: [7:24:29 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:24:29: [7:24:29 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:24:29: [7:24:29 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:24:29: [7:24:29 pm] 📋 Row 2: Should send=false
2025-09-18T19:24:29: [7:24:29 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:24:31: [7:24:31 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:24:31: [7:24:31 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:24:31: [7:24:31 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:24:31: [7:24:31 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:24:41: 💾 Data synced to files successfully
2025-09-18T19:25:11: 💾 Data synced to files successfully
2025-09-18T19:25:41: 💾 Data synced to files successfully
2025-09-18T19:26:11: 💾 Data synced to files successfully
2025-09-18T19:26:41: 💾 Data synced to files successfully
2025-09-18T19:27:11: 💾 Data synced to files successfully
2025-09-18T19:27:21: [7:27:21 pm] 🔍 Polling all sheets...
2025-09-18T19:27:21: [7:27:21 pm] 📊 Checking Main Orders...
2025-09-18T19:27:22: [7:27:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:27:22: [7:27:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:27:22: [7:27:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:27:22: [7:27:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:27:22: [7:27:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:27:22: [7:27:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:27:22: [7:27:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:27:24: [7:27:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:27:25: [7:27:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:27:27: [7:27:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:27:28: [7:27:28 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:27:28: [7:27:28 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:27:28: [7:27:28 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:27:28: [7:27:28 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:27:28: [7:27:28 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:27:28: [7:27:28 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:27:28: [7:27:28 pm] 📋 Row 2: Should send=false
2025-09-18T19:27:28: [7:27:28 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:27:30: [7:27:30 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:27:30: [7:27:30 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:27:30: [7:27:30 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:27:30: [7:27:30 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:27:41: 💾 Data synced to files successfully
2025-09-18T19:28:11: 💾 Data synced to files successfully
2025-09-18T19:28:41: 💾 Data synced to files successfully
2025-09-18T19:29:11: 💾 Data synced to files successfully
2025-09-18T19:29:41: 💾 Data synced to files successfully
2025-09-18T19:30:11: 💾 Data synced to files successfully
2025-09-18T19:30:21: [7:30:21 pm] 🔍 Polling all sheets...
2025-09-18T19:30:21: [7:30:21 pm] 📊 Checking Main Orders...
2025-09-18T19:30:22: [7:30:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:30:22: [7:30:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:30:22: [7:30:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:30:22: [7:30:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:30:22: [7:30:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:30:22: [7:30:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:30:22: [7:30:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:30:24: [7:30:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:30:24: [7:30:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:30:26: [7:30:26 pm] 📊 Checking Combined Orders...
2025-09-18T19:30:27: [7:30:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:30:27: [7:30:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:30:27: [7:30:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:30:27: [7:30:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:30:27: [7:30:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:30:27: [7:30:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:30:27: [7:30:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:30:27: [7:30:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:30:29: [7:30:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:30:29: [7:30:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:30:29: [7:30:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:30:29: [7:30:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:30:41: 💾 Data synced to files successfully
2025-09-18T19:31:11: 💾 Data synced to files successfully
2025-09-18T19:31:41: 💾 Data synced to files successfully
2025-09-18T19:32:11: 💾 Data synced to files successfully
2025-09-18T19:32:41: 💾 Data synced to files successfully
2025-09-18T19:33:11: 💾 Data synced to files successfully
2025-09-18T19:33:21: [7:33:21 pm] 🔍 Polling all sheets...
2025-09-18T19:33:21: [7:33:21 pm] 📊 Checking Main Orders...
2025-09-18T19:33:22: [7:33:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:33:22: [7:33:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:33:22: [7:33:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:33:22: [7:33:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:33:22: [7:33:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:33:22: [7:33:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:33:22: [7:33:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:33:24: [7:33:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:33:24: [7:33:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:33:26: [7:33:26 pm] 📊 Checking Combined Orders...
2025-09-18T19:33:27: [7:33:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:33:27: [7:33:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:33:27: [7:33:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:33:27: [7:33:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:33:27: [7:33:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:33:27: [7:33:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:33:27: [7:33:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:33:27: [7:33:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:33:29: [7:33:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:33:29: [7:33:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:33:29: [7:33:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:33:29: [7:33:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:33:41: 💾 Data synced to files successfully
2025-09-18T19:34:11: 💾 Data synced to files successfully
2025-09-18T19:34:41: 💾 Data synced to files successfully
2025-09-18T19:35:11: 💾 Data synced to files successfully
2025-09-18T19:35:41: 💾 Data synced to files successfully
2025-09-18T19:36:11: 💾 Data synced to files successfully
2025-09-18T19:36:21: [7:36:21 pm] 🔍 Polling all sheets...
2025-09-18T19:36:21: [7:36:21 pm] 📊 Checking Main Orders...
2025-09-18T19:36:22: [7:36:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:36:22: [7:36:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:36:22: [7:36:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:36:22: [7:36:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:36:22: [7:36:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:36:22: [7:36:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:36:22: [7:36:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:36:24: [7:36:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:36:24: [7:36:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:36:26: [7:36:26 pm] 📊 Checking Combined Orders...
2025-09-18T19:36:27: [7:36:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:36:27: [7:36:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:36:27: [7:36:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:36:27: [7:36:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:36:27: [7:36:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:36:27: [7:36:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:36:27: [7:36:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:36:27: [7:36:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:36:29: [7:36:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:36:29: [7:36:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:36:29: [7:36:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:36:29: [7:36:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:36:41: 💾 Data synced to files successfully
2025-09-18T19:37:11: 💾 Data synced to files successfully
2025-09-18T19:37:41: 💾 Data synced to files successfully
2025-09-18T19:38:11: 💾 Data synced to files successfully
2025-09-18T19:38:41: 💾 Data synced to files successfully
2025-09-18T19:39:11: 💾 Data synced to files successfully
2025-09-18T19:39:21: [7:39:21 pm] 🔍 Polling all sheets...
2025-09-18T19:39:21: [7:39:21 pm] 📊 Checking Main Orders...
2025-09-18T19:39:22: [7:39:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:39:22: [7:39:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:39:22: [7:39:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:39:22: [7:39:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:39:22: [7:39:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:39:22: [7:39:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:39:22: [7:39:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:39:24: [7:39:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:39:25: [7:39:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:39:27: [7:39:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:39:27: [7:39:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:39:27: [7:39:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:39:27: [7:39:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:39:27: [7:39:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:39:27: [7:39:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:39:27: [7:39:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:39:27: [7:39:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:39:27: [7:39:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:39:29: [7:39:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:39:29: [7:39:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:39:29: [7:39:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:39:29: [7:39:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:39:41: 💾 Data synced to files successfully
2025-09-18T19:40:11: 💾 Data synced to files successfully
2025-09-18T19:40:41: 💾 Data synced to files successfully
2025-09-18T19:41:11: 💾 Data synced to files successfully
2025-09-18T19:41:41: 💾 Data synced to files successfully
2025-09-18T19:42:11: 💾 Data synced to files successfully
2025-09-18T19:42:21: [7:42:21 pm] 🔍 Polling all sheets...
2025-09-18T19:42:21: [7:42:21 pm] 📊 Checking Main Orders...
2025-09-18T19:42:22: [7:42:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:42:22: [7:42:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:42:22: [7:42:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:42:22: [7:42:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:42:22: [7:42:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:42:22: [7:42:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:42:22: [7:42:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:42:24: [7:42:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:42:25: [7:42:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:42:27: [7:42:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:42:27: [7:42:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:42:27: [7:42:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:42:27: [7:42:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:42:27: [7:42:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:42:27: [7:42:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:42:27: [7:42:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:42:27: [7:42:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:42:27: [7:42:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:42:29: [7:42:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:42:29: [7:42:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:42:29: [7:42:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:42:29: [7:42:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:42:41: 💾 Data synced to files successfully
2025-09-18T19:43:11: 💾 Data synced to files successfully
2025-09-18T19:43:41: 💾 Data synced to files successfully
2025-09-18T19:44:12: 💾 Data synced to files successfully
2025-09-18T19:44:42: 💾 Data synced to files successfully
2025-09-18T19:45:12: 💾 Data synced to files successfully
2025-09-18T19:45:21: [7:45:21 pm] 🔍 Polling all sheets...
2025-09-18T19:45:21: [7:45:21 pm] 📊 Checking Main Orders...
2025-09-18T19:45:22: [7:45:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:45:22: [7:45:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:45:22: [7:45:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:45:22: [7:45:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:45:22: [7:45:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:45:22: [7:45:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:45:22: [7:45:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:45:24: [7:45:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:45:25: [7:45:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:45:27: [7:45:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:45:28: [7:45:28 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:45:28: [7:45:28 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:45:28: [7:45:28 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:45:28: [7:45:28 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:45:28: [7:45:28 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:45:28: [7:45:28 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:45:28: [7:45:28 pm] 📋 Row 2: Should send=false
2025-09-18T19:45:28: [7:45:28 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:45:30: [7:45:30 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:45:30: [7:45:30 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:45:30: [7:45:30 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:45:30: [7:45:30 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:45:42: 💾 Data synced to files successfully
2025-09-18T19:46:12: 💾 Data synced to files successfully
2025-09-18T19:46:42: 💾 Data synced to files successfully
2025-09-18T19:47:12: 💾 Data synced to files successfully
2025-09-18T19:47:42: 💾 Data synced to files successfully
2025-09-18T19:48:12: 💾 Data synced to files successfully
2025-09-18T19:48:21: [7:48:21 pm] 🔍 Polling all sheets...
2025-09-18T19:48:21: [7:48:21 pm] 📊 Checking Main Orders...
2025-09-18T19:48:22: [7:48:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:48:22: [7:48:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:48:22: [7:48:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:48:22: [7:48:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:48:22: [7:48:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:48:22: [7:48:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:48:22: [7:48:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:48:24: [7:48:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:48:25: [7:48:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:48:27: [7:48:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:48:27: [7:48:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:48:27: [7:48:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:48:27: [7:48:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:48:27: [7:48:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:48:27: [7:48:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:48:27: [7:48:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:48:27: [7:48:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:48:27: [7:48:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:48:29: [7:48:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:48:29: [7:48:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:48:29: [7:48:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:48:29: [7:48:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:48:42: 💾 Data synced to files successfully
2025-09-18T19:49:12: 💾 Data synced to files successfully
2025-09-18T19:49:42: 💾 Data synced to files successfully
2025-09-18T19:50:12: 💾 Data synced to files successfully
2025-09-18T19:50:42: 💾 Data synced to files successfully
2025-09-18T19:51:12: 💾 Data synced to files successfully
2025-09-18T19:51:21: [7:51:21 pm] 🔍 Polling all sheets...
2025-09-18T19:51:21: [7:51:21 pm] 📊 Checking Main Orders...
2025-09-18T19:51:22: [7:51:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:51:22: [7:51:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:51:22: [7:51:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:51:22: [7:51:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:51:22: [7:51:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:51:22: [7:51:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:51:22: [7:51:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:51:24: [7:51:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:51:24: [7:51:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:51:26: [7:51:26 pm] 📊 Checking Combined Orders...
2025-09-18T19:51:27: [7:51:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:51:27: [7:51:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:51:27: [7:51:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:51:27: [7:51:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:51:27: [7:51:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:51:27: [7:51:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:51:27: [7:51:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:51:27: [7:51:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:51:29: [7:51:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:51:29: [7:51:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:51:29: [7:51:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:51:29: [7:51:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:51:42: 💾 Data synced to files successfully
2025-09-18T19:52:12: 💾 Data synced to files successfully
2025-09-18T19:52:42: 💾 Data synced to files successfully
2025-09-18T19:53:12: 💾 Data synced to files successfully
2025-09-18T19:53:42: 💾 Data synced to files successfully
2025-09-18T19:54:12: 💾 Data synced to files successfully
2025-09-18T19:54:21: [7:54:21 pm] 🔍 Polling all sheets...
2025-09-18T19:54:21: [7:54:21 pm] 📊 Checking Main Orders...
2025-09-18T19:54:22: [7:54:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:54:22: [7:54:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:54:22: [7:54:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:54:22: [7:54:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:54:22: [7:54:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:54:22: [7:54:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:54:22: [7:54:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:54:24: [7:54:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:54:24: [7:54:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:54:26: [7:54:26 pm] 📊 Checking Combined Orders...
2025-09-18T19:54:27: [7:54:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:54:27: [7:54:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:54:27: [7:54:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:54:27: [7:54:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:54:27: [7:54:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:54:27: [7:54:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:54:27: [7:54:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:54:27: [7:54:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:54:29: [7:54:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:54:29: [7:54:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:54:29: [7:54:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:54:29: [7:54:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:54:42: 💾 Data synced to files successfully
2025-09-18T19:55:12: 💾 Data synced to files successfully
2025-09-18T19:55:42: 💾 Data synced to files successfully
2025-09-18T19:56:12: 💾 Data synced to files successfully
2025-09-18T19:56:42: 💾 Data synced to files successfully
2025-09-18T19:57:12: 💾 Data synced to files successfully
2025-09-18T19:57:21: [7:57:21 pm] 🔍 Polling all sheets...
2025-09-18T19:57:21: [7:57:21 pm] 📊 Checking Main Orders...
2025-09-18T19:57:22: [7:57:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T19:57:22: [7:57:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T19:57:22: [7:57:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T19:57:22: [7:57:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T19:57:22: [7:57:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T19:57:22: [7:57:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T19:57:22: [7:57:22 pm] 📋 Row 2: Should send=false
2025-09-18T19:57:24: [7:57:24 pm] 📊 Checking Fabric Orders...
2025-09-18T19:57:25: [7:57:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T19:57:27: [7:57:27 pm] 📊 Checking Combined Orders...
2025-09-18T19:57:27: [7:57:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T19:57:27: [7:57:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T19:57:27: [7:57:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T19:57:27: [7:57:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T19:57:27: [7:57:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T19:57:27: [7:57:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T19:57:27: [7:57:27 pm] 📋 Row 2: Should send=false
2025-09-18T19:57:27: [7:57:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T19:57:29: [7:57:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T19:57:29: [7:57:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T19:57:29: [7:57:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T19:57:29: [7:57:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T19:57:42: 💾 Data synced to files successfully
2025-09-18T19:58:12: 💾 Data synced to files successfully
2025-09-18T19:58:42: 💾 Data synced to files successfully
2025-09-18T19:59:12: 💾 Data synced to files successfully
2025-09-18T19:59:42: 💾 Data synced to files successfully
2025-09-18T20:00:12: 💾 Data synced to files successfully
2025-09-18T20:00:21: [8:00:21 pm] 🔍 Polling all sheets...
2025-09-18T20:00:21: [8:00:21 pm] 📊 Checking Main Orders...
2025-09-18T20:00:22: [8:00:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:00:22: [8:00:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:00:22: [8:00:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:00:22: [8:00:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:00:22: [8:00:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:00:22: [8:00:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:00:22: [8:00:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:00:24: [8:00:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:00:25: [8:00:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:00:27: [8:00:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:00:27: [8:00:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:00:27: [8:00:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:00:27: [8:00:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:00:27: [8:00:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:00:27: [8:00:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:00:27: [8:00:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:00:27: [8:00:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:00:27: [8:00:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:00:29: [8:00:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:00:29: [8:00:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:00:29: [8:00:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:00:29: [8:00:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:00:42: 💾 Data synced to files successfully
2025-09-18T20:01:12: 💾 Data synced to files successfully
2025-09-18T20:01:42: 💾 Data synced to files successfully
2025-09-18T20:02:12: 💾 Data synced to files successfully
2025-09-18T20:02:42: 💾 Data synced to files successfully
2025-09-18T20:03:12: 💾 Data synced to files successfully
2025-09-18T20:03:21: [8:03:21 pm] 🔍 Polling all sheets...
2025-09-18T20:03:21: [8:03:21 pm] 📊 Checking Main Orders...
2025-09-18T20:03:22: [8:03:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:03:22: [8:03:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:03:22: [8:03:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:03:22: [8:03:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:03:22: [8:03:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:03:22: [8:03:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:03:22: [8:03:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:03:24: [8:03:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:03:25: [8:03:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:03:27: [8:03:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:03:29: [8:03:29 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:03:29: [8:03:29 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:03:29: [8:03:29 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:03:29: [8:03:29 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:03:29: [8:03:29 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:03:29: [8:03:29 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:03:29: [8:03:29 pm] 📋 Row 2: Should send=false
2025-09-18T20:03:29: [8:03:29 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:03:31: [8:03:31 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:03:31: [8:03:31 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:03:31: [8:03:31 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:03:31: [8:03:31 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:03:42: 💾 Data synced to files successfully
2025-09-18T20:04:12: 💾 Data synced to files successfully
2025-09-18T20:04:42: 💾 Data synced to files successfully
2025-09-18T20:05:12: 💾 Data synced to files successfully
2025-09-18T20:05:42: 💾 Data synced to files successfully
2025-09-18T20:06:12: 💾 Data synced to files successfully
2025-09-18T20:06:21: [8:06:21 pm] 🔍 Polling all sheets...
2025-09-18T20:06:21: [8:06:21 pm] 📊 Checking Main Orders...
2025-09-18T20:06:23: [8:06:23 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:06:23: [8:06:23 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:06:23: [8:06:23 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:06:23: [8:06:23 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:06:23: [8:06:23 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:06:23: [8:06:23 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:06:23: [8:06:23 pm] 📋 Row 2: Should send=false
2025-09-18T20:06:25: [8:06:25 pm] 📊 Checking Fabric Orders...
2025-09-18T20:06:26: [8:06:26 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:06:28: [8:06:28 pm] 📊 Checking Combined Orders...
2025-09-18T20:06:31: [8:06:31 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:06:31: [8:06:31 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:06:31: [8:06:31 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:06:31: [8:06:31 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:06:31: [8:06:31 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:06:31: [8:06:31 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:06:31: [8:06:31 pm] 📋 Row 2: Should send=false
2025-09-18T20:06:31: [8:06:31 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:06:33: [8:06:33 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:06:33: [8:06:33 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:06:33: [8:06:33 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:06:33: [8:06:33 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:06:42: 💾 Data synced to files successfully
2025-09-18T20:07:12: 💾 Data synced to files successfully
2025-09-18T20:07:42: 💾 Data synced to files successfully
2025-09-18T20:08:12: 💾 Data synced to files successfully
2025-09-18T20:08:42: 💾 Data synced to files successfully
2025-09-18T20:09:12: 💾 Data synced to files successfully
2025-09-18T20:09:21: [8:09:21 pm] 🔍 Polling all sheets...
2025-09-18T20:09:21: [8:09:21 pm] 📊 Checking Main Orders...
2025-09-18T20:09:22: [8:09:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:09:22: [8:09:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:09:22: [8:09:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:09:22: [8:09:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:09:22: [8:09:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:09:22: [8:09:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:09:22: [8:09:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:09:24: [8:09:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:09:26: [8:09:26 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:09:28: [8:09:28 pm] 📊 Checking Combined Orders...
2025-09-18T20:09:31: [8:09:31 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:09:31: [8:09:31 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:09:31: [8:09:31 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:09:31: [8:09:31 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:09:31: [8:09:31 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:09:31: [8:09:31 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:09:31: [8:09:31 pm] 📋 Row 2: Should send=false
2025-09-18T20:09:31: [8:09:31 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:09:33: [8:09:33 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:09:33: [8:09:33 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:09:33: [8:09:33 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:09:33: [8:09:33 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:09:42: 💾 Data synced to files successfully
2025-09-18T20:10:02: 🔌 Connection closed. Reason: undefined
2025-09-18T20:10:02: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:10:02: {"level":50,"time":1758206402539,"pid":18376,"hostname":"SAURABH","msg":"error in sending keep alive"}
2025-09-18T20:10:05: 🔄 Initializing WhatsApp client...
2025-09-18T20:10:05: 🔄 Connecting to WhatsApp...
2025-09-18T20:10:07: ✅ WhatsApp connected successfully!
2025-09-18T20:10:12: 💾 Data synced to files successfully
2025-09-18T20:10:42: 💾 Data synced to files successfully
2025-09-18T20:11:12: 💾 Data synced to files successfully
2025-09-18T20:11:42: 💾 Data synced to files successfully
2025-09-18T20:12:12: 💾 Data synced to files successfully
2025-09-18T20:12:21: [8:12:21 pm] 🔍 Polling all sheets...
2025-09-18T20:12:21: [8:12:21 pm] 📊 Checking Main Orders...
2025-09-18T20:12:22: [8:12:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:12:22: [8:12:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:12:22: [8:12:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:12:22: [8:12:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:12:22: [8:12:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:12:22: [8:12:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:12:22: [8:12:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:12:24: [8:12:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:12:25: [8:12:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:12:27: [8:12:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:12:27: [8:12:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:12:27: [8:12:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:12:27: [8:12:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:12:27: [8:12:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:12:27: [8:12:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:12:27: [8:12:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:12:27: [8:12:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:12:27: [8:12:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:12:29: [8:12:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:12:29: [8:12:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:12:29: [8:12:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:12:29: [8:12:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:12:42: 💾 Data synced to files successfully
2025-09-18T20:13:12: 💾 Data synced to files successfully
2025-09-18T20:13:42: 💾 Data synced to files successfully
2025-09-18T20:14:12: 💾 Data synced to files successfully
2025-09-18T20:14:42: 💾 Data synced to files successfully
2025-09-18T20:15:12: 💾 Data synced to files successfully
2025-09-18T20:15:21: [8:15:21 pm] 🔍 Polling all sheets...
2025-09-18T20:15:21: [8:15:21 pm] 📊 Checking Main Orders...
2025-09-18T20:15:22: [8:15:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:15:22: [8:15:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:15:22: [8:15:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:15:22: [8:15:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:15:22: [8:15:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:15:22: [8:15:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:15:22: [8:15:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:15:24: [8:15:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:15:24: [8:15:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:15:26: [8:15:26 pm] 📊 Checking Combined Orders...
2025-09-18T20:15:27: [8:15:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:15:27: [8:15:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:15:27: [8:15:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:15:27: [8:15:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:15:27: [8:15:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:15:27: [8:15:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:15:27: [8:15:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:15:27: [8:15:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:15:29: [8:15:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:15:29: [8:15:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:15:29: [8:15:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:15:29: [8:15:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:15:42: 💾 Data synced to files successfully
2025-09-18T20:16:12: 💾 Data synced to files successfully
2025-09-18T20:16:42: 💾 Data synced to files successfully
2025-09-18T20:17:12: 💾 Data synced to files successfully
2025-09-18T20:17:42: 💾 Data synced to files successfully
2025-09-18T20:18:12: 💾 Data synced to files successfully
2025-09-18T20:18:21: [8:18:21 pm] 🔍 Polling all sheets...
2025-09-18T20:18:21: [8:18:21 pm] 📊 Checking Main Orders...
2025-09-18T20:18:22: [8:18:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:18:22: [8:18:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:18:22: [8:18:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:18:22: [8:18:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:18:22: [8:18:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:18:22: [8:18:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:18:22: [8:18:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:18:24: [8:18:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:18:25: [8:18:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:18:27: [8:18:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:18:27: [8:18:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:18:27: [8:18:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:18:27: [8:18:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:18:27: [8:18:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:18:27: [8:18:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:18:27: [8:18:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:18:27: [8:18:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:18:27: [8:18:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:18:29: [8:18:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:18:29: [8:18:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:18:29: [8:18:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:18:29: [8:18:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:18:42: 💾 Data synced to files successfully
2025-09-18T20:19:12: 💾 Data synced to files successfully
2025-09-18T20:19:42: 💾 Data synced to files successfully
2025-09-18T20:20:12: 💾 Data synced to files successfully
2025-09-18T20:20:42: 💾 Data synced to files successfully
2025-09-18T20:21:12: 💾 Data synced to files successfully
2025-09-18T20:21:21: [8:21:21 pm] 🔍 Polling all sheets...
2025-09-18T20:21:21: [8:21:21 pm] 📊 Checking Main Orders...
2025-09-18T20:21:22: [8:21:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:21:22: [8:21:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:21:22: [8:21:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:21:22: [8:21:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:21:22: [8:21:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:21:22: [8:21:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:21:22: [8:21:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:21:24: [8:21:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:21:24: [8:21:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:21:26: [8:21:26 pm] 📊 Checking Combined Orders...
2025-09-18T20:21:27: [8:21:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:21:27: [8:21:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:21:27: [8:21:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:21:27: [8:21:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:21:27: [8:21:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:21:27: [8:21:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:21:27: [8:21:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:21:27: [8:21:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:21:29: [8:21:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:21:29: [8:21:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:21:29: [8:21:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:21:29: [8:21:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:21:42: 💾 Data synced to files successfully
2025-09-18T20:22:12: 💾 Data synced to files successfully
2025-09-18T20:22:42: 💾 Data synced to files successfully
2025-09-18T20:23:12: 💾 Data synced to files successfully
2025-09-18T20:23:42: 💾 Data synced to files successfully
2025-09-18T20:24:12: 💾 Data synced to files successfully
2025-09-18T20:24:21: [8:24:21 pm] 🔍 Polling all sheets...
2025-09-18T20:24:21: [8:24:21 pm] 📊 Checking Main Orders...
2025-09-18T20:24:22: [8:24:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:24:22: [8:24:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:24:22: [8:24:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:24:22: [8:24:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:24:22: [8:24:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:24:22: [8:24:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:24:22: [8:24:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:24:24: [8:24:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:24:25: [8:24:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:24:27: [8:24:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:24:27: [8:24:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:24:27: [8:24:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:24:27: [8:24:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:24:27: [8:24:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:24:27: [8:24:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:24:27: [8:24:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:24:27: [8:24:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:24:27: [8:24:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:24:29: [8:24:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:24:29: [8:24:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:24:29: [8:24:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:24:29: [8:24:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:24:42: 💾 Data synced to files successfully
2025-09-18T20:25:01: {"level":50,"time":1758207301556,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:25:01: 🔌 Connection closed. Reason: undefined
2025-09-18T20:25:01: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:25:04: 🔄 Initializing WhatsApp client...
2025-09-18T20:25:04: 🔄 Connecting to WhatsApp...
2025-09-18T20:25:08: ✅ WhatsApp connected successfully!
2025-09-18T20:25:11: {"level":50,"time":1758207311853,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:25:11: 🔌 Connection closed. Reason: undefined
2025-09-18T20:25:11: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:25:12: 💾 Data synced to files successfully
2025-09-18T20:25:14: 🔄 Initializing WhatsApp client...
2025-09-18T20:25:14: 🔄 Connecting to WhatsApp...
2025-09-18T20:25:17: ✅ WhatsApp connected successfully!
2025-09-18T20:25:20: {"level":50,"time":1758207320723,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:25:20: 🔌 Connection closed. Reason: undefined
2025-09-18T20:25:20: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:25:23: 🔄 Initializing WhatsApp client...
2025-09-18T20:25:23: 🔄 Connecting to WhatsApp...
2025-09-18T20:25:27: ✅ WhatsApp connected successfully!
2025-09-18T20:25:30: {"level":50,"time":1758207330229,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:25:30: 🔌 Connection closed. Reason: undefined
2025-09-18T20:25:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:25:33: 🔄 Initializing WhatsApp client...
2025-09-18T20:25:33: 🔄 Connecting to WhatsApp...
2025-09-18T20:25:35: ✅ WhatsApp connected successfully!
2025-09-18T20:25:39: {"level":50,"time":1758207339512,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:25:39: 🔌 Connection closed. Reason: undefined
2025-09-18T20:25:39: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:25:42: 🔄 Initializing WhatsApp client...
2025-09-18T20:25:42: 💾 Data synced to files successfully
2025-09-18T20:25:42: 🔄 Connecting to WhatsApp...
2025-09-18T20:25:44: ✅ WhatsApp connected successfully!
2025-09-18T20:26:12: 💾 Data synced to files successfully
2025-09-18T20:26:42: 💾 Data synced to files successfully
2025-09-18T20:27:12: 💾 Data synced to files successfully
2025-09-18T20:27:21: [8:27:21 pm] 🔍 Polling all sheets...
2025-09-18T20:27:21: [8:27:21 pm] 📊 Checking Main Orders...
2025-09-18T20:27:22: [8:27:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:27:22: [8:27:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:27:22: [8:27:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:27:22: [8:27:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:27:22: [8:27:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:27:22: [8:27:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:27:22: [8:27:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:27:24: [8:27:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:27:25: [8:27:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:27:27: [8:27:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:27:27: [8:27:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:27:27: [8:27:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:27:27: [8:27:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:27:27: [8:27:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:27:27: [8:27:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:27:27: [8:27:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:27:27: [8:27:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:27:27: [8:27:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:27:29: [8:27:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:27:29: [8:27:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:27:29: [8:27:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:27:29: [8:27:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:27:42: 💾 Data synced to files successfully
2025-09-18T20:28:12: 💾 Data synced to files successfully
2025-09-18T20:28:42: 💾 Data synced to files successfully
2025-09-18T20:29:12: 💾 Data synced to files successfully
2025-09-18T20:29:42: 💾 Data synced to files successfully
2025-09-18T20:30:12: 💾 Data synced to files successfully
2025-09-18T20:30:21: [8:30:21 pm] 🔍 Polling all sheets...
2025-09-18T20:30:21: [8:30:21 pm] 📊 Checking Main Orders...
2025-09-18T20:30:22: [8:30:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:30:22: [8:30:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:30:22: [8:30:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:30:22: [8:30:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:30:22: [8:30:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:30:22: [8:30:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:30:22: [8:30:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:30:24: [8:30:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:30:25: [8:30:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:30:27: [8:30:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:30:27: [8:30:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:30:27: [8:30:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:30:27: [8:30:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:30:27: [8:30:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:30:27: [8:30:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:30:27: [8:30:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:30:27: [8:30:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:30:27: [8:30:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:30:29: [8:30:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:30:29: [8:30:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:30:29: [8:30:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:30:29: [8:30:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:30:42: 💾 Data synced to files successfully
2025-09-18T20:31:12: 💾 Data synced to files successfully
2025-09-18T20:31:42: 💾 Data synced to files successfully
2025-09-18T20:32:12: 💾 Data synced to files successfully
2025-09-18T20:32:42: 💾 Data synced to files successfully
2025-09-18T20:33:12: 💾 Data synced to files successfully
2025-09-18T20:33:21: [8:33:21 pm] 🔍 Polling all sheets...
2025-09-18T20:33:21: [8:33:21 pm] 📊 Checking Main Orders...
2025-09-18T20:33:22: [8:33:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:33:22: [8:33:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:33:22: [8:33:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:33:22: [8:33:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:33:22: [8:33:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:33:22: [8:33:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:33:22: [8:33:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:33:24: [8:33:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:33:24: [8:33:24 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:33:26: [8:33:26 pm] 📊 Checking Combined Orders...
2025-09-18T20:33:27: [8:33:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:33:27: [8:33:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:33:27: [8:33:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:33:27: [8:33:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:33:27: [8:33:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:33:27: [8:33:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:33:27: [8:33:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:33:27: [8:33:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:33:29: [8:33:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:33:29: [8:33:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:33:29: [8:33:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:33:29: [8:33:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:33:41: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T20:33:41: ✅ Message sent successfully to 917375938371
2025-09-18T20:33:41: [8:33:41 pm] Welcome message sent to saurabh (7375938371)
2025-09-18T20:33:42: 💾 Data synced to files successfully
2025-09-18T20:34:00: [8:34:00 pm] Error checking order status TEST001: Unable to parse range: Main Orders!A:Z
2025-09-18T20:34:00: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T20:34:00: ✅ Message sent successfully to 917375938371
2025-09-18T20:34:00: [8:34:00 pm] Order confirmation sent to saurabh (7375938371) for order TEST001
2025-09-18T20:34:11: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-18T20:34:11: ✅ Message sent successfully to 917375938371
2025-09-18T20:34:11: [8:34:11 pm] Test message sent to 7375938371
2025-09-18T20:34:12: 💾 Data synced to files successfully
2025-09-18T20:34:42: 💾 Data synced to files successfully
2025-09-18T20:35:12: 💾 Data synced to files successfully
2025-09-18T20:35:42: 💾 Data synced to files successfully
2025-09-18T20:36:12: 💾 Data synced to files successfully
2025-09-18T20:36:21: [8:36:21 pm] 🔍 Polling all sheets...
2025-09-18T20:36:21: [8:36:21 pm] 📊 Checking Main Orders...
2025-09-18T20:36:22: [8:36:22 pm] 📋 Main Orders: Found 1 data rows
2025-09-18T20:36:22: [8:36:22 pm] 📋 Headers: Order ID | Customer Name | Contact Info | Address | Customer Type | Garment Types | Order Date | Delivery Date | Delivery Status | Price | Advance Payment | Remaining Amount | paidToday | Payment Status | Season | Festival | Notes | Created At | Welcome Notified | Confirmation Notified | Ready Notified | Delivery Notified | Pickup Notified | Payment Notified | Master Order ID | Ready Notified Date
2025-09-18T20:36:22: [8:36:22 pm] 📋 Row 2: Order=TLW17092514, Phone=6350454667 (col 2), Status=Pending, Valid=true
2025-09-18T20:36:22: [8:36:22 pm] 🔍 Debug: Checking order TLW17092514 with status "Pending" (cleaned: "pending") for phone 6350454667
2025-09-18T20:36:22: [8:36:22 pm] 🔍 Debug: Duplicate check passed for order TLW17092514
2025-09-18T20:36:22: [8:36:22 pm] 📋 Order TLW17092514: Welcome and confirmation already sent - skipping
2025-09-18T20:36:22: [8:36:22 pm] 📋 Row 2: Should send=false
2025-09-18T20:36:24: [8:36:24 pm] 📊 Checking Fabric Orders...
2025-09-18T20:36:25: [8:36:25 pm] 📝 Fabric Orders: No data rows found
2025-09-18T20:36:27: [8:36:27 pm] 📊 Checking Combined Orders...
2025-09-18T20:36:27: [8:36:27 pm] 📋 Combined Orders: Found 2 data rows
2025-09-18T20:36:27: [8:36:27 pm] 📋 Headers: Timestamp | Combined Order ID | Master Order ID | Customer Name | Contact Number | Address | Customer Type | Order Date | Session | Notes | Fabric Order ID | Fabric Price | Tailoring Order ID | Tailoring Price | Total Amount | Payment Status | Advance/Partial Payment | Remaining Amount | Combined Order Notified
2025-09-18T20:36:27: [8:36:27 pm] 📋 Row 2: Order=2025-09-18T12:06:26.037809, Phone=9953020706 (col 4), Status=Casual, Valid=true
2025-09-18T20:36:27: [8:36:27 pm] 🔍 Debug: Checking order 2025-09-18T12:06:26.037809 with status "Casual" (cleaned: "casual") for phone 9953020706
2025-09-18T20:36:27: [8:36:27 pm] 🔍 Debug: Duplicate check passed for order 2025-09-18T12:06:26.037809
2025-09-18T20:36:27: [8:36:27 pm] 🔍 Debug: Checking if "casual" is in trigger statuses: false
2025-09-18T20:36:27: [8:36:27 pm] 📋 Row 2: Should send=false
2025-09-18T20:36:27: [8:36:27 pm] 📋 Row 3: Order=2025-09-18T12:09:19.218420, Phone=9953020706 (col 4), Status=, Valid=true
2025-09-18T20:36:29: [8:36:29 pm] 🔔 Processing enhanced pickup reminders...
2025-09-18T20:36:29: [8:36:29 pm] 📝 No orders need enhanced pickup reminders
2025-09-18T20:36:29: [8:36:29 pm] 💳 Processing enhanced payment reminders...
2025-09-18T20:36:29: [8:36:29 pm] 📝 No orders need enhanced payment reminders
2025-09-18T20:36:42: 💾 Data synced to files successfully
2025-09-18T20:37:12: 💾 Data synced to files successfully
2025-09-18T20:37:42: 💾 Data synced to files successfully
2025-09-18T20:37:43: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T20:38:08: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T20:38:12: 💾 Data synced to files successfully
2025-09-18T20:38:42: 💾 Data synced to files successfully
2025-09-18T20:39:06: {"level":50,"time":1758208146512,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:39:06: 🔌 Connection closed. Reason: undefined
2025-09-18T20:39:06: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:39:09: 🔄 Initializing WhatsApp client...
2025-09-18T20:39:09: 🔄 Connecting to WhatsApp...
2025-09-18T20:39:11: ✅ WhatsApp connected successfully!
2025-09-18T20:39:12: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T20:39:12: 💾 Data synced to files successfully
2025-09-18T20:39:16: {"level":50,"time":1758208156312,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:39:16: 🔌 Connection closed. Reason: undefined
2025-09-18T20:39:16: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:39:19: 🔄 Initializing WhatsApp client...
2025-09-18T20:39:19: 🔄 Connecting to WhatsApp...
2025-09-18T20:39:21: [8:39:21 pm] ⚠️ WhatsApp not connected, skipping poll
2025-09-18T20:39:21: ✅ WhatsApp connected successfully!
2025-09-18T20:39:22: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-18T20:39:25: {"level":50,"time":1758208165666,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:39:25: 🔌 Connection closed. Reason: undefined
2025-09-18T20:39:25: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:39:28: 🔄 Initializing WhatsApp client...
2025-09-18T20:39:28: 🔄 Connecting to WhatsApp...
2025-09-18T20:39:31: ✅ WhatsApp connected successfully!
2025-09-18T20:39:35: {"level":50,"time":1758208175504,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:39:35: 🔌 Connection closed. Reason: undefined
2025-09-18T20:39:35: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:39:38: 🔄 Initializing WhatsApp client...
2025-09-18T20:39:38: 🔄 Connecting to WhatsApp...
2025-09-18T20:39:40: ✅ WhatsApp connected successfully!
2025-09-18T20:39:42: 💾 Data synced to files successfully
2025-09-18T20:39:43: {"level":50,"time":1758208183931,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:39:43: 🔌 Connection closed. Reason: undefined
2025-09-18T20:39:43: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:39:46: 🔄 Initializing WhatsApp client...
2025-09-18T20:39:46: 🔄 Connecting to WhatsApp...
2025-09-18T20:39:49: ✅ WhatsApp connected successfully!
2025-09-18T20:39:53: {"level":50,"time":1758208193022,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:39:53: 🔌 Connection closed. Reason: undefined
2025-09-18T20:39:53: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:39:56: 🔄 Initializing WhatsApp client...
2025-09-18T20:39:56: 🔄 Connecting to WhatsApp...
2025-09-18T20:39:57: Failed to decrypt message with any known session...
2025-09-18T20:39:57: Session error:MessageCounterError: Key used already or never filled MessageCounterError: Key used already or never filled
    at SessionCipher.doDecryptWhisperMessage (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\node_modules\libsignal\src\session_cipher.js:236:19)
    at SessionCipher.decryptWithSessions (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\node_modules\libsignal\src\session_cipher.js:147:40)
    at 917375938371.0 [as awaitable] (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\node_modules\libsignal\src\session_cipher.js:171:39)
    at async _asyncQueueExecutor (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\node_modules\libsignal\src\queue_job.js:20:29)
2025-09-18T20:39:57: {"level":50,"time":1758208197746,"pid":18376,"hostname":"SAURABH","key":{"remoteJid":"917375938371@s.whatsapp.net","fromMe":false,"id":"AC6D0B557AD0D436B3CD3491530C23A3","senderLid":"13018096242760@lid"},"err":{"type":"SessionError","message":"No matching sessions found for message","stack":"SessionError: No matching sessions found for message\n    at SessionCipher.decryptWithSessions (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:161:15)\n    at async 917375938371.0 [as awaitable] (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\session_cipher.js:171:28)\n    at async _asyncQueueExecutor (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\node_modules\\libsignal\\src\\queue_job.js:20:29)","name":"SessionError"},"msg":"failed to decrypt message"}
2025-09-18T20:39:58: ✅ WhatsApp connected successfully!
2025-09-18T20:40:01: {"level":50,"time":1758208201708,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:01: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:01: 🔄 Reconnecting... (Attempt 1/5)
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
Error: Connection Closed
    at sendRawMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:56:19)
    at sendNode (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:75:16)
    at file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:487:19
    at async Object.transaction (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/auth-utils.js:126:26)
    at async relayMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:288:9)
    at async sendPeerDataOperationMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:211:23)
    at async sendRetryRequest (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:100:27)
    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:661:33
    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/make-mutex.js:16:36
2025-09-18T20:40:02: Unhandled Rejection at: Promise {
  <rejected> Error: Connection Closed
      at sendRawMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:56:19)
      at sendNode (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:75:16)
      at file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:487:19
      at async Object.transaction (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/auth-utils.js:126:26)
      at async relayMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:288:9)
      at async sendPeerDataOperationMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:211:23)
      at async sendRetryRequest (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:100:27)
      at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:661:33
      at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/make-mutex.js:16:36 {
    data: null,
    isBoom: true,
    isServer: false,
    output: { statusCode: 428, payload: [Object], headers: {} }
  }
} reason: Error: Connection Closed
    at sendRawMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:56:19)
    at sendNode (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/socket.js:75:16)
    at file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:487:19
    at async Object.transaction (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/auth-utils.js:126:26)
    at async relayMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:288:9)
    at async sendPeerDataOperationMessage (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-send.js:211:23)
    at async sendRetryRequest (file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:100:27)
    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Socket/messages-recv.js:661:33
    at async file:///C:/Users/gssai/OneDrive/Desktop/Whatsapp-Moblie-Bot/node_modules/@whiskeysockets/baileys/lib/Utils/make-mutex.js:16:36 {
  data: null,
  isBoom: true,
  isServer: false,
  output: {
    statusCode: 428,
    payload: {
      statusCode: 428,
      error: 'Precondition Required',
      message: 'Connection Closed'
    },
    headers: {}
  }
}
2025-09-18T20:40:02: [8:40:02 pm] Unhandled Rejection: Error: Connection Closed
2025-09-18T20:40:04: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:04: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:06: ✅ WhatsApp connected successfully!
2025-09-18T20:40:10: {"level":50,"time":1758208210004,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:10: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:10: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:40:12: 💾 Data synced to files successfully
2025-09-18T20:40:13: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:13: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:14: ✅ WhatsApp connected successfully!
2025-09-18T20:40:19: {"level":50,"time":1758208219354,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:19: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:19: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:40:22: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:22: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:24: ✅ WhatsApp connected successfully!
2025-09-18T20:40:28: {"level":50,"time":1758208228414,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:28: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:28: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:40:31: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:31: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:33: ✅ WhatsApp connected successfully!
2025-09-18T20:40:37: {"level":50,"time":1758208237001,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:37: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:37: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:40:40: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:40: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:41: ✅ WhatsApp connected successfully!
2025-09-18T20:40:42: 💾 Data synced to files successfully
2025-09-18T20:40:45: {"level":50,"time":1758208245835,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:45: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:45: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:40:48: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:48: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:50: ✅ WhatsApp connected successfully!
2025-09-18T20:40:55: {"level":50,"time":1758208255254,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:40:55: 🔌 Connection closed. Reason: undefined
2025-09-18T20:40:55: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:40:58: 🔄 Initializing WhatsApp client...
2025-09-18T20:40:58: 🔄 Connecting to WhatsApp...
2025-09-18T20:40:59: ✅ WhatsApp connected successfully!
2025-09-18T20:41:04: {"level":50,"time":1758208264154,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:41:04: 🔌 Connection closed. Reason: undefined
2025-09-18T20:41:04: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:41:07: 🔄 Initializing WhatsApp client...
2025-09-18T20:41:07: 🔄 Connecting to WhatsApp...
2025-09-18T20:41:09: ✅ WhatsApp connected successfully!
2025-09-18T20:41:12: 💾 Data synced to files successfully
2025-09-18T20:41:12: {"level":50,"time":1758208272716,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:41:12: 🔌 Connection closed. Reason: undefined
2025-09-18T20:41:12: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:41:15: 🔄 Initializing WhatsApp client...
2025-09-18T20:41:15: 🔄 Connecting to WhatsApp...
2025-09-18T20:41:17: ✅ WhatsApp connected successfully!
2025-09-18T20:41:21: {"level":50,"time":1758208281571,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:41:21: 🔌 Connection closed. Reason: undefined
2025-09-18T20:41:21: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:41:24: 🔄 Initializing WhatsApp client...
2025-09-18T20:41:24: 🔄 Connecting to WhatsApp...
2025-09-18T20:41:26: ✅ WhatsApp connected successfully!
2025-09-18T20:41:30: {"level":50,"time":1758208290510,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:41:30: 🔌 Connection closed. Reason: undefined
2025-09-18T20:41:30: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:41:33: 🔄 Initializing WhatsApp client...
2025-09-18T20:41:33: 🔄 Connecting to WhatsApp...
2025-09-18T20:41:36: ✅ WhatsApp connected successfully!
2025-09-18T20:41:39: {"level":50,"time":1758208299450,"pid":18376,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{},"content":[{"tag":"conflict","attrs":{"type":"replaced"}}]},"msg":"stream errored out"}
2025-09-18T20:41:39: 🔌 Connection closed. Reason: undefined
2025-09-18T20:41:39: 🔄 Reconnecting... (Attempt 1/5)
2025-09-18T20:41:42: 🔄 Initializing WhatsApp client...
2025-09-18T20:41:42: 🔄 Connecting to WhatsApp...
2025-09-18T20:41:42: 💾 Data synced to files successfully
2025-09-18T20:41:44: ✅ WhatsApp connected successfully!
2025-09-19T10:11:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:11:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:11:53: 📝 Loaded 12 template types
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256913042,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12084,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:11:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:11:53: ⏰ 4-minute startup delay active
2025-09-19T10:11:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:11:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:11:53: [INFO] Using PQueue for job processing
2025-09-19T10:11:53: [INFO] Memory management setup completed
2025-09-19T10:11:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:11:53: [INFO] Checking process locks...
2025-09-19T10:11:53: [INFO] Process locks acquired successfully
2025-09-19T10:11:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:11:53: [INFO] Logs directory created
2025-09-19T10:11:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:11:53: [10:11:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:11:53: [10:11:53 am] ✅ Google Sheets API initialized
2025-09-19T10:11:53: [INFO] Google Sheets helper initialized
2025-09-19T10:11:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:11:53: 📝 Enhanced Logger initialized
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:11:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:11:53: 📁 Loaded statistics from file
2025-09-19T10:11:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:11:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:11:53: 🧹 Removed stale process lock
2025-09-19T10:11:53: 🔒 Process lock acquired (PID: 12084)
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12084
}
2025-09-19T10:11:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:11:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256913042, processId: 12084 },
  timestamp: 1758256913429
}
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256913042, willExpireAt: 1758257153042 },
  timestamp: 1758256913430
}
2025-09-19T10:11:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:11:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:11:53: 📋 Message rules loaded: 8 types
2025-09-19T10:11:53: ℹ️ [10:11:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 392,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:11:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:11:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:11:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:11:54: [INFO] WhatsApp client initialized
2025-09-19T10:11:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:11:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:11:56: 📝 Loaded 12 template types
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256916295,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15996,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:11:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:11:56: ⏰ 4-minute startup delay active
2025-09-19T10:11:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:11:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:11:56: [INFO] Using PQueue for job processing
2025-09-19T10:11:56: [INFO] Memory management setup completed
2025-09-19T10:11:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:11:56: [INFO] Checking process locks...
2025-09-19T10:11:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:11:56: [INFO] Process locks acquired successfully
2025-09-19T10:11:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:11:56: [INFO] Logs directory created
2025-09-19T10:11:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:11:56: [10:11:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:11:56: [10:11:56 am] ✅ Google Sheets API initialized
2025-09-19T10:11:56: [INFO] Google Sheets helper initialized
2025-09-19T10:11:56: 📝 Enhanced Logger initialized
2025-09-19T10:11:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:11:56: 📁 Loaded statistics from file
2025-09-19T10:11:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:11:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:11:56: 🧹 Removed stale process lock
2025-09-19T10:11:56: 🔒 Process lock acquired (PID: 15996)
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15996
}
2025-09-19T10:11:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:11:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256916295, processId: 15996 },
  timestamp: 1758256916377
}
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256916295, willExpireAt: 1758257156295 },
  timestamp: 1758256916377
}
2025-09-19T10:11:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:11:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:11:56: 📋 Message rules loaded: 8 types
2025-09-19T10:11:56: ℹ️ [10:11:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 84,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:11:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:11:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:11:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:11:57: [INFO] WhatsApp client initialized
2025-09-19T10:11:58: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:11:58: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:11:58: 📝 Loaded 12 template types
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256918888,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8392,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:11:58: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:11:58: ⏰ 4-minute startup delay active
2025-09-19T10:11:58: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:11:58: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:11:58: [INFO] Using PQueue for job processing
2025-09-19T10:11:58: [INFO] Memory management setup completed
2025-09-19T10:11:58: [INFO] Starting WhatsApp Bot...
2025-09-19T10:11:58: [INFO] Checking process locks...
2025-09-19T10:11:58: 📁 Loaded 0 sent messages from file
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:11:58: [INFO] Process locks acquired successfully
2025-09-19T10:11:58: 📁 Loaded 0 customer histories from file
2025-09-19T10:11:58: [INFO] Logs directory created
2025-09-19T10:11:58: [INFO] Initializing Google Sheets helper...
2025-09-19T10:11:58: [10:11:58 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:11:58: [10:11:58 am] ✅ Google Sheets API initialized
2025-09-19T10:11:58: [INFO] Google Sheets helper initialized
2025-09-19T10:11:58: 📝 Enhanced Logger initialized
2025-09-19T10:11:58: 📁 Loaded 0 message hashes from file
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:11:58: 📁 Loaded statistics from file
2025-09-19T10:11:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:11:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:11:58: 🧹 Removed stale process lock
2025-09-19T10:11:58: 🔒 Process lock acquired (PID: 8392)
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8392
}
2025-09-19T10:11:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:11:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256918888, processId: 8392 },
  timestamp: 1758256918972
}
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256918888, willExpireAt: 1758257158888 },
  timestamp: 1758256918972
}
2025-09-19T10:11:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:11:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:11:58: 📋 Message rules loaded: 8 types
2025-09-19T10:11:58: ℹ️ [10:11:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 86,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:11:59: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:11:59: [INFO] Initializing WhatsApp client...
2025-09-19T10:11:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:00: [INFO] WhatsApp client initialized
2025-09-19T10:12:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:01: 📝 Loaded 12 template types
2025-09-19T10:12:01: ℹ️ [10:12:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256921959,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2044,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:01: ⏰ 4-minute startup delay active
2025-09-19T10:12:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:01: [INFO] Using PQueue for job processing
2025-09-19T10:12:01: [INFO] Memory management setup completed
2025-09-19T10:12:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:01: [INFO] Checking process locks...
2025-09-19T10:12:01: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:01: ℹ️ [10:12:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:01: [INFO] Process locks acquired successfully
2025-09-19T10:12:01: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:01: [INFO] Logs directory created
2025-09-19T10:12:01: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:01: [10:12:01 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:01: [10:12:01 am] ✅ Google Sheets API initialized
2025-09-19T10:12:01: [INFO] Google Sheets helper initialized
2025-09-19T10:12:02: ℹ️ [10:12:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:02: 📝 Enhanced Logger initialized
2025-09-19T10:12:02: 📁 Loaded statistics from file
2025-09-19T10:12:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:02: 🧹 Removed stale process lock
2025-09-19T10:12:02: 🔒 Process lock acquired (PID: 2044)
2025-09-19T10:12:02: ℹ️ [10:12:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2044
}
2025-09-19T10:12:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:02: ℹ️ [10:12:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256921959, processId: 2044 },
  timestamp: 1758256922072
}
2025-09-19T10:12:02: ℹ️ [10:12:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256921959, willExpireAt: 1758257161959 },
  timestamp: 1758256922073
}
2025-09-19T10:12:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:02: 📋 Message rules loaded: 8 types
2025-09-19T10:12:02: ℹ️ [10:12:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:03: [INFO] WhatsApp client initialized
2025-09-19T10:12:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:05: 📝 Loaded 12 template types
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256925622,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7976,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:05: ⏰ 4-minute startup delay active
2025-09-19T10:12:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:05: [INFO] Using PQueue for job processing
2025-09-19T10:12:05: [INFO] Memory management setup completed
2025-09-19T10:12:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:05: [INFO] Checking process locks...
2025-09-19T10:12:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:05: [INFO] Process locks acquired successfully
2025-09-19T10:12:05: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:05: [INFO] Logs directory created
2025-09-19T10:12:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:05: [10:12:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:05: [10:12:05 am] ✅ Google Sheets API initialized
2025-09-19T10:12:05: [INFO] Google Sheets helper initialized
2025-09-19T10:12:05: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:05: 🗑️ Deleted old log file: bot-2025-09-18T16-35-29-490Z.log
2025-09-19T10:12:05: 📝 Enhanced Logger initialized
2025-09-19T10:12:05: 📁 Loaded statistics from file
2025-09-19T10:12:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:05: 🧹 Removed stale process lock
2025-09-19T10:12:05: 🔒 Process lock acquired (PID: 7976)
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7976
}
2025-09-19T10:12:05: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256925622, processId: 7976 },
  timestamp: 1758256925708
}
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256925622, willExpireAt: 1758257165622 },
  timestamp: 1758256925708
}
2025-09-19T10:12:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:05: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:05: 📋 Message rules loaded: 8 types
2025-09-19T10:12:05: ℹ️ [10:12:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 88,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:06: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:06: [INFO] WhatsApp client initialized
2025-09-19T10:12:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:11: 📝 Loaded 12 template types
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256931431,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16164,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:11: ⏰ 4-minute startup delay active
2025-09-19T10:12:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:11: [INFO] Using PQueue for job processing
2025-09-19T10:12:11: [INFO] Memory management setup completed
2025-09-19T10:12:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:11: [INFO] Checking process locks...
2025-09-19T10:12:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:11: [INFO] Process locks acquired successfully
2025-09-19T10:12:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:11: [INFO] Logs directory created
2025-09-19T10:12:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:11: [10:12:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:11: [10:12:11 am] ✅ Google Sheets API initialized
2025-09-19T10:12:11: [INFO] Google Sheets helper initialized
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:11: 🗑️ Deleted old log file: bot-2025-09-18T16-48-47-513Z.log
2025-09-19T10:12:11: 📝 Enhanced Logger initialized
2025-09-19T10:12:11: 📁 Loaded statistics from file
2025-09-19T10:12:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:11: 🧹 Removed stale process lock
2025-09-19T10:12:11: 🔒 Process lock acquired (PID: 16164)
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16164
}
2025-09-19T10:12:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256931431, willExpireAt: 1758257171431 },
  timestamp: 1758256931729
}
2025-09-19T10:12:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:11: 📋 Message rules loaded: 8 types
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256931431, processId: 16164 },
  timestamp: 1758256931729
}
2025-09-19T10:12:11: ℹ️ [10:12:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 302,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:12: [INFO] WhatsApp client initialized
2025-09-19T10:12:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:17: 📝 Loaded 12 template types
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256937220,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3952,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:17: ⏰ 4-minute startup delay active
2025-09-19T10:12:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:17: [INFO] Using PQueue for job processing
2025-09-19T10:12:17: [INFO] Memory management setup completed
2025-09-19T10:12:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:17: [INFO] Checking process locks...
2025-09-19T10:12:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:17: [INFO] Process locks acquired successfully
2025-09-19T10:12:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:17: [INFO] Logs directory created
2025-09-19T10:12:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:17: [10:12:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:17: [10:12:17 am] ✅ Google Sheets API initialized
2025-09-19T10:12:17: [INFO] Google Sheets helper initialized
2025-09-19T10:12:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:17: 🗑️ Deleted old log file: bot-2025-09-18T17-21-43-579Z.log
2025-09-19T10:12:17: 📝 Enhanced Logger initialized
2025-09-19T10:12:17: 📁 Loaded statistics from file
2025-09-19T10:12:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:17: 🧹 Removed stale process lock
2025-09-19T10:12:17: 🔒 Process lock acquired (PID: 3952)
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3952
}
2025-09-19T10:12:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256937220, processId: 3952 },
  timestamp: 1758256937505
}
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256937220, willExpireAt: 1758257177220 },
  timestamp: 1758256937505
}
2025-09-19T10:12:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:17: 📋 Message rules loaded: 8 types
2025-09-19T10:12:17: ℹ️ [10:12:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 290,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:18: [INFO] WhatsApp client initialized
2025-09-19T10:12:20: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:20: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:20: 📝 Loaded 12 template types
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256940149,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5212,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:20: ⏰ 4-minute startup delay active
2025-09-19T10:12:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:20: [INFO] Using PQueue for job processing
2025-09-19T10:12:20: [INFO] Memory management setup completed
2025-09-19T10:12:20: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:20: [INFO] Checking process locks...
2025-09-19T10:12:20: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:20: [INFO] Process locks acquired successfully
2025-09-19T10:12:20: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:20: [INFO] Logs directory created
2025-09-19T10:12:20: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:20: [10:12:20 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:20: [10:12:20 am] ✅ Google Sheets API initialized
2025-09-19T10:12:20: [INFO] Google Sheets helper initialized
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:20: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:20: 🗑️ Deleted old log file: bot-2025-09-18T17-24-17-021Z.log
2025-09-19T10:12:20: 📝 Enhanced Logger initialized
2025-09-19T10:12:20: 📁 Loaded statistics from file
2025-09-19T10:12:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:20: 🧹 Removed stale process lock
2025-09-19T10:12:20: 🔒 Process lock acquired (PID: 5212)
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5212
}
2025-09-19T10:12:20: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256940149, willExpireAt: 1758257180149 },
  timestamp: 1758256940226
}
2025-09-19T10:12:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:20: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:20: 📋 Message rules loaded: 8 types
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256940149, processId: 5212 },
  timestamp: 1758256940226
}
2025-09-19T10:12:20: ℹ️ [10:12:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 78,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:21: [INFO] WhatsApp client initialized
2025-09-19T10:12:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:22: 📝 Loaded 12 template types
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256942691,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12856,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:22: ⏰ 4-minute startup delay active
2025-09-19T10:12:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:22: [INFO] Using PQueue for job processing
2025-09-19T10:12:22: [INFO] Memory management setup completed
2025-09-19T10:12:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:22: [INFO] Checking process locks...
2025-09-19T10:12:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:22: [INFO] Process locks acquired successfully
2025-09-19T10:12:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:22: [INFO] Logs directory created
2025-09-19T10:12:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:22: [10:12:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:22: [10:12:22 am] ✅ Google Sheets API initialized
2025-09-19T10:12:22: [INFO] Google Sheets helper initialized
2025-09-19T10:12:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:22: 🗑️ Deleted old log file: bot-2025-09-18T17-33-41-179Z.log
2025-09-19T10:12:22: 📝 Enhanced Logger initialized
2025-09-19T10:12:22: 📁 Loaded statistics from file
2025-09-19T10:12:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:22: 🧹 Removed stale process lock
2025-09-19T10:12:22: 🔒 Process lock acquired (PID: 12856)
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12856
}
2025-09-19T10:12:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256942691, processId: 12856 },
  timestamp: 1758256942767
}
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256942691, willExpireAt: 1758257182691 },
  timestamp: 1758256942768
}
2025-09-19T10:12:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:22: 📋 Message rules loaded: 8 types
2025-09-19T10:12:22: ℹ️ [10:12:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 78,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:23: [INFO] WhatsApp client initialized
2025-09-19T10:12:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:27: 📝 Loaded 12 template types
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256947587,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10080,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:27: ⏰ 4-minute startup delay active
2025-09-19T10:12:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:27: [INFO] Using PQueue for job processing
2025-09-19T10:12:27: [INFO] Memory management setup completed
2025-09-19T10:12:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:27: [INFO] Checking process locks...
2025-09-19T10:12:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:27: [INFO] Process locks acquired successfully
2025-09-19T10:12:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:27: [INFO] Logs directory created
2025-09-19T10:12:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:27: [10:12:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:27: [10:12:27 am] ✅ Google Sheets API initialized
2025-09-19T10:12:27: [INFO] Google Sheets helper initialized
2025-09-19T10:12:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:27: 🗑️ Deleted old log file: bot-2025-09-18T19-10-36-024Z.log
2025-09-19T10:12:27: 📝 Enhanced Logger initialized
2025-09-19T10:12:27: 📁 Loaded statistics from file
2025-09-19T10:12:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:27: 🧹 Removed stale process lock
2025-09-19T10:12:27: 🔒 Process lock acquired (PID: 10080)
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10080
}
2025-09-19T10:12:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256947587, processId: 10080 },
  timestamp: 1758256947872
}
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256947587, willExpireAt: 1758257187587 },
  timestamp: 1758256947873
}
2025-09-19T10:12:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:27: 📋 Message rules loaded: 8 types
2025-09-19T10:12:27: ℹ️ [10:12:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 292,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:29: [INFO] WhatsApp client initialized
2025-09-19T10:12:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:33: 📝 Loaded 12 template types
2025-09-19T10:12:33: ℹ️ [10:12:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256953767,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9560,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:33: ⏰ 4-minute startup delay active
2025-09-19T10:12:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:33: [INFO] Using PQueue for job processing
2025-09-19T10:12:33: [INFO] Memory management setup completed
2025-09-19T10:12:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:33: [INFO] Checking process locks...
2025-09-19T10:12:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:33: ℹ️ [10:12:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:33: [INFO] Process locks acquired successfully
2025-09-19T10:12:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:33: [INFO] Logs directory created
2025-09-19T10:12:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:33: [10:12:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:33: [10:12:33 am] ✅ Google Sheets API initialized
2025-09-19T10:12:33: [INFO] Google Sheets helper initialized
2025-09-19T10:12:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:33: ℹ️ [10:12:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:34: 🗑️ Deleted old log file: bot-2025-09-18T19-12-29-872Z.log
2025-09-19T10:12:34: 📝 Enhanced Logger initialized
2025-09-19T10:12:34: 📁 Loaded statistics from file
2025-09-19T10:12:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:34: 🧹 Removed stale process lock
2025-09-19T10:12:34: 🔒 Process lock acquired (PID: 9560)
2025-09-19T10:12:34: ℹ️ [10:12:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9560
}
2025-09-19T10:12:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:34: ℹ️ [10:12:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256953767, processId: 9560 },
  timestamp: 1758256954014
}
2025-09-19T10:12:34: ℹ️ [10:12:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256953767, willExpireAt: 1758257193767 },
  timestamp: 1758256954014
}
2025-09-19T10:12:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:34: 📋 Message rules loaded: 8 types
2025-09-19T10:12:34: ℹ️ [10:12:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 251,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:34: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:34: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:34: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:34: [INFO] WhatsApp client initialized
2025-09-19T10:12:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:38: 📝 Loaded 12 template types
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256958371,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15880,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:38: ⏰ 4-minute startup delay active
2025-09-19T10:12:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:38: [INFO] Using PQueue for job processing
2025-09-19T10:12:38: [INFO] Memory management setup completed
2025-09-19T10:12:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:38: [INFO] Checking process locks...
2025-09-19T10:12:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:38: [INFO] Process locks acquired successfully
2025-09-19T10:12:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:38: [INFO] Logs directory created
2025-09-19T10:12:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:38: [10:12:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:38: [10:12:38 am] ✅ Google Sheets API initialized
2025-09-19T10:12:38: [INFO] Google Sheets helper initialized
2025-09-19T10:12:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:38: 🗑️ Deleted old log file: bot-2025-09-19T04-41-53-198Z.log
2025-09-19T10:12:38: 📝 Enhanced Logger initialized
2025-09-19T10:12:38: 📁 Loaded statistics from file
2025-09-19T10:12:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:38: 🧹 Removed stale process lock
2025-09-19T10:12:38: 🔒 Process lock acquired (PID: 15880)
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15880
}
2025-09-19T10:12:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256958371, processId: 15880 },
  timestamp: 1758256958619
}
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256958371, willExpireAt: 1758257198371 },
  timestamp: 1758256958620
}
2025-09-19T10:12:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:38: 📋 Message rules loaded: 8 types
2025-09-19T10:12:38: ℹ️ [10:12:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 253,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:39: [INFO] WhatsApp client initialized
2025-09-19T10:12:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:41: 📝 Loaded 12 template types
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256961086,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11700,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:41: ⏰ 4-minute startup delay active
2025-09-19T10:12:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:41: [INFO] Using PQueue for job processing
2025-09-19T10:12:41: [INFO] Memory management setup completed
2025-09-19T10:12:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:41: [INFO] Checking process locks...
2025-09-19T10:12:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:41: [INFO] Process locks acquired successfully
2025-09-19T10:12:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:41: [INFO] Logs directory created
2025-09-19T10:12:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:41: [10:12:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:41: [10:12:41 am] ✅ Google Sheets API initialized
2025-09-19T10:12:41: [INFO] Google Sheets helper initialized
2025-09-19T10:12:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:41: 🗑️ Deleted old log file: bot-2025-09-19T04-41-56-315Z.log
2025-09-19T10:12:41: 📝 Enhanced Logger initialized
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:41: 📁 Loaded statistics from file
2025-09-19T10:12:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:41: 🧹 Removed stale process lock
2025-09-19T10:12:41: 🔒 Process lock acquired (PID: 11700)
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11700
}
2025-09-19T10:12:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256961086, processId: 11700 },
  timestamp: 1758256961177
}
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256961086, willExpireAt: 1758257201086 },
  timestamp: 1758256961177
}
2025-09-19T10:12:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:41: 📋 Message rules loaded: 8 types
2025-09-19T10:12:41: ℹ️ [10:12:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 93,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:42: [INFO] WhatsApp client initialized
2025-09-19T10:12:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:44: 📝 Loaded 12 template types
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256964250,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14324,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:44: ⏰ 4-minute startup delay active
2025-09-19T10:12:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:44: [INFO] Using PQueue for job processing
2025-09-19T10:12:44: [INFO] Memory management setup completed
2025-09-19T10:12:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:44: [INFO] Checking process locks...
2025-09-19T10:12:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:44: [INFO] Process locks acquired successfully
2025-09-19T10:12:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:44: [INFO] Logs directory created
2025-09-19T10:12:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:44: [10:12:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:44: [10:12:44 am] ✅ Google Sheets API initialized
2025-09-19T10:12:44: [INFO] Google Sheets helper initialized
2025-09-19T10:12:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:44: 🗑️ Deleted old log file: bot-2025-09-19T04-41-58-908Z.log
2025-09-19T10:12:44: 📝 Enhanced Logger initialized
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:44: 📁 Loaded statistics from file
2025-09-19T10:12:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:44: 🧹 Removed stale process lock
2025-09-19T10:12:44: 🔒 Process lock acquired (PID: 14324)
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14324
}
2025-09-19T10:12:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256964250, processId: 14324 },
  timestamp: 1758256964353
}
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256964250, willExpireAt: 1758257204250 },
  timestamp: 1758256964354
}
2025-09-19T10:12:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:44: 📋 Message rules loaded: 8 types
2025-09-19T10:12:44: ℹ️ [10:12:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:45: [INFO] WhatsApp client initialized
2025-09-19T10:12:46: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:46: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:46: 📝 Loaded 12 template types
2025-09-19T10:12:46: ℹ️ [10:12:46 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256966933,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16820,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:46: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:46: ⏰ 4-minute startup delay active
2025-09-19T10:12:46: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:46: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:46: [INFO] Using PQueue for job processing
2025-09-19T10:12:46: [INFO] Memory management setup completed
2025-09-19T10:12:46: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:46: [INFO] Checking process locks...
2025-09-19T10:12:46: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:46: ℹ️ [10:12:46 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:46: [INFO] Process locks acquired successfully
2025-09-19T10:12:46: [INFO] Logs directory created
2025-09-19T10:12:46: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:46: [10:12:46 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:46: [10:12:46 am] ✅ Google Sheets API initialized
2025-09-19T10:12:46: [INFO] Google Sheets helper initialized
2025-09-19T10:12:46: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:47: 🗑️ Deleted old log file: bot-2025-09-19T04-42-01-992Z.log
2025-09-19T10:12:47: 📝 Enhanced Logger initialized
2025-09-19T10:12:47: ℹ️ [10:12:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:47: 📁 Loaded statistics from file
2025-09-19T10:12:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:47: 🧹 Removed stale process lock
2025-09-19T10:12:47: 🔒 Process lock acquired (PID: 16820)
2025-09-19T10:12:47: ℹ️ [10:12:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16820
}
2025-09-19T10:12:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:47: ℹ️ [10:12:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256966933, willExpireAt: 1758257206933 },
  timestamp: 1758256967024
}
2025-09-19T10:12:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:47: 📋 Message rules loaded: 8 types
2025-09-19T10:12:47: ℹ️ [10:12:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256966933, processId: 16820 },
  timestamp: 1758256967024
}
2025-09-19T10:12:47: ℹ️ [10:12:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 92,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:47: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:48: [INFO] WhatsApp client initialized
2025-09-19T10:12:49: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:49: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:49: 📝 Loaded 12 template types
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256969804,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10096,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:49: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:49: ⏰ 4-minute startup delay active
2025-09-19T10:12:49: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:49: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:49: [INFO] Using PQueue for job processing
2025-09-19T10:12:49: [INFO] Memory management setup completed
2025-09-19T10:12:49: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:49: [INFO] Checking process locks...
2025-09-19T10:12:49: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:49: [INFO] Process locks acquired successfully
2025-09-19T10:12:49: [INFO] Logs directory created
2025-09-19T10:12:49: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:49: [10:12:49 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:49: [10:12:49 am] ✅ Google Sheets API initialized
2025-09-19T10:12:49: [INFO] Google Sheets helper initialized
2025-09-19T10:12:49: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:49: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:49: 🗑️ Deleted old log file: bot-2025-09-19T04-42-05-642Z.log
2025-09-19T10:12:49: 📝 Enhanced Logger initialized
2025-09-19T10:12:49: 📁 Loaded statistics from file
2025-09-19T10:12:49: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:49: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:49: 🧹 Removed stale process lock
2025-09-19T10:12:49: 🔒 Process lock acquired (PID: 10096)
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10096
}
2025-09-19T10:12:49: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:49: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256969804, processId: 10096 },
  timestamp: 1758256969930
}
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256969804, willExpireAt: 1758257209804 },
  timestamp: 1758256969931
}
2025-09-19T10:12:49: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:49: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:49: 📋 Message rules loaded: 8 types
2025-09-19T10:12:49: ℹ️ [10:12:49 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:50: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:50: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:50: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:50: [INFO] WhatsApp client initialized
2025-09-19T10:12:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:52: 📝 Loaded 12 template types
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256972650,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5824,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:52: ⏰ 4-minute startup delay active
2025-09-19T10:12:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:52: [INFO] Using PQueue for job processing
2025-09-19T10:12:52: [INFO] Memory management setup completed
2025-09-19T10:12:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:52: [INFO] Checking process locks...
2025-09-19T10:12:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:52: [INFO] Process locks acquired successfully
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:52: [INFO] Logs directory created
2025-09-19T10:12:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:52: [10:12:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:52: [10:12:52 am] ✅ Google Sheets API initialized
2025-09-19T10:12:52: [INFO] Google Sheets helper initialized
2025-09-19T10:12:52: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:52: 🗑️ Deleted old log file: bot-2025-09-19T04-42-11-508Z.log
2025-09-19T10:12:52: 📝 Enhanced Logger initialized
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:52: 📁 Loaded statistics from file
2025-09-19T10:12:52: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:52: 🧹 Removed stale process lock
2025-09-19T10:12:52: 🔒 Process lock acquired (PID: 5824)
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5824
}
2025-09-19T10:12:52: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:52: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256972650, processId: 5824 },
  timestamp: 1758256972774
}
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256972650, willExpireAt: 1758257212650 },
  timestamp: 1758256972775
}
2025-09-19T10:12:52: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:52: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:52: 📋 Message rules loaded: 8 types
2025-09-19T10:12:52: ℹ️ [10:12:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:53: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:53: [INFO] WhatsApp client initialized
2025-09-19T10:12:55: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:12:55: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:12:55: 📝 Loaded 12 template types
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256975544,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12856,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:12:55: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:12:55: ⏰ 4-minute startup delay active
2025-09-19T10:12:55: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:12:55: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:12:55: [INFO] Using PQueue for job processing
2025-09-19T10:12:55: [INFO] Memory management setup completed
2025-09-19T10:12:55: [INFO] Starting WhatsApp Bot...
2025-09-19T10:12:55: [INFO] Checking process locks...
2025-09-19T10:12:55: 📁 Loaded 0 sent messages from file
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:12:55: [INFO] Process locks acquired successfully
2025-09-19T10:12:55: 📁 Loaded 0 customer histories from file
2025-09-19T10:12:55: [INFO] Logs directory created
2025-09-19T10:12:55: [INFO] Initializing Google Sheets helper...
2025-09-19T10:12:55: [10:12:55 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:12:55: [10:12:55 am] ✅ Google Sheets API initialized
2025-09-19T10:12:55: [INFO] Google Sheets helper initialized
2025-09-19T10:12:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:12:55: 🗑️ Deleted old log file: bot-2025-09-19T04-42-17-295Z.log
2025-09-19T10:12:55: 📝 Enhanced Logger initialized
2025-09-19T10:12:55: 📁 Loaded statistics from file
2025-09-19T10:12:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:12:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:12:55: 🧹 Removed stale process lock
2025-09-19T10:12:55: 🔒 Process lock acquired (PID: 12856)
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12856
}
2025-09-19T10:12:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:12:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256975544, processId: 12856 },
  timestamp: 1758256975739
}
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256975544, willExpireAt: 1758257215544 },
  timestamp: 1758256975739
}
2025-09-19T10:12:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:12:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:12:55: 📋 Message rules loaded: 8 types
2025-09-19T10:12:55: ℹ️ [10:12:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 199,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:12:56: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:12:56: [INFO] Initializing WhatsApp client...
2025-09-19T10:12:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:12:56: [INFO] WhatsApp client initialized
2025-09-19T10:13:04: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:04: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:04: 📝 Loaded 12 template types
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256984363,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8952,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:04: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:04: ⏰ 4-minute startup delay active
2025-09-19T10:13:04: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:04: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:04: [INFO] Using PQueue for job processing
2025-09-19T10:13:04: [INFO] Memory management setup completed
2025-09-19T10:13:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:04: [INFO] Checking process locks...
2025-09-19T10:13:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:04: [INFO] Process locks acquired successfully
2025-09-19T10:13:04: [INFO] Logs directory created
2025-09-19T10:13:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:04: [10:13:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:04: [10:13:04 am] ✅ Google Sheets API initialized
2025-09-19T10:13:04: [INFO] Google Sheets helper initialized
2025-09-19T10:13:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:04: 🗑️ Deleted old log file: bot-2025-09-19T04-42-20-168Z.log
2025-09-19T10:13:04: 📝 Enhanced Logger initialized
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:04: 📁 Loaded statistics from file
2025-09-19T10:13:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:04: 🧹 Removed stale process lock
2025-09-19T10:13:04: 🔒 Process lock acquired (PID: 8952)
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8952
}
2025-09-19T10:13:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256984363, processId: 8952 },
  timestamp: 1758256984762
}
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256984363, willExpireAt: 1758257224363 },
  timestamp: 1758256984763
}
2025-09-19T10:13:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:04: 📋 Message rules loaded: 8 types
2025-09-19T10:13:04: ℹ️ [10:13:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 403,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:05: [INFO] WhatsApp client initialized
2025-09-19T10:13:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:08: 📝 Loaded 12 template types
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256988379,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1664,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:08: ⏰ 4-minute startup delay active
2025-09-19T10:13:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:08: [INFO] Using PQueue for job processing
2025-09-19T10:13:08: [INFO] Memory management setup completed
2025-09-19T10:13:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:08: [INFO] Checking process locks...
2025-09-19T10:13:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:08: [INFO] Process locks acquired successfully
2025-09-19T10:13:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:08: [INFO] Logs directory created
2025-09-19T10:13:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:08: [10:13:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:08: [10:13:08 am] ✅ Google Sheets API initialized
2025-09-19T10:13:08: [INFO] Google Sheets helper initialized
2025-09-19T10:13:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:08: 🗑️ Deleted old log file: bot-2025-09-19T04-42-22-712Z.log
2025-09-19T10:13:08: 📝 Enhanced Logger initialized
2025-09-19T10:13:08: 📁 Loaded statistics from file
2025-09-19T10:13:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:08: 🧹 Removed stale process lock
2025-09-19T10:13:08: 🔒 Process lock acquired (PID: 1664)
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1664
}
2025-09-19T10:13:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256988379, processId: 1664 },
  timestamp: 1758256988526
}
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256988379, willExpireAt: 1758257228379 },
  timestamp: 1758256988527
}
2025-09-19T10:13:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:08: 📋 Message rules loaded: 8 types
2025-09-19T10:13:08: ℹ️ [10:13:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 150,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:09: [INFO] WhatsApp client initialized
2025-09-19T10:13:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:11: 📝 Loaded 12 template types
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256991104,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7708,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:11: ⏰ 4-minute startup delay active
2025-09-19T10:13:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:11: [INFO] Using PQueue for job processing
2025-09-19T10:13:11: [INFO] Memory management setup completed
2025-09-19T10:13:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:11: [INFO] Checking process locks...
2025-09-19T10:13:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:11: [INFO] Process locks acquired successfully
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:11: [INFO] Logs directory created
2025-09-19T10:13:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:11: [10:13:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:11: [10:13:11 am] ✅ Google Sheets API initialized
2025-09-19T10:13:11: [INFO] Google Sheets helper initialized
2025-09-19T10:13:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:11: 🗑️ Deleted old log file: bot-2025-09-19T04-42-27-672Z.log
2025-09-19T10:13:11: 📝 Enhanced Logger initialized
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:11: 📁 Loaded statistics from file
2025-09-19T10:13:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:11: 🧹 Removed stale process lock
2025-09-19T10:13:11: 🔒 Process lock acquired (PID: 7708)
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7708
}
2025-09-19T10:13:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256991104, processId: 7708 },
  timestamp: 1758256991229
}
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256991104, willExpireAt: 1758257231104 },
  timestamp: 1758256991229
}
2025-09-19T10:13:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:11: 📋 Message rules loaded: 8 types
2025-09-19T10:13:11: ℹ️ [10:13:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:12: [INFO] WhatsApp client initialized
2025-09-19T10:13:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:13: 📝 Loaded 12 template types
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256993701,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8512,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:13: ⏰ 4-minute startup delay active
2025-09-19T10:13:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:13: [INFO] Using PQueue for job processing
2025-09-19T10:13:13: [INFO] Memory management setup completed
2025-09-19T10:13:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:13: [INFO] Checking process locks...
2025-09-19T10:13:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:13: [INFO] Process locks acquired successfully
2025-09-19T10:13:13: [INFO] Logs directory created
2025-09-19T10:13:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:13: [10:13:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:13: [10:13:13 am] ✅ Google Sheets API initialized
2025-09-19T10:13:13: [INFO] Google Sheets helper initialized
2025-09-19T10:13:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:13: 🗑️ Deleted old log file: bot-2025-09-19T04-42-33-838Z.log
2025-09-19T10:13:13: 📝 Enhanced Logger initialized
2025-09-19T10:13:13: 📁 Loaded statistics from file
2025-09-19T10:13:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:13: 🧹 Removed stale process lock
2025-09-19T10:13:13: 🔒 Process lock acquired (PID: 8512)
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8512
}
2025-09-19T10:13:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256993701, processId: 8512 },
  timestamp: 1758256993804
}
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256993701, willExpireAt: 1758257233701 },
  timestamp: 1758256993805
}
2025-09-19T10:13:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:13: 📋 Message rules loaded: 8 types
2025-09-19T10:13:13: ℹ️ [10:13:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:14: [INFO] WhatsApp client initialized
2025-09-19T10:13:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:16: 📝 Loaded 12 template types
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256996656,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5540,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:16: ⏰ 4-minute startup delay active
2025-09-19T10:13:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:16: [INFO] Using PQueue for job processing
2025-09-19T10:13:16: [INFO] Memory management setup completed
2025-09-19T10:13:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:16: [INFO] Checking process locks...
2025-09-19T10:13:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:16: [INFO] Process locks acquired successfully
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:16: [INFO] Logs directory created
2025-09-19T10:13:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:16: [10:13:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:16: [10:13:16 am] ✅ Google Sheets API initialized
2025-09-19T10:13:16: [INFO] Google Sheets helper initialized
2025-09-19T10:13:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:16: 🗑️ Deleted old log file: bot-2025-09-19T04-42-38-439Z.log
2025-09-19T10:13:16: 📝 Enhanced Logger initialized
2025-09-19T10:13:16: 📁 Loaded statistics from file
2025-09-19T10:13:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:16: 🧹 Removed stale process lock
2025-09-19T10:13:16: 🔒 Process lock acquired (PID: 5540)
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5540
}
2025-09-19T10:13:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256996656, processId: 5540 },
  timestamp: 1758256996780
}
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256996656, willExpireAt: 1758257236656 },
  timestamp: 1758256996780
}
2025-09-19T10:13:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:16: 📋 Message rules loaded: 8 types
2025-09-19T10:13:16: ℹ️ [10:13:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:17: [INFO] WhatsApp client initialized
2025-09-19T10:13:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:19: 📝 Loaded 12 template types
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758256999699,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12600,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:19: ⏰ 4-minute startup delay active
2025-09-19T10:13:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:19: [INFO] Using PQueue for job processing
2025-09-19T10:13:19: [INFO] Memory management setup completed
2025-09-19T10:13:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:19: [INFO] Checking process locks...
2025-09-19T10:13:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:19: [INFO] Process locks acquired successfully
2025-09-19T10:13:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:19: [INFO] Logs directory created
2025-09-19T10:13:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:19: [10:13:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:19: [10:13:19 am] ✅ Google Sheets API initialized
2025-09-19T10:13:19: [INFO] Google Sheets helper initialized
2025-09-19T10:13:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:19: 🗑️ Deleted old log file: bot-2025-09-19T04-42-41-112Z.log
2025-09-19T10:13:19: 📝 Enhanced Logger initialized
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:19: 📁 Loaded statistics from file
2025-09-19T10:13:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:19: 🧹 Removed stale process lock
2025-09-19T10:13:19: 🔒 Process lock acquired (PID: 12600)
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12600
}
2025-09-19T10:13:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256999699, willExpireAt: 1758257239699 },
  timestamp: 1758256999894
}
2025-09-19T10:13:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:19: 📋 Message rules loaded: 8 types
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758256999699, processId: 12600 },
  timestamp: 1758256999894
}
2025-09-19T10:13:19: ℹ️ [10:13:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 198,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:20: [INFO] WhatsApp client initialized
2025-09-19T10:13:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:22: 📝 Loaded 12 template types
2025-09-19T10:13:23: ℹ️ [10:13:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257002990,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11128,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:23: ⏰ 4-minute startup delay active
2025-09-19T10:13:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:23: [INFO] Using PQueue for job processing
2025-09-19T10:13:23: [INFO] Memory management setup completed
2025-09-19T10:13:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:23: [INFO] Checking process locks...
2025-09-19T10:13:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:23: ℹ️ [10:13:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:23: [INFO] Process locks acquired successfully
2025-09-19T10:13:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:23: [INFO] Logs directory created
2025-09-19T10:13:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:23: [10:13:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:23: [10:13:23 am] ✅ Google Sheets API initialized
2025-09-19T10:13:23: [INFO] Google Sheets helper initialized
2025-09-19T10:13:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:23: 🗑️ Deleted old log file: bot-2025-09-19T04-42-44-277Z.log
2025-09-19T10:13:23: 📝 Enhanced Logger initialized
2025-09-19T10:13:23: ℹ️ [10:13:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:23: 📁 Loaded statistics from file
2025-09-19T10:13:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:23: 🧹 Removed stale process lock
2025-09-19T10:13:23: 🔒 Process lock acquired (PID: 11128)
2025-09-19T10:13:23: ℹ️ [10:13:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11128
}
2025-09-19T10:13:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:23: ℹ️ [10:13:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257002990, willExpireAt: 1758257242990 },
  timestamp: 1758257003110
}
2025-09-19T10:13:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:23: 📋 Message rules loaded: 8 types
2025-09-19T10:13:23: ℹ️ [10:13:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257002990, processId: 11128 },
  timestamp: 1758257003110
}
2025-09-19T10:13:23: ℹ️ [10:13:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:24: [INFO] WhatsApp client initialized
2025-09-19T10:13:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:25: 📝 Loaded 12 template types
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257005696,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3268,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:25: ⏰ 4-minute startup delay active
2025-09-19T10:13:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:25: [INFO] Using PQueue for job processing
2025-09-19T10:13:25: [INFO] Memory management setup completed
2025-09-19T10:13:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:25: [INFO] Checking process locks...
2025-09-19T10:13:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:25: [INFO] Process locks acquired successfully
2025-09-19T10:13:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:25: [INFO] Logs directory created
2025-09-19T10:13:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:25: [10:13:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:25: [10:13:25 am] ✅ Google Sheets API initialized
2025-09-19T10:13:25: [INFO] Google Sheets helper initialized
2025-09-19T10:13:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:25: 🗑️ Deleted old log file: bot-2025-09-19T04-42-46-957Z.log
2025-09-19T10:13:25: 📝 Enhanced Logger initialized
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:25: 📁 Loaded statistics from file
2025-09-19T10:13:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:25: 🧹 Removed stale process lock
2025-09-19T10:13:25: 🔒 Process lock acquired (PID: 3268)
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3268
}
2025-09-19T10:13:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257005696, processId: 3268 },
  timestamp: 1758257005793
}
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257005696, willExpireAt: 1758257245696 },
  timestamp: 1758257005793
}
2025-09-19T10:13:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:25: 📋 Message rules loaded: 8 types
2025-09-19T10:13:25: ℹ️ [10:13:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 99,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:26: [INFO] WhatsApp client initialized
2025-09-19T10:13:28: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:28: 📝 Loaded 12 template types
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257008544,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8560,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:28: ⏰ 4-minute startup delay active
2025-09-19T10:13:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:28: [INFO] Using PQueue for job processing
2025-09-19T10:13:28: [INFO] Memory management setup completed
2025-09-19T10:13:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:28: [INFO] Checking process locks...
2025-09-19T10:13:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:28: [INFO] Process locks acquired successfully
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:28: [INFO] Logs directory created
2025-09-19T10:13:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:28: [10:13:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:28: [10:13:28 am] ✅ Google Sheets API initialized
2025-09-19T10:13:28: [INFO] Google Sheets helper initialized
2025-09-19T10:13:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:28: 🗑️ Deleted old log file: bot-2025-09-19T04-42-49-830Z.log
2025-09-19T10:13:28: 📝 Enhanced Logger initialized
2025-09-19T10:13:28: 📁 Loaded statistics from file
2025-09-19T10:13:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:28: 🧹 Removed stale process lock
2025-09-19T10:13:28: 🔒 Process lock acquired (PID: 8560)
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8560
}
2025-09-19T10:13:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257008544, processId: 8560 },
  timestamp: 1758257008684
}
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257008544, willExpireAt: 1758257248544 },
  timestamp: 1758257008684
}
2025-09-19T10:13:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:28: 📋 Message rules loaded: 8 types
2025-09-19T10:13:28: ℹ️ [10:13:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 143,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:29: [INFO] WhatsApp client initialized
2025-09-19T10:13:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:31: 📝 Loaded 12 template types
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257011634,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14960,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:31: ⏰ 4-minute startup delay active
2025-09-19T10:13:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:31: [INFO] Using PQueue for job processing
2025-09-19T10:13:31: [INFO] Memory management setup completed
2025-09-19T10:13:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:31: [INFO] Checking process locks...
2025-09-19T10:13:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:31: [INFO] Process locks acquired successfully
2025-09-19T10:13:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:31: [INFO] Logs directory created
2025-09-19T10:13:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:31: [10:13:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:31: [10:13:31 am] ✅ Google Sheets API initialized
2025-09-19T10:13:31: [INFO] Google Sheets helper initialized
2025-09-19T10:13:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:31: 🗑️ Deleted old log file: bot-2025-09-19T04-42-52-682Z.log
2025-09-19T10:13:31: 📝 Enhanced Logger initialized
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:31: 📁 Loaded statistics from file
2025-09-19T10:13:31: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:31: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:31: 🧹 Removed stale process lock
2025-09-19T10:13:31: 🔒 Process lock acquired (PID: 14960)
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14960
}
2025-09-19T10:13:31: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:31: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257011634, processId: 14960 },
  timestamp: 1758257011753
}
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257011634, willExpireAt: 1758257251634 },
  timestamp: 1758257011753
}
2025-09-19T10:13:31: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:31: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:31: 📋 Message rules loaded: 8 types
2025-09-19T10:13:31: ℹ️ [10:13:31 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:32: [INFO] WhatsApp client initialized
2025-09-19T10:13:34: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:34: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:34: 📝 Loaded 12 template types
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257014685,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9556,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:34: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:34: ⏰ 4-minute startup delay active
2025-09-19T10:13:34: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:34: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:34: [INFO] Using PQueue for job processing
2025-09-19T10:13:34: [INFO] Memory management setup completed
2025-09-19T10:13:34: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:34: [INFO] Checking process locks...
2025-09-19T10:13:34: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:34: [INFO] Process locks acquired successfully
2025-09-19T10:13:34: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:34: [INFO] Logs directory created
2025-09-19T10:13:34: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:34: [10:13:34 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:34: [10:13:34 am] ✅ Google Sheets API initialized
2025-09-19T10:13:34: [INFO] Google Sheets helper initialized
2025-09-19T10:13:34: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:34: 🗑️ Deleted old log file: bot-2025-09-19T04-42-55-601Z.log
2025-09-19T10:13:34: 📝 Enhanced Logger initialized
2025-09-19T10:13:34: 📁 Loaded statistics from file
2025-09-19T10:13:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:34: 🧹 Removed stale process lock
2025-09-19T10:13:34: 🔒 Process lock acquired (PID: 9556)
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9556
}
2025-09-19T10:13:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257014685, processId: 9556 },
  timestamp: 1758257014785
}
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257014685, willExpireAt: 1758257254685 },
  timestamp: 1758257014785
}
2025-09-19T10:13:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:34: 📋 Message rules loaded: 8 types
2025-09-19T10:13:34: ℹ️ [10:13:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:35: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:35: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:35: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:35: [INFO] WhatsApp client initialized
2025-09-19T10:13:37: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:37: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:37: 📝 Loaded 12 template types
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257017320,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1420,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:37: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:37: ⏰ 4-minute startup delay active
2025-09-19T10:13:37: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:37: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:37: [INFO] Using PQueue for job processing
2025-09-19T10:13:37: [INFO] Memory management setup completed
2025-09-19T10:13:37: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:37: [INFO] Checking process locks...
2025-09-19T10:13:37: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:37: [INFO] Process locks acquired successfully
2025-09-19T10:13:37: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:37: [INFO] Logs directory created
2025-09-19T10:13:37: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:37: [10:13:37 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:37: [10:13:37 am] ✅ Google Sheets API initialized
2025-09-19T10:13:37: [INFO] Google Sheets helper initialized
2025-09-19T10:13:37: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:37: 🗑️ Deleted old log file: bot-2025-09-19T04-43-04-536Z.log
2025-09-19T10:13:37: 📝 Enhanced Logger initialized
2025-09-19T10:13:37: 📁 Loaded statistics from file
2025-09-19T10:13:37: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:37: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:37: 🧹 Removed stale process lock
2025-09-19T10:13:37: 🔒 Process lock acquired (PID: 1420)
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1420
}
2025-09-19T10:13:37: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:37: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257017320, processId: 1420 },
  timestamp: 1758257017402
}
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257017320, willExpireAt: 1758257257320 },
  timestamp: 1758257017402
}
2025-09-19T10:13:37: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:37: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:37: 📋 Message rules loaded: 8 types
2025-09-19T10:13:37: ℹ️ [10:13:37 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 84,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:38: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:38: [INFO] WhatsApp client initialized
2025-09-19T10:13:40: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:40: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:40: 📝 Loaded 12 template types
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257020102,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8640,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:40: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:40: ⏰ 4-minute startup delay active
2025-09-19T10:13:40: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:40: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:40: [INFO] Using PQueue for job processing
2025-09-19T10:13:40: [INFO] Memory management setup completed
2025-09-19T10:13:40: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:40: [INFO] Checking process locks...
2025-09-19T10:13:40: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:40: [INFO] Process locks acquired successfully
2025-09-19T10:13:40: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:40: [INFO] Logs directory created
2025-09-19T10:13:40: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:40: [10:13:40 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:40: [10:13:40 am] ✅ Google Sheets API initialized
2025-09-19T10:13:40: [INFO] Google Sheets helper initialized
2025-09-19T10:13:40: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:40: 🗑️ Deleted old log file: bot-2025-09-19T04-43-08-421Z.log
2025-09-19T10:13:40: 📝 Enhanced Logger initialized
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:40: 📁 Loaded statistics from file
2025-09-19T10:13:40: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:40: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:40: 🧹 Removed stale process lock
2025-09-19T10:13:40: 🔒 Process lock acquired (PID: 8640)
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8640
}
2025-09-19T10:13:40: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:40: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257020102, processId: 8640 },
  timestamp: 1758257020196
}
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257020102, willExpireAt: 1758257260102 },
  timestamp: 1758257020196
}
2025-09-19T10:13:40: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:40: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:40: 📋 Message rules loaded: 8 types
2025-09-19T10:13:40: ℹ️ [10:13:40 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 96,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:41: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:41: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:41: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:41: [INFO] WhatsApp client initialized
2025-09-19T10:13:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:42: 📝 Loaded 12 template types
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257022680,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9580,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:42: ⏰ 4-minute startup delay active
2025-09-19T10:13:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:42: [INFO] Using PQueue for job processing
2025-09-19T10:13:42: [INFO] Memory management setup completed
2025-09-19T10:13:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:42: [INFO] Checking process locks...
2025-09-19T10:13:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:42: [INFO] Process locks acquired successfully
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:42: [INFO] Logs directory created
2025-09-19T10:13:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:42: [10:13:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:42: [10:13:42 am] ✅ Google Sheets API initialized
2025-09-19T10:13:42: [INFO] Google Sheets helper initialized
2025-09-19T10:13:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:42: 🗑️ Deleted old log file: bot-2025-09-19T04-43-11-139Z.log
2025-09-19T10:13:42: 📝 Enhanced Logger initialized
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:42: 📁 Loaded statistics from file
2025-09-19T10:13:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:42: 🧹 Removed stale process lock
2025-09-19T10:13:42: 🔒 Process lock acquired (PID: 9580)
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9580
}
2025-09-19T10:13:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257022680, willExpireAt: 1758257262680 },
  timestamp: 1758257022751
}
2025-09-19T10:13:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:42: 📋 Message rules loaded: 8 types
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257022680, processId: 9580 },
  timestamp: 1758257022751
}
2025-09-19T10:13:42: ℹ️ [10:13:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 72,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:43: [INFO] WhatsApp client initialized
2025-09-19T10:13:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:45: 📝 Loaded 12 template types
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257025640,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7576,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:45: ⏰ 4-minute startup delay active
2025-09-19T10:13:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:45: [INFO] Using PQueue for job processing
2025-09-19T10:13:45: [INFO] Memory management setup completed
2025-09-19T10:13:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:45: [INFO] Checking process locks...
2025-09-19T10:13:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:45: [INFO] Process locks acquired successfully
2025-09-19T10:13:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:45: [INFO] Logs directory created
2025-09-19T10:13:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:45: [10:13:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:45: [10:13:45 am] ✅ Google Sheets API initialized
2025-09-19T10:13:45: [INFO] Google Sheets helper initialized
2025-09-19T10:13:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:45: 🗑️ Deleted old log file: bot-2025-09-19T04-43-13-734Z.log
2025-09-19T10:13:45: 📝 Enhanced Logger initialized
2025-09-19T10:13:45: 📁 Loaded statistics from file
2025-09-19T10:13:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:45: 🧹 Removed stale process lock
2025-09-19T10:13:45: 🔒 Process lock acquired (PID: 7576)
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7576
}
2025-09-19T10:13:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257025640, processId: 7576 },
  timestamp: 1758257025760
}
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257025640, willExpireAt: 1758257265640 },
  timestamp: 1758257025760
}
2025-09-19T10:13:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:45: 📋 Message rules loaded: 8 types
2025-09-19T10:13:45: ℹ️ [10:13:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:46: [INFO] WhatsApp client initialized
2025-09-19T10:13:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:48: 📝 Loaded 12 template types
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257028492,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14204,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:48: ⏰ 4-minute startup delay active
2025-09-19T10:13:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:48: [INFO] Using PQueue for job processing
2025-09-19T10:13:48: [INFO] Memory management setup completed
2025-09-19T10:13:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:48: [INFO] Checking process locks...
2025-09-19T10:13:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:48: [INFO] Process locks acquired successfully
2025-09-19T10:13:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:48: [INFO] Logs directory created
2025-09-19T10:13:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:48: [10:13:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:48: [10:13:48 am] ✅ Google Sheets API initialized
2025-09-19T10:13:48: [INFO] Google Sheets helper initialized
2025-09-19T10:13:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:48: 🗑️ Deleted old log file: bot-2025-09-19T04-43-16-693Z.log
2025-09-19T10:13:48: 📝 Enhanced Logger initialized
2025-09-19T10:13:48: 📁 Loaded statistics from file
2025-09-19T10:13:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:48: 🧹 Removed stale process lock
2025-09-19T10:13:48: 🔒 Process lock acquired (PID: 14204)
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14204
}
2025-09-19T10:13:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257028492, processId: 14204 },
  timestamp: 1758257028625
}
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257028492, willExpireAt: 1758257268492 },
  timestamp: 1758257028625
}
2025-09-19T10:13:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:48: 📋 Message rules loaded: 8 types
2025-09-19T10:13:48: ℹ️ [10:13:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:49: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:49: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:49: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:49: [INFO] WhatsApp client initialized
2025-09-19T10:13:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:51: 📝 Loaded 12 template types
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257031164,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7736,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:51: ⏰ 4-minute startup delay active
2025-09-19T10:13:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:51: [INFO] Using PQueue for job processing
2025-09-19T10:13:51: [INFO] Memory management setup completed
2025-09-19T10:13:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:51: [INFO] Checking process locks...
2025-09-19T10:13:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:51: [INFO] Process locks acquired successfully
2025-09-19T10:13:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:51: [INFO] Logs directory created
2025-09-19T10:13:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:51: [10:13:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:51: [10:13:51 am] ✅ Google Sheets API initialized
2025-09-19T10:13:51: [INFO] Google Sheets helper initialized
2025-09-19T10:13:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:51: 🗑️ Deleted old log file: bot-2025-09-19T04-43-19-753Z.log
2025-09-19T10:13:51: 📝 Enhanced Logger initialized
2025-09-19T10:13:51: 📁 Loaded statistics from file
2025-09-19T10:13:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:51: 🧹 Removed stale process lock
2025-09-19T10:13:51: 🔒 Process lock acquired (PID: 7736)
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7736
}
2025-09-19T10:13:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257031164, processId: 7736 },
  timestamp: 1758257031287
}
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257031164, willExpireAt: 1758257271164 },
  timestamp: 1758257031287
}
2025-09-19T10:13:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:51: 📋 Message rules loaded: 8 types
2025-09-19T10:13:51: ℹ️ [10:13:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:52: [INFO] WhatsApp client initialized
2025-09-19T10:13:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:53: 📝 Loaded 12 template types
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257033621,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11036,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:53: ⏰ 4-minute startup delay active
2025-09-19T10:13:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:53: [INFO] Using PQueue for job processing
2025-09-19T10:13:53: [INFO] Memory management setup completed
2025-09-19T10:13:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:53: [INFO] Checking process locks...
2025-09-19T10:13:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:53: [INFO] Process locks acquired successfully
2025-09-19T10:13:53: [INFO] Logs directory created
2025-09-19T10:13:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:53: [10:13:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:53: [10:13:53 am] ✅ Google Sheets API initialized
2025-09-19T10:13:53: [INFO] Google Sheets helper initialized
2025-09-19T10:13:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:53: 🗑️ Deleted old log file: bot-2025-09-19T04-43-23-020Z.log
2025-09-19T10:13:53: 📝 Enhanced Logger initialized
2025-09-19T10:13:53: 📁 Loaded statistics from file
2025-09-19T10:13:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:53: 🧹 Removed stale process lock
2025-09-19T10:13:53: 🔒 Process lock acquired (PID: 11036)
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11036
}
2025-09-19T10:13:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257033621, processId: 11036 },
  timestamp: 1758257033747
}
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257033621, willExpireAt: 1758257273621 },
  timestamp: 1758257033747
}
2025-09-19T10:13:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:53: 📋 Message rules loaded: 8 types
2025-09-19T10:13:53: ℹ️ [10:13:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:54: [INFO] WhatsApp client initialized
2025-09-19T10:13:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:56: 📝 Loaded 12 template types
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257036333,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11108,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:56: ⏰ 4-minute startup delay active
2025-09-19T10:13:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:56: [INFO] Using PQueue for job processing
2025-09-19T10:13:56: [INFO] Memory management setup completed
2025-09-19T10:13:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:56: [INFO] Checking process locks...
2025-09-19T10:13:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:56: [INFO] Process locks acquired successfully
2025-09-19T10:13:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:56: [INFO] Logs directory created
2025-09-19T10:13:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:56: [10:13:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:56: [10:13:56 am] ✅ Google Sheets API initialized
2025-09-19T10:13:56: [INFO] Google Sheets helper initialized
2025-09-19T10:13:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:56: 🗑️ Deleted old log file: bot-2025-09-19T04-43-25-720Z.log
2025-09-19T10:13:56: 📝 Enhanced Logger initialized
2025-09-19T10:13:56: 📁 Loaded statistics from file
2025-09-19T10:13:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:56: 🧹 Removed stale process lock
2025-09-19T10:13:56: 🔒 Process lock acquired (PID: 11108)
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11108
}
2025-09-19T10:13:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257036333, processId: 11108 },
  timestamp: 1758257036443
}
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257036333, willExpireAt: 1758257276333 },
  timestamp: 1758257036443
}
2025-09-19T10:13:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:56: 📋 Message rules loaded: 8 types
2025-09-19T10:13:56: ℹ️ [10:13:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:13:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:13:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:13:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:13:57: [INFO] WhatsApp client initialized
2025-09-19T10:13:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:13:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:13:59: 📝 Loaded 12 template types
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257039149,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9624,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:13:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:13:59: ⏰ 4-minute startup delay active
2025-09-19T10:13:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:13:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:13:59: [INFO] Using PQueue for job processing
2025-09-19T10:13:59: [INFO] Memory management setup completed
2025-09-19T10:13:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:13:59: [INFO] Checking process locks...
2025-09-19T10:13:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:13:59: [INFO] Process locks acquired successfully
2025-09-19T10:13:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:13:59: [INFO] Logs directory created
2025-09-19T10:13:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:13:59: [10:13:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:13:59: [10:13:59 am] ✅ Google Sheets API initialized
2025-09-19T10:13:59: [INFO] Google Sheets helper initialized
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:13:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:13:59: 🗑️ Deleted old log file: bot-2025-09-19T04-43-28-577Z.log
2025-09-19T10:13:59: 📝 Enhanced Logger initialized
2025-09-19T10:13:59: 📁 Loaded statistics from file
2025-09-19T10:13:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:13:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:13:59: 🧹 Removed stale process lock
2025-09-19T10:13:59: 🔒 Process lock acquired (PID: 9624)
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9624
}
2025-09-19T10:13:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:13:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257039149, processId: 9624 },
  timestamp: 1758257039245
}
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257039149, willExpireAt: 1758257279149 },
  timestamp: 1758257039246
}
2025-09-19T10:13:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:13:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:13:59: 📋 Message rules loaded: 8 types
2025-09-19T10:13:59: ℹ️ [10:13:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 99,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:00: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:00: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:00: [INFO] WhatsApp client initialized
2025-09-19T10:14:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:01: 📝 Loaded 12 template types
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257041817,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3284,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:01: ⏰ 4-minute startup delay active
2025-09-19T10:14:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:01: [INFO] Using PQueue for job processing
2025-09-19T10:14:01: [INFO] Memory management setup completed
2025-09-19T10:14:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:01: [INFO] Checking process locks...
2025-09-19T10:14:01: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:01: [INFO] Process locks acquired successfully
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:01: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:01: [INFO] Logs directory created
2025-09-19T10:14:01: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:01: [10:14:01 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:01: [10:14:01 am] ✅ Google Sheets API initialized
2025-09-19T10:14:01: [INFO] Google Sheets helper initialized
2025-09-19T10:14:01: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:01: 🗑️ Deleted old log file: bot-2025-09-19T04-43-31-669Z.log
2025-09-19T10:14:01: 📝 Enhanced Logger initialized
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:01: 📁 Loaded statistics from file
2025-09-19T10:14:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:01: 🧹 Removed stale process lock
2025-09-19T10:14:01: 🔒 Process lock acquired (PID: 3284)
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3284
}
2025-09-19T10:14:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257041817, processId: 3284 },
  timestamp: 1758257041938
}
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257041817, willExpireAt: 1758257281817 },
  timestamp: 1758257041938
}
2025-09-19T10:14:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:01: 📋 Message rules loaded: 8 types
2025-09-19T10:14:01: ℹ️ [10:14:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:02: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:02: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:02: [INFO] WhatsApp client initialized
2025-09-19T10:14:04: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:04: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:04: 📝 Loaded 12 template types
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257044691,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6740,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:04: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:04: ⏰ 4-minute startup delay active
2025-09-19T10:14:04: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:04: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:04: [INFO] Using PQueue for job processing
2025-09-19T10:14:04: [INFO] Memory management setup completed
2025-09-19T10:14:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:04: [INFO] Checking process locks...
2025-09-19T10:14:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:04: [INFO] Process locks acquired successfully
2025-09-19T10:14:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:04: [INFO] Logs directory created
2025-09-19T10:14:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:04: [10:14:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:04: [10:14:04 am] ✅ Google Sheets API initialized
2025-09-19T10:14:04: [INFO] Google Sheets helper initialized
2025-09-19T10:14:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:04: 🗑️ Deleted old log file: bot-2025-09-19T04-43-34-714Z.log
2025-09-19T10:14:04: 📝 Enhanced Logger initialized
2025-09-19T10:14:04: 📁 Loaded statistics from file
2025-09-19T10:14:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:04: 🧹 Removed stale process lock
2025-09-19T10:14:04: 🔒 Process lock acquired (PID: 6740)
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6740
}
2025-09-19T10:14:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257044691, processId: 6740 },
  timestamp: 1758257044846
}
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257044691, willExpireAt: 1758257284691 },
  timestamp: 1758257044847
}
2025-09-19T10:14:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:04: 📋 Message rules loaded: 8 types
2025-09-19T10:14:04: ℹ️ [10:14:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 160,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:05: [INFO] WhatsApp client initialized
2025-09-19T10:14:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:08: 📝 Loaded 12 template types
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257048090,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3932,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:08: ⏰ 4-minute startup delay active
2025-09-19T10:14:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:08: [INFO] Using PQueue for job processing
2025-09-19T10:14:08: [INFO] Memory management setup completed
2025-09-19T10:14:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:08: [INFO] Checking process locks...
2025-09-19T10:14:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:08: [INFO] Process locks acquired successfully
2025-09-19T10:14:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:08: [INFO] Logs directory created
2025-09-19T10:14:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:08: [10:14:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:08: [10:14:08 am] ✅ Google Sheets API initialized
2025-09-19T10:14:08: [INFO] Google Sheets helper initialized
2025-09-19T10:14:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:08: 🗑️ Deleted old log file: bot-2025-09-19T04-43-37-343Z.log
2025-09-19T10:14:08: 📝 Enhanced Logger initialized
2025-09-19T10:14:08: 📁 Loaded statistics from file
2025-09-19T10:14:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:08: 🧹 Removed stale process lock
2025-09-19T10:14:08: 🔒 Process lock acquired (PID: 3932)
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3932
}
2025-09-19T10:14:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257048090, processId: 3932 },
  timestamp: 1758257048194
}
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257048090, willExpireAt: 1758257288090 },
  timestamp: 1758257048194
}
2025-09-19T10:14:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:08: 📋 Message rules loaded: 8 types
2025-09-19T10:14:08: ℹ️ [10:14:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 107,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:09: [INFO] WhatsApp client initialized
2025-09-19T10:14:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:10: 📝 Loaded 12 template types
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257050870,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9996,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:10: ⏰ 4-minute startup delay active
2025-09-19T10:14:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:10: [INFO] Using PQueue for job processing
2025-09-19T10:14:10: [INFO] Memory management setup completed
2025-09-19T10:14:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:10: [INFO] Checking process locks...
2025-09-19T10:14:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:10: [INFO] Process locks acquired successfully
2025-09-19T10:14:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:10: [INFO] Logs directory created
2025-09-19T10:14:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:10: [10:14:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:10: [10:14:10 am] ✅ Google Sheets API initialized
2025-09-19T10:14:10: [INFO] Google Sheets helper initialized
2025-09-19T10:14:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:10: 🗑️ Deleted old log file: bot-2025-09-19T04-43-40-130Z.log
2025-09-19T10:14:10: 📝 Enhanced Logger initialized
2025-09-19T10:14:10: 📁 Loaded statistics from file
2025-09-19T10:14:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:10: 🧹 Removed stale process lock
2025-09-19T10:14:10: 🔒 Process lock acquired (PID: 9996)
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9996
}
2025-09-19T10:14:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257050870, processId: 9996 },
  timestamp: 1758257050992
}
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257050870, willExpireAt: 1758257290870 },
  timestamp: 1758257050992
}
2025-09-19T10:14:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:10: 📋 Message rules loaded: 8 types
2025-09-19T10:14:10: ℹ️ [10:14:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:12: [INFO] WhatsApp client initialized
2025-09-19T10:14:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:14: 📝 Loaded 12 template types
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257054080,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7020,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:14: ⏰ 4-minute startup delay active
2025-09-19T10:14:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:14: [INFO] Using PQueue for job processing
2025-09-19T10:14:14: [INFO] Memory management setup completed
2025-09-19T10:14:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:14: [INFO] Checking process locks...
2025-09-19T10:14:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:14: [INFO] Process locks acquired successfully
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:14: [INFO] Logs directory created
2025-09-19T10:14:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:14: [10:14:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:14: [10:14:14 am] ✅ Google Sheets API initialized
2025-09-19T10:14:14: [INFO] Google Sheets helper initialized
2025-09-19T10:14:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:14: 🗑️ Deleted old log file: bot-2025-09-19T04-43-42-699Z.log
2025-09-19T10:14:14: 📝 Enhanced Logger initialized
2025-09-19T10:14:14: 📁 Loaded statistics from file
2025-09-19T10:14:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:14: 🧹 Removed stale process lock
2025-09-19T10:14:14: 🔒 Process lock acquired (PID: 7020)
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7020
}
2025-09-19T10:14:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257054080, processId: 7020 },
  timestamp: 1758257054180
}
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257054080, willExpireAt: 1758257294080 },
  timestamp: 1758257054180
}
2025-09-19T10:14:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:14: 📋 Message rules loaded: 8 types
2025-09-19T10:14:14: ℹ️ [10:14:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 103,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:15: [INFO] WhatsApp client initialized
2025-09-19T10:14:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:16: 📝 Loaded 12 template types
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257056809,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17344,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:16: ⏰ 4-minute startup delay active
2025-09-19T10:14:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:16: [INFO] Using PQueue for job processing
2025-09-19T10:14:16: [INFO] Memory management setup completed
2025-09-19T10:14:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:16: [INFO] Checking process locks...
2025-09-19T10:14:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:16: [INFO] Process locks acquired successfully
2025-09-19T10:14:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:16: [INFO] Logs directory created
2025-09-19T10:14:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:16: [10:14:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:16: [10:14:16 am] ✅ Google Sheets API initialized
2025-09-19T10:14:16: [INFO] Google Sheets helper initialized
2025-09-19T10:14:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:16: 🗑️ Deleted old log file: bot-2025-09-19T04-43-45-672Z.log
2025-09-19T10:14:16: 📝 Enhanced Logger initialized
2025-09-19T10:14:16: 📁 Loaded statistics from file
2025-09-19T10:14:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:16: 🧹 Removed stale process lock
2025-09-19T10:14:16: 🔒 Process lock acquired (PID: 17344)
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17344
}
2025-09-19T10:14:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257056809, processId: 17344 },
  timestamp: 1758257056901
}
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257056809, willExpireAt: 1758257296809 },
  timestamp: 1758257056901
}
2025-09-19T10:14:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:16: 📋 Message rules loaded: 8 types
2025-09-19T10:14:16: ℹ️ [10:14:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 94,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:17: [INFO] WhatsApp client initialized
2025-09-19T10:14:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:19: 📝 Loaded 12 template types
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257059301,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3820,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:19: ⏰ 4-minute startup delay active
2025-09-19T10:14:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:19: [INFO] Using PQueue for job processing
2025-09-19T10:14:19: [INFO] Memory management setup completed
2025-09-19T10:14:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:19: [INFO] Checking process locks...
2025-09-19T10:14:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:19: [INFO] Process locks acquired successfully
2025-09-19T10:14:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:19: [INFO] Logs directory created
2025-09-19T10:14:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:19: [10:14:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:19: [10:14:19 am] ✅ Google Sheets API initialized
2025-09-19T10:14:19: [INFO] Google Sheets helper initialized
2025-09-19T10:14:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:19: 🗑️ Deleted old log file: bot-2025-09-19T04-43-48-533Z.log
2025-09-19T10:14:19: 📝 Enhanced Logger initialized
2025-09-19T10:14:19: 📁 Loaded statistics from file
2025-09-19T10:14:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:19: 🧹 Removed stale process lock
2025-09-19T10:14:19: 🔒 Process lock acquired (PID: 3820)
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3820
}
2025-09-19T10:14:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257059301, willExpireAt: 1758257299301 },
  timestamp: 1758257059389
}
2025-09-19T10:14:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:19: 📋 Message rules loaded: 8 types
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257059301, processId: 3820 },
  timestamp: 1758257059389
}
2025-09-19T10:14:19: ℹ️ [10:14:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 90,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:20: [INFO] WhatsApp client initialized
2025-09-19T10:14:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:22: 📝 Loaded 12 template types
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257062289,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15916,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:22: ⏰ 4-minute startup delay active
2025-09-19T10:14:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:22: [INFO] Using PQueue for job processing
2025-09-19T10:14:22: [INFO] Memory management setup completed
2025-09-19T10:14:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:22: [INFO] Checking process locks...
2025-09-19T10:14:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:22: [INFO] Process locks acquired successfully
2025-09-19T10:14:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:22: [INFO] Logs directory created
2025-09-19T10:14:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:22: [10:14:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:22: [10:14:22 am] ✅ Google Sheets API initialized
2025-09-19T10:14:22: [INFO] Google Sheets helper initialized
2025-09-19T10:14:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:22: 🗑️ Deleted old log file: bot-2025-09-19T04-43-51-197Z.log
2025-09-19T10:14:22: 📝 Enhanced Logger initialized
2025-09-19T10:14:22: 📁 Loaded statistics from file
2025-09-19T10:14:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:22: 🧹 Removed stale process lock
2025-09-19T10:14:22: 🔒 Process lock acquired (PID: 15916)
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15916
}
2025-09-19T10:14:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257062289, willExpireAt: 1758257302289 },
  timestamp: 1758257062388
}
2025-09-19T10:14:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:22: 📋 Message rules loaded: 8 types
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257062289, processId: 15916 },
  timestamp: 1758257062388
}
2025-09-19T10:14:22: ℹ️ [10:14:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 101,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:23: [INFO] WhatsApp client initialized
2025-09-19T10:14:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:25: 📝 Loaded 12 template types
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257065289,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14324,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:25: ⏰ 4-minute startup delay active
2025-09-19T10:14:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:25: [INFO] Using PQueue for job processing
2025-09-19T10:14:25: [INFO] Memory management setup completed
2025-09-19T10:14:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:25: [INFO] Checking process locks...
2025-09-19T10:14:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:25: [INFO] Process locks acquired successfully
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:25: [INFO] Logs directory created
2025-09-19T10:14:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:25: [10:14:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:25: [10:14:25 am] ✅ Google Sheets API initialized
2025-09-19T10:14:25: [INFO] Google Sheets helper initialized
2025-09-19T10:14:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:25: 🗑️ Deleted old log file: bot-2025-09-19T04-43-53-658Z.log
2025-09-19T10:14:25: 📝 Enhanced Logger initialized
2025-09-19T10:14:25: 📁 Loaded statistics from file
2025-09-19T10:14:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:25: 🧹 Removed stale process lock
2025-09-19T10:14:25: 🔒 Process lock acquired (PID: 14324)
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14324
}
2025-09-19T10:14:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257065289, willExpireAt: 1758257305289 },
  timestamp: 1758257065381
}
2025-09-19T10:14:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:25: 📋 Message rules loaded: 8 types
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257065289, processId: 14324 },
  timestamp: 1758257065381
}
2025-09-19T10:14:25: ℹ️ [10:14:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 94,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:26: [INFO] WhatsApp client initialized
2025-09-19T10:14:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:27: 📝 Loaded 12 template types
2025-09-19T10:14:28: ℹ️ [10:14:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257067998,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12028,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:28: ⏰ 4-minute startup delay active
2025-09-19T10:14:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:28: [INFO] Using PQueue for job processing
2025-09-19T10:14:28: [INFO] Memory management setup completed
2025-09-19T10:14:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:28: [INFO] Checking process locks...
2025-09-19T10:14:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:28: ℹ️ [10:14:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:28: [INFO] Process locks acquired successfully
2025-09-19T10:14:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:28: [INFO] Logs directory created
2025-09-19T10:14:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:28: [10:14:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:28: [10:14:28 am] ✅ Google Sheets API initialized
2025-09-19T10:14:28: [INFO] Google Sheets helper initialized
2025-09-19T10:14:28: ℹ️ [10:14:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:28: 🗑️ Deleted old log file: bot-2025-09-19T04-43-56-366Z.log
2025-09-19T10:14:28: 📝 Enhanced Logger initialized
2025-09-19T10:14:28: 📁 Loaded statistics from file
2025-09-19T10:14:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:28: 🧹 Removed stale process lock
2025-09-19T10:14:28: 🔒 Process lock acquired (PID: 12028)
2025-09-19T10:14:28: ℹ️ [10:14:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12028
}
2025-09-19T10:14:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:28: ℹ️ [10:14:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257067998, processId: 12028 },
  timestamp: 1758257068085
}
2025-09-19T10:14:28: ℹ️ [10:14:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257067998, willExpireAt: 1758257307998 },
  timestamp: 1758257068085
}
2025-09-19T10:14:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:28: 📋 Message rules loaded: 8 types
2025-09-19T10:14:28: ℹ️ [10:14:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 90,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:29: [INFO] WhatsApp client initialized
2025-09-19T10:14:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:30: 📝 Loaded 12 template types
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257070557,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14376,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:30: ⏰ 4-minute startup delay active
2025-09-19T10:14:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:30: [INFO] Using PQueue for job processing
2025-09-19T10:14:30: [INFO] Memory management setup completed
2025-09-19T10:14:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:30: [INFO] Checking process locks...
2025-09-19T10:14:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:30: [INFO] Process locks acquired successfully
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:30: [INFO] Logs directory created
2025-09-19T10:14:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:30: [10:14:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:30: [10:14:30 am] ✅ Google Sheets API initialized
2025-09-19T10:14:30: [INFO] Google Sheets helper initialized
2025-09-19T10:14:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:30: 🗑️ Deleted old log file: bot-2025-09-19T04-43-59-174Z.log
2025-09-19T10:14:30: 📝 Enhanced Logger initialized
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:30: 📁 Loaded statistics from file
2025-09-19T10:14:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:30: 🧹 Removed stale process lock
2025-09-19T10:14:30: 🔒 Process lock acquired (PID: 14376)
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14376
}
2025-09-19T10:14:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257070557, willExpireAt: 1758257310557 },
  timestamp: 1758257070682
}
2025-09-19T10:14:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:30: 📋 Message rules loaded: 8 types
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257070557, processId: 14376 },
  timestamp: 1758257070682
}
2025-09-19T10:14:30: ℹ️ [10:14:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 127,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:31: [INFO] WhatsApp client initialized
2025-09-19T10:14:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:33: 📝 Loaded 12 template types
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257073416,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15356,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:33: ⏰ 4-minute startup delay active
2025-09-19T10:14:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:33: [INFO] Using PQueue for job processing
2025-09-19T10:14:33: [INFO] Memory management setup completed
2025-09-19T10:14:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:33: [INFO] Checking process locks...
2025-09-19T10:14:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:33: [INFO] Process locks acquired successfully
2025-09-19T10:14:33: [INFO] Logs directory created
2025-09-19T10:14:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:33: [10:14:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:33: [10:14:33 am] ✅ Google Sheets API initialized
2025-09-19T10:14:33: [INFO] Google Sheets helper initialized
2025-09-19T10:14:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:33: 🗑️ Deleted old log file: bot-2025-09-19T04-44-01-849Z.log
2025-09-19T10:14:33: 📝 Enhanced Logger initialized
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:33: 📁 Loaded statistics from file
2025-09-19T10:14:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:33: 🧹 Removed stale process lock
2025-09-19T10:14:33: 🔒 Process lock acquired (PID: 15356)
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15356
}
2025-09-19T10:14:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257073416, processId: 15356 },
  timestamp: 1758257073517
}
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257073416, willExpireAt: 1758257313416 },
  timestamp: 1758257073517
}
2025-09-19T10:14:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:33: 📋 Message rules loaded: 8 types
2025-09-19T10:14:33: ℹ️ [10:14:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 103,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:36: [INFO] WhatsApp client initialized
2025-09-19T10:14:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:39: 📝 Loaded 12 template types
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257079060,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13304,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:39: ⏰ 4-minute startup delay active
2025-09-19T10:14:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:39: [INFO] Using PQueue for job processing
2025-09-19T10:14:39: [INFO] Memory management setup completed
2025-09-19T10:14:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:39: [INFO] Checking process locks...
2025-09-19T10:14:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:39: [INFO] Process locks acquired successfully
2025-09-19T10:14:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:39: [INFO] Logs directory created
2025-09-19T10:14:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:39: [10:14:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:39: [10:14:39 am] ✅ Google Sheets API initialized
2025-09-19T10:14:39: [INFO] Google Sheets helper initialized
2025-09-19T10:14:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:39: 🗑️ Deleted old log file: bot-2025-09-19T04-44-04-727Z.log
2025-09-19T10:14:39: 📝 Enhanced Logger initialized
2025-09-19T10:14:39: 📁 Loaded statistics from file
2025-09-19T10:14:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:39: 🧹 Removed stale process lock
2025-09-19T10:14:39: 🔒 Process lock acquired (PID: 13304)
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13304
}
2025-09-19T10:14:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257079060, willExpireAt: 1758257319060 },
  timestamp: 1758257079205
}
2025-09-19T10:14:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:39: 📋 Message rules loaded: 8 types
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257079060, processId: 13304 },
  timestamp: 1758257079205
}
2025-09-19T10:14:39: ℹ️ [10:14:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 147,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:40: [INFO] WhatsApp client initialized
2025-09-19T10:14:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:42: 📝 Loaded 12 template types
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257082359,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8156,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:42: ⏰ 4-minute startup delay active
2025-09-19T10:14:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:42: [INFO] Using PQueue for job processing
2025-09-19T10:14:42: [INFO] Memory management setup completed
2025-09-19T10:14:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:42: [INFO] Checking process locks...
2025-09-19T10:14:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:42: [INFO] Process locks acquired successfully
2025-09-19T10:14:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:42: [INFO] Logs directory created
2025-09-19T10:14:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:42: [10:14:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:42: [10:14:42 am] ✅ Google Sheets API initialized
2025-09-19T10:14:42: [INFO] Google Sheets helper initialized
2025-09-19T10:14:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:42: 🗑️ Deleted old log file: bot-2025-09-19T04-44-08-121Z.log
2025-09-19T10:14:42: 📝 Enhanced Logger initialized
2025-09-19T10:14:42: 📁 Loaded statistics from file
2025-09-19T10:14:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:42: 🧹 Removed stale process lock
2025-09-19T10:14:42: 🔒 Process lock acquired (PID: 8156)
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8156
}
2025-09-19T10:14:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257082359, willExpireAt: 1758257322359 },
  timestamp: 1758257082473
}
2025-09-19T10:14:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:42: 📋 Message rules loaded: 8 types
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257082359, processId: 8156 },
  timestamp: 1758257082473
}
2025-09-19T10:14:42: ℹ️ [10:14:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:43: [INFO] WhatsApp client initialized
2025-09-19T10:14:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:45: 📝 Loaded 12 template types
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257085350,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16936,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:45: ⏰ 4-minute startup delay active
2025-09-19T10:14:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:45: [INFO] Using PQueue for job processing
2025-09-19T10:14:45: [INFO] Memory management setup completed
2025-09-19T10:14:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:45: [INFO] Checking process locks...
2025-09-19T10:14:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:45: [INFO] Process locks acquired successfully
2025-09-19T10:14:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:45: [INFO] Logs directory created
2025-09-19T10:14:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:45: [10:14:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:45: [10:14:45 am] ✅ Google Sheets API initialized
2025-09-19T10:14:45: [INFO] Google Sheets helper initialized
2025-09-19T10:14:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:45: 🗑️ Deleted old log file: bot-2025-09-19T04-44-10-896Z.log
2025-09-19T10:14:45: 📝 Enhanced Logger initialized
2025-09-19T10:14:45: 📁 Loaded statistics from file
2025-09-19T10:14:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:45: 🧹 Removed stale process lock
2025-09-19T10:14:45: 🔒 Process lock acquired (PID: 16936)
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16936
}
2025-09-19T10:14:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257085350, willExpireAt: 1758257325350 },
  timestamp: 1758257085454
}
2025-09-19T10:14:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:45: 📋 Message rules loaded: 8 types
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257085350, processId: 16936 },
  timestamp: 1758257085453
}
2025-09-19T10:14:45: ℹ️ [10:14:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 107,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:46: [INFO] WhatsApp client initialized
2025-09-19T10:14:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:48: 📝 Loaded 12 template types
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257088134,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16296,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:48: ⏰ 4-minute startup delay active
2025-09-19T10:14:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:48: [INFO] Using PQueue for job processing
2025-09-19T10:14:48: [INFO] Memory management setup completed
2025-09-19T10:14:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:48: [INFO] Checking process locks...
2025-09-19T10:14:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:48: [INFO] Process locks acquired successfully
2025-09-19T10:14:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:48: [INFO] Logs directory created
2025-09-19T10:14:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:48: [10:14:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:48: [10:14:48 am] ✅ Google Sheets API initialized
2025-09-19T10:14:48: [INFO] Google Sheets helper initialized
2025-09-19T10:14:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:48: 🗑️ Deleted old log file: bot-2025-09-19T04-44-14-108Z.log
2025-09-19T10:14:48: 📝 Enhanced Logger initialized
2025-09-19T10:14:48: 📁 Loaded statistics from file
2025-09-19T10:14:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:48: 🧹 Removed stale process lock
2025-09-19T10:14:48: 🔒 Process lock acquired (PID: 16296)
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16296
}
2025-09-19T10:14:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257088134, processId: 16296 },
  timestamp: 1758257088249
}
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257088134, willExpireAt: 1758257328134 },
  timestamp: 1758257088249
}
2025-09-19T10:14:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:48: 📋 Message rules loaded: 8 types
2025-09-19T10:14:48: ℹ️ [10:14:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 118,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:49: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:49: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:49: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:49: [INFO] WhatsApp client initialized
2025-09-19T10:14:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:51: 📝 Loaded 12 template types
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257091210,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15824,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:51: ⏰ 4-minute startup delay active
2025-09-19T10:14:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:51: [INFO] Using PQueue for job processing
2025-09-19T10:14:51: [INFO] Memory management setup completed
2025-09-19T10:14:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:51: [INFO] Checking process locks...
2025-09-19T10:14:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:51: [INFO] Process locks acquired successfully
2025-09-19T10:14:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:51: [INFO] Logs directory created
2025-09-19T10:14:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:51: [10:14:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:51: [10:14:51 am] ✅ Google Sheets API initialized
2025-09-19T10:14:51: [INFO] Google Sheets helper initialized
2025-09-19T10:14:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:51: 🗑️ Deleted old log file: bot-2025-09-19T04-44-16-835Z.log
2025-09-19T10:14:51: 📝 Enhanced Logger initialized
2025-09-19T10:14:51: 📁 Loaded statistics from file
2025-09-19T10:14:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:51: 🧹 Removed stale process lock
2025-09-19T10:14:51: 🔒 Process lock acquired (PID: 15824)
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15824
}
2025-09-19T10:14:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257091210, processId: 15824 },
  timestamp: 1758257091302
}
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257091210, willExpireAt: 1758257331210 },
  timestamp: 1758257091302
}
2025-09-19T10:14:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:51: 📋 Message rules loaded: 8 types
2025-09-19T10:14:51: ℹ️ [10:14:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 94,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:52: [INFO] WhatsApp client initialized
2025-09-19T10:14:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:53: 📝 Loaded 12 template types
2025-09-19T10:14:53: ℹ️ [10:14:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257093973,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10396,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:53: ⏰ 4-minute startup delay active
2025-09-19T10:14:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:53: [INFO] Using PQueue for job processing
2025-09-19T10:14:53: [INFO] Memory management setup completed
2025-09-19T10:14:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:53: [INFO] Checking process locks...
2025-09-19T10:14:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:54: [INFO] Process locks acquired successfully
2025-09-19T10:14:54: ℹ️ [10:14:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:54: [INFO] Logs directory created
2025-09-19T10:14:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:54: [10:14:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:54: [10:14:54 am] ✅ Google Sheets API initialized
2025-09-19T10:14:54: [INFO] Google Sheets helper initialized
2025-09-19T10:14:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:54: ℹ️ [10:14:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:54: 🗑️ Deleted old log file: bot-2025-09-19T04-44-19-324Z.log
2025-09-19T10:14:54: 📝 Enhanced Logger initialized
2025-09-19T10:14:54: 📁 Loaded statistics from file
2025-09-19T10:14:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:54: 🧹 Removed stale process lock
2025-09-19T10:14:54: 🔒 Process lock acquired (PID: 10396)
2025-09-19T10:14:54: ℹ️ [10:14:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10396
}
2025-09-19T10:14:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:54: ℹ️ [10:14:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257093973, processId: 10396 },
  timestamp: 1758257094064
}
2025-09-19T10:14:54: ℹ️ [10:14:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257093973, willExpireAt: 1758257333973 },
  timestamp: 1758257094064
}
2025-09-19T10:14:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:54: 📋 Message rules loaded: 8 types
2025-09-19T10:14:54: ℹ️ [10:14:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 93,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:55: [INFO] WhatsApp client initialized
2025-09-19T10:14:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:56: 📝 Loaded 12 template types
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257096735,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1836,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:56: ⏰ 4-minute startup delay active
2025-09-19T10:14:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:56: [INFO] Using PQueue for job processing
2025-09-19T10:14:56: [INFO] Memory management setup completed
2025-09-19T10:14:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:56: [INFO] Checking process locks...
2025-09-19T10:14:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:56: [INFO] Process locks acquired successfully
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:56: [INFO] Logs directory created
2025-09-19T10:14:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:56: [10:14:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:56: [10:14:56 am] ✅ Google Sheets API initialized
2025-09-19T10:14:56: [INFO] Google Sheets helper initialized
2025-09-19T10:14:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:56: 📁 Loaded statistics from file
2025-09-19T10:14:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:56: 🗑️ Deleted old log file: bot-2025-09-19T04-44-22-315Z.log
2025-09-19T10:14:56: 📝 Enhanced Logger initialized
2025-09-19T10:14:56: 🧹 Removed stale process lock
2025-09-19T10:14:56: 🔒 Process lock acquired (PID: 1836)
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1836
}
2025-09-19T10:14:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257096735, processId: 1836 },
  timestamp: 1758257096849
}
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257096735, willExpireAt: 1758257336735 },
  timestamp: 1758257096849
}
2025-09-19T10:14:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:56: 📋 Message rules loaded: 8 types
2025-09-19T10:14:56: ℹ️ [10:14:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:14:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:14:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:14:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:14:58: [INFO] WhatsApp client initialized
2025-09-19T10:14:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:14:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:14:59: 📝 Loaded 12 template types
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257099862,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5612,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:14:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:14:59: ⏰ 4-minute startup delay active
2025-09-19T10:14:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:14:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:14:59: [INFO] Using PQueue for job processing
2025-09-19T10:14:59: [INFO] Memory management setup completed
2025-09-19T10:14:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:14:59: [INFO] Checking process locks...
2025-09-19T10:14:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:14:59: [INFO] Process locks acquired successfully
2025-09-19T10:14:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:14:59: [INFO] Logs directory created
2025-09-19T10:14:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:14:59: [10:14:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:14:59: [10:14:59 am] ✅ Google Sheets API initialized
2025-09-19T10:14:59: [INFO] Google Sheets helper initialized
2025-09-19T10:14:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:14:59: 🗑️ Deleted old log file: bot-2025-09-19T04-44-25-312Z.log
2025-09-19T10:14:59: 📝 Enhanced Logger initialized
2025-09-19T10:14:59: 📁 Loaded statistics from file
2025-09-19T10:14:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:14:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:14:59: 🧹 Removed stale process lock
2025-09-19T10:14:59: 🔒 Process lock acquired (PID: 5612)
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5612
}
2025-09-19T10:14:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:14:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257099862, willExpireAt: 1758257339862 },
  timestamp: 1758257099970
}
2025-09-19T10:14:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:14:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:14:59: 📋 Message rules loaded: 8 types
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257099862, processId: 5612 },
  timestamp: 1758257099970
}
2025-09-19T10:14:59: ℹ️ [10:14:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:01: [INFO] WhatsApp client initialized
2025-09-19T10:15:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:02: 📝 Loaded 12 template types
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257102710,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16624,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:02: ⏰ 4-minute startup delay active
2025-09-19T10:15:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:02: [INFO] Using PQueue for job processing
2025-09-19T10:15:02: [INFO] Memory management setup completed
2025-09-19T10:15:02: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:02: [INFO] Checking process locks...
2025-09-19T10:15:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:02: [INFO] Process locks acquired successfully
2025-09-19T10:15:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:02: [INFO] Logs directory created
2025-09-19T10:15:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:02: [10:15:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:02: [10:15:02 am] ✅ Google Sheets API initialized
2025-09-19T10:15:02: [INFO] Google Sheets helper initialized
2025-09-19T10:15:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:02: 🗑️ Deleted old log file: bot-2025-09-19T04-44-28-022Z.log
2025-09-19T10:15:02: 📝 Enhanced Logger initialized
2025-09-19T10:15:02: 📁 Loaded statistics from file
2025-09-19T10:15:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:02: 🧹 Removed stale process lock
2025-09-19T10:15:02: 🔒 Process lock acquired (PID: 16624)
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16624
}
2025-09-19T10:15:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257102710, processId: 16624 },
  timestamp: 1758257102854
}
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257102710, willExpireAt: 1758257342710 },
  timestamp: 1758257102854
}
2025-09-19T10:15:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:02: 📋 Message rules loaded: 8 types
2025-09-19T10:15:02: ℹ️ [10:15:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:04: [INFO] WhatsApp client initialized
2025-09-19T10:15:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:05: 📝 Loaded 12 template types
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257105555,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15208,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:05: ⏰ 4-minute startup delay active
2025-09-19T10:15:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:05: [INFO] Using PQueue for job processing
2025-09-19T10:15:05: [INFO] Memory management setup completed
2025-09-19T10:15:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:05: [INFO] Checking process locks...
2025-09-19T10:15:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:05: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:05: [INFO] Process locks acquired successfully
2025-09-19T10:15:05: [INFO] Logs directory created
2025-09-19T10:15:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:05: [10:15:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:05: [10:15:05 am] ✅ Google Sheets API initialized
2025-09-19T10:15:05: [INFO] Google Sheets helper initialized
2025-09-19T10:15:05: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:05: 🗑️ Deleted old log file: bot-2025-09-19T04-44-30-596Z.log
2025-09-19T10:15:05: 📝 Enhanced Logger initialized
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:05: 📁 Loaded statistics from file
2025-09-19T10:15:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:05: 🧹 Removed stale process lock
2025-09-19T10:15:05: 🔒 Process lock acquired (PID: 15208)
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15208
}
2025-09-19T10:15:05: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257105555, willExpireAt: 1758257345555 },
  timestamp: 1758257105675
}
2025-09-19T10:15:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:05: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:05: 📋 Message rules loaded: 8 types
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257105555, processId: 15208 },
  timestamp: 1758257105675
}
2025-09-19T10:15:05: ℹ️ [10:15:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:06: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:06: [INFO] WhatsApp client initialized
2025-09-19T10:15:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:08: 📝 Loaded 12 template types
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257108430,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11308,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:08: ⏰ 4-minute startup delay active
2025-09-19T10:15:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:08: [INFO] Using PQueue for job processing
2025-09-19T10:15:08: [INFO] Memory management setup completed
2025-09-19T10:15:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:08: [INFO] Checking process locks...
2025-09-19T10:15:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:08: [INFO] Process locks acquired successfully
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:08: [INFO] Logs directory created
2025-09-19T10:15:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:08: [10:15:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:08: [10:15:08 am] ✅ Google Sheets API initialized
2025-09-19T10:15:08: [INFO] Google Sheets helper initialized
2025-09-19T10:15:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:08: 🗑️ Deleted old log file: bot-2025-09-19T04-44-33-443Z.log
2025-09-19T10:15:08: 📝 Enhanced Logger initialized
2025-09-19T10:15:08: 📁 Loaded statistics from file
2025-09-19T10:15:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:08: 🧹 Removed stale process lock
2025-09-19T10:15:08: 🔒 Process lock acquired (PID: 11308)
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11308
}
2025-09-19T10:15:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257108430, processId: 11308 },
  timestamp: 1758257108549
}
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257108430, willExpireAt: 1758257348430 },
  timestamp: 1758257108550
}
2025-09-19T10:15:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:08: 📋 Message rules loaded: 8 types
2025-09-19T10:15:08: ℹ️ [10:15:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:09: [INFO] WhatsApp client initialized
2025-09-19T10:15:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:11: 📝 Loaded 12 template types
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257111575,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4244,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:11: ⏰ 4-minute startup delay active
2025-09-19T10:15:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:11: [INFO] Using PQueue for job processing
2025-09-19T10:15:11: [INFO] Memory management setup completed
2025-09-19T10:15:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:11: [INFO] Checking process locks...
2025-09-19T10:15:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:11: [INFO] Process locks acquired successfully
2025-09-19T10:15:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:11: [INFO] Logs directory created
2025-09-19T10:15:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:11: [10:15:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:11: [10:15:11 am] ✅ Google Sheets API initialized
2025-09-19T10:15:11: [INFO] Google Sheets helper initialized
2025-09-19T10:15:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:11: 🗑️ Deleted old log file: bot-2025-09-19T04-44-39-101Z.log
2025-09-19T10:15:11: 📝 Enhanced Logger initialized
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:11: 📁 Loaded statistics from file
2025-09-19T10:15:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:11: 🧹 Removed stale process lock
2025-09-19T10:15:11: 🔒 Process lock acquired (PID: 4244)
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4244
}
2025-09-19T10:15:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257111575, processId: 4244 },
  timestamp: 1758257111703
}
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257111575, willExpireAt: 1758257351575 },
  timestamp: 1758257111704
}
2025-09-19T10:15:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:11: 📋 Message rules loaded: 8 types
2025-09-19T10:15:11: ℹ️ [10:15:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:12: [INFO] WhatsApp client initialized
2025-09-19T10:15:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:14: 📝 Loaded 12 template types
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257114340,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13328,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:14: ⏰ 4-minute startup delay active
2025-09-19T10:15:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:14: [INFO] Using PQueue for job processing
2025-09-19T10:15:14: [INFO] Memory management setup completed
2025-09-19T10:15:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:14: [INFO] Checking process locks...
2025-09-19T10:15:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:14: [INFO] Process locks acquired successfully
2025-09-19T10:15:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:14: [INFO] Logs directory created
2025-09-19T10:15:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:14: [10:15:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:14: [10:15:14 am] ✅ Google Sheets API initialized
2025-09-19T10:15:14: [INFO] Google Sheets helper initialized
2025-09-19T10:15:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:14: 🗑️ Deleted old log file: bot-2025-09-19T04-44-42-390Z.log
2025-09-19T10:15:14: 📝 Enhanced Logger initialized
2025-09-19T10:15:14: 📁 Loaded statistics from file
2025-09-19T10:15:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:14: 🧹 Removed stale process lock
2025-09-19T10:15:14: 🔒 Process lock acquired (PID: 13328)
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13328
}
2025-09-19T10:15:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257114340, willExpireAt: 1758257354340 },
  timestamp: 1758257114461
}
2025-09-19T10:15:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:14: 📋 Message rules loaded: 8 types
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257114340, processId: 13328 },
  timestamp: 1758257114461
}
2025-09-19T10:15:14: ℹ️ [10:15:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:15: [INFO] WhatsApp client initialized
2025-09-19T10:15:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:16: 📝 Loaded 12 template types
2025-09-19T10:15:16: ℹ️ [10:15:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257116916,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10764,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:16: ⏰ 4-minute startup delay active
2025-09-19T10:15:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:16: [INFO] Using PQueue for job processing
2025-09-19T10:15:16: [INFO] Memory management setup completed
2025-09-19T10:15:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:16: [INFO] Checking process locks...
2025-09-19T10:15:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:16: ℹ️ [10:15:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:16: [INFO] Process locks acquired successfully
2025-09-19T10:15:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:16: [INFO] Logs directory created
2025-09-19T10:15:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:16: [10:15:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:16: [10:15:16 am] ✅ Google Sheets API initialized
2025-09-19T10:15:16: [INFO] Google Sheets helper initialized
2025-09-19T10:15:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:17: 🗑️ Deleted old log file: bot-2025-09-19T04-44-45-372Z.log
2025-09-19T10:15:17: 📝 Enhanced Logger initialized
2025-09-19T10:15:17: ℹ️ [10:15:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:17: 📁 Loaded statistics from file
2025-09-19T10:15:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:17: 🧹 Removed stale process lock
2025-09-19T10:15:17: 🔒 Process lock acquired (PID: 10764)
2025-09-19T10:15:17: ℹ️ [10:15:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10764
}
2025-09-19T10:15:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:17: ℹ️ [10:15:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257116916, willExpireAt: 1758257356916 },
  timestamp: 1758257117022
}
2025-09-19T10:15:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:17: 📋 Message rules loaded: 8 types
2025-09-19T10:15:17: ℹ️ [10:15:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257116916, processId: 10764 },
  timestamp: 1758257117022
}
2025-09-19T10:15:17: ℹ️ [10:15:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 108,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:18: [INFO] WhatsApp client initialized
2025-09-19T10:15:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:19: 📝 Loaded 12 template types
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257119649,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11228,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:19: ⏰ 4-minute startup delay active
2025-09-19T10:15:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:19: [INFO] Using PQueue for job processing
2025-09-19T10:15:19: [INFO] Memory management setup completed
2025-09-19T10:15:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:19: [INFO] Checking process locks...
2025-09-19T10:15:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:19: [INFO] Process locks acquired successfully
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:19: [INFO] Logs directory created
2025-09-19T10:15:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:19: [10:15:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:19: [10:15:19 am] ✅ Google Sheets API initialized
2025-09-19T10:15:19: [INFO] Google Sheets helper initialized
2025-09-19T10:15:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:19: 🗑️ Deleted old log file: bot-2025-09-19T04-44-48-164Z.log
2025-09-19T10:15:19: 📝 Enhanced Logger initialized
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:19: 📁 Loaded statistics from file
2025-09-19T10:15:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:19: 🧹 Removed stale process lock
2025-09-19T10:15:19: 🔒 Process lock acquired (PID: 11228)
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11228
}
2025-09-19T10:15:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257119649, willExpireAt: 1758257359649 },
  timestamp: 1758257119755
}
2025-09-19T10:15:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:19: 📋 Message rules loaded: 8 types
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257119649, processId: 11228 },
  timestamp: 1758257119754
}
2025-09-19T10:15:19: ℹ️ [10:15:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 107,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:20: [INFO] WhatsApp client initialized
2025-09-19T10:15:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:22: 📝 Loaded 12 template types
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257122474,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16604,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:22: ⏰ 4-minute startup delay active
2025-09-19T10:15:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:22: [INFO] Using PQueue for job processing
2025-09-19T10:15:22: [INFO] Memory management setup completed
2025-09-19T10:15:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:22: [INFO] Checking process locks...
2025-09-19T10:15:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:22: [INFO] Process locks acquired successfully
2025-09-19T10:15:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:22: [INFO] Logs directory created
2025-09-19T10:15:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:22: [10:15:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:22: [10:15:22 am] ✅ Google Sheets API initialized
2025-09-19T10:15:22: [INFO] Google Sheets helper initialized
2025-09-19T10:15:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:22: 🗑️ Deleted old log file: bot-2025-09-19T04-44-51-236Z.log
2025-09-19T10:15:22: 📝 Enhanced Logger initialized
2025-09-19T10:15:22: 📁 Loaded statistics from file
2025-09-19T10:15:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:22: 🧹 Removed stale process lock
2025-09-19T10:15:22: 🔒 Process lock acquired (PID: 16604)
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16604
}
2025-09-19T10:15:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257122474, processId: 16604 },
  timestamp: 1758257122587
}
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257122474, willExpireAt: 1758257362474 },
  timestamp: 1758257122587
}
2025-09-19T10:15:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:22: 📋 Message rules loaded: 8 types
2025-09-19T10:15:22: ℹ️ [10:15:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:23: [INFO] WhatsApp client initialized
2025-09-19T10:15:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:25: 📝 Loaded 12 template types
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257125326,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4656,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:25: ⏰ 4-minute startup delay active
2025-09-19T10:15:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:25: [INFO] Using PQueue for job processing
2025-09-19T10:15:25: [INFO] Memory management setup completed
2025-09-19T10:15:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:25: [INFO] Checking process locks...
2025-09-19T10:15:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:25: [INFO] Process locks acquired successfully
2025-09-19T10:15:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:25: [INFO] Logs directory created
2025-09-19T10:15:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:25: [10:15:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:25: [10:15:25 am] ✅ Google Sheets API initialized
2025-09-19T10:15:25: [INFO] Google Sheets helper initialized
2025-09-19T10:15:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:25: 📁 Loaded statistics from file
2025-09-19T10:15:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:25: 🗑️ Deleted old log file: bot-2025-09-19T04-44-53-999Z.log
2025-09-19T10:15:25: 📝 Enhanced Logger initialized
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:25: 🧹 Removed stale process lock
2025-09-19T10:15:25: 🔒 Process lock acquired (PID: 4656)
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4656
}
2025-09-19T10:15:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257125326, willExpireAt: 1758257365326 },
  timestamp: 1758257125437
}
2025-09-19T10:15:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:25: 📋 Message rules loaded: 8 types
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257125326, processId: 4656 },
  timestamp: 1758257125437
}
2025-09-19T10:15:25: ℹ️ [10:15:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 113,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:26: [INFO] WhatsApp client initialized
2025-09-19T10:15:28: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:28: 📝 Loaded 12 template types
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257128076,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9548,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:28: ⏰ 4-minute startup delay active
2025-09-19T10:15:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:28: [INFO] Using PQueue for job processing
2025-09-19T10:15:28: [INFO] Memory management setup completed
2025-09-19T10:15:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:28: [INFO] Checking process locks...
2025-09-19T10:15:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:28: [INFO] Process locks acquired successfully
2025-09-19T10:15:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:28: [INFO] Logs directory created
2025-09-19T10:15:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:28: [10:15:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:28: [10:15:28 am] ✅ Google Sheets API initialized
2025-09-19T10:15:28: [INFO] Google Sheets helper initialized
2025-09-19T10:15:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:28: 🗑️ Deleted old log file: bot-2025-09-19T04-44-56-766Z.log
2025-09-19T10:15:28: 📝 Enhanced Logger initialized
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:28: 📁 Loaded statistics from file
2025-09-19T10:15:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:28: 🧹 Removed stale process lock
2025-09-19T10:15:28: 🔒 Process lock acquired (PID: 9548)
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9548
}
2025-09-19T10:15:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257128076, processId: 9548 },
  timestamp: 1758257128187
}
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257128076, willExpireAt: 1758257368076 },
  timestamp: 1758257128187
}
2025-09-19T10:15:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:28: 📋 Message rules loaded: 8 types
2025-09-19T10:15:28: ℹ️ [10:15:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 113,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:29: [INFO] WhatsApp client initialized
2025-09-19T10:15:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:30: 📝 Loaded 12 template types
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257130812,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14956,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:30: ⏰ 4-minute startup delay active
2025-09-19T10:15:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:30: [INFO] Using PQueue for job processing
2025-09-19T10:15:30: [INFO] Memory management setup completed
2025-09-19T10:15:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:30: [INFO] Checking process locks...
2025-09-19T10:15:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:30: [INFO] Process locks acquired successfully
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:30: [INFO] Logs directory created
2025-09-19T10:15:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:30: [10:15:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:30: [10:15:30 am] ✅ Google Sheets API initialized
2025-09-19T10:15:30: [INFO] Google Sheets helper initialized
2025-09-19T10:15:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:30: 🗑️ Deleted old log file: bot-2025-09-19T04-44-59-887Z.log
2025-09-19T10:15:30: 📝 Enhanced Logger initialized
2025-09-19T10:15:30: 📁 Loaded statistics from file
2025-09-19T10:15:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:30: 🧹 Removed stale process lock
2025-09-19T10:15:30: 🔒 Process lock acquired (PID: 14956)
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14956
}
2025-09-19T10:15:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257130812, willExpireAt: 1758257370812 },
  timestamp: 1758257130914
}
2025-09-19T10:15:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:30: 📋 Message rules loaded: 8 types
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257130812, processId: 14956 },
  timestamp: 1758257130913
}
2025-09-19T10:15:30: ℹ️ [10:15:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 103,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:31: [INFO] WhatsApp client initialized
2025-09-19T10:15:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:33: 📝 Loaded 12 template types
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257133704,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9928,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:33: ⏰ 4-minute startup delay active
2025-09-19T10:15:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:33: [INFO] Using PQueue for job processing
2025-09-19T10:15:33: [INFO] Memory management setup completed
2025-09-19T10:15:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:33: [INFO] Checking process locks...
2025-09-19T10:15:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:33: [INFO] Process locks acquired successfully
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:33: [INFO] Logs directory created
2025-09-19T10:15:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:33: [10:15:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:33: [10:15:33 am] ✅ Google Sheets API initialized
2025-09-19T10:15:33: [INFO] Google Sheets helper initialized
2025-09-19T10:15:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:33: 🗑️ Deleted old log file: bot-2025-09-19T04-45-02-758Z.log
2025-09-19T10:15:33: 📝 Enhanced Logger initialized
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:33: 📁 Loaded statistics from file
2025-09-19T10:15:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:33: 🧹 Removed stale process lock
2025-09-19T10:15:33: 🔒 Process lock acquired (PID: 9928)
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9928
}
2025-09-19T10:15:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257133704, processId: 9928 },
  timestamp: 1758257133807
}
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257133704, willExpireAt: 1758257373704 },
  timestamp: 1758257133807
}
2025-09-19T10:15:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:33: 📋 Message rules loaded: 8 types
2025-09-19T10:15:33: ℹ️ [10:15:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:34: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:34: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:34: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:34: [INFO] WhatsApp client initialized
2025-09-19T10:15:36: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:36: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:36: 📝 Loaded 12 template types
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257136788,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16408,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:36: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:36: ⏰ 4-minute startup delay active
2025-09-19T10:15:36: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:36: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:36: [INFO] Using PQueue for job processing
2025-09-19T10:15:36: [INFO] Memory management setup completed
2025-09-19T10:15:36: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:36: [INFO] Checking process locks...
2025-09-19T10:15:36: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:36: [INFO] Process locks acquired successfully
2025-09-19T10:15:36: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:36: [INFO] Logs directory created
2025-09-19T10:15:36: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:36: [10:15:36 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:36: [10:15:36 am] ✅ Google Sheets API initialized
2025-09-19T10:15:36: [INFO] Google Sheets helper initialized
2025-09-19T10:15:36: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:36: 🗑️ Deleted old log file: bot-2025-09-19T04-45-05-579Z.log
2025-09-19T10:15:36: 📝 Enhanced Logger initialized
2025-09-19T10:15:36: 📁 Loaded statistics from file
2025-09-19T10:15:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:36: 🧹 Removed stale process lock
2025-09-19T10:15:36: 🔒 Process lock acquired (PID: 16408)
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16408
}
2025-09-19T10:15:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257136788, willExpireAt: 1758257376788 },
  timestamp: 1758257136905
}
2025-09-19T10:15:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:36: 📋 Message rules loaded: 8 types
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257136788, processId: 16408 },
  timestamp: 1758257136905
}
2025-09-19T10:15:36: ℹ️ [10:15:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:37: [INFO] WhatsApp client initialized
2025-09-19T10:15:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:39: 📝 Loaded 12 template types
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257139467,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12408,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:39: ⏰ 4-minute startup delay active
2025-09-19T10:15:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:39: [INFO] Using PQueue for job processing
2025-09-19T10:15:39: [INFO] Memory management setup completed
2025-09-19T10:15:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:39: [INFO] Checking process locks...
2025-09-19T10:15:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:39: [INFO] Process locks acquired successfully
2025-09-19T10:15:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:39: [INFO] Logs directory created
2025-09-19T10:15:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:39: [10:15:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:39: [10:15:39 am] ✅ Google Sheets API initialized
2025-09-19T10:15:39: [INFO] Google Sheets helper initialized
2025-09-19T10:15:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:39: 🗑️ Deleted old log file: bot-2025-09-19T04-45-08-466Z.log
2025-09-19T10:15:39: 📝 Enhanced Logger initialized
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:39: 📁 Loaded statistics from file
2025-09-19T10:15:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:39: 🧹 Removed stale process lock
2025-09-19T10:15:39: 🔒 Process lock acquired (PID: 12408)
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12408
}
2025-09-19T10:15:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257139467, processId: 12408 },
  timestamp: 1758257139576
}
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257139467, willExpireAt: 1758257379467 },
  timestamp: 1758257139576
}
2025-09-19T10:15:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:39: 📋 Message rules loaded: 8 types
2025-09-19T10:15:39: ℹ️ [10:15:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:40: [INFO] WhatsApp client initialized
2025-09-19T10:15:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:42: 📝 Loaded 12 template types
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257142321,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4976,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:42: ⏰ 4-minute startup delay active
2025-09-19T10:15:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:42: [INFO] Using PQueue for job processing
2025-09-19T10:15:42: [INFO] Memory management setup completed
2025-09-19T10:15:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:42: [INFO] Checking process locks...
2025-09-19T10:15:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:42: [INFO] Process locks acquired successfully
2025-09-19T10:15:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:42: [INFO] Logs directory created
2025-09-19T10:15:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:42: [10:15:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:42: [10:15:42 am] ✅ Google Sheets API initialized
2025-09-19T10:15:42: [INFO] Google Sheets helper initialized
2025-09-19T10:15:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:42: 🗑️ Deleted old log file: bot-2025-09-19T04-45-11-610Z.log
2025-09-19T10:15:42: 📝 Enhanced Logger initialized
2025-09-19T10:15:42: 📁 Loaded statistics from file
2025-09-19T10:15:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:42: 🧹 Removed stale process lock
2025-09-19T10:15:42: 🔒 Process lock acquired (PID: 4976)
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4976
}
2025-09-19T10:15:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257142321, processId: 4976 },
  timestamp: 1758257142440
}
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257142321, willExpireAt: 1758257382321 },
  timestamp: 1758257142440
}
2025-09-19T10:15:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:42: 📋 Message rules loaded: 8 types
2025-09-19T10:15:42: ℹ️ [10:15:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:43: [INFO] WhatsApp client initialized
2025-09-19T10:15:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:45: 📝 Loaded 12 template types
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257145043,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13668,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:45: ⏰ 4-minute startup delay active
2025-09-19T10:15:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:45: [INFO] Using PQueue for job processing
2025-09-19T10:15:45: [INFO] Memory management setup completed
2025-09-19T10:15:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:45: [INFO] Checking process locks...
2025-09-19T10:15:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:45: [INFO] Process locks acquired successfully
2025-09-19T10:15:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:45: [INFO] Logs directory created
2025-09-19T10:15:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:45: [10:15:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:45: [10:15:45 am] ✅ Google Sheets API initialized
2025-09-19T10:15:45: [INFO] Google Sheets helper initialized
2025-09-19T10:15:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:45: 🗑️ Deleted old log file: bot-2025-09-19T04-45-14-376Z.log
2025-09-19T10:15:45: 📝 Enhanced Logger initialized
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:45: 📁 Loaded statistics from file
2025-09-19T10:15:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:45: 🧹 Removed stale process lock
2025-09-19T10:15:45: 🔒 Process lock acquired (PID: 13668)
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13668
}
2025-09-19T10:15:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257145043, processId: 13668 },
  timestamp: 1758257145163
}
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257145043, willExpireAt: 1758257385043 },
  timestamp: 1758257145163
}
2025-09-19T10:15:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:45: 📋 Message rules loaded: 8 types
2025-09-19T10:15:45: ℹ️ [10:15:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:46: [INFO] WhatsApp client initialized
2025-09-19T10:15:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:47: 📝 Loaded 12 template types
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257147683,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10064,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:47: ⏰ 4-minute startup delay active
2025-09-19T10:15:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:47: [INFO] Using PQueue for job processing
2025-09-19T10:15:47: [INFO] Memory management setup completed
2025-09-19T10:15:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:47: [INFO] Checking process locks...
2025-09-19T10:15:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:47: [INFO] Process locks acquired successfully
2025-09-19T10:15:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:47: [INFO] Logs directory created
2025-09-19T10:15:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:47: [10:15:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:47: [10:15:47 am] ✅ Google Sheets API initialized
2025-09-19T10:15:47: [INFO] Google Sheets helper initialized
2025-09-19T10:15:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:47: 🗑️ Deleted old log file: bot-2025-09-19T04-45-16-946Z.log
2025-09-19T10:15:47: 📝 Enhanced Logger initialized
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:47: 📁 Loaded statistics from file
2025-09-19T10:15:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:47: 🧹 Removed stale process lock
2025-09-19T10:15:47: 🔒 Process lock acquired (PID: 10064)
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10064
}
2025-09-19T10:15:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257147683, processId: 10064 },
  timestamp: 1758257147791
}
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257147683, willExpireAt: 1758257387683 },
  timestamp: 1758257147791
}
2025-09-19T10:15:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:47: 📋 Message rules loaded: 8 types
2025-09-19T10:15:47: ℹ️ [10:15:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 110,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:48: [INFO] WhatsApp client initialized
2025-09-19T10:15:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:50: 📝 Loaded 12 template types
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257150559,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8392,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:50: ⏰ 4-minute startup delay active
2025-09-19T10:15:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:50: [INFO] Using PQueue for job processing
2025-09-19T10:15:50: [INFO] Memory management setup completed
2025-09-19T10:15:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:50: [INFO] Checking process locks...
2025-09-19T10:15:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:50: [INFO] Process locks acquired successfully
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:50: [INFO] Logs directory created
2025-09-19T10:15:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:50: [10:15:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:50: [10:15:50 am] ✅ Google Sheets API initialized
2025-09-19T10:15:50: [INFO] Google Sheets helper initialized
2025-09-19T10:15:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:50: 🗑️ Deleted old log file: bot-2025-09-19T04-45-19-678Z.log
2025-09-19T10:15:50: 📝 Enhanced Logger initialized
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:50: 📁 Loaded statistics from file
2025-09-19T10:15:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:50: 🧹 Removed stale process lock
2025-09-19T10:15:50: 🔒 Process lock acquired (PID: 8392)
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8392
}
2025-09-19T10:15:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257150559, willExpireAt: 1758257390559 },
  timestamp: 1758257150665
}
2025-09-19T10:15:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:50: 📋 Message rules loaded: 8 types
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257150559, processId: 8392 },
  timestamp: 1758257150665
}
2025-09-19T10:15:50: ℹ️ [10:15:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 108,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:51: [INFO] WhatsApp client initialized
2025-09-19T10:15:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:53: 📝 Loaded 12 template types
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257153521,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9996,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:53: ⏰ 4-minute startup delay active
2025-09-19T10:15:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:53: [INFO] Using PQueue for job processing
2025-09-19T10:15:53: [INFO] Memory management setup completed
2025-09-19T10:15:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:53: [INFO] Checking process locks...
2025-09-19T10:15:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:53: [INFO] Process locks acquired successfully
2025-09-19T10:15:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:53: [INFO] Logs directory created
2025-09-19T10:15:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:53: [10:15:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:53: [10:15:53 am] ✅ Google Sheets API initialized
2025-09-19T10:15:53: [INFO] Google Sheets helper initialized
2025-09-19T10:15:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:53: 🗑️ Deleted old log file: bot-2025-09-19T04-45-22-503Z.log
2025-09-19T10:15:53: 📝 Enhanced Logger initialized
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:53: 📁 Loaded statistics from file
2025-09-19T10:15:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:53: 🧹 Removed stale process lock
2025-09-19T10:15:53: 🔒 Process lock acquired (PID: 9996)
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9996
}
2025-09-19T10:15:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257153521, processId: 9996 },
  timestamp: 1758257153656
}
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257153521, willExpireAt: 1758257393521 },
  timestamp: 1758257153656
}
2025-09-19T10:15:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:53: 📋 Message rules loaded: 8 types
2025-09-19T10:15:53: ℹ️ [10:15:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:54: [INFO] WhatsApp client initialized
2025-09-19T10:15:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:56: 📝 Loaded 12 template types
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257156402,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13216,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:56: ⏰ 4-minute startup delay active
2025-09-19T10:15:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:56: [INFO] Using PQueue for job processing
2025-09-19T10:15:56: [INFO] Memory management setup completed
2025-09-19T10:15:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:56: [INFO] Checking process locks...
2025-09-19T10:15:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:56: [INFO] Process locks acquired successfully
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:56: [INFO] Logs directory created
2025-09-19T10:15:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:56: [10:15:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:56: [10:15:56 am] ✅ Google Sheets API initialized
2025-09-19T10:15:56: [INFO] Google Sheets helper initialized
2025-09-19T10:15:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:56: 🗑️ Deleted old log file: bot-2025-09-19T04-45-25-357Z.log
2025-09-19T10:15:56: 📝 Enhanced Logger initialized
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:56: 📁 Loaded statistics from file
2025-09-19T10:15:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:56: 🧹 Removed stale process lock
2025-09-19T10:15:56: 🔒 Process lock acquired (PID: 13216)
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13216
}
2025-09-19T10:15:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257156402, processId: 13216 },
  timestamp: 1758257156515
}
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257156402, willExpireAt: 1758257396402 },
  timestamp: 1758257156515
}
2025-09-19T10:15:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:56: 📋 Message rules loaded: 8 types
2025-09-19T10:15:56: ℹ️ [10:15:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:15:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:15:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:15:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:15:57: [INFO] WhatsApp client initialized
2025-09-19T10:15:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:15:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:15:59: 📝 Loaded 12 template types
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257159308,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13884,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:15:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:15:59: ⏰ 4-minute startup delay active
2025-09-19T10:15:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:15:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:15:59: [INFO] Using PQueue for job processing
2025-09-19T10:15:59: [INFO] Memory management setup completed
2025-09-19T10:15:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:15:59: [INFO] Checking process locks...
2025-09-19T10:15:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:15:59: [INFO] Process locks acquired successfully
2025-09-19T10:15:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:15:59: [INFO] Logs directory created
2025-09-19T10:15:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:15:59: [10:15:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:15:59: [10:15:59 am] ✅ Google Sheets API initialized
2025-09-19T10:15:59: [INFO] Google Sheets helper initialized
2025-09-19T10:15:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:15:59: 🗑️ Deleted old log file: bot-2025-09-19T04-45-28-109Z.log
2025-09-19T10:15:59: 📝 Enhanced Logger initialized
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:15:59: 📁 Loaded statistics from file
2025-09-19T10:15:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:15:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:15:59: 🧹 Removed stale process lock
2025-09-19T10:15:59: 🔒 Process lock acquired (PID: 13884)
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13884
}
2025-09-19T10:15:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:15:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257159308, processId: 13884 },
  timestamp: 1758257159412
}
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257159308, willExpireAt: 1758257399308 },
  timestamp: 1758257159412
}
2025-09-19T10:15:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:15:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:15:59: 📋 Message rules loaded: 8 types
2025-09-19T10:15:59: ℹ️ [10:15:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:00: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:00: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:00: [INFO] WhatsApp client initialized
2025-09-19T10:16:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:02: 📝 Loaded 12 template types
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257162122,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1920,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:02: ⏰ 4-minute startup delay active
2025-09-19T10:16:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:02: [INFO] Using PQueue for job processing
2025-09-19T10:16:02: [INFO] Memory management setup completed
2025-09-19T10:16:02: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:02: [INFO] Checking process locks...
2025-09-19T10:16:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:02: [INFO] Process locks acquired successfully
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:02: [INFO] Logs directory created
2025-09-19T10:16:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:02: [10:16:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:02: [10:16:02 am] ✅ Google Sheets API initialized
2025-09-19T10:16:02: [INFO] Google Sheets helper initialized
2025-09-19T10:16:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:02: 🗑️ Deleted old log file: bot-2025-09-19T04-45-30-840Z.log
2025-09-19T10:16:02: 📝 Enhanced Logger initialized
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:02: 📁 Loaded statistics from file
2025-09-19T10:16:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:02: 🧹 Removed stale process lock
2025-09-19T10:16:02: 🔒 Process lock acquired (PID: 1920)
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1920
}
2025-09-19T10:16:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257162122, processId: 1920 },
  timestamp: 1758257162222
}
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257162122, willExpireAt: 1758257402122 },
  timestamp: 1758257162222
}
2025-09-19T10:16:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:02: 📋 Message rules loaded: 8 types
2025-09-19T10:16:02: ℹ️ [10:16:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 103,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:03: [INFO] WhatsApp client initialized
2025-09-19T10:16:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:05: 📝 Loaded 12 template types
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257165055,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15764,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:05: ⏰ 4-minute startup delay active
2025-09-19T10:16:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:05: [INFO] Using PQueue for job processing
2025-09-19T10:16:05: [INFO] Memory management setup completed
2025-09-19T10:16:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:05: [INFO] Checking process locks...
2025-09-19T10:16:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:05: [INFO] Process locks acquired successfully
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:05: [INFO] Logs directory created
2025-09-19T10:16:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:05: [10:16:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:05: [10:16:05 am] ✅ Google Sheets API initialized
2025-09-19T10:16:05: [INFO] Google Sheets helper initialized
2025-09-19T10:16:05: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:05: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:05: 🗑️ Deleted old log file: bot-2025-09-19T04-45-33-730Z.log
2025-09-19T10:16:05: 📝 Enhanced Logger initialized
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:05: 📁 Loaded statistics from file
2025-09-19T10:16:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:05: 🧹 Removed stale process lock
2025-09-19T10:16:05: 🔒 Process lock acquired (PID: 15764)
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15764
}
2025-09-19T10:16:05: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257165055, willExpireAt: 1758257405055 },
  timestamp: 1758257165191
}
2025-09-19T10:16:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:05: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:05: 📋 Message rules loaded: 8 types
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257165055, processId: 15764 },
  timestamp: 1758257165190
}
2025-09-19T10:16:05: ℹ️ [10:16:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:05: [INFO] WhatsApp client initialized
2025-09-19T10:16:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:07: 📝 Loaded 12 template types
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257167636,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16792,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:07: ⏰ 4-minute startup delay active
2025-09-19T10:16:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:07: [INFO] Using PQueue for job processing
2025-09-19T10:16:07: [INFO] Memory management setup completed
2025-09-19T10:16:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:07: [INFO] Checking process locks...
2025-09-19T10:16:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:07: [INFO] Process locks acquired successfully
2025-09-19T10:16:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:07: [INFO] Logs directory created
2025-09-19T10:16:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:07: [10:16:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:07: [10:16:07 am] ✅ Google Sheets API initialized
2025-09-19T10:16:07: [INFO] Google Sheets helper initialized
2025-09-19T10:16:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:07: 🗑️ Deleted old log file: bot-2025-09-19T04-45-36-817Z.log
2025-09-19T10:16:07: 📝 Enhanced Logger initialized
2025-09-19T10:16:07: 📁 Loaded statistics from file
2025-09-19T10:16:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:07: 🧹 Removed stale process lock
2025-09-19T10:16:07: 🔒 Process lock acquired (PID: 16792)
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16792
}
2025-09-19T10:16:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257167636, processId: 16792 },
  timestamp: 1758257167752
}
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257167636, willExpireAt: 1758257407636 },
  timestamp: 1758257167753
}
2025-09-19T10:16:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:07: 📋 Message rules loaded: 8 types
2025-09-19T10:16:07: ℹ️ [10:16:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:08: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:08: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:08: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:08: [INFO] WhatsApp client initialized
2025-09-19T10:16:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:10: 📝 Loaded 12 template types
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257170411,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7436,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:10: ⏰ 4-minute startup delay active
2025-09-19T10:16:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:10: [INFO] Using PQueue for job processing
2025-09-19T10:16:10: [INFO] Memory management setup completed
2025-09-19T10:16:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:10: [INFO] Checking process locks...
2025-09-19T10:16:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:10: [INFO] Process locks acquired successfully
2025-09-19T10:16:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:10: [INFO] Logs directory created
2025-09-19T10:16:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:10: [10:16:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:10: [10:16:10 am] ✅ Google Sheets API initialized
2025-09-19T10:16:10: [INFO] Google Sheets helper initialized
2025-09-19T10:16:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:10: 🗑️ Deleted old log file: bot-2025-09-19T04-45-39-496Z.log
2025-09-19T10:16:10: 📝 Enhanced Logger initialized
2025-09-19T10:16:10: 📁 Loaded statistics from file
2025-09-19T10:16:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:10: 🧹 Removed stale process lock
2025-09-19T10:16:10: 🔒 Process lock acquired (PID: 7436)
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7436
}
2025-09-19T10:16:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257170411, willExpireAt: 1758257410411 },
  timestamp: 1758257170523
}
2025-09-19T10:16:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:10: 📋 Message rules loaded: 8 types
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257170411, processId: 7436 },
  timestamp: 1758257170523
}
2025-09-19T10:16:10: ℹ️ [10:16:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 114,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:11: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:11: [INFO] WhatsApp client initialized
2025-09-19T10:16:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:13: 📝 Loaded 12 template types
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257173173,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6364,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:13: ⏰ 4-minute startup delay active
2025-09-19T10:16:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:13: [INFO] Using PQueue for job processing
2025-09-19T10:16:13: [INFO] Memory management setup completed
2025-09-19T10:16:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:13: [INFO] Checking process locks...
2025-09-19T10:16:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:13: [INFO] Process locks acquired successfully
2025-09-19T10:16:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:13: [INFO] Logs directory created
2025-09-19T10:16:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:13: [10:16:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:13: [10:16:13 am] ✅ Google Sheets API initialized
2025-09-19T10:16:13: [INFO] Google Sheets helper initialized
2025-09-19T10:16:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:13: 🗑️ Deleted old log file: bot-2025-09-19T04-45-42-352Z.log
2025-09-19T10:16:13: 📝 Enhanced Logger initialized
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:13: 📁 Loaded statistics from file
2025-09-19T10:16:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:13: 🧹 Removed stale process lock
2025-09-19T10:16:13: 🔒 Process lock acquired (PID: 6364)
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6364
}
2025-09-19T10:16:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257173173, willExpireAt: 1758257413173 },
  timestamp: 1758257173278
}
2025-09-19T10:16:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:13: 📋 Message rules loaded: 8 types
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257173173, processId: 6364 },
  timestamp: 1758257173278
}
2025-09-19T10:16:13: ℹ️ [10:16:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 107,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:14: [INFO] WhatsApp client initialized
2025-09-19T10:16:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:16: 📝 Loaded 12 template types
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257176232,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3200,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:16: ⏰ 4-minute startup delay active
2025-09-19T10:16:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:16: [INFO] Using PQueue for job processing
2025-09-19T10:16:16: [INFO] Memory management setup completed
2025-09-19T10:16:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:16: [INFO] Checking process locks...
2025-09-19T10:16:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:16: [INFO] Process locks acquired successfully
2025-09-19T10:16:16: [INFO] Logs directory created
2025-09-19T10:16:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:16: [10:16:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:16: [10:16:16 am] ✅ Google Sheets API initialized
2025-09-19T10:16:16: [INFO] Google Sheets helper initialized
2025-09-19T10:16:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:16: 🗑️ Deleted old log file: bot-2025-09-19T04-45-45-080Z.log
2025-09-19T10:16:16: 📝 Enhanced Logger initialized
2025-09-19T10:16:16: 📁 Loaded statistics from file
2025-09-19T10:16:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:16: 🧹 Removed stale process lock
2025-09-19T10:16:16: 🔒 Process lock acquired (PID: 3200)
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3200
}
2025-09-19T10:16:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257176232, processId: 3200 },
  timestamp: 1758257176388
}
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257176232, willExpireAt: 1758257416232 },
  timestamp: 1758257176388
}
2025-09-19T10:16:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:16: 📋 Message rules loaded: 8 types
2025-09-19T10:16:16: ℹ️ [10:16:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 159,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:17: [INFO] WhatsApp client initialized
2025-09-19T10:16:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:18: 📝 Loaded 12 template types
2025-09-19T10:16:19: ℹ️ [10:16:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257178990,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4204,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:19: ⏰ 4-minute startup delay active
2025-09-19T10:16:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:19: [INFO] Using PQueue for job processing
2025-09-19T10:16:19: [INFO] Memory management setup completed
2025-09-19T10:16:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:19: [INFO] Checking process locks...
2025-09-19T10:16:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:19: ℹ️ [10:16:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:19: [INFO] Process locks acquired successfully
2025-09-19T10:16:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:19: [INFO] Logs directory created
2025-09-19T10:16:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:19: [10:16:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:19: [10:16:19 am] ✅ Google Sheets API initialized
2025-09-19T10:16:19: [INFO] Google Sheets helper initialized
2025-09-19T10:16:19: ℹ️ [10:16:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:19: 🗑️ Deleted old log file: bot-2025-09-19T04-45-47-712Z.log
2025-09-19T10:16:19: 📝 Enhanced Logger initialized
2025-09-19T10:16:19: 📁 Loaded statistics from file
2025-09-19T10:16:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:19: 🧹 Removed stale process lock
2025-09-19T10:16:19: 🔒 Process lock acquired (PID: 4204)
2025-09-19T10:16:19: ℹ️ [10:16:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4204
}
2025-09-19T10:16:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:19: ℹ️ [10:16:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257178990, processId: 4204 },
  timestamp: 1758257179105
}
2025-09-19T10:16:19: ℹ️ [10:16:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257178990, willExpireAt: 1758257418990 },
  timestamp: 1758257179105
}
2025-09-19T10:16:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:19: 📋 Message rules loaded: 8 types
2025-09-19T10:16:19: ℹ️ [10:16:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 118,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:19: [INFO] WhatsApp client initialized
2025-09-19T10:16:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:23: 📝 Loaded 12 template types
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257183540,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11568,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:23: ⏰ 4-minute startup delay active
2025-09-19T10:16:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:23: [INFO] Using PQueue for job processing
2025-09-19T10:16:23: [INFO] Memory management setup completed
2025-09-19T10:16:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:23: [INFO] Checking process locks...
2025-09-19T10:16:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:23: [INFO] Process locks acquired successfully
2025-09-19T10:16:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:23: [INFO] Logs directory created
2025-09-19T10:16:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:23: [10:16:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:23: [10:16:23 am] ✅ Google Sheets API initialized
2025-09-19T10:16:23: [INFO] Google Sheets helper initialized
2025-09-19T10:16:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:23: 🗑️ Deleted old log file: bot-2025-09-19T04-45-50-589Z.log
2025-09-19T10:16:23: 📝 Enhanced Logger initialized
2025-09-19T10:16:23: 📁 Loaded statistics from file
2025-09-19T10:16:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:23: 🧹 Removed stale process lock
2025-09-19T10:16:23: 🔒 Process lock acquired (PID: 11568)
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11568
}
2025-09-19T10:16:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257183540, processId: 11568 },
  timestamp: 1758257183822
}
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257183540, willExpireAt: 1758257423540 },
  timestamp: 1758257183822
}
2025-09-19T10:16:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:23: 📋 Message rules loaded: 8 types
2025-09-19T10:16:23: ℹ️ [10:16:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 287,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:24: [INFO] WhatsApp client initialized
2025-09-19T10:16:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:27: 📝 Loaded 12 template types
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257187751,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14024,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:27: ⏰ 4-minute startup delay active
2025-09-19T10:16:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:27: [INFO] Using PQueue for job processing
2025-09-19T10:16:27: [INFO] Memory management setup completed
2025-09-19T10:16:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:27: [INFO] Checking process locks...
2025-09-19T10:16:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:27: [INFO] Process locks acquired successfully
2025-09-19T10:16:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:27: [INFO] Logs directory created
2025-09-19T10:16:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:27: [10:16:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:27: [10:16:27 am] ✅ Google Sheets API initialized
2025-09-19T10:16:27: [INFO] Google Sheets helper initialized
2025-09-19T10:16:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:27: 🗑️ Deleted old log file: bot-2025-09-19T04-45-53-561Z.log
2025-09-19T10:16:27: 📝 Enhanced Logger initialized
2025-09-19T10:16:27: 📁 Loaded statistics from file
2025-09-19T10:16:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:27: 🧹 Removed stale process lock
2025-09-19T10:16:27: 🔒 Process lock acquired (PID: 14024)
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14024
}
2025-09-19T10:16:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257187751, processId: 14024 },
  timestamp: 1758257187907
}
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257187751, willExpireAt: 1758257427751 },
  timestamp: 1758257187908
}
2025-09-19T10:16:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:27: 📋 Message rules loaded: 8 types
2025-09-19T10:16:27: ℹ️ [10:16:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 160,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:28: [INFO] WhatsApp client initialized
2025-09-19T10:16:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:30: 📝 Loaded 12 template types
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257190802,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17620,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:30: ⏰ 4-minute startup delay active
2025-09-19T10:16:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:30: [INFO] Using PQueue for job processing
2025-09-19T10:16:30: [INFO] Memory management setup completed
2025-09-19T10:16:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:30: [INFO] Checking process locks...
2025-09-19T10:16:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:30: [INFO] Process locks acquired successfully
2025-09-19T10:16:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:30: [INFO] Logs directory created
2025-09-19T10:16:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:30: [10:16:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:30: [10:16:30 am] ✅ Google Sheets API initialized
2025-09-19T10:16:30: [INFO] Google Sheets helper initialized
2025-09-19T10:16:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:30: 🗑️ Deleted old log file: bot-2025-09-19T04-45-56-436Z.log
2025-09-19T10:16:30: 📝 Enhanced Logger initialized
2025-09-19T10:16:30: 📁 Loaded statistics from file
2025-09-19T10:16:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:30: 🧹 Removed stale process lock
2025-09-19T10:16:30: 🔒 Process lock acquired (PID: 17620)
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17620
}
2025-09-19T10:16:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257190802, processId: 17620 },
  timestamp: 1758257190923
}
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257190802, willExpireAt: 1758257430802 },
  timestamp: 1758257190923
}
2025-09-19T10:16:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:30: 📋 Message rules loaded: 8 types
2025-09-19T10:16:30: ℹ️ [10:16:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:31: [INFO] WhatsApp client initialized
2025-09-19T10:16:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:33: 📝 Loaded 12 template types
2025-09-19T10:16:33: ℹ️ [10:16:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257193880,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5876,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:33: ⏰ 4-minute startup delay active
2025-09-19T10:16:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:33: [INFO] Using PQueue for job processing
2025-09-19T10:16:33: [INFO] Memory management setup completed
2025-09-19T10:16:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:33: [INFO] Checking process locks...
2025-09-19T10:16:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:33: ℹ️ [10:16:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:33: [INFO] Process locks acquired successfully
2025-09-19T10:16:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:33: [INFO] Logs directory created
2025-09-19T10:16:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:33: [10:16:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:33: [10:16:33 am] ✅ Google Sheets API initialized
2025-09-19T10:16:33: [INFO] Google Sheets helper initialized
2025-09-19T10:16:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:34: 🗑️ Deleted old log file: bot-2025-09-19T04-45-59-337Z.log
2025-09-19T10:16:34: 📝 Enhanced Logger initialized
2025-09-19T10:16:34: ℹ️ [10:16:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:34: 📁 Loaded statistics from file
2025-09-19T10:16:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:34: 🧹 Removed stale process lock
2025-09-19T10:16:34: 🔒 Process lock acquired (PID: 5876)
2025-09-19T10:16:34: ℹ️ [10:16:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5876
}
2025-09-19T10:16:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:34: ℹ️ [10:16:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257193880, processId: 5876 },
  timestamp: 1758257194016
}
2025-09-19T10:16:34: ℹ️ [10:16:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257193880, willExpireAt: 1758257433880 },
  timestamp: 1758257194016
}
2025-09-19T10:16:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:34: 📋 Message rules loaded: 8 types
2025-09-19T10:16:34: ℹ️ [10:16:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:34: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:34: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:34: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:34: [INFO] WhatsApp client initialized
2025-09-19T10:16:36: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:36: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:36: 📝 Loaded 12 template types
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257196754,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17520,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:36: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:36: ⏰ 4-minute startup delay active
2025-09-19T10:16:36: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:36: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:36: [INFO] Using PQueue for job processing
2025-09-19T10:16:36: [INFO] Memory management setup completed
2025-09-19T10:16:36: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:36: [INFO] Checking process locks...
2025-09-19T10:16:36: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:36: [INFO] Process locks acquired successfully
2025-09-19T10:16:36: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:36: [INFO] Logs directory created
2025-09-19T10:16:36: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:36: [10:16:36 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:36: [10:16:36 am] ✅ Google Sheets API initialized
2025-09-19T10:16:36: [INFO] Google Sheets helper initialized
2025-09-19T10:16:36: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:36: 🗑️ Deleted old log file: bot-2025-09-19T04-46-02-150Z.log
2025-09-19T10:16:36: 📝 Enhanced Logger initialized
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:36: 📁 Loaded statistics from file
2025-09-19T10:16:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:36: 🧹 Removed stale process lock
2025-09-19T10:16:36: 🔒 Process lock acquired (PID: 17520)
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17520
}
2025-09-19T10:16:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257196754, processId: 17520 },
  timestamp: 1758257196854
}
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257196754, willExpireAt: 1758257436754 },
  timestamp: 1758257196854
}
2025-09-19T10:16:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:36: 📋 Message rules loaded: 8 types
2025-09-19T10:16:36: ℹ️ [10:16:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:37: [INFO] WhatsApp client initialized
2025-09-19T10:16:40: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:40: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:40: 📝 Loaded 12 template types
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257200525,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2928,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:40: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:40: ⏰ 4-minute startup delay active
2025-09-19T10:16:40: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:40: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:40: [INFO] Using PQueue for job processing
2025-09-19T10:16:40: [INFO] Memory management setup completed
2025-09-19T10:16:40: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:40: [INFO] Checking process locks...
2025-09-19T10:16:40: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:40: [INFO] Process locks acquired successfully
2025-09-19T10:16:40: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:40: [INFO] Logs directory created
2025-09-19T10:16:40: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:40: [10:16:40 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:40: [10:16:40 am] ✅ Google Sheets API initialized
2025-09-19T10:16:40: [INFO] Google Sheets helper initialized
2025-09-19T10:16:40: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:40: 🗑️ Deleted old log file: bot-2025-09-19T04-46-05-094Z.log
2025-09-19T10:16:40: 📝 Enhanced Logger initialized
2025-09-19T10:16:40: 📁 Loaded statistics from file
2025-09-19T10:16:40: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:40: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:40: 🧹 Removed stale process lock
2025-09-19T10:16:40: 🔒 Process lock acquired (PID: 2928)
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2928
}
2025-09-19T10:16:40: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:40: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257200525, willExpireAt: 1758257440525 },
  timestamp: 1758257200684
}
2025-09-19T10:16:40: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:40: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:40: 📋 Message rules loaded: 8 types
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257200525, processId: 2928 },
  timestamp: 1758257200684
}
2025-09-19T10:16:40: ℹ️ [10:16:40 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 162,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:41: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:41: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:41: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:41: [INFO] WhatsApp client initialized
2025-09-19T10:16:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:44: 📝 Loaded 12 template types
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257204093,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10056,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:44: ⏰ 4-minute startup delay active
2025-09-19T10:16:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:44: [INFO] Using PQueue for job processing
2025-09-19T10:16:44: [INFO] Memory management setup completed
2025-09-19T10:16:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:44: [INFO] Checking process locks...
2025-09-19T10:16:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:44: [INFO] Process locks acquired successfully
2025-09-19T10:16:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:44: [INFO] Logs directory created
2025-09-19T10:16:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:44: [10:16:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:44: [10:16:44 am] ✅ Google Sheets API initialized
2025-09-19T10:16:44: [INFO] Google Sheets helper initialized
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:44: 🗑️ Deleted old log file: bot-2025-09-19T04-46-07-669Z.log
2025-09-19T10:16:44: 📝 Enhanced Logger initialized
2025-09-19T10:16:44: 📁 Loaded statistics from file
2025-09-19T10:16:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:44: 🧹 Removed stale process lock
2025-09-19T10:16:44: 🔒 Process lock acquired (PID: 10056)
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10056
}
2025-09-19T10:16:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257204093, processId: 10056 },
  timestamp: 1758257204206
}
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257204093, willExpireAt: 1758257444093 },
  timestamp: 1758257204206
}
2025-09-19T10:16:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:44: 📋 Message rules loaded: 8 types
2025-09-19T10:16:44: ℹ️ [10:16:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:45: [INFO] WhatsApp client initialized
2025-09-19T10:16:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:47: 📝 Loaded 12 template types
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257207162,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4508,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:47: ⏰ 4-minute startup delay active
2025-09-19T10:16:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:47: [INFO] Using PQueue for job processing
2025-09-19T10:16:47: [INFO] Memory management setup completed
2025-09-19T10:16:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:47: [INFO] Checking process locks...
2025-09-19T10:16:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:47: [INFO] Process locks acquired successfully
2025-09-19T10:16:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:47: [INFO] Logs directory created
2025-09-19T10:16:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:47: [10:16:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:47: [10:16:47 am] ✅ Google Sheets API initialized
2025-09-19T10:16:47: [INFO] Google Sheets helper initialized
2025-09-19T10:16:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:47: 🗑️ Deleted old log file: bot-2025-09-19T04-46-10-441Z.log
2025-09-19T10:16:47: 📝 Enhanced Logger initialized
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:47: 📁 Loaded statistics from file
2025-09-19T10:16:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:47: 🧹 Removed stale process lock
2025-09-19T10:16:47: 🔒 Process lock acquired (PID: 4508)
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4508
}
2025-09-19T10:16:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257207162, processId: 4508 },
  timestamp: 1758257207279
}
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257207162, willExpireAt: 1758257447162 },
  timestamp: 1758257207279
}
2025-09-19T10:16:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:47: 📋 Message rules loaded: 8 types
2025-09-19T10:16:47: ℹ️ [10:16:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:48: [INFO] WhatsApp client initialized
2025-09-19T10:16:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:50: 📝 Loaded 12 template types
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257210417,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13516,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:50: ⏰ 4-minute startup delay active
2025-09-19T10:16:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:50: [INFO] Using PQueue for job processing
2025-09-19T10:16:50: [INFO] Memory management setup completed
2025-09-19T10:16:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:50: [INFO] Checking process locks...
2025-09-19T10:16:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:50: [INFO] Process locks acquired successfully
2025-09-19T10:16:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:50: [INFO] Logs directory created
2025-09-19T10:16:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:50: [10:16:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:50: [10:16:50 am] ✅ Google Sheets API initialized
2025-09-19T10:16:50: [INFO] Google Sheets helper initialized
2025-09-19T10:16:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:50: 🗑️ Deleted old log file: bot-2025-09-19T04-46-13-197Z.log
2025-09-19T10:16:50: 📝 Enhanced Logger initialized
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:50: 📁 Loaded statistics from file
2025-09-19T10:16:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:50: 🧹 Removed stale process lock
2025-09-19T10:16:50: 🔒 Process lock acquired (PID: 13516)
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13516
}
2025-09-19T10:16:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257210417, processId: 13516 },
  timestamp: 1758257210545
}
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257210417, willExpireAt: 1758257450417 },
  timestamp: 1758257210545
}
2025-09-19T10:16:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:50: 📋 Message rules loaded: 8 types
2025-09-19T10:16:50: ℹ️ [10:16:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:51: [INFO] WhatsApp client initialized
2025-09-19T10:16:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:53: 📝 Loaded 12 template types
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257213646,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11440,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:53: ⏰ 4-minute startup delay active
2025-09-19T10:16:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:53: [INFO] Using PQueue for job processing
2025-09-19T10:16:53: [INFO] Memory management setup completed
2025-09-19T10:16:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:53: [INFO] Checking process locks...
2025-09-19T10:16:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:53: [INFO] Process locks acquired successfully
2025-09-19T10:16:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:53: [INFO] Logs directory created
2025-09-19T10:16:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:53: [10:16:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:53: [10:16:53 am] ✅ Google Sheets API initialized
2025-09-19T10:16:53: [INFO] Google Sheets helper initialized
2025-09-19T10:16:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:53: 🗑️ Deleted old log file: bot-2025-09-19T04-46-16-275Z.log
2025-09-19T10:16:53: 📝 Enhanced Logger initialized
2025-09-19T10:16:53: 📁 Loaded statistics from file
2025-09-19T10:16:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:53: 🧹 Removed stale process lock
2025-09-19T10:16:53: 🔒 Process lock acquired (PID: 11440)
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11440
}
2025-09-19T10:16:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257213646, processId: 11440 },
  timestamp: 1758257213847
}
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257213646, willExpireAt: 1758257453646 },
  timestamp: 1758257213848
}
2025-09-19T10:16:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:53: 📋 Message rules loaded: 8 types
2025-09-19T10:16:53: ℹ️ [10:16:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 205,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:54: [INFO] WhatsApp client initialized
2025-09-19T10:16:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:56: 📝 Loaded 12 template types
2025-09-19T10:16:56: ℹ️ [10:16:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257216793,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18396,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:56: ⏰ 4-minute startup delay active
2025-09-19T10:16:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:56: [INFO] Using PQueue for job processing
2025-09-19T10:16:56: [INFO] Memory management setup completed
2025-09-19T10:16:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:56: [INFO] Checking process locks...
2025-09-19T10:16:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:56: ℹ️ [10:16:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:56: [INFO] Process locks acquired successfully
2025-09-19T10:16:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:56: [INFO] Logs directory created
2025-09-19T10:16:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:56: [10:16:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:56: [10:16:56 am] ✅ Google Sheets API initialized
2025-09-19T10:16:56: [INFO] Google Sheets helper initialized
2025-09-19T10:16:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:56: ℹ️ [10:16:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:16:56: 🗑️ Deleted old log file: bot-2025-09-19T04-46-19-020Z.log
2025-09-19T10:16:56: 📝 Enhanced Logger initialized
2025-09-19T10:16:56: 📁 Loaded statistics from file
2025-09-19T10:16:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:16:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:16:56: 🧹 Removed stale process lock
2025-09-19T10:16:56: 🔒 Process lock acquired (PID: 18396)
2025-09-19T10:16:56: ℹ️ [10:16:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18396
}
2025-09-19T10:16:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:16:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:16:56: ℹ️ [10:16:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257216793, willExpireAt: 1758257456793 },
  timestamp: 1758257216995
}
2025-09-19T10:16:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:16:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:16:56: 📋 Message rules loaded: 8 types
2025-09-19T10:16:56: ℹ️ [10:16:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257216793, processId: 18396 },
  timestamp: 1758257216995
}
2025-09-19T10:16:57: ℹ️ [10:16:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 205,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:16:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:16:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:16:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:16:57: [INFO] WhatsApp client initialized
2025-09-19T10:16:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:16:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:16:59: 📝 Loaded 12 template types
2025-09-19T10:16:59: ℹ️ [10:16:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257219886,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18272,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:16:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:16:59: ⏰ 4-minute startup delay active
2025-09-19T10:16:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:16:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:16:59: [INFO] Using PQueue for job processing
2025-09-19T10:16:59: [INFO] Memory management setup completed
2025-09-19T10:16:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:16:59: [INFO] Checking process locks...
2025-09-19T10:16:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:16:59: ℹ️ [10:16:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:16:59: [INFO] Process locks acquired successfully
2025-09-19T10:16:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:16:59: [INFO] Logs directory created
2025-09-19T10:16:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:16:59: [10:16:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:16:59: [10:16:59 am] ✅ Google Sheets API initialized
2025-09-19T10:16:59: [INFO] Google Sheets helper initialized
2025-09-19T10:16:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:16:59: 🗑️ Deleted old log file: bot-2025-09-19T04-46-23-614Z.log
2025-09-19T10:16:59: 📝 Enhanced Logger initialized
2025-09-19T10:17:00: ℹ️ [10:17:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:00: 📁 Loaded statistics from file
2025-09-19T10:17:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:00: 🧹 Removed stale process lock
2025-09-19T10:17:00: 🔒 Process lock acquired (PID: 18272)
2025-09-19T10:17:00: ℹ️ [10:17:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18272
}
2025-09-19T10:17:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:00: ℹ️ [10:17:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257219886, willExpireAt: 1758257459886 },
  timestamp: 1758257220017
}
2025-09-19T10:17:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:00: 📋 Message rules loaded: 8 types
2025-09-19T10:17:00: ℹ️ [10:17:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257219886, processId: 18272 },
  timestamp: 1758257220017
}
2025-09-19T10:17:00: ℹ️ [10:17:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:01: [INFO] WhatsApp client initialized
2025-09-19T10:17:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:02: 📝 Loaded 12 template types
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257222722,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15800,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:02: ⏰ 4-minute startup delay active
2025-09-19T10:17:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:02: [INFO] Using PQueue for job processing
2025-09-19T10:17:02: [INFO] Memory management setup completed
2025-09-19T10:17:02: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:02: [INFO] Checking process locks...
2025-09-19T10:17:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:02: [INFO] Process locks acquired successfully
2025-09-19T10:17:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:02: [INFO] Logs directory created
2025-09-19T10:17:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:02: [10:17:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:02: [10:17:02 am] ✅ Google Sheets API initialized
2025-09-19T10:17:02: [INFO] Google Sheets helper initialized
2025-09-19T10:17:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:02: 🗑️ Deleted old log file: bot-2025-09-19T04-46-27-790Z.log
2025-09-19T10:17:02: 📝 Enhanced Logger initialized
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:02: 📁 Loaded statistics from file
2025-09-19T10:17:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:02: 🧹 Removed stale process lock
2025-09-19T10:17:02: 🔒 Process lock acquired (PID: 15800)
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15800
}
2025-09-19T10:17:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257222722, processId: 15800 },
  timestamp: 1758257222820
}
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257222722, willExpireAt: 1758257462722 },
  timestamp: 1758257222820
}
2025-09-19T10:17:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:02: 📋 Message rules loaded: 8 types
2025-09-19T10:17:02: ℹ️ [10:17:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 99,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:03: [INFO] WhatsApp client initialized
2025-09-19T10:17:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:05: 📝 Loaded 12 template types
2025-09-19T10:17:05: ℹ️ [10:17:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257225969,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11280,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:05: ⏰ 4-minute startup delay active
2025-09-19T10:17:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:05: [INFO] Using PQueue for job processing
2025-09-19T10:17:05: [INFO] Memory management setup completed
2025-09-19T10:17:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:05: [INFO] Checking process locks...
2025-09-19T10:17:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:06: ℹ️ [10:17:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:06: [INFO] Process locks acquired successfully
2025-09-19T10:17:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:06: [INFO] Logs directory created
2025-09-19T10:17:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:06: [10:17:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:06: [10:17:06 am] ✅ Google Sheets API initialized
2025-09-19T10:17:06: [INFO] Google Sheets helper initialized
2025-09-19T10:17:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:06: ℹ️ [10:17:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:06: 🗑️ Deleted old log file: bot-2025-09-19T04-46-30-837Z.log
2025-09-19T10:17:06: 📝 Enhanced Logger initialized
2025-09-19T10:17:06: 📁 Loaded statistics from file
2025-09-19T10:17:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:06: 🧹 Removed stale process lock
2025-09-19T10:17:06: 🔒 Process lock acquired (PID: 11280)
2025-09-19T10:17:06: ℹ️ [10:17:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11280
}
2025-09-19T10:17:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:06: ℹ️ [10:17:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257225969, willExpireAt: 1758257465969 },
  timestamp: 1758257226097
}
2025-09-19T10:17:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:06: 📋 Message rules loaded: 8 types
2025-09-19T10:17:06: ℹ️ [10:17:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257225969, processId: 11280 },
  timestamp: 1758257226097
}
2025-09-19T10:17:06: ℹ️ [10:17:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:07: [INFO] WhatsApp client initialized
2025-09-19T10:17:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:08: 📝 Loaded 12 template types
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257228901,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8932,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:08: ⏰ 4-minute startup delay active
2025-09-19T10:17:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:08: [INFO] Using PQueue for job processing
2025-09-19T10:17:08: [INFO] Memory management setup completed
2025-09-19T10:17:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:08: [INFO] Checking process locks...
2025-09-19T10:17:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:08: [INFO] Process locks acquired successfully
2025-09-19T10:17:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:08: [INFO] Logs directory created
2025-09-19T10:17:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:08: [10:17:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:08: [10:17:08 am] ✅ Google Sheets API initialized
2025-09-19T10:17:08: [INFO] Google Sheets helper initialized
2025-09-19T10:17:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:08: 🗑️ Deleted old log file: bot-2025-09-19T04-46-33-920Z.log
2025-09-19T10:17:08: 📝 Enhanced Logger initialized
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:08: 📁 Loaded statistics from file
2025-09-19T10:17:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:08: 🧹 Removed stale process lock
2025-09-19T10:17:08: 🔒 Process lock acquired (PID: 8932)
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8932
}
2025-09-19T10:17:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257228901, willExpireAt: 1758257468901 },
  timestamp: 1758257228994
}
2025-09-19T10:17:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:08: 📋 Message rules loaded: 8 types
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257228901, processId: 8932 },
  timestamp: 1758257228994
}
2025-09-19T10:17:08: ℹ️ [10:17:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 95,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:10: [INFO] WhatsApp client initialized
2025-09-19T10:17:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:11: 📝 Loaded 12 template types
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257231719,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4272,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:11: ⏰ 4-minute startup delay active
2025-09-19T10:17:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:11: [INFO] Using PQueue for job processing
2025-09-19T10:17:11: [INFO] Memory management setup completed
2025-09-19T10:17:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:11: [INFO] Checking process locks...
2025-09-19T10:17:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:11: [INFO] Process locks acquired successfully
2025-09-19T10:17:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:11: [INFO] Logs directory created
2025-09-19T10:17:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:11: [10:17:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:11: [10:17:11 am] ✅ Google Sheets API initialized
2025-09-19T10:17:11: [INFO] Google Sheets helper initialized
2025-09-19T10:17:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:11: 🗑️ Deleted old log file: bot-2025-09-19T04-46-36-779Z.log
2025-09-19T10:17:11: 📝 Enhanced Logger initialized
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:11: 📁 Loaded statistics from file
2025-09-19T10:17:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:11: 🧹 Removed stale process lock
2025-09-19T10:17:11: 🔒 Process lock acquired (PID: 4272)
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4272
}
2025-09-19T10:17:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257231719, processId: 4272 },
  timestamp: 1758257231819
}
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257231719, willExpireAt: 1758257471719 },
  timestamp: 1758257231819
}
2025-09-19T10:17:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:11: 📋 Message rules loaded: 8 types
2025-09-19T10:17:11: ℹ️ [10:17:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:12: [INFO] WhatsApp client initialized
2025-09-19T10:17:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:14: 📝 Loaded 12 template types
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257234439,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15444,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:14: ⏰ 4-minute startup delay active
2025-09-19T10:17:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:14: [INFO] Using PQueue for job processing
2025-09-19T10:17:14: [INFO] Memory management setup completed
2025-09-19T10:17:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:14: [INFO] Checking process locks...
2025-09-19T10:17:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:14: [INFO] Process locks acquired successfully
2025-09-19T10:17:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:14: [INFO] Logs directory created
2025-09-19T10:17:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:14: [10:17:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:14: [10:17:14 am] ✅ Google Sheets API initialized
2025-09-19T10:17:14: [INFO] Google Sheets helper initialized
2025-09-19T10:17:14: 🗑️ Deleted old log file: bot-2025-09-19T04-46-40-564Z.log
2025-09-19T10:17:14: 📝 Enhanced Logger initialized
2025-09-19T10:17:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:14: 📁 Loaded statistics from file
2025-09-19T10:17:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:14: 🧹 Removed stale process lock
2025-09-19T10:17:14: 🔒 Process lock acquired (PID: 15444)
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15444
}
2025-09-19T10:17:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257234439, processId: 15444 },
  timestamp: 1758257234597
}
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257234439, willExpireAt: 1758257474439 },
  timestamp: 1758257234597
}
2025-09-19T10:17:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:14: 📋 Message rules loaded: 8 types
2025-09-19T10:17:14: ℹ️ [10:17:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 160,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:15: [INFO] WhatsApp client initialized
2025-09-19T10:17:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:17: 📝 Loaded 12 template types
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257237173,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9660,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:17: ⏰ 4-minute startup delay active
2025-09-19T10:17:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:17: [INFO] Using PQueue for job processing
2025-09-19T10:17:17: [INFO] Memory management setup completed
2025-09-19T10:17:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:17: [INFO] Checking process locks...
2025-09-19T10:17:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:17: [INFO] Process locks acquired successfully
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:17: [INFO] Logs directory created
2025-09-19T10:17:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:17: [10:17:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:17: [10:17:17 am] ✅ Google Sheets API initialized
2025-09-19T10:17:17: [INFO] Google Sheets helper initialized
2025-09-19T10:17:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:17: 🗑️ Deleted old log file: bot-2025-09-19T04-46-44-124Z.log
2025-09-19T10:17:17: 📝 Enhanced Logger initialized
2025-09-19T10:17:17: 📁 Loaded statistics from file
2025-09-19T10:17:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:17: 🧹 Removed stale process lock
2025-09-19T10:17:17: 🔒 Process lock acquired (PID: 9660)
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9660
}
2025-09-19T10:17:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257237173, willExpireAt: 1758257477173 },
  timestamp: 1758257237293
}
2025-09-19T10:17:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:17: 📋 Message rules loaded: 8 types
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257237173, processId: 9660 },
  timestamp: 1758257237293
}
2025-09-19T10:17:17: ℹ️ [10:17:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:18: [INFO] WhatsApp client initialized
2025-09-19T10:17:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:19: 📝 Loaded 12 template types
2025-09-19T10:17:20: ℹ️ [10:17:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257239975,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4112,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:20: ⏰ 4-minute startup delay active
2025-09-19T10:17:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:20: [INFO] Using PQueue for job processing
2025-09-19T10:17:20: [INFO] Memory management setup completed
2025-09-19T10:17:20: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:20: [INFO] Checking process locks...
2025-09-19T10:17:20: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:20: ℹ️ [10:17:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:20: [INFO] Process locks acquired successfully
2025-09-19T10:17:20: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:20: [INFO] Logs directory created
2025-09-19T10:17:20: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:20: [10:17:20 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:20: [10:17:20 am] ✅ Google Sheets API initialized
2025-09-19T10:17:20: [INFO] Google Sheets helper initialized
2025-09-19T10:17:20: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:20: ℹ️ [10:17:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:20: 🗑️ Deleted old log file: bot-2025-09-19T04-46-47-196Z.log
2025-09-19T10:17:20: 📝 Enhanced Logger initialized
2025-09-19T10:17:20: 📁 Loaded statistics from file
2025-09-19T10:17:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:20: 🧹 Removed stale process lock
2025-09-19T10:17:20: 🔒 Process lock acquired (PID: 4112)
2025-09-19T10:17:20: ℹ️ [10:17:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4112
}
2025-09-19T10:17:20: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:20: ℹ️ [10:17:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257239975, processId: 4112 },
  timestamp: 1758257240108
}
2025-09-19T10:17:20: ℹ️ [10:17:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257239975, willExpireAt: 1758257479975 },
  timestamp: 1758257240108
}
2025-09-19T10:17:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:20: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:20: 📋 Message rules loaded: 8 types
2025-09-19T10:17:20: ℹ️ [10:17:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 135,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:21: [INFO] WhatsApp client initialized
2025-09-19T10:17:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:22: 📝 Loaded 12 template types
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257242729,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:22: ⏰ 4-minute startup delay active
2025-09-19T10:17:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:22: [INFO] Using PQueue for job processing
2025-09-19T10:17:22: [INFO] Memory management setup completed
2025-09-19T10:17:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:22: [INFO] Checking process locks...
2025-09-19T10:17:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:22: [INFO] Process locks acquired successfully
2025-09-19T10:17:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:22: [INFO] Logs directory created
2025-09-19T10:17:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:22: [10:17:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:22: [10:17:22 am] ✅ Google Sheets API initialized
2025-09-19T10:17:22: [INFO] Google Sheets helper initialized
2025-09-19T10:17:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:22: 🗑️ Deleted old log file: bot-2025-09-19T04-46-50-445Z.log
2025-09-19T10:17:22: 📝 Enhanced Logger initialized
2025-09-19T10:17:22: 📁 Loaded statistics from file
2025-09-19T10:17:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:22: 🧹 Removed stale process lock
2025-09-19T10:17:22: 🔒 Process lock acquired (PID: 9712)
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9712
}
2025-09-19T10:17:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257242729, processId: 9712 },
  timestamp: 1758257242836
}
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257242729, willExpireAt: 1758257482729 },
  timestamp: 1758257242836
}
2025-09-19T10:17:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:22: 📋 Message rules loaded: 8 types
2025-09-19T10:17:22: ℹ️ [10:17:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 108,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:23: [INFO] WhatsApp client initialized
2025-09-19T10:17:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:25: 📝 Loaded 12 template types
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257245842,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13804,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:25: ⏰ 4-minute startup delay active
2025-09-19T10:17:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:25: [INFO] Using PQueue for job processing
2025-09-19T10:17:25: [INFO] Memory management setup completed
2025-09-19T10:17:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:25: [INFO] Checking process locks...
2025-09-19T10:17:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:25: [INFO] Process locks acquired successfully
2025-09-19T10:17:25: [INFO] Logs directory created
2025-09-19T10:17:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:25: [10:17:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:25: [10:17:25 am] ✅ Google Sheets API initialized
2025-09-19T10:17:25: [INFO] Google Sheets helper initialized
2025-09-19T10:17:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:25: 🗑️ Deleted old log file: bot-2025-09-19T04-46-53-705Z.log
2025-09-19T10:17:25: 📝 Enhanced Logger initialized
2025-09-19T10:17:25: 📁 Loaded statistics from file
2025-09-19T10:17:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:25: 🧹 Removed stale process lock
2025-09-19T10:17:25: 🔒 Process lock acquired (PID: 13804)
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13804
}
2025-09-19T10:17:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257245842, processId: 13804 },
  timestamp: 1758257245961
}
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257245842, willExpireAt: 1758257485842 },
  timestamp: 1758257245961
}
2025-09-19T10:17:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:25: 📋 Message rules loaded: 8 types
2025-09-19T10:17:25: ℹ️ [10:17:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:27: [INFO] WhatsApp client initialized
2025-09-19T10:17:28: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:28: 📝 Loaded 12 template types
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257248688,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13772,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:28: ⏰ 4-minute startup delay active
2025-09-19T10:17:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:28: [INFO] Using PQueue for job processing
2025-09-19T10:17:28: [INFO] Memory management setup completed
2025-09-19T10:17:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:28: [INFO] Checking process locks...
2025-09-19T10:17:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:28: [INFO] Process locks acquired successfully
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:28: [INFO] Logs directory created
2025-09-19T10:17:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:28: [10:17:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:28: [10:17:28 am] ✅ Google Sheets API initialized
2025-09-19T10:17:28: [INFO] Google Sheets helper initialized
2025-09-19T10:17:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:28: 🗑️ Deleted old log file: bot-2025-09-19T04-46-56-843Z.log
2025-09-19T10:17:28: 📝 Enhanced Logger initialized
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:28: 📁 Loaded statistics from file
2025-09-19T10:17:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:28: 🧹 Removed stale process lock
2025-09-19T10:17:28: 🔒 Process lock acquired (PID: 13772)
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13772
}
2025-09-19T10:17:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257248688, willExpireAt: 1758257488688 },
  timestamp: 1758257248788
}
2025-09-19T10:17:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:28: 📋 Message rules loaded: 8 types
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257248688, processId: 13772 },
  timestamp: 1758257248788
}
2025-09-19T10:17:28: ℹ️ [10:17:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 101,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:29: [INFO] WhatsApp client initialized
2025-09-19T10:17:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:31: 📝 Loaded 12 template types
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257251764,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13588,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:31: ⏰ 4-minute startup delay active
2025-09-19T10:17:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:31: [INFO] Using PQueue for job processing
2025-09-19T10:17:31: [INFO] Memory management setup completed
2025-09-19T10:17:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:31: [INFO] Checking process locks...
2025-09-19T10:17:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:31: [INFO] Process locks acquired successfully
2025-09-19T10:17:31: [INFO] Logs directory created
2025-09-19T10:17:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:31: [10:17:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:31: [10:17:31 am] ✅ Google Sheets API initialized
2025-09-19T10:17:31: [INFO] Google Sheets helper initialized
2025-09-19T10:17:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:31: 🗑️ Deleted old log file: bot-2025-09-19T04-46-59-924Z.log
2025-09-19T10:17:31: 📝 Enhanced Logger initialized
2025-09-19T10:17:31: 📁 Loaded statistics from file
2025-09-19T10:17:31: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:31: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:31: 🧹 Removed stale process lock
2025-09-19T10:17:31: 🔒 Process lock acquired (PID: 13588)
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13588
}
2025-09-19T10:17:31: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:31: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257251764, willExpireAt: 1758257491764 },
  timestamp: 1758257251887
}
2025-09-19T10:17:31: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:31: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:31: 📋 Message rules loaded: 8 types
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257251764, processId: 13588 },
  timestamp: 1758257251887
}
2025-09-19T10:17:31: ℹ️ [10:17:31 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:32: [INFO] WhatsApp client initialized
2025-09-19T10:17:34: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:34: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:34: 📝 Loaded 12 template types
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257254458,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13244,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:34: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:34: ⏰ 4-minute startup delay active
2025-09-19T10:17:34: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:34: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:34: [INFO] Using PQueue for job processing
2025-09-19T10:17:34: [INFO] Memory management setup completed
2025-09-19T10:17:34: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:34: [INFO] Checking process locks...
2025-09-19T10:17:34: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:34: [INFO] Process locks acquired successfully
2025-09-19T10:17:34: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:34: [INFO] Logs directory created
2025-09-19T10:17:34: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:34: [10:17:34 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:34: [10:17:34 am] ✅ Google Sheets API initialized
2025-09-19T10:17:34: [INFO] Google Sheets helper initialized
2025-09-19T10:17:34: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:34: 🗑️ Deleted old log file: bot-2025-09-19T04-47-02-751Z.log
2025-09-19T10:17:34: 📝 Enhanced Logger initialized
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:34: 📁 Loaded statistics from file
2025-09-19T10:17:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:34: 🧹 Removed stale process lock
2025-09-19T10:17:34: 🔒 Process lock acquired (PID: 13244)
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13244
}
2025-09-19T10:17:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257254458, processId: 13244 },
  timestamp: 1758257254572
}
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257254458, willExpireAt: 1758257494458 },
  timestamp: 1758257254572
}
2025-09-19T10:17:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:34: 📋 Message rules loaded: 8 types
2025-09-19T10:17:34: ℹ️ [10:17:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:35: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:35: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:35: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:35: [INFO] WhatsApp client initialized
2025-09-19T10:17:37: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:37: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:37: 📝 Loaded 12 template types
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257257272,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2840,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:37: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:37: ⏰ 4-minute startup delay active
2025-09-19T10:17:37: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:37: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:37: [INFO] Using PQueue for job processing
2025-09-19T10:17:37: [INFO] Memory management setup completed
2025-09-19T10:17:37: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:37: [INFO] Checking process locks...
2025-09-19T10:17:37: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:37: [INFO] Process locks acquired successfully
2025-09-19T10:17:37: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:37: [INFO] Logs directory created
2025-09-19T10:17:37: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:37: [10:17:37 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:37: [10:17:37 am] ✅ Google Sheets API initialized
2025-09-19T10:17:37: [INFO] Google Sheets helper initialized
2025-09-19T10:17:37: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:37: 🗑️ Deleted old log file: bot-2025-09-19T04-47-06-000Z.log
2025-09-19T10:17:37: 📝 Enhanced Logger initialized
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:37: 📁 Loaded statistics from file
2025-09-19T10:17:37: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:37: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:37: 🧹 Removed stale process lock
2025-09-19T10:17:37: 🔒 Process lock acquired (PID: 2840)
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2840
}
2025-09-19T10:17:37: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:37: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257257272, willExpireAt: 1758257497272 },
  timestamp: 1758257257377
}
2025-09-19T10:17:37: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:37: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:37: 📋 Message rules loaded: 8 types
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257257272, processId: 2840 },
  timestamp: 1758257257376
}
2025-09-19T10:17:37: ℹ️ [10:17:37 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:38: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:38: [INFO] WhatsApp client initialized
2025-09-19T10:17:40: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:40: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:40: 📝 Loaded 12 template types
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257260480,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4696,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:40: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:40: ⏰ 4-minute startup delay active
2025-09-19T10:17:40: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:40: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:40: [INFO] Using PQueue for job processing
2025-09-19T10:17:40: [INFO] Memory management setup completed
2025-09-19T10:17:40: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:40: [INFO] Checking process locks...
2025-09-19T10:17:40: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:40: [INFO] Process locks acquired successfully
2025-09-19T10:17:40: [INFO] Logs directory created
2025-09-19T10:17:40: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:40: [10:17:40 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:40: [10:17:40 am] ✅ Google Sheets API initialized
2025-09-19T10:17:40: [INFO] Google Sheets helper initialized
2025-09-19T10:17:40: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:40: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:40: 🗑️ Deleted old log file: bot-2025-09-19T04-47-08-925Z.log
2025-09-19T10:17:40: 📝 Enhanced Logger initialized
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:40: 📁 Loaded statistics from file
2025-09-19T10:17:40: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:40: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:40: 🧹 Removed stale process lock
2025-09-19T10:17:40: 🔒 Process lock acquired (PID: 4696)
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4696
}
2025-09-19T10:17:40: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:40: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257260480, processId: 4696 },
  timestamp: 1758257260573
}
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257260480, willExpireAt: 1758257500480 },
  timestamp: 1758257260573
}
2025-09-19T10:17:40: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:40: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:40: 📋 Message rules loaded: 8 types
2025-09-19T10:17:40: ℹ️ [10:17:40 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 95,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:41: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:41: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:41: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:41: [INFO] WhatsApp client initialized
2025-09-19T10:17:43: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:43: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:43: 📝 Loaded 12 template types
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257263357,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10428,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:43: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:43: ⏰ 4-minute startup delay active
2025-09-19T10:17:43: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:43: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:43: [INFO] Using PQueue for job processing
2025-09-19T10:17:43: [INFO] Memory management setup completed
2025-09-19T10:17:43: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:43: [INFO] Checking process locks...
2025-09-19T10:17:43: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:43: [INFO] Process locks acquired successfully
2025-09-19T10:17:43: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:43: [INFO] Logs directory created
2025-09-19T10:17:43: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:43: [10:17:43 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:43: [10:17:43 am] ✅ Google Sheets API initialized
2025-09-19T10:17:43: [INFO] Google Sheets helper initialized
2025-09-19T10:17:43: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:43: 🗑️ Deleted old log file: bot-2025-09-19T04-47-11-747Z.log
2025-09-19T10:17:43: 📝 Enhanced Logger initialized
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:43: 📁 Loaded statistics from file
2025-09-19T10:17:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:43: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:43: 🧹 Removed stale process lock
2025-09-19T10:17:43: 🔒 Process lock acquired (PID: 10428)
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10428
}
2025-09-19T10:17:43: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:43: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257263357, processId: 10428 },
  timestamp: 1758257263457
}
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257263357, willExpireAt: 1758257503357 },
  timestamp: 1758257263458
}
2025-09-19T10:17:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:43: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:43: 📋 Message rules loaded: 8 types
2025-09-19T10:17:43: ℹ️ [10:17:43 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:44: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:44: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:44: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:44: [INFO] WhatsApp client initialized
2025-09-19T10:17:46: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:46: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:46: 📝 Loaded 12 template types
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257266079,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9516,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:46: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:46: ⏰ 4-minute startup delay active
2025-09-19T10:17:46: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:46: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:46: [INFO] Using PQueue for job processing
2025-09-19T10:17:46: [INFO] Memory management setup completed
2025-09-19T10:17:46: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:46: [INFO] Checking process locks...
2025-09-19T10:17:46: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:46: [INFO] Process locks acquired successfully
2025-09-19T10:17:46: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:46: [INFO] Logs directory created
2025-09-19T10:17:46: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:46: [10:17:46 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:46: [10:17:46 am] ✅ Google Sheets API initialized
2025-09-19T10:17:46: [INFO] Google Sheets helper initialized
2025-09-19T10:17:46: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:46: 🗑️ Deleted old log file: bot-2025-09-19T04-47-14-484Z.log
2025-09-19T10:17:46: 📝 Enhanced Logger initialized
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:46: 📁 Loaded statistics from file
2025-09-19T10:17:46: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:46: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:46: 🧹 Removed stale process lock
2025-09-19T10:17:46: 🔒 Process lock acquired (PID: 9516)
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9516
}
2025-09-19T10:17:46: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:46: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257266079, processId: 9516 },
  timestamp: 1758257266176
}
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257266079, willExpireAt: 1758257506079 },
  timestamp: 1758257266176
}
2025-09-19T10:17:46: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:46: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:46: 📋 Message rules loaded: 8 types
2025-09-19T10:17:46: ℹ️ [10:17:46 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 99,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:47: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:47: [INFO] WhatsApp client initialized
2025-09-19T10:17:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:48: 📝 Loaded 12 template types
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257268719,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7288,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:48: ⏰ 4-minute startup delay active
2025-09-19T10:17:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:48: [INFO] Using PQueue for job processing
2025-09-19T10:17:48: [INFO] Memory management setup completed
2025-09-19T10:17:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:48: [INFO] Checking process locks...
2025-09-19T10:17:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:48: [INFO] Process locks acquired successfully
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:48: [INFO] Logs directory created
2025-09-19T10:17:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:48: [10:17:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:48: [10:17:48 am] ✅ Google Sheets API initialized
2025-09-19T10:17:48: [INFO] Google Sheets helper initialized
2025-09-19T10:17:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:48: 🗑️ Deleted old log file: bot-2025-09-19T04-47-17-209Z.log
2025-09-19T10:17:48: 📝 Enhanced Logger initialized
2025-09-19T10:17:48: 📁 Loaded statistics from file
2025-09-19T10:17:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:48: 🧹 Removed stale process lock
2025-09-19T10:17:48: 🔒 Process lock acquired (PID: 7288)
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7288
}
2025-09-19T10:17:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257268719, processId: 7288 },
  timestamp: 1758257268827
}
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257268719, willExpireAt: 1758257508719 },
  timestamp: 1758257268828
}
2025-09-19T10:17:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:48: 📋 Message rules loaded: 8 types
2025-09-19T10:17:48: ℹ️ [10:17:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 110,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:49: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:49: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:49: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:49: [INFO] WhatsApp client initialized
2025-09-19T10:17:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:51: 📝 Loaded 12 template types
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257271623,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11312,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:51: ⏰ 4-minute startup delay active
2025-09-19T10:17:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:51: [INFO] Using PQueue for job processing
2025-09-19T10:17:51: [INFO] Memory management setup completed
2025-09-19T10:17:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:51: [INFO] Checking process locks...
2025-09-19T10:17:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:51: [INFO] Process locks acquired successfully
2025-09-19T10:17:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:51: [INFO] Logs directory created
2025-09-19T10:17:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:51: [10:17:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:51: [10:17:51 am] ✅ Google Sheets API initialized
2025-09-19T10:17:51: [INFO] Google Sheets helper initialized
2025-09-19T10:17:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:51: 🗑️ Deleted old log file: bot-2025-09-19T04-47-20-010Z.log
2025-09-19T10:17:51: 📝 Enhanced Logger initialized
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:51: 📁 Loaded statistics from file
2025-09-19T10:17:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:51: 🧹 Removed stale process lock
2025-09-19T10:17:51: 🔒 Process lock acquired (PID: 11312)
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11312
}
2025-09-19T10:17:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257271623, willExpireAt: 1758257511623 },
  timestamp: 1758257271730
}
2025-09-19T10:17:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:51: 📋 Message rules loaded: 8 types
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257271623, processId: 11312 },
  timestamp: 1758257271729
}
2025-09-19T10:17:51: ℹ️ [10:17:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 109,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:52: [INFO] WhatsApp client initialized
2025-09-19T10:17:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:54: 📝 Loaded 12 template types
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257274288,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9676,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:54: ⏰ 4-minute startup delay active
2025-09-19T10:17:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:54: [INFO] Using PQueue for job processing
2025-09-19T10:17:54: [INFO] Memory management setup completed
2025-09-19T10:17:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:54: [INFO] Checking process locks...
2025-09-19T10:17:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:54: [INFO] Process locks acquired successfully
2025-09-19T10:17:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:54: [INFO] Logs directory created
2025-09-19T10:17:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:54: [10:17:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:54: [10:17:54 am] ✅ Google Sheets API initialized
2025-09-19T10:17:54: [INFO] Google Sheets helper initialized
2025-09-19T10:17:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:54: 🗑️ Deleted old log file: bot-2025-09-19T04-47-22-754Z.log
2025-09-19T10:17:54: 📝 Enhanced Logger initialized
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:54: 📁 Loaded statistics from file
2025-09-19T10:17:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:54: 🧹 Removed stale process lock
2025-09-19T10:17:54: 🔒 Process lock acquired (PID: 9676)
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9676
}
2025-09-19T10:17:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257274288, processId: 9676 },
  timestamp: 1758257274386
}
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257274288, willExpireAt: 1758257514288 },
  timestamp: 1758257274386
}
2025-09-19T10:17:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:54: 📋 Message rules loaded: 8 types
2025-09-19T10:17:54: ℹ️ [10:17:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 100,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:55: [INFO] WhatsApp client initialized
2025-09-19T10:17:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:17:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:17:57: 📝 Loaded 12 template types
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257277499,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2916,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:17:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:17:57: ⏰ 4-minute startup delay active
2025-09-19T10:17:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:17:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:17:57: [INFO] Using PQueue for job processing
2025-09-19T10:17:57: [INFO] Memory management setup completed
2025-09-19T10:17:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:17:57: [INFO] Checking process locks...
2025-09-19T10:17:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:17:57: [INFO] Process locks acquired successfully
2025-09-19T10:17:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:17:57: [INFO] Logs directory created
2025-09-19T10:17:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:17:57: [10:17:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:17:57: [10:17:57 am] ✅ Google Sheets API initialized
2025-09-19T10:17:57: [INFO] Google Sheets helper initialized
2025-09-19T10:17:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:17:57: 🗑️ Deleted old log file: bot-2025-09-19T04-47-25-875Z.log
2025-09-19T10:17:57: 📝 Enhanced Logger initialized
2025-09-19T10:17:57: 📁 Loaded statistics from file
2025-09-19T10:17:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:17:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:17:57: 🧹 Removed stale process lock
2025-09-19T10:17:57: 🔒 Process lock acquired (PID: 2916)
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2916
}
2025-09-19T10:17:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:17:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257277499, willExpireAt: 1758257517499 },
  timestamp: 1758257277614
}
2025-09-19T10:17:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:17:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:17:57: 📋 Message rules loaded: 8 types
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257277499, processId: 2916 },
  timestamp: 1758257277614
}
2025-09-19T10:17:57: ℹ️ [10:17:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:17:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:17:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:17:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:17:58: [INFO] WhatsApp client initialized
2025-09-19T10:18:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:00: 📝 Loaded 12 template types
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257280325,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18252,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:00: ⏰ 4-minute startup delay active
2025-09-19T10:18:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:00: [INFO] Using PQueue for job processing
2025-09-19T10:18:00: [INFO] Memory management setup completed
2025-09-19T10:18:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:00: [INFO] Checking process locks...
2025-09-19T10:18:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:00: [INFO] Process locks acquired successfully
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:00: [INFO] Logs directory created
2025-09-19T10:18:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:00: [10:18:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:00: [10:18:00 am] ✅ Google Sheets API initialized
2025-09-19T10:18:00: [INFO] Google Sheets helper initialized
2025-09-19T10:18:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:00: 🗑️ Deleted old log file: bot-2025-09-19T04-47-28-718Z.log
2025-09-19T10:18:00: 📝 Enhanced Logger initialized
2025-09-19T10:18:00: 📁 Loaded statistics from file
2025-09-19T10:18:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:00: 🧹 Removed stale process lock
2025-09-19T10:18:00: 🔒 Process lock acquired (PID: 18252)
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18252
}
2025-09-19T10:18:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257280325, processId: 18252 },
  timestamp: 1758257280439
}
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257280325, willExpireAt: 1758257520325 },
  timestamp: 1758257280440
}
2025-09-19T10:18:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:00: 📋 Message rules loaded: 8 types
2025-09-19T10:18:00: ℹ️ [10:18:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:01: [INFO] WhatsApp client initialized
2025-09-19T10:18:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:02: 📝 Loaded 12 template types
2025-09-19T10:18:03: ℹ️ [10:18:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257282996,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11616,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:03: ⏰ 4-minute startup delay active
2025-09-19T10:18:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:03: [INFO] Using PQueue for job processing
2025-09-19T10:18:03: [INFO] Memory management setup completed
2025-09-19T10:18:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:03: [INFO] Checking process locks...
2025-09-19T10:18:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:03: ℹ️ [10:18:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:03: [INFO] Process locks acquired successfully
2025-09-19T10:18:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:03: [INFO] Logs directory created
2025-09-19T10:18:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:03: [10:18:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:03: [10:18:03 am] ✅ Google Sheets API initialized
2025-09-19T10:18:03: [INFO] Google Sheets helper initialized
2025-09-19T10:18:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:03: 🗑️ Deleted old log file: bot-2025-09-19T04-47-31-800Z.log
2025-09-19T10:18:03: 📝 Enhanced Logger initialized
2025-09-19T10:18:03: 📁 Loaded statistics from file
2025-09-19T10:18:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:03: ℹ️ [10:18:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:03: 🧹 Removed stale process lock
2025-09-19T10:18:03: 🔒 Process lock acquired (PID: 11616)
2025-09-19T10:18:03: ℹ️ [10:18:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11616
}
2025-09-19T10:18:03: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:03: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:03: ℹ️ [10:18:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257282996, processId: 11616 },
  timestamp: 1758257283095
}
2025-09-19T10:18:03: ℹ️ [10:18:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257282996, willExpireAt: 1758257522996 },
  timestamp: 1758257283095
}
2025-09-19T10:18:03: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:03: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:03: 📋 Message rules loaded: 8 types
2025-09-19T10:18:03: ℹ️ [10:18:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 101,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:04: [INFO] WhatsApp client initialized
2025-09-19T10:18:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:05: 📝 Loaded 12 template types
2025-09-19T10:18:05: ℹ️ [10:18:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257285955,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18140,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:05: ⏰ 4-minute startup delay active
2025-09-19T10:18:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:05: [INFO] Using PQueue for job processing
2025-09-19T10:18:05: [INFO] Memory management setup completed
2025-09-19T10:18:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:05: [INFO] Checking process locks...
2025-09-19T10:18:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:05: ℹ️ [10:18:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:05: [INFO] Process locks acquired successfully
2025-09-19T10:18:05: [INFO] Logs directory created
2025-09-19T10:18:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:05: [10:18:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:05: [10:18:05 am] ✅ Google Sheets API initialized
2025-09-19T10:18:05: [INFO] Google Sheets helper initialized
2025-09-19T10:18:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:06: 🗑️ Deleted old log file: bot-2025-09-19T04-47-34-491Z.log
2025-09-19T10:18:06: 📝 Enhanced Logger initialized
2025-09-19T10:18:06: ℹ️ [10:18:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:06: 📁 Loaded statistics from file
2025-09-19T10:18:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:06: 🧹 Removed stale process lock
2025-09-19T10:18:06: 🔒 Process lock acquired (PID: 18140)
2025-09-19T10:18:06: ℹ️ [10:18:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18140
}
2025-09-19T10:18:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:06: ℹ️ [10:18:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257285955, processId: 18140 },
  timestamp: 1758257286098
}
2025-09-19T10:18:06: ℹ️ [10:18:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257285955, willExpireAt: 1758257525955 },
  timestamp: 1758257286099
}
2025-09-19T10:18:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:06: 📋 Message rules loaded: 8 types
2025-09-19T10:18:06: ℹ️ [10:18:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:07: [INFO] WhatsApp client initialized
2025-09-19T10:18:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:08: 📝 Loaded 12 template types
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257288782,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5236,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:08: ⏰ 4-minute startup delay active
2025-09-19T10:18:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:08: [INFO] Using PQueue for job processing
2025-09-19T10:18:08: [INFO] Memory management setup completed
2025-09-19T10:18:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:08: [INFO] Checking process locks...
2025-09-19T10:18:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:08: [INFO] Process locks acquired successfully
2025-09-19T10:18:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:08: [INFO] Logs directory created
2025-09-19T10:18:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:08: [10:18:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:08: [10:18:08 am] ✅ Google Sheets API initialized
2025-09-19T10:18:08: [INFO] Google Sheets helper initialized
2025-09-19T10:18:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:08: 🗑️ Deleted old log file: bot-2025-09-19T04-47-37-299Z.log
2025-09-19T10:18:08: 📝 Enhanced Logger initialized
2025-09-19T10:18:08: 📁 Loaded statistics from file
2025-09-19T10:18:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:08: 🧹 Removed stale process lock
2025-09-19T10:18:08: 🔒 Process lock acquired (PID: 5236)
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5236
}
2025-09-19T10:18:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257288782, processId: 5236 },
  timestamp: 1758257288879
}
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257288782, willExpireAt: 1758257528782 },
  timestamp: 1758257288879
}
2025-09-19T10:18:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:08: 📋 Message rules loaded: 8 types
2025-09-19T10:18:08: ℹ️ [10:18:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:09: [INFO] WhatsApp client initialized
2025-09-19T10:18:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:11: 📝 Loaded 12 template types
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257291544,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4512,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:11: ⏰ 4-minute startup delay active
2025-09-19T10:18:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:11: [INFO] Using PQueue for job processing
2025-09-19T10:18:11: [INFO] Memory management setup completed
2025-09-19T10:18:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:11: [INFO] Checking process locks...
2025-09-19T10:18:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:11: [INFO] Process locks acquired successfully
2025-09-19T10:18:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:11: [INFO] Logs directory created
2025-09-19T10:18:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:11: [10:18:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:11: [10:18:11 am] ✅ Google Sheets API initialized
2025-09-19T10:18:11: [INFO] Google Sheets helper initialized
2025-09-19T10:18:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:11: 🗑️ Deleted old log file: bot-2025-09-19T04-47-40-502Z.log
2025-09-19T10:18:11: 📝 Enhanced Logger initialized
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:11: 📁 Loaded statistics from file
2025-09-19T10:18:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:11: 🧹 Removed stale process lock
2025-09-19T10:18:11: 🔒 Process lock acquired (PID: 4512)
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4512
}
2025-09-19T10:18:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257291544, processId: 4512 },
  timestamp: 1758257291664
}
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257291544, willExpireAt: 1758257531544 },
  timestamp: 1758257291664
}
2025-09-19T10:18:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:11: 📋 Message rules loaded: 8 types
2025-09-19T10:18:11: ℹ️ [10:18:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:12: [INFO] WhatsApp client initialized
2025-09-19T10:18:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:14: 📝 Loaded 12 template types
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257294289,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3844,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:14: ⏰ 4-minute startup delay active
2025-09-19T10:18:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:14: [INFO] Using PQueue for job processing
2025-09-19T10:18:14: [INFO] Memory management setup completed
2025-09-19T10:18:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:14: [INFO] Checking process locks...
2025-09-19T10:18:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:14: [INFO] Process locks acquired successfully
2025-09-19T10:18:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:14: [INFO] Logs directory created
2025-09-19T10:18:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:14: [10:18:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:14: [10:18:14 am] ✅ Google Sheets API initialized
2025-09-19T10:18:14: [INFO] Google Sheets helper initialized
2025-09-19T10:18:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:14: 🗑️ Deleted old log file: bot-2025-09-19T04-47-43-385Z.log
2025-09-19T10:18:14: 📝 Enhanced Logger initialized
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:14: 📁 Loaded statistics from file
2025-09-19T10:18:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:14: 🧹 Removed stale process lock
2025-09-19T10:18:14: 🔒 Process lock acquired (PID: 3844)
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3844
}
2025-09-19T10:18:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257294289, willExpireAt: 1758257534289 },
  timestamp: 1758257294407
}
2025-09-19T10:18:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:14: 📋 Message rules loaded: 8 types
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257294289, processId: 3844 },
  timestamp: 1758257294407
}
2025-09-19T10:18:14: ℹ️ [10:18:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:15: [INFO] WhatsApp client initialized
2025-09-19T10:18:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:17: 📝 Loaded 12 template types
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257297015,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16796,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:17: ⏰ 4-minute startup delay active
2025-09-19T10:18:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:17: [INFO] Using PQueue for job processing
2025-09-19T10:18:17: [INFO] Memory management setup completed
2025-09-19T10:18:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:17: [INFO] Checking process locks...
2025-09-19T10:18:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:17: [INFO] Process locks acquired successfully
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:17: [INFO] Logs directory created
2025-09-19T10:18:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:17: [10:18:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:17: [10:18:17 am] ✅ Google Sheets API initialized
2025-09-19T10:18:17: [INFO] Google Sheets helper initialized
2025-09-19T10:18:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:17: 🗑️ Deleted old log file: bot-2025-09-19T04-47-46-105Z.log
2025-09-19T10:18:17: 📝 Enhanced Logger initialized
2025-09-19T10:18:17: 📁 Loaded statistics from file
2025-09-19T10:18:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:17: 🧹 Removed stale process lock
2025-09-19T10:18:17: 🔒 Process lock acquired (PID: 16796)
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16796
}
2025-09-19T10:18:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257297015, willExpireAt: 1758257537015 },
  timestamp: 1758257297134
}
2025-09-19T10:18:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:17: 📋 Message rules loaded: 8 types
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257297015, processId: 16796 },
  timestamp: 1758257297134
}
2025-09-19T10:18:17: ℹ️ [10:18:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:18: [INFO] WhatsApp client initialized
2025-09-19T10:18:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:19: 📝 Loaded 12 template types
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257299768,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2080,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:19: ⏰ 4-minute startup delay active
2025-09-19T10:18:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:19: [INFO] Using PQueue for job processing
2025-09-19T10:18:19: [INFO] Memory management setup completed
2025-09-19T10:18:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:19: [INFO] Checking process locks...
2025-09-19T10:18:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:19: [INFO] Process locks acquired successfully
2025-09-19T10:18:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:19: [INFO] Logs directory created
2025-09-19T10:18:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:19: [10:18:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:19: [10:18:19 am] ✅ Google Sheets API initialized
2025-09-19T10:18:19: [INFO] Google Sheets helper initialized
2025-09-19T10:18:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:19: 🗑️ Deleted old log file: bot-2025-09-19T04-47-48-750Z.log
2025-09-19T10:18:19: 📝 Enhanced Logger initialized
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:19: 📁 Loaded statistics from file
2025-09-19T10:18:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:19: 🧹 Removed stale process lock
2025-09-19T10:18:19: 🔒 Process lock acquired (PID: 2080)
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2080
}
2025-09-19T10:18:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257299768, processId: 2080 },
  timestamp: 1758257299874
}
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257299768, willExpireAt: 1758257539768 },
  timestamp: 1758257299874
}
2025-09-19T10:18:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:19: 📋 Message rules loaded: 8 types
2025-09-19T10:18:19: ℹ️ [10:18:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 108,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:20: [INFO] WhatsApp client initialized
2025-09-19T10:18:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:22: 📝 Loaded 12 template types
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257302576,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17276,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:22: ⏰ 4-minute startup delay active
2025-09-19T10:18:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:22: [INFO] Using PQueue for job processing
2025-09-19T10:18:22: [INFO] Memory management setup completed
2025-09-19T10:18:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:22: [INFO] Checking process locks...
2025-09-19T10:18:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:22: [INFO] Process locks acquired successfully
2025-09-19T10:18:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:22: [INFO] Logs directory created
2025-09-19T10:18:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:22: [10:18:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:22: [10:18:22 am] ✅ Google Sheets API initialized
2025-09-19T10:18:22: [INFO] Google Sheets helper initialized
2025-09-19T10:18:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:22: 🗑️ Deleted old log file: bot-2025-09-19T04-47-51-651Z.log
2025-09-19T10:18:22: 📝 Enhanced Logger initialized
2025-09-19T10:18:22: 📁 Loaded statistics from file
2025-09-19T10:18:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:22: 🧹 Removed stale process lock
2025-09-19T10:18:22: 🔒 Process lock acquired (PID: 17276)
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17276
}
2025-09-19T10:18:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257302576, processId: 17276 },
  timestamp: 1758257302685
}
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257302576, willExpireAt: 1758257542576 },
  timestamp: 1758257302685
}
2025-09-19T10:18:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:22: 📋 Message rules loaded: 8 types
2025-09-19T10:18:22: ℹ️ [10:18:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:23: [INFO] WhatsApp client initialized
2025-09-19T10:18:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:25: 📝 Loaded 12 template types
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257305256,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12432,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:25: ⏰ 4-minute startup delay active
2025-09-19T10:18:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:25: [INFO] Using PQueue for job processing
2025-09-19T10:18:25: [INFO] Memory management setup completed
2025-09-19T10:18:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:25: [INFO] Checking process locks...
2025-09-19T10:18:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:25: [INFO] Process locks acquired successfully
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:25: [INFO] Logs directory created
2025-09-19T10:18:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:25: [10:18:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:25: [10:18:25 am] ✅ Google Sheets API initialized
2025-09-19T10:18:25: [INFO] Google Sheets helper initialized
2025-09-19T10:18:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:25: 🗑️ Deleted old log file: bot-2025-09-19T04-47-54-313Z.log
2025-09-19T10:18:25: 📝 Enhanced Logger initialized
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:25: 📁 Loaded statistics from file
2025-09-19T10:18:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:25: 🧹 Removed stale process lock
2025-09-19T10:18:25: 🔒 Process lock acquired (PID: 12432)
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12432
}
2025-09-19T10:18:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257305256, processId: 12432 },
  timestamp: 1758257305369
}
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257305256, willExpireAt: 1758257545256 },
  timestamp: 1758257305369
}
2025-09-19T10:18:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:25: 📋 Message rules loaded: 8 types
2025-09-19T10:18:25: ℹ️ [10:18:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:26: [INFO] WhatsApp client initialized
2025-09-19T10:18:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:27: 📝 Loaded 12 template types
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257307864,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5108,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:27: ⏰ 4-minute startup delay active
2025-09-19T10:18:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:27: [INFO] Using PQueue for job processing
2025-09-19T10:18:27: [INFO] Memory management setup completed
2025-09-19T10:18:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:27: [INFO] Checking process locks...
2025-09-19T10:18:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:27: [INFO] Process locks acquired successfully
2025-09-19T10:18:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:27: [INFO] Logs directory created
2025-09-19T10:18:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:27: [10:18:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:27: [10:18:27 am] ✅ Google Sheets API initialized
2025-09-19T10:18:27: [INFO] Google Sheets helper initialized
2025-09-19T10:18:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:27: 🗑️ Deleted old log file: bot-2025-09-19T04-47-57-530Z.log
2025-09-19T10:18:27: 📝 Enhanced Logger initialized
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:27: 📁 Loaded statistics from file
2025-09-19T10:18:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:27: 🧹 Removed stale process lock
2025-09-19T10:18:27: 🔒 Process lock acquired (PID: 5108)
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5108
}
2025-09-19T10:18:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257307864, processId: 5108 },
  timestamp: 1758257307964
}
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257307864, willExpireAt: 1758257547864 },
  timestamp: 1758257307964
}
2025-09-19T10:18:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:27: 📋 Message rules loaded: 8 types
2025-09-19T10:18:27: ℹ️ [10:18:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:28: [INFO] WhatsApp client initialized
2025-09-19T10:18:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:30: 📝 Loaded 12 template types
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257310586,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5684,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:30: ⏰ 4-minute startup delay active
2025-09-19T10:18:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:30: [INFO] Using PQueue for job processing
2025-09-19T10:18:30: [INFO] Memory management setup completed
2025-09-19T10:18:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:30: [INFO] Checking process locks...
2025-09-19T10:18:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:30: [INFO] Process locks acquired successfully
2025-09-19T10:18:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:30: [INFO] Logs directory created
2025-09-19T10:18:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:30: [10:18:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:30: [10:18:30 am] ✅ Google Sheets API initialized
2025-09-19T10:18:30: [INFO] Google Sheets helper initialized
2025-09-19T10:18:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:30: 🗑️ Deleted old log file: bot-2025-09-19T04-48-00-357Z.log
2025-09-19T10:18:30: 📝 Enhanced Logger initialized
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:30: 📁 Loaded statistics from file
2025-09-19T10:18:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:30: 🧹 Removed stale process lock
2025-09-19T10:18:30: 🔒 Process lock acquired (PID: 5684)
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5684
}
2025-09-19T10:18:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257310586, willExpireAt: 1758257550586 },
  timestamp: 1758257310691
}
2025-09-19T10:18:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:30: 📋 Message rules loaded: 8 types
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257310586, processId: 5684 },
  timestamp: 1758257310691
}
2025-09-19T10:18:30: ℹ️ [10:18:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 107,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:31: [INFO] WhatsApp client initialized
2025-09-19T10:18:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:33: 📝 Loaded 12 template types
2025-09-19T10:18:33: ℹ️ [10:18:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257313944,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9060,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:33: ⏰ 4-minute startup delay active
2025-09-19T10:18:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:33: [INFO] Using PQueue for job processing
2025-09-19T10:18:33: [INFO] Memory management setup completed
2025-09-19T10:18:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:33: [INFO] Checking process locks...
2025-09-19T10:18:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:33: ℹ️ [10:18:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:33: [INFO] Process locks acquired successfully
2025-09-19T10:18:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:33: [INFO] Logs directory created
2025-09-19T10:18:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:33: [10:18:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:33: [10:18:33 am] ✅ Google Sheets API initialized
2025-09-19T10:18:33: [INFO] Google Sheets helper initialized
2025-09-19T10:18:33: 🗑️ Deleted old log file: bot-2025-09-19T04-48-03-021Z.log
2025-09-19T10:18:33: 📝 Enhanced Logger initialized
2025-09-19T10:18:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:33: ℹ️ [10:18:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:34: 📁 Loaded statistics from file
2025-09-19T10:18:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:34: 🧹 Removed stale process lock
2025-09-19T10:18:34: 🔒 Process lock acquired (PID: 9060)
2025-09-19T10:18:34: ℹ️ [10:18:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9060
}
2025-09-19T10:18:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:34: ℹ️ [10:18:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257313944, processId: 9060 },
  timestamp: 1758257314065
}
2025-09-19T10:18:34: ℹ️ [10:18:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257313944, willExpireAt: 1758257553944 },
  timestamp: 1758257314066
}
2025-09-19T10:18:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:34: 📋 Message rules loaded: 8 types
2025-09-19T10:18:34: ℹ️ [10:18:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:35: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:35: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:35: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:35: [INFO] WhatsApp client initialized
2025-09-19T10:18:37: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:37: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:37: 📝 Loaded 12 template types
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257317136,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10204,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:37: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:37: ⏰ 4-minute startup delay active
2025-09-19T10:18:37: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:37: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:37: [INFO] Using PQueue for job processing
2025-09-19T10:18:37: [INFO] Memory management setup completed
2025-09-19T10:18:37: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:37: [INFO] Checking process locks...
2025-09-19T10:18:37: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:37: [INFO] Process locks acquired successfully
2025-09-19T10:18:37: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:37: [INFO] Logs directory created
2025-09-19T10:18:37: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:37: [10:18:37 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:37: [10:18:37 am] ✅ Google Sheets API initialized
2025-09-19T10:18:37: [INFO] Google Sheets helper initialized
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:37: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:37: 🗑️ Deleted old log file: bot-2025-09-19T04-48-05-988Z.log
2025-09-19T10:18:37: 📝 Enhanced Logger initialized
2025-09-19T10:18:37: 📁 Loaded statistics from file
2025-09-19T10:18:37: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:37: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:37: 🧹 Removed stale process lock
2025-09-19T10:18:37: 🔒 Process lock acquired (PID: 10204)
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10204
}
2025-09-19T10:18:37: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:37: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257317136, processId: 10204 },
  timestamp: 1758257317340
}
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257317136, willExpireAt: 1758257557136 },
  timestamp: 1758257317340
}
2025-09-19T10:18:37: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:37: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:37: 📋 Message rules loaded: 8 types
2025-09-19T10:18:37: ℹ️ [10:18:37 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 208,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:38: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:38: [INFO] WhatsApp client initialized
2025-09-19T10:18:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:41: 📝 Loaded 12 template types
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257321369,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2140,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:41: ⏰ 4-minute startup delay active
2025-09-19T10:18:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:41: [INFO] Using PQueue for job processing
2025-09-19T10:18:41: [INFO] Memory management setup completed
2025-09-19T10:18:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:41: [INFO] Checking process locks...
2025-09-19T10:18:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:41: [INFO] Process locks acquired successfully
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:41: [INFO] Logs directory created
2025-09-19T10:18:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:41: [10:18:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:41: [10:18:41 am] ✅ Google Sheets API initialized
2025-09-19T10:18:41: [INFO] Google Sheets helper initialized
2025-09-19T10:18:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:41: 🗑️ Deleted old log file: bot-2025-09-19T04-48-08-808Z.log
2025-09-19T10:18:41: 📝 Enhanced Logger initialized
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:41: 📁 Loaded statistics from file
2025-09-19T10:18:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:41: 🧹 Removed stale process lock
2025-09-19T10:18:41: 🔒 Process lock acquired (PID: 2140)
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2140
}
2025-09-19T10:18:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257321369, willExpireAt: 1758257561369 },
  timestamp: 1758257321484
}
2025-09-19T10:18:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:41: 📋 Message rules loaded: 8 types
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257321369, processId: 2140 },
  timestamp: 1758257321484
}
2025-09-19T10:18:41: ℹ️ [10:18:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:42: [INFO] WhatsApp client initialized
2025-09-19T10:18:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:44: 📝 Loaded 12 template types
2025-09-19T10:18:45: ℹ️ [10:18:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257324995,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15764,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:45: ⏰ 4-minute startup delay active
2025-09-19T10:18:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:45: [INFO] Using PQueue for job processing
2025-09-19T10:18:45: [INFO] Memory management setup completed
2025-09-19T10:18:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:45: [INFO] Checking process locks...
2025-09-19T10:18:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:45: ℹ️ [10:18:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:45: [INFO] Process locks acquired successfully
2025-09-19T10:18:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:45: [INFO] Logs directory created
2025-09-19T10:18:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:45: [10:18:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:45: [10:18:45 am] ✅ Google Sheets API initialized
2025-09-19T10:18:45: [INFO] Google Sheets helper initialized
2025-09-19T10:18:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:45: ℹ️ [10:18:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:45: 🗑️ Deleted old log file: bot-2025-09-19T04-48-11-571Z.log
2025-09-19T10:18:45: 📝 Enhanced Logger initialized
2025-09-19T10:18:45: 📁 Loaded statistics from file
2025-09-19T10:18:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:45: 🧹 Removed stale process lock
2025-09-19T10:18:45: 🔒 Process lock acquired (PID: 15764)
2025-09-19T10:18:45: ℹ️ [10:18:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15764
}
2025-09-19T10:18:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:45: ℹ️ [10:18:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257324995, processId: 15764 },
  timestamp: 1758257325124
}
2025-09-19T10:18:45: ℹ️ [10:18:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257324995, willExpireAt: 1758257564995 },
  timestamp: 1758257325124
}
2025-09-19T10:18:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:45: 📋 Message rules loaded: 8 types
2025-09-19T10:18:45: ℹ️ [10:18:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 135,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:47: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:47: [INFO] WhatsApp client initialized
2025-09-19T10:18:49: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:49: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:49: 📝 Loaded 12 template types
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257329240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17088,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:49: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:49: ⏰ 4-minute startup delay active
2025-09-19T10:18:49: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:49: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:49: [INFO] Using PQueue for job processing
2025-09-19T10:18:49: [INFO] Memory management setup completed
2025-09-19T10:18:49: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:49: [INFO] Checking process locks...
2025-09-19T10:18:49: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:49: [INFO] Process locks acquired successfully
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:49: [INFO] Logs directory created
2025-09-19T10:18:49: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:49: [10:18:49 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:49: [10:18:49 am] ✅ Google Sheets API initialized
2025-09-19T10:18:49: [INFO] Google Sheets helper initialized
2025-09-19T10:18:49: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:49: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:49: 🗑️ Deleted old log file: bot-2025-09-19T04-48-14-327Z.log
2025-09-19T10:18:49: 📝 Enhanced Logger initialized
2025-09-19T10:18:49: 📁 Loaded statistics from file
2025-09-19T10:18:49: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:49: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:49: 🧹 Removed stale process lock
2025-09-19T10:18:49: 🔒 Process lock acquired (PID: 17088)
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17088
}
2025-09-19T10:18:49: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:49: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257329240, processId: 17088 },
  timestamp: 1758257329415
}
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257329240, willExpireAt: 1758257569240 },
  timestamp: 1758257329416
}
2025-09-19T10:18:49: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:49: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:49: 📋 Message rules loaded: 8 types
2025-09-19T10:18:49: ℹ️ [10:18:49 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 179,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:50: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:50: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:50: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:50: [INFO] WhatsApp client initialized
2025-09-19T10:18:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:52: 📝 Loaded 12 template types
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257332484,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16908,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:52: ⏰ 4-minute startup delay active
2025-09-19T10:18:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:52: [INFO] Using PQueue for job processing
2025-09-19T10:18:52: [INFO] Memory management setup completed
2025-09-19T10:18:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:52: [INFO] Checking process locks...
2025-09-19T10:18:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:52: [INFO] Process locks acquired successfully
2025-09-19T10:18:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:52: [INFO] Logs directory created
2025-09-19T10:18:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:52: [10:18:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:52: [10:18:52 am] ✅ Google Sheets API initialized
2025-09-19T10:18:52: [INFO] Google Sheets helper initialized
2025-09-19T10:18:52: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:52: 🗑️ Deleted old log file: bot-2025-09-19T04-48-17-046Z.log
2025-09-19T10:18:52: 📝 Enhanced Logger initialized
2025-09-19T10:18:52: 📁 Loaded statistics from file
2025-09-19T10:18:52: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:52: 🧹 Removed stale process lock
2025-09-19T10:18:52: 🔒 Process lock acquired (PID: 16908)
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16908
}
2025-09-19T10:18:52: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:52: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257332484, processId: 16908 },
  timestamp: 1758257332616
}
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257332484, willExpireAt: 1758257572484 },
  timestamp: 1758257332617
}
2025-09-19T10:18:52: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:52: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:52: 📋 Message rules loaded: 8 types
2025-09-19T10:18:52: ℹ️ [10:18:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 135,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:53: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:53: [INFO] WhatsApp client initialized
2025-09-19T10:18:55: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:55: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:55: 📝 Loaded 12 template types
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257335771,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16600,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:55: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:55: ⏰ 4-minute startup delay active
2025-09-19T10:18:55: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:55: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:55: [INFO] Using PQueue for job processing
2025-09-19T10:18:55: [INFO] Memory management setup completed
2025-09-19T10:18:55: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:55: [INFO] Checking process locks...
2025-09-19T10:18:55: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:55: [INFO] Process locks acquired successfully
2025-09-19T10:18:55: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:55: [INFO] Logs directory created
2025-09-19T10:18:55: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:55: [10:18:55 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:55: [10:18:55 am] ✅ Google Sheets API initialized
2025-09-19T10:18:55: [INFO] Google Sheets helper initialized
2025-09-19T10:18:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:55: 🗑️ Deleted old log file: bot-2025-09-19T04-48-19-794Z.log
2025-09-19T10:18:55: 📝 Enhanced Logger initialized
2025-09-19T10:18:55: 📁 Loaded statistics from file
2025-09-19T10:18:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:55: 🧹 Removed stale process lock
2025-09-19T10:18:55: 🔒 Process lock acquired (PID: 16600)
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16600
}
2025-09-19T10:18:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257335771, willExpireAt: 1758257575771 },
  timestamp: 1758257335975
}
2025-09-19T10:18:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:55: 📋 Message rules loaded: 8 types
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257335771, processId: 16600 },
  timestamp: 1758257335974
}
2025-09-19T10:18:55: ℹ️ [10:18:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 206,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:18:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:18:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:18:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:18:57: [INFO] WhatsApp client initialized
2025-09-19T10:18:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:18:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:18:59: 📝 Loaded 12 template types
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257339195,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17016,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:18:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:18:59: ⏰ 4-minute startup delay active
2025-09-19T10:18:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:18:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:18:59: [INFO] Using PQueue for job processing
2025-09-19T10:18:59: [INFO] Memory management setup completed
2025-09-19T10:18:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:18:59: [INFO] Checking process locks...
2025-09-19T10:18:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:18:59: [INFO] Process locks acquired successfully
2025-09-19T10:18:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:18:59: [INFO] Logs directory created
2025-09-19T10:18:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:18:59: [10:18:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:18:59: [10:18:59 am] ✅ Google Sheets API initialized
2025-09-19T10:18:59: [INFO] Google Sheets helper initialized
2025-09-19T10:18:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:18:59: 🗑️ Deleted old log file: bot-2025-09-19T04-48-22-607Z.log
2025-09-19T10:18:59: 📝 Enhanced Logger initialized
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:18:59: 📁 Loaded statistics from file
2025-09-19T10:18:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:18:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:18:59: 🧹 Removed stale process lock
2025-09-19T10:18:59: 🔒 Process lock acquired (PID: 17016)
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17016
}
2025-09-19T10:18:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:18:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257339195, processId: 17016 },
  timestamp: 1758257339328
}
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257339195, willExpireAt: 1758257579195 },
  timestamp: 1758257339329
}
2025-09-19T10:18:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:18:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:18:59: 📋 Message rules loaded: 8 types
2025-09-19T10:18:59: ℹ️ [10:18:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:00: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:00: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:00: [INFO] WhatsApp client initialized
2025-09-19T10:19:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:02: 📝 Loaded 12 template types
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257342366,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 956,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:02: ⏰ 4-minute startup delay active
2025-09-19T10:19:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:02: [INFO] Using PQueue for job processing
2025-09-19T10:19:02: [INFO] Memory management setup completed
2025-09-19T10:19:02: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:02: [INFO] Checking process locks...
2025-09-19T10:19:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:02: [INFO] Process locks acquired successfully
2025-09-19T10:19:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:02: [INFO] Logs directory created
2025-09-19T10:19:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:02: [10:19:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:02: [10:19:02 am] ✅ Google Sheets API initialized
2025-09-19T10:19:02: [INFO] Google Sheets helper initialized
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:02: 📁 Loaded statistics from file
2025-09-19T10:19:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:02: 🗑️ Deleted old log file: bot-2025-09-19T04-48-25-285Z.log
2025-09-19T10:19:02: 📝 Enhanced Logger initialized
2025-09-19T10:19:02: 🧹 Removed stale process lock
2025-09-19T10:19:02: 🔒 Process lock acquired (PID: 956)
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 956
}
2025-09-19T10:19:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257342366, processId: 956 },
  timestamp: 1758257342513
}
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257342366, willExpireAt: 1758257582366 },
  timestamp: 1758257342513
}
2025-09-19T10:19:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:02: 📋 Message rules loaded: 8 types
2025-09-19T10:19:02: ℹ️ [10:19:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 150,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:03: [INFO] WhatsApp client initialized
2025-09-19T10:19:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:05: 📝 Loaded 12 template types
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257345617,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13528,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:05: ⏰ 4-minute startup delay active
2025-09-19T10:19:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:05: [INFO] Using PQueue for job processing
2025-09-19T10:19:05: [INFO] Memory management setup completed
2025-09-19T10:19:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:05: [INFO] Checking process locks...
2025-09-19T10:19:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:05: [INFO] Process locks acquired successfully
2025-09-19T10:19:05: [INFO] Logs directory created
2025-09-19T10:19:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:05: [10:19:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:05: [10:19:05 am] ✅ Google Sheets API initialized
2025-09-19T10:19:05: [INFO] Google Sheets helper initialized
2025-09-19T10:19:05: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:05: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:05: 🗑️ Deleted old log file: bot-2025-09-19T04-48-27-891Z.log
2025-09-19T10:19:05: 📝 Enhanced Logger initialized
2025-09-19T10:19:05: 📁 Loaded statistics from file
2025-09-19T10:19:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:05: 🧹 Removed stale process lock
2025-09-19T10:19:05: 🔒 Process lock acquired (PID: 13528)
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13528
}
2025-09-19T10:19:05: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257345617, willExpireAt: 1758257585617 },
  timestamp: 1758257345786
}
2025-09-19T10:19:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:05: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:05: 📋 Message rules loaded: 8 types
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257345617, processId: 13528 },
  timestamp: 1758257345786
}
2025-09-19T10:19:05: ℹ️ [10:19:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 171,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:06: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:06: [INFO] WhatsApp client initialized
2025-09-19T10:19:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:08: 📝 Loaded 12 template types
2025-09-19T10:19:08: ℹ️ [10:19:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257348913,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15368,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:08: ⏰ 4-minute startup delay active
2025-09-19T10:19:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:08: [INFO] Using PQueue for job processing
2025-09-19T10:19:08: [INFO] Memory management setup completed
2025-09-19T10:19:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:08: [INFO] Checking process locks...
2025-09-19T10:19:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:08: ℹ️ [10:19:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:08: [INFO] Process locks acquired successfully
2025-09-19T10:19:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:08: [INFO] Logs directory created
2025-09-19T10:19:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:08: [10:19:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:08: [10:19:08 am] ✅ Google Sheets API initialized
2025-09-19T10:19:08: [INFO] Google Sheets helper initialized
2025-09-19T10:19:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:09: 🗑️ Deleted old log file: bot-2025-09-19T04-48-30-617Z.log
2025-09-19T10:19:09: 📝 Enhanced Logger initialized
2025-09-19T10:19:09: ℹ️ [10:19:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:09: 📁 Loaded statistics from file
2025-09-19T10:19:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:09: 🧹 Removed stale process lock
2025-09-19T10:19:09: 🔒 Process lock acquired (PID: 15368)
2025-09-19T10:19:09: ℹ️ [10:19:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15368
}
2025-09-19T10:19:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:09: ℹ️ [10:19:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257348913, processId: 15368 },
  timestamp: 1758257349048
}
2025-09-19T10:19:09: ℹ️ [10:19:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257348913, willExpireAt: 1758257588913 },
  timestamp: 1758257349049
}
2025-09-19T10:19:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:09: 📋 Message rules loaded: 8 types
2025-09-19T10:19:09: ℹ️ [10:19:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:10: [INFO] WhatsApp client initialized
2025-09-19T10:19:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:12: 📝 Loaded 12 template types
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257352176,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16748,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:12: ⏰ 4-minute startup delay active
2025-09-19T10:19:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:12: [INFO] Using PQueue for job processing
2025-09-19T10:19:12: [INFO] Memory management setup completed
2025-09-19T10:19:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:12: [INFO] Checking process locks...
2025-09-19T10:19:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:12: [INFO] Process locks acquired successfully
2025-09-19T10:19:12: [INFO] Logs directory created
2025-09-19T10:19:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:12: [10:19:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:12: [10:19:12 am] ✅ Google Sheets API initialized
2025-09-19T10:19:12: [INFO] Google Sheets helper initialized
2025-09-19T10:19:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:12: 🗑️ Deleted old log file: bot-2025-09-19T04-48-33-980Z.log
2025-09-19T10:19:12: 📝 Enhanced Logger initialized
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:12: 📁 Loaded statistics from file
2025-09-19T10:19:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:12: 🧹 Removed stale process lock
2025-09-19T10:19:12: 🔒 Process lock acquired (PID: 16748)
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16748
}
2025-09-19T10:19:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257352176, processId: 16748 },
  timestamp: 1758257352338
}
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257352176, willExpireAt: 1758257592176 },
  timestamp: 1758257352338
}
2025-09-19T10:19:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:12: 📋 Message rules loaded: 8 types
2025-09-19T10:19:12: ℹ️ [10:19:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 167,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:13: [INFO] WhatsApp client initialized
2025-09-19T10:19:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:15: 📝 Loaded 12 template types
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257355430,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5732,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:15: ⏰ 4-minute startup delay active
2025-09-19T10:19:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:15: [INFO] Using PQueue for job processing
2025-09-19T10:19:15: [INFO] Memory management setup completed
2025-09-19T10:19:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:15: [INFO] Checking process locks...
2025-09-19T10:19:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:15: [INFO] Process locks acquired successfully
2025-09-19T10:19:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:15: [INFO] Logs directory created
2025-09-19T10:19:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:15: [10:19:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:15: [10:19:15 am] ✅ Google Sheets API initialized
2025-09-19T10:19:15: [INFO] Google Sheets helper initialized
2025-09-19T10:19:15: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:15: 🗑️ Deleted old log file: bot-2025-09-19T04-48-37-178Z.log
2025-09-19T10:19:15: 📝 Enhanced Logger initialized
2025-09-19T10:19:15: 📁 Loaded statistics from file
2025-09-19T10:19:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:15: 🧹 Removed stale process lock
2025-09-19T10:19:15: 🔒 Process lock acquired (PID: 5732)
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5732
}
2025-09-19T10:19:15: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257355430, processId: 5732 },
  timestamp: 1758257355559
}
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257355430, willExpireAt: 1758257595430 },
  timestamp: 1758257355560
}
2025-09-19T10:19:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:15: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:15: 📋 Message rules loaded: 8 types
2025-09-19T10:19:15: ℹ️ [10:19:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:16: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:16: [INFO] WhatsApp client initialized
2025-09-19T10:19:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:18: 📝 Loaded 12 template types
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257358605,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13576,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:18: ⏰ 4-minute startup delay active
2025-09-19T10:19:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:18: [INFO] Using PQueue for job processing
2025-09-19T10:19:18: [INFO] Memory management setup completed
2025-09-19T10:19:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:18: [INFO] Checking process locks...
2025-09-19T10:19:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:18: [INFO] Process locks acquired successfully
2025-09-19T10:19:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:18: [INFO] Logs directory created
2025-09-19T10:19:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:18: [10:19:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:18: [10:19:18 am] ✅ Google Sheets API initialized
2025-09-19T10:19:18: [INFO] Google Sheets helper initialized
2025-09-19T10:19:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:18: 🗑️ Deleted old log file: bot-2025-09-19T04-48-41-403Z.log
2025-09-19T10:19:18: 📝 Enhanced Logger initialized
2025-09-19T10:19:18: 📁 Loaded statistics from file
2025-09-19T10:19:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:18: 🧹 Removed stale process lock
2025-09-19T10:19:18: 🔒 Process lock acquired (PID: 13576)
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13576
}
2025-09-19T10:19:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257358605, willExpireAt: 1758257598605 },
  timestamp: 1758257358807
}
2025-09-19T10:19:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:18: 📋 Message rules loaded: 8 types
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257358605, processId: 13576 },
  timestamp: 1758257358807
}
2025-09-19T10:19:18: ℹ️ [10:19:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 206,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:19: [INFO] WhatsApp client initialized
2025-09-19T10:19:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:21: 📝 Loaded 12 template types
2025-09-19T10:19:21: ℹ️ [10:19:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257361896,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7820,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:21: ⏰ 4-minute startup delay active
2025-09-19T10:19:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:21: [INFO] Using PQueue for job processing
2025-09-19T10:19:21: [INFO] Memory management setup completed
2025-09-19T10:19:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:21: [INFO] Checking process locks...
2025-09-19T10:19:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:21: ℹ️ [10:19:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:21: [INFO] Process locks acquired successfully
2025-09-19T10:19:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:21: [INFO] Logs directory created
2025-09-19T10:19:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:21: [10:19:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:21: [10:19:21 am] ✅ Google Sheets API initialized
2025-09-19T10:19:21: [INFO] Google Sheets helper initialized
2025-09-19T10:19:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:21: ℹ️ [10:19:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:22: 🗑️ Deleted old log file: bot-2025-09-19T04-48-45-029Z.log
2025-09-19T10:19:22: 📝 Enhanced Logger initialized
2025-09-19T10:19:22: 📁 Loaded statistics from file
2025-09-19T10:19:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:22: 🧹 Removed stale process lock
2025-09-19T10:19:22: 🔒 Process lock acquired (PID: 7820)
2025-09-19T10:19:22: ℹ️ [10:19:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7820
}
2025-09-19T10:19:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:22: ℹ️ [10:19:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257361896, processId: 7820 },
  timestamp: 1758257362041
}
2025-09-19T10:19:22: ℹ️ [10:19:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257361896, willExpireAt: 1758257601896 },
  timestamp: 1758257362041
}
2025-09-19T10:19:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:22: 📋 Message rules loaded: 8 types
2025-09-19T10:19:22: ℹ️ [10:19:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 147,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:23: [INFO] WhatsApp client initialized
2025-09-19T10:19:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:25: 📝 Loaded 12 template types
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257365771,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17656,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:25: ⏰ 4-minute startup delay active
2025-09-19T10:19:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:25: [INFO] Using PQueue for job processing
2025-09-19T10:19:25: [INFO] Memory management setup completed
2025-09-19T10:19:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:25: [INFO] Checking process locks...
2025-09-19T10:19:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:25: [INFO] Process locks acquired successfully
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:25: [INFO] Logs directory created
2025-09-19T10:19:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:25: [10:19:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:25: [10:19:25 am] ✅ Google Sheets API initialized
2025-09-19T10:19:25: [INFO] Google Sheets helper initialized
2025-09-19T10:19:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:25: 🗑️ Deleted old log file: bot-2025-09-19T04-48-49-287Z.log
2025-09-19T10:19:25: 📝 Enhanced Logger initialized
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:25: 📁 Loaded statistics from file
2025-09-19T10:19:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:25: 🧹 Removed stale process lock
2025-09-19T10:19:25: 🔒 Process lock acquired (PID: 17656)
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17656
}
2025-09-19T10:19:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257365771, processId: 17656 },
  timestamp: 1758257365895
}
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257365771, willExpireAt: 1758257605771 },
  timestamp: 1758257365896
}
2025-09-19T10:19:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:25: 📋 Message rules loaded: 8 types
2025-09-19T10:19:25: ℹ️ [10:19:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:27: [INFO] WhatsApp client initialized
2025-09-19T10:19:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:29: 📝 Loaded 12 template types
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257369796,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15768,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:29: ⏰ 4-minute startup delay active
2025-09-19T10:19:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:29: [INFO] Using PQueue for job processing
2025-09-19T10:19:29: [INFO] Memory management setup completed
2025-09-19T10:19:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:29: [INFO] Checking process locks...
2025-09-19T10:19:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:29: [INFO] Process locks acquired successfully
2025-09-19T10:19:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:29: [INFO] Logs directory created
2025-09-19T10:19:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:29: [10:19:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:29: [10:19:29 am] ✅ Google Sheets API initialized
2025-09-19T10:19:29: [INFO] Google Sheets helper initialized
2025-09-19T10:19:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:29: 🗑️ Deleted old log file: bot-2025-09-19T04-48-52-522Z.log
2025-09-19T10:19:29: 📝 Enhanced Logger initialized
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:29: 📁 Loaded statistics from file
2025-09-19T10:19:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:29: 🧹 Removed stale process lock
2025-09-19T10:19:29: 🔒 Process lock acquired (PID: 15768)
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15768
}
2025-09-19T10:19:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257369796, processId: 15768 },
  timestamp: 1758257369908
}
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257369796, willExpireAt: 1758257609796 },
  timestamp: 1758257369909
}
2025-09-19T10:19:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:29: 📋 Message rules loaded: 8 types
2025-09-19T10:19:29: ℹ️ [10:19:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:30: [INFO] WhatsApp client initialized
2025-09-19T10:19:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:32: 📝 Loaded 12 template types
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257372730,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10612,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:32: ⏰ 4-minute startup delay active
2025-09-19T10:19:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:32: [INFO] Using PQueue for job processing
2025-09-19T10:19:32: [INFO] Memory management setup completed
2025-09-19T10:19:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:32: [INFO] Checking process locks...
2025-09-19T10:19:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:32: [INFO] Process locks acquired successfully
2025-09-19T10:19:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:32: [INFO] Logs directory created
2025-09-19T10:19:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:32: [10:19:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:32: [10:19:32 am] ✅ Google Sheets API initialized
2025-09-19T10:19:32: [INFO] Google Sheets helper initialized
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:32: 🗑️ Deleted old log file: bot-2025-09-19T04-48-55-811Z.log
2025-09-19T10:19:32: 📝 Enhanced Logger initialized
2025-09-19T10:19:32: 📁 Loaded statistics from file
2025-09-19T10:19:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:32: 🧹 Removed stale process lock
2025-09-19T10:19:32: 🔒 Process lock acquired (PID: 10612)
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10612
}
2025-09-19T10:19:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257372730, processId: 10612 },
  timestamp: 1758257372838
}
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257372730, willExpireAt: 1758257612730 },
  timestamp: 1758257372838
}
2025-09-19T10:19:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:32: 📋 Message rules loaded: 8 types
2025-09-19T10:19:32: ℹ️ [10:19:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:33: [INFO] WhatsApp client initialized
2025-09-19T10:19:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:35: 📝 Loaded 12 template types
2025-09-19T10:19:35: ℹ️ [10:19:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257375870,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5732,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:35: ⏰ 4-minute startup delay active
2025-09-19T10:19:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:35: [INFO] Using PQueue for job processing
2025-09-19T10:19:35: [INFO] Memory management setup completed
2025-09-19T10:19:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:35: [INFO] Checking process locks...
2025-09-19T10:19:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:35: ℹ️ [10:19:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:35: [INFO] Process locks acquired successfully
2025-09-19T10:19:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:35: [INFO] Logs directory created
2025-09-19T10:19:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:35: [10:19:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:35: [10:19:35 am] ✅ Google Sheets API initialized
2025-09-19T10:19:35: [INFO] Google Sheets helper initialized
2025-09-19T10:19:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:35: ℹ️ [10:19:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:36: 🗑️ Deleted old log file: bot-2025-09-19T04-48-59-235Z.log
2025-09-19T10:19:36: 📝 Enhanced Logger initialized
2025-09-19T10:19:36: 📁 Loaded statistics from file
2025-09-19T10:19:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:36: 🧹 Removed stale process lock
2025-09-19T10:19:36: 🔒 Process lock acquired (PID: 5732)
2025-09-19T10:19:36: ℹ️ [10:19:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5732
}
2025-09-19T10:19:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:36: ℹ️ [10:19:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257375870, willExpireAt: 1758257615870 },
  timestamp: 1758257376027
}
2025-09-19T10:19:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:36: 📋 Message rules loaded: 8 types
2025-09-19T10:19:36: ℹ️ [10:19:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257375870, processId: 5732 },
  timestamp: 1758257376026
}
2025-09-19T10:19:36: ℹ️ [10:19:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 159,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:37: [INFO] WhatsApp client initialized
2025-09-19T10:19:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:39: 📝 Loaded 12 template types
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257379269,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8248,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:39: ⏰ 4-minute startup delay active
2025-09-19T10:19:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:39: [INFO] Using PQueue for job processing
2025-09-19T10:19:39: [INFO] Memory management setup completed
2025-09-19T10:19:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:39: [INFO] Checking process locks...
2025-09-19T10:19:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:39: [INFO] Process locks acquired successfully
2025-09-19T10:19:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:39: [INFO] Logs directory created
2025-09-19T10:19:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:39: [10:19:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:39: [10:19:39 am] ✅ Google Sheets API initialized
2025-09-19T10:19:39: [INFO] Google Sheets helper initialized
2025-09-19T10:19:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:39: 🗑️ Deleted old log file: bot-2025-09-19T04-49-02-411Z.log
2025-09-19T10:19:39: 📝 Enhanced Logger initialized
2025-09-19T10:19:39: 📁 Loaded statistics from file
2025-09-19T10:19:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:39: 🧹 Removed stale process lock
2025-09-19T10:19:39: 🔒 Process lock acquired (PID: 8248)
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8248
}
2025-09-19T10:19:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257379269, willExpireAt: 1758257619269 },
  timestamp: 1758257379473
}
2025-09-19T10:19:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:39: 📋 Message rules loaded: 8 types
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257379269, processId: 8248 },
  timestamp: 1758257379473
}
2025-09-19T10:19:39: ℹ️ [10:19:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 210,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:40: [INFO] WhatsApp client initialized
2025-09-19T10:19:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:42: 📝 Loaded 12 template types
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257382566,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13228,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:42: ⏰ 4-minute startup delay active
2025-09-19T10:19:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:42: [INFO] Using PQueue for job processing
2025-09-19T10:19:42: [INFO] Memory management setup completed
2025-09-19T10:19:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:42: [INFO] Checking process locks...
2025-09-19T10:19:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:42: [INFO] Process locks acquired successfully
2025-09-19T10:19:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:42: [INFO] Logs directory created
2025-09-19T10:19:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:42: [10:19:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:42: [10:19:42 am] ✅ Google Sheets API initialized
2025-09-19T10:19:42: [INFO] Google Sheets helper initialized
2025-09-19T10:19:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:42: 🗑️ Deleted old log file: bot-2025-09-19T04-49-05-653Z.log
2025-09-19T10:19:42: 📝 Enhanced Logger initialized
2025-09-19T10:19:42: 📁 Loaded statistics from file
2025-09-19T10:19:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:42: 🧹 Removed stale process lock
2025-09-19T10:19:42: 🔒 Process lock acquired (PID: 13228)
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13228
}
2025-09-19T10:19:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257382566, processId: 13228 },
  timestamp: 1758257382693
}
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257382566, willExpireAt: 1758257622566 },
  timestamp: 1758257382693
}
2025-09-19T10:19:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:42: 📋 Message rules loaded: 8 types
2025-09-19T10:19:42: ℹ️ [10:19:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:43: [INFO] WhatsApp client initialized
2025-09-19T10:19:46: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:46: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:46: 📝 Loaded 12 template types
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257386500,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1420,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:46: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:46: ⏰ 4-minute startup delay active
2025-09-19T10:19:46: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:46: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:46: [INFO] Using PQueue for job processing
2025-09-19T10:19:46: [INFO] Memory management setup completed
2025-09-19T10:19:46: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:46: [INFO] Checking process locks...
2025-09-19T10:19:46: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:46: [INFO] Process locks acquired successfully
2025-09-19T10:19:46: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:46: [INFO] Logs directory created
2025-09-19T10:19:46: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:46: [10:19:46 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:46: [10:19:46 am] ✅ Google Sheets API initialized
2025-09-19T10:19:46: [INFO] Google Sheets helper initialized
2025-09-19T10:19:46: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:46: 🗑️ Deleted old log file: bot-2025-09-19T04-49-08-947Z.log
2025-09-19T10:19:46: 📝 Enhanced Logger initialized
2025-09-19T10:19:46: 📁 Loaded statistics from file
2025-09-19T10:19:46: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:46: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:46: 🧹 Removed stale process lock
2025-09-19T10:19:46: 🔒 Process lock acquired (PID: 1420)
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1420
}
2025-09-19T10:19:46: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:46: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257386500, processId: 1420 },
  timestamp: 1758257386647
}
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257386500, willExpireAt: 1758257626500 },
  timestamp: 1758257386647
}
2025-09-19T10:19:46: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:46: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:46: 📋 Message rules loaded: 8 types
2025-09-19T10:19:46: ℹ️ [10:19:46 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 149,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:47: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:47: [INFO] WhatsApp client initialized
2025-09-19T10:19:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:19:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:19:52: 📝 Loaded 12 template types
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257392100,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13960,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:19:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:19:52: ⏰ 4-minute startup delay active
2025-09-19T10:19:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:19:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:19:52: [INFO] Using PQueue for job processing
2025-09-19T10:19:52: [INFO] Memory management setup completed
2025-09-19T10:19:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:19:52: [INFO] Checking process locks...
2025-09-19T10:19:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:19:52: [INFO] Process locks acquired successfully
2025-09-19T10:19:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:19:52: [INFO] Logs directory created
2025-09-19T10:19:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:19:52: [10:19:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:19:52: [10:19:52 am] ✅ Google Sheets API initialized
2025-09-19T10:19:52: [INFO] Google Sheets helper initialized
2025-09-19T10:19:52: 📁 Loaded 0 message hashes from file
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:19:52: 🗑️ Deleted old log file: bot-2025-09-19T04-49-12-215Z.log
2025-09-19T10:19:52: 📝 Enhanced Logger initialized
2025-09-19T10:19:52: 📁 Loaded statistics from file
2025-09-19T10:19:52: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:19:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:19:52: 🧹 Removed stale process lock
2025-09-19T10:19:52: 🔒 Process lock acquired (PID: 13960)
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13960
}
2025-09-19T10:19:52: ⏰ Starting 240 second startup grace period...
2025-09-19T10:19:52: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257392100, processId: 13960 },
  timestamp: 1758257392387
}
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257392100, willExpireAt: 1758257632100 },
  timestamp: 1758257392387
}
2025-09-19T10:19:52: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:19:52: ⏰ Startup grace period: 240 seconds
2025-09-19T10:19:52: 📋 Message rules loaded: 8 types
2025-09-19T10:19:52: ℹ️ [10:19:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 295,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:19:53: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:19:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:19:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:53: [INFO] WhatsApp client initialized
2025-09-19T10:19:53: [INFO] Starting Express server...
2025-09-19T10:19:53: [INFO] Express server started
2025-09-19T10:19:53: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.start (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:1104:31)
2025-09-19T10:19:53: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.start (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:1104:31)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.start (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:1104:31)
2025-09-19T10:19:53: [10:19:53 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:19:53: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.start (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:1104:31),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.start (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:1104:31)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:19:53: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:19:53: [INFO] Stopped polling
2025-09-19T10:19:53: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:19:53: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:19:53: [INFO] WhatsApp Sheet Bot server running on http://localhost:3001
2025-09-19T10:19:53: [INFO] QR Code available at: http://localhost:3001/qr
2025-09-19T10:19:53: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:19:53: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:19:53: 🔌 Connection closed. Reason: undefined
2025-09-19T10:19:53: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:19:53: [INFO] Stopped polling
2025-09-19T10:19:53: 🔄 Reconnecting... (Attempt 1/5)
2025-09-19T10:19:53: 🔌 WhatsApp client disconnected
2025-09-19T10:19:53: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:19:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:55: [INFO] ✅ Emergency recovery completed
2025-09-19T10:19:55: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:19:55: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:19:55: [10:19:55 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:19:55: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:19:55: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:19:55: [INFO] Stopped polling
2025-09-19T10:19:55: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:19:55: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:19:55: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:19:55: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:19:55: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:19:55: 🔌 Connection closed. Reason: undefined
2025-09-19T10:19:55: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:19:55: [INFO] Stopped polling
2025-09-19T10:19:55: 🔄 Reconnecting... (Attempt 2/5)
2025-09-19T10:19:55: 🔌 WhatsApp client disconnected
2025-09-19T10:19:55: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:19:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:56: 🔄 Connecting to WhatsApp...
2025-09-19T10:19:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:57: [INFO] ✅ Emergency recovery completed
2025-09-19T10:19:57: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:19:57: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:19:57: [10:19:57 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:19:57: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:19:57: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:19:57: [INFO] Stopped polling
2025-09-19T10:19:57: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:19:57: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:19:57: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:19:57: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:19:57: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:19:57: 🔌 Connection closed. Reason: undefined
2025-09-19T10:19:57: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:19:57: [INFO] Stopped polling
2025-09-19T10:19:57: 🔄 Reconnecting... (Attempt 3/5)
2025-09-19T10:19:57: 🔌 WhatsApp client disconnected
2025-09-19T10:19:57: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:19:58: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T10:19:58: [47m[30m ▄▄▄▄▄▄▄   ▄ ▄  ▄▄▄▄▄ ▄▄     ▄  ▄   ▄ ▄ ▄▄▄▄ ▄      ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄█▀▀█▄ ▀█  █ █▀▄▄▄ ▀█▀▄▄ █  ▀▄▀█ ▄▄▀▀███▄▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ██ █▀█▄▄▄▀▀ ▄▀ █▄▄▄▀██▄▄▄▄▀▄▀▄▀▄ █▄▀▄▀▀▀███▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █▀█ █ ▄▀▄ █▀▄▀▄▀▄▀█ ▄ █ █ █ █ █ ▄▀▄▀▄ █ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▄▄ ▄▀▀▄▄█ ▀ █▀▄▄▄▀ █▄▄▄█▀▄█▄█ ▀  ▀▄ ▀▄▄▄▀▀   ▄▄▄▄▄   [0m
[47m[30m ▄▄▀ ▄█▄██▀▄ ▄ █▀▄▄▀  ██▄ ▀  ▄ ▀▄ ▄▄█▄█ ▀█▀▀▄ ▀▄ ▄█▄▄▄██  ▄ ▀▄ [0m
[47m[30m  ▄█ ▄▀▄   ▀ ▄▀▄▄  ▀ ▀▀█▄ █ █▄▀█▀▀▀▄▄▄ █   ▀█ ▄▄▄▄▀█▀▄██▀▀▄ ▀▄ [0m
[47m[30m ▀█████▄█▄▄▄▄▄▀▀▀▄▄▄▀█▀ ▀▄▀▄▀▄▀██ ▄▄▀█▀ █▀▄▀ █▀▄▀▀▀ ▀ ▀▀█▀▄█▄█ [0m
[47m[30m  █▀██ ▄ █  █ █  █▀ █▄▄█▄▀▄▀▄ ██▄  ██▄▀▄    █ █▀▄██▄█▄ ▀▀▀  █▄ [0m
[47m[30m  █ █▀▀▄▀ ▄█ ▀▄▀ █▄█▄▀██▀    ▄▄▄█▀█▄▀▄▀▄▄▄██▄▄▄ ▀ ▄▄▄▄▀█  █▄▀▄ [0m
[47m[30m ▄▀ ▀▄█▄ ▄ ██▀▀▀▄ █ █▄▀▄ ▄▀ ▀▄▄▀▀ ██▄█▄█▀▀█ ▄ ▀ ▄▄▄ ██ ██▀▄ █▀ [0m
[47m[30m ▀▀▄▄▀▀▄▀▄ ▄ ▀▀▄▄ ▄██▄▀▀▄▀▀▄▀ ▀ ▄ ▄ ▄▄ ▄▀█▄▀▀▄▀▄ ▄█▄▄▄█▀▀▄▄▀▄▄ [0m
[47m[30m █ ▄▀▀▄▄▀█▄█▄▀█▄▄  █▀▄ ▄▄█▄ ▀ ▀▄▄▄ ▀▀▄▀▄▀▀▄▄█ ▄██▄▄  █▀▀▀▀▄▄█  [0m
[47m[30m ▀██ ▄█▄█ ▀██ ▀▄██▀▀▄ █▀▄██▀█ ██▄▄█ ▄██  ▀▀█▀▄ ▄▀██▄█▄▀▀▄  ▀▄█ [0m
[47m[30m ▄▀▀█▄▄▄▄█▀▄█▀▄▄▄  ▀█ ▄▄▄▀▄  ▄██▄██▀▄▄▄ ▀ ▀▄█▀█▀▀▄▄ ▀█▄████▄▀  [0m
[47m[30m ▀▀▀▄█ ▄ █ ▀█ ▄▄▀ ▄█▄█ ▄▄▀ █ █ ▄ █▀▄  ▄▄▄▀██▀ ▀▄█▄▀ ▄█ ▄ █▀▀▄▄ [0m
[47m[30m   ▀██▄▄▄█▀▄▀▀▀▀ █  █▀██▄▀▀ ██▄▄▄██▀███ ▀  ▄▄ ▀▄▄▄ ███▄▄▄█▄▄▄  [0m
[47m[30m  ▀▀ █▄▄ ▄██▀▄ ▀▄█ ▄█▄▀█ ██▀▄▀▀ ██▄▄▄▄▀  ▀▀██   █▄▀▄▄ ▄▄▄▄▄▄█▄ [0m
[47m[30m ▄█ ▀██▄▀ ██▀██▄▀ ▀██▀▄▄▄ █▀▀ ▄▄▄  █▄█▄▄   █▄▀▀█ ▄▄ ██▄ ▄█▄▄▀▄ [0m
[47m[30m  ███▄▀▄█ ▄█ ▄▄▄▀▀▀██ █▄▀▀▄██▀▄█ ▀ ▄▀▄ ▄█ █▀ █▄ █▀▄▄ ▄▄▄▀▄█ ▄  [0m
[47m[30m █▀▄█▄▄▄ ▄█▀▄▄▄██▄▄▀▄▀█▀ ▄▄█  ██▀▄▄█████▀▀▄▄▄ █ ▀▄ ▀▄▀▄▀██▀▄ █ [0m
[47m[30m █▄█▀▄█▄▀ ▀██▄▀▄ ▀▀█ ▄▀▄▀   █▀▄  ▀▄ █▀▄▄ ▀▀▀▀▀   ▀█▄▄ ██▀ ▄▄▄▄ [0m
[47m[30m ▀█▀▀██▄████▄▀▀▄▄▀ ▄  ██▀ ▄▀▄ ▀██ ▄█▀▄  ▀▀█ ▄▀▄▄▀▄█ █▀  ▄▄█▄██ [0m
[47m[30m  █ ▀▀█▄███▀ █▄ ██▀▄ ▄███▀██▀▀ ▄ ▄▄▀▄█▄▄▀▀▄▀ ▄▀▄▀██▄████  ▄▀ ▄ [0m
[47m[30m  ▀   ▄▄█▄▄▄███▀▄ ▄▄▀▄█  ▀█  █▀█▀▄█ ▄▄█   ▀▀█ ▀ █▄▄▀█▀▄ █▀▄▄▄█ [0m
[47m[30m ▀▀▄███▄▄▄▀▀▄ ▀█▀ █▄ ▀█▀▀█▄▄▄▀███ ▀▄ █▄▄ █▀▀ ▀▄▄ ▀█▄▀█▄▄█ █▀▄█ [0m
[47m[30m ███▄▀ ▄▀▀ ██▀█▀██  █  █▀▄▀ ▀███▄▄▀ █▄▀   ▄▀▄▀█▀▄█ ▀▄█▄██▄▄▄ ▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█▀▀▄▀▄ █▀█▀▄▀▀▀█▄█▀█ ▄ █  █▄▄▄█▀▀▀▄ ▀▄▀██ ██ ▄ ████▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄▀█ ▄▄██ ███ █▄▄ ▄█▄▄▄█ ▄▄█▄█   ██ █▄▄▄█▄▄█▄▄▄█  ▀█ [0m
[47m[30m █ ███ █ █ ▀ █▀▄█ ▀ ▄ ▄ ▀▀  ████▀  ▄▄█▀▄█ █▀▀ ▄ ▀▄▀▄▀ ▀█▄▀█  █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█ ▀▄▀▄▀ ▄██▀▄██▀   ▄▄█▀ █▄██▄▀ ▄▄█ ▀▄▀▄▄  ▄▄▀▀█▄▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T10:19:58: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-19T10:19:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:58: 🔄 Connecting to WhatsApp...
2025-09-19T10:19:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:19:59: [INFO] ✅ Emergency recovery completed
2025-09-19T10:19:59: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:19:59: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:19:59: [10:19:59 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:19:59: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:19:59: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:19:59: [INFO] Stopped polling
2025-09-19T10:19:59: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:19:59: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:19:59: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:19:59: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:19:59: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:19:59: 🔌 Connection closed. Reason: undefined
2025-09-19T10:19:59: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:19:59: [INFO] Stopped polling
2025-09-19T10:19:59: 🔄 Reconnecting... (Attempt 4/5)
2025-09-19T10:19:59: 🔌 WhatsApp client disconnected
2025-09-19T10:19:59: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:19:59: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T10:19:59: [47m[30m ▄▄▄▄▄▄▄   ▄ ▄   ▄   ▄▄  ▄ ▄▄ ▄ ▄▄▄▄  ▄▄ ▄▄▄  ▄▄ ▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █   ▀█ ▄ █▀ ▄▄  ▄▀█ ▀█  █▄ ▀▀██▀▄▀▄▀ █▄██ ▀▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █  ▀▄▀▀▀██▄▀█▀█▄ ▄▀▀  █▄██▄ ▀   █ ▄█▄▀ █ ▀▄ █▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀▄ ▄ ▄▀█ █▀▄▀█▀▄ ▄▀█ ▄ █ █▀█▀▄ ▄▀▄ ▄▀█▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄ ▄▄ ▄██▄█▄██  ▄ █▄█▀▄▄ ██▄▄▄█▄█▀██ ▄█▄ ▄ ▄ ▀█▄▄▀▄▄ ▄      [0m
[47m[30m ▀▄█ ▀▀▄▀█ ▀█ ▀▄█▀▄  ▀ ▀ █   ▄ ▄▀██▄▄▄ ▄ ▀▄▄ █ ▄██▄ ▄▄  █▀▄█ █ [0m
[47m[30m ▀▄ ▄▀█▄▀▀█▄██▀ ▀ █▀▄ ▄▀▀▀█▄▄ ▀ ▀▀█▄▄████▄██▄█▀▀ █▀▄ ▄▄  ▄▄▄▀▄ [0m
[47m[30m ██▀ █ ▄█▄▀ ▄▄   ▄▄▀▄ ▀▀▀ ▀█  ▀▀▄▀▄▀█▄▀▄██▄▄▄██▀█▄▀ ▄▀  █ ▀  ▄ [0m
[47m[30m ▄▄▄▄▄ ▄ ▄▄▀█   █▀  ▄▀▄▀▀▀ ▄ ▄  ███ ██▀▀█▀▀█▀▄▄▄ █ ▀  █  █▄▄▀  [0m
[47m[30m ██▄▄▀█▄█ ▀ ▀▀▄█ ██ ▀▄██ █▀█▀▄█▀██▄ █▄▄▀▀▀▀▄█▄▄ ▄▄ █▄▄▄ ▄ ▀ ▀█ [0m
[47m[30m ██  ▄▄▄▀█▀▄█▀██ ▀██▀ ▀▄▄▄▀ ▄█▀ ███▀ ▄█▄ ▄ █▄▀▄ ▀▄█▀▄▀▄▄█▀ █   [0m
[47m[30m  █ ▀▄█▄ █▀▀▄█▄ ▀▀ █ ▄▄▀▀▀ ▄█  ▀███▄███ █▀  ▀▄▄▄█▀▄ ▀▄  ▀█▄ ██ [0m
[47m[30m ▀▄▀▄▄▀▄    ▄ ▄█ ▄▄█▄ █ █▄███▄▀███▄█▄█████▀ ▀▄▄███▄█  ▄ ▄▄ ▄▄▄ [0m
[47m[30m ███▄█▀▄▄ ▄▄▄▀ ▄ █▀█▄▀ █▀▄ ▀███▄▄▄▀█▀█▄▄▄▀▄ ▄ ▀▀█ ▀▄██▄  █▄▄▀▄ [0m
[47m[30m ▄▀█▀██▄▄███▄ █  █  ▀▀▀██ ▀▄▄▄▄▄██▄ ▄▄█ █ ▀  █▄ ▄▄█ ▄▄▄▄██▀▄▀▄ [0m
[47m[30m █ █▀█ ▄ ██ ▄▀▀ ▄ █ ▄█▄▀▀ ▀▄ █ ▄ █ ▄█▄ █ █▄ ▀▀ ▄▄ ▄▀██ ▄ ██▄█▄ [0m
[47m[30m ▀▄▄ █▄▄▄█ ▀▀▀▄ ▀ █▀█ ▄█  ▀▀▀█▄▄▄█▀  ▄▀ █▄▄ ▄  ▀ ▄▄▀▀█▄▄▄█ █ ▄ [0m
[47m[30m ▀▄ █▀ ▄█▄▄ ▄ ▄ ▀█▀▀▄ █▀  ▄█ ▀▀ ▄▀      ▄  ▄ ▄▄   ▀ █▄█▄  ▄ ██ [0m
[47m[30m  ██▀▀ ▄▀  ▀▀ █  ▄▀▄▀▄███▀▄▄▀██▄ ▀▄ ▄██▀▄▄▄▀▄▄▀▀▄▄ ▄ ▄█▄▄▀▄  ▄ [0m
[47m[30m  ▀▄ ▄▀▄  ▀███  ▄█▄ ▀ ▄█▄▄██ ▄  ██ ▀  ▀▄▀▄▄▄▀ ▄█▄ ▄▄▀▄▀▄▀ ▀█▀▀ [0m
[47m[30m ▄ ▀█▄▄▄█▄█  ▀▄█▄ █  █▄▄ █▀▀▀▄█▄█ ▄ ▄▄ ▀ ▀█▄ ▄█▀███▀ █  ██▄▄▀▄ [0m
[47m[30m ▀▄ ▄ █▄▀▄█▀ ██▄▄█▀  ▀ ▄▀▀▀█▀▀█  ▄▄ ██▄▀▀█▄ █▀█ ▀█ █▀▀█▄▄▀▄▀█▄ [0m
[47m[30m ▄▀▀▄▀█▄▄▄ ▀▄█ ▀    ▄▄ ▄ ▀█ ▀▄▄▄█▄  ▄█▄ █▄▀▀█ ▄ ▄█▄█ ▄ ▄▀▄ ███ [0m
[47m[30m ▄ ▄ ▄▄▄▀▄▀▀▄█▀  █  █  ▀▀▄▀▄█▀▀█▀  ▀▀█▄▄▄▄ ▄█▄▄▄▄▀ ▄ ▀ █ ▄ ▀ █ [0m
[47m[30m █▀ █▀█▄ ▄██▄██▀██ ▀▀█ ▀ ▀█▄▄█▀▄▄█▄▀▄▄▀  █▄███ ▄▄██▀▀▀▄█▄▀▄▄▄█ [0m
[47m[30m  ▀▄█▄█▄▀▀█▀▄▀▄ ▄▀█ █▄██▄▄▄█▀▄  █ ▄▀ ▄▀ █ █ █ █▀ ▄▀▄▄ ▄▄▀ █▀▀▄ [0m
[47m[30m ███▄▀ ▄▀▀ ▄  ▀█ ▄▄ ▀ █  █▄▄███▄█▄▄ ▄██  ▀▄█ ▄▄▄██▄▄▀█▄██▄   ▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▀ ▄█ ▀█ █▀▀█▀█▀▄▀▄▄█ ▄ █ ▄ ██▀ ▀▀▄▄█▄ ▀▀▄█ █ ▄ █▀███ [0m
[47m[30m █ ▄▄▄ █ ▀▀▄█▀ ▀▄ ▀█ ▀▄▀▄██ ▀█▄▄▄███▀▄▀▄██▀▄▄ ▄▀▀█▄▀▀█▄▄▄█ █ ▀ [0m
[47m[30m █ ███ █ ▀▄▀▀▀▀▀█ ▄  ▄▀▄▄ █▄█ ▄ ▄▄  ▀ ▄ █▀ ▄ █▄▄█▄▄▄█▀▄▄ ▄▀ ▀▄ [0m
[47m[30m █▄▄▄▄▄█ ▄▄ ▄▄▀   █ ▄ ▀▄█▄ █▄█ ██▄▀██▄█▀█▄█▄███▄█▄ ▀▄██▄ ██ ▄▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T10:19:59: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-19T10:20:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:00: 🔄 Connecting to WhatsApp...
2025-09-19T10:20:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:01: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:01: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:01: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:01: [10:20:01 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:01: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:01: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:01: [INFO] Stopped polling
2025-09-19T10:20:01: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:01: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:01: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:01: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:01: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:01: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:01: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:01: [INFO] Stopped polling
2025-09-19T10:20:01: 🔄 Reconnecting... (Attempt 5/5)
2025-09-19T10:20:01: 🔌 WhatsApp client disconnected
2025-09-19T10:20:01: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:01: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T10:20:01: [47m[30m ▄▄▄▄▄▄▄ ▄ ▄▄▄       ▄▄▄ ▄▄▄   ▄ ▄ ▄▄  ▄ ▄ ▄▄▄ ▄▄▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ▀▄█▄▄ ▀███ ▀█▀▀█  ▀█▄▀▀  ▀█▀█▄▄█▀▄▄▀ ██▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄█ █ ▀█▄▄▀██▀▄▄  ██▄▄▄▄▄█ ▄█▀▄ █▀  ▀▀ ▄▀▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█▀█▀█ █ ▄ ▄ ▄ █▀▄ █ ▄ █ █ ▄ ▄▀▄▀█ █ █ █ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄▀▄ ▄█▄▀ ▀ █▄▀ █▀▀ █▄▄▄█▄ ███ ▀██▀  ▄▀██▀ ▄▄▄  ▄ ▄▄▄ [0m
[47m[30m █▄▀▄▀█▄█ ▄▄██▄ ▄ ▀▄ ▀ █ ▄  ▀█ ▄▄██▀ ▀██  ▀▀█▀ ██▄▀▀█▀▀█▀▀ █ █ [0m
[47m[30m    ▀ ▄▄▀▀ ▀▀▀█▀    █ ▀ █▀ █▀█▄▀   █▀▄   ██▄ ▄▀▀▀▄ ▀█▀▄  ██▀▄▄ [0m
[47m[30m ▀▄▄ █ ▄▄▀█▀▄ ▀ █▀ ▄ ▄  ▀█▄▄  ▀▀ ▀█ ▀ ▄▀ ▄██▄██ █▄ ▀█ ▀█ ▄▄▀▄█ [0m
[47m[30m █▀▄▄█▀▄▄█ █  ▄▀  █ ▀██▀▄▀█▄██ ▀█   ██▀▄█▀█▄▀█▀█▄██ ███▄██▄██▄ [0m
[47m[30m █▄ █▀ ▄▀█▄ ▄▀█▀▀ ▄   ▀█ ▀▄▄▀▀█  █▀▀▄█▀▄██▀▀█▄█▀ ▀  ▀▀ ███▄▀▄▄ [0m
[47m[30m ▀▀▄▄▄█▄▄█▀▄▄█▄ ▀▀▄▀▄█▄▄▄▀▄▀█ █▀   ▄█▄▄▄▀█▀██ ▄ ▀▄ ▀▀█▄▀▀ █▄▀▀ [0m
[47m[30m █▄█▄█▀▄█  ▀█  █▀  ▀▄█ ▀▀▄▀█▀▀█ ▄█▀█ ▄▀█▀▄▀██▀▀▀ ▄█▀█▀▀▀ ▄ ▄ █ [0m
[47m[30m ██▄▄▀▄▄ █▀▄█  ▄▀▄▀▄ ▀▄▀▀▄▀█ █▄▄██ █▀█ ▄▄▄▀█▀▄ █▀██▄█▀▀▄ █▀█▄  [0m
[47m[30m  ▀█▄  ▄▀▀▀▄ █ ▀▄██▄▄ █ ▄███▄▄▀▄▀█ ▄  ▀▀▀ ▄█▄▄ ▄ ▀▄▀█▄▀▀▄ ▄▀██ [0m
[47m[30m  █  ▄▄▄▄█▀█▄  ▄ ▄█▀▄  ▀▄▀██████▄▄ ▀▄▄▀█   █▄▄   ██▀▄▄▄▄▄█▀▀▄▀ [0m
[47m[30m ▀▀███ ▄ ████▄█▄█▄▀█▄███▄▀█▄▄█ ▄ ███ ▀  ▄▄▀▀█ ▀▀█ ▀  █ ▄ █▀█▄▄ [0m
[47m[30m ▀▄▀ █▄▄▄█    ▀ ▀█▀█▀▄▀ ▄▀▀ ██▄▄▄█▀  ▄ █ ▄█▀▄ █▄▄▄ █▄█▄▄▄██ █▄ [0m
[47m[30m ▀ ▀ ▄▄▄▀▀█▀▀  █ ▀▄▄ ▄▄▀ ▀▀▄▄▄ ▄▀ █▀▀▀█▀█ ▀▀▄▄▀▀▄▄█▀ ▀▀██▀ ▄▀▄ [0m
[47m[30m ▀▀ ▀▀▄▄██▄█▀ ▀ ▄▄▀▄ ▄  ▄▀▀██  ▄▀▄▄█▀▀ ▄ ▀ █   ▀▄▄▀▄█▄  ▄▀███▀ [0m
[47m[30m █▀▄▄█▄▄  ▀▀▀▀▄ ▀ █  █  ▀█▀▄▄█  █▄█ ▄  █ ▀██▀▄▀ █▄ █▀▄▀█▄█▄▄█▀ [0m
[47m[30m █▄  ▀█▄█ █ ▀▄ █▀▀██ █▄▀▄█▄ ▀█▀█ ▀▀▀ █   ▀█▀▀▄   ██▀▄▄█  ▀██▄█ [0m
[47m[30m ▄▄█ ▀█▄▀█▄▄█▀▄ ██▀█▄ █ ▄   █▀▄█▀▄▀▀ ▄█  █ █▀▄▀█▀██ █▀█▄█  █▀█ [0m
[47m[30m  ▀▄▀██▄▄▀▀▄█   █▀▀█▄▄█▀█  ▀█▄█▄▄██▀▄█▄▄██▀ █ █▀▀▄▀ █ ▀ ███    [0m
[47m[30m █▀▀▄  ▄▀▀███▀ █  ▀█ ▀  █▀▄█  ██▄▀█ ██▀▄█▄█▄▀██ █ ▀███▀██▀▄ ▀▄ [0m
[47m[30m ▄▄▀██▄▄▄ ▄▀▄ █ █▀▀ ██▀▀▀▀▀█▀ ▄██▄▄ ▄▄▀ ▀█▀█ █ ▀ █▄▀█▀▀█▄  ▀██ [0m
[47m[30m ▀ ██▄▄▄██▀█▀▄    ▄▄▄▀  ▀█▄▀▄█▀█▀ █ █▀▄▀ ▀▄▀█▀█▄█▄ ▀█▀██▄▀▄▀█▄ [0m
[47m[30m ███▄▀ ▄█▀ ▀██▄▀  ▀ ▀ █  ▄█▄▀██▄▄██  ██▀ ▀▄██▄▄ ▀▄ ▄███▄▄███   [0m
[47m[30m ▄▄▄▄▄▄▄ █▄▄▀█ ▄ █▄ ▀▄▀▄ █ ▀ █ ▄ ███▀█  ▀█▄▀▄ ▀██▀▀▄▄█ ▄ ██▀▄▄ [0m
[47m[30m █ ▄▄▄ █ █▄ ▀▀█ ██▄▀█  ██▀▀▀██▄▄▄█▀█▀█▄██▄▄█▄▀▄█▄▄▀█▄█▄▄▄█  ▀█ [0m
[47m[30m █ ███ █ ▀█▀ ▀ ▀ ▀█▀ ▄▀▀▄█▀▄█ ▀▀▀█ ███▄▀█▀█▀▀█▀▀▄▀▀█  ▄▄ ▄█ ▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄██▄▄▀▄█▀█ ██▀▀▀▄█▄▀██▀ ▄▀█▀▄▀█▀▄▀█ ▄▀█▀███▄▀ ▀▀▄██▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T10:20:01: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-19T10:20:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:02: 🔄 Connecting to WhatsApp...
2025-09-19T10:20:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:03: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:03: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:03: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:03: [10:20:03 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:03: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:03: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:03: [INFO] Stopped polling
2025-09-19T10:20:03: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:03: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:03: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:03: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:03: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:03: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:03: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:03: [INFO] Stopped polling
2025-09-19T10:20:03: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:03: 🔌 WhatsApp client disconnected
2025-09-19T10:20:03: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:04: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T10:20:04: [47m[30m ▄▄▄▄▄▄▄ ▄ ▄       ▄ ▄ ▄▄    ▄  ▄    ▄  ▄ ▄▄▄   ▄▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▀ ▀█▄▄▀▄█ █▄   ▄█▄█▄▀█▀ ▀▄▀▄▄▀ ▀ █ ██▀▀█ █▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▀▄█▀▄▄█▄▀▀█▄▄▄ █▄█ ██▄▄▄▄ ▀ ▀█▄▀  ▀█ ▄ ▀███▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█▀▄ ▄▀▄▀▄ █▀█ █▀▄ █ ▄ █▀▄▀▄▀▄ █ ▄▀▄ ▄▀▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄ ▄▄▄▀█▀▀ █  ▄█ █ ▀█ ▄▀▀██▄▄▄█ ▀▄   █▄▀█ ▀▀▀█▀▀█▀▄ ▄  ▄ ▄▄ [0m
[47m[30m █▄▀  ▄▄▄▀▀█▄▄██▄▄▄▄▀ █▀ ███▀ ▀▀▄█ ▄▄█▀  ▄█▀▄  ▄▄ █   ▀▀ ▄ ▄█  [0m
[47m[30m  ▄▄█▀ ▄█▄▄█▄▀█▀ ▄█▄▄ █▀▄█▄ ▀█▀ ▀▄  ██▀▀ ▀▄ █▀▀ ▄▄ ▀▄▄▄▄▄ ██▀█ [0m
[47m[30m   █ █▄▄ █▀█ █▄▀▄██▀  ▀█▄▀▀▀▄ ▄ ▀▀▀ ▄▀██▄▀ ▄  ▀ ▄ █▀▀  ▄▄▄█ ▄  [0m
[47m[30m █▄▄▀▀█▄█ ▄▄▄█▀ ▄ ▀█▀▄ ▀▄▀▄▄█▄█▀ ▄▄   ▄▀▄   ██▄▄  ▀▀▀ ▄▀██ ▄▀▀ [0m
[47m[30m ▄█ ▀ █▄▀█▀█▀   ██ ▀█▄  ▄▄▀  ▄▄ ▄▀▀█▄▀▄▄▄ ▀    █▄▄█▄█▀▄ ▀▄▄█▀█ [0m
[47m[30m ▄ ▀▄▄ ▄▀█  ▀█  ▀ █▄█▀▄█ ▀█▀█▄█▄▄▀▀ █ ▄█▀█▀█   ▀▄ █▀▄▀▀█▀▀▀▄▄▄ [0m
[47m[30m ▄▄▀▀▀█▄ ▄▄▀▀█▄▀▀▄ ▀▀   ▀█▀▄█▀█▄█▄█▄▀█▀▄█▀██▀▀▄▄ ▀▄ ▄ █▀▀▀▀  ▀ [0m
[47m[30m ▄█ ▄▀▀▄█▄    ▀ █▀ ▄██▄▀███▀ ▀▀█ ▄▀ ▄▄▀▀▀ ▄▄█ ███▄ █▄▀█ █▀█▀█  [0m
[47m[30m ▄▄▄█▄ ▄▀ ██  ▀▄█▄▄  ▄█▀█ ▄ ▄▄ ▀ █ ▄▀▀▀█▄▀  ██▄ ██ █▀▄█▄ ▀██ ▀ [0m
[47m[30m ▀▀█▄██▄▄▄▀ █ ▄█▄ ▀██▀▀  █▀▄▄▄██▄█▀▀█ ██▄▀▀█▄██▀ ▀   █▄▄██▀▄█▄ [0m
[47m[30m ▄▀▄██ ▄ █ ▀▀▄█ ▄ ▄█▄▄██▀ ▄▀▀█ ▄ █ ██▄▀▄█▀▄ █ ▀▀ ██▄ █ ▄ ███▄█ [0m
[47m[30m  █▄▀█▄▄▄█ █  ▀ █▄▀▄▄ █▄█▀█▀ █▄▄▄█   ▀▄█▄▄▀█    ▄ █▄ █▄▄▄█▀ █▀ [0m
[47m[30m  ▄▀   ▄ ▄ ▀█▄  ██▄███▄▀▀▀▀█ ████▀█▄ ▀▄ █▀█▀█▄█▄ ██▄█▄ ▀▀ ▀▄▀  [0m
[47m[30m █▄█▄  ▄▄ ▄▀▀▄▄▄▄█ ▀███▄▄▀▄ █▀▄▄ ▄  ▄█▀  ▀▄██ ▄▀▀█▀ ██▀   █▀ ▄ [0m
[47m[30m ▄▄ █ █▄▄▀▄▄▄█▀▀▀█  ▄██▀█  █▀█▄▀  ▀ ▄ ██▀█   ▀█ ▀▄▀▀ ▄▄ ██ ▄██ [0m
[47m[30m █▀█▄▀ ▄▀█ ▄ ▀▀█▀█▀  ██▄▄▀▄▀▄█  █ ▀▄  ▄▄█ ▄▄▄█  ▀ ▀  ██ █▄  ▄▀ [0m
[47m[30m ▀▀ ▀▄ ▄▀ ▀▀▄ ▀▀▄█▄█ ▀▄ ▀▀█▄█ █ █ █▀▄▀▄ ▄█▀▄▀▀█▀ ▀▀▄▄█▄█ ▄▄ ▄▄ [0m
[47m[30m  █▄▀ ▄▄▀▀█ ▀ ▀█ ▄▄█▄▀▀█▄██ █▄  ▀█▀▀ ▀ █▄▄▀▄█ █ █▀▄█ ▀█ ▄██▄▀▀ [0m
[47m[30m ███▀ ▀▄ ▀▄█ █▄  ▄ ▀▄▀▀▄█▀▄██▀▄ █  ▀▄▄▀ ▀▀▄█   ▄█ █ ▀▀▀▀   ▀▄  [0m
[47m[30m ▀ ▀ ██▄▀█▄▄█▄▄▀▄ ▄  ▀▀ ▀▄▄▀▀ ▀▄ ▄▀▀▀████ ▄▄█▀▄▄▄▄  ▄ ▀█ ▀ █▄█ [0m
[47m[30m ▀ █▄██▄▀█▀▀██ ▄█▄▀▀▄▄█▄   ▄▀█▄   ▀▄▄  █▄▄█▄▀█▀▄▄▀▀█▄ ▄ ▀▀▄█ ▀ [0m
[47m[30m ███▄▀ ▄▀ █ ▀▄▀ ▄ ▄▀█▄█ █ ▀▄████▄▄█▀ ▀▄▄▄ ▀ ▀█▀  ▀█  █▄██▄ ▄█  [0m
[47m[30m ▄▄▄▄▄▄▄ █ █ ▀▄█ █▄▄▀  ▄█ ▀█ █ ▄ █ █ █▄▄▄▀▀  ▄█▀▀   ▀█ ▄ █▀▀██ [0m
[47m[30m █ ▄▄▄ █ ▀▄▀▄▀██▀█▀ ▄    ▀▀ ▀█▄▄▄█▄▀▄  ▄█▄█ █  ▄█ ▄█▄█▄▄▄█▀ ▄█ [0m
[47m[30m █ ███ █ █ ▄▀▄▀▄▀▀ ▀ ▀█ ▀█▀▄▄ ▀▀▀▄█▄▀██▄▄██▀ █▄   █ █ ▀▀▀███▄▀ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▀▀▀ ██▀▀██ ██▄█    █▄█  █▄▄▀█  ▀▀▄▀▀██▄███▀▀ ▀▄ █▄▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T10:20:04: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-19T10:20:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:04: 🔄 Connecting to WhatsApp...
2025-09-19T10:20:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:05: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:05: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:05: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:05: [10:20:05 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:05: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:05: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:05: [INFO] Stopped polling
2025-09-19T10:20:05: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:05: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:05: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:05: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:05: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:05: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:05: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:05: [INFO] Stopped polling
2025-09-19T10:20:05: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:05: 🔌 WhatsApp client disconnected
2025-09-19T10:20:05: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:06: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T10:20:06: [47m[30m ▄▄▄▄▄▄▄    ▄▄ ▄  ▄ ▄ ▄      ▄  ▄ ▄ ▄   ▄ ▄▄ ▄      ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄▀   ▄▀██▀▀   ▀▄▀ ▀█ █▄ ▄█▄ █▀▀▀  ▀  █ ▀ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ███▄▀▄▄▀█▄▄▀▀█ ▀▀▀  ██▄▄▄█  ▀█  ▄▄██   █▀▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ █▀▄ ▄▀▄ █ ▄ █▀▄▀█ ▄ █ █▀█▀█ █ ▄ ▄▀▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▄▄█  ▀  ██▄ ██▄ ▄ ▄█▄▄▄█▄ ██ ▀  ██▀▀▀ ▄▄██▀▄ ▄▄▄▄▄   [0m
[47m[30m  ▀▀ ▄ ▄█  ▄▀▄▄ ▄▄▄ ▀▀▄▀ ▀█   ▀██ ▀▄▄▀▀▄▄ ▀▀▄█▄▄█▀▄▄▀▄▄▀█▄▀ ▀▄ [0m
[47m[30m ▄▄█▄▄▀▄ ▀▄▀█▀▄█ ██▀▀██▄▀▄█  ▄▀▀▀▄  ▄█▀▄   ▄▄  █▀▄▀  ▄ ▄█ ▀▄▀▀ [0m
[47m[30m ▄▀▀▀▄█▄ ▄▄▄ █▄▀   █▀ █▄▄█  ▀ ▀▄▄ ▄ ▄▄█▄█▀█▀▀▀▀▄ ▄█▄▄ ▄▀▄ ▄ ▄▄ [0m
[47m[30m ▀▄▀█ █▄ ██ ▀▀ ▄██▄█▀█▀▀ █▄▀▄ █▀ ▄█▄▀▄▀ ▀▀█ ▄  █▄█▄▄▄ ▄██▀▄  ▀ [0m
[47m[30m ▀ ▀▀▄▀▄███▄█▀▀▄▀▄ ▄ ▀▀  ▀ ▀▀█▄▄▄▀▀▄ ██ ▄▀▀▀▀▄ ▄█▄█ ▄ ▀▀ ▄█▄▀▄ [0m
[47m[30m ▀█ █▀▄▄▄ ▄ ██▄▄▄▄▄   ██▀█▀   ▄▀██▄▄▄█▀▄▀▀█▀█ █▄██ ▄██▀▀▄▀▄ █▀ [0m
[47m[30m ▄▄█▀█▄▄ ▄█▀▀    ▀▄▀██▀▀██▀▄▀ ▀ ▄   ▀▄█▄ █▀▀▄ ▄▄ ██ █▄████▀ ▄▄ [0m
[47m[30m █▀▄▄▀ ▄▄▄▀▄▄█▀█▀  ▀▀ ▀ ▄▄█ ▀ ▀▄▀█ ▀█▄█▄▀  ▄█ ▀▀▄▄▀ ▀██▀█▀▄▄█▄ [0m
[47m[30m ▀  ▀  ▄▄ ▀ ▀▀▀  █▀█ █▀█▄█▀█▀▄▄█▄▄█ ▄█▀ ▄▀██▀ ▄▄  ▄▄▄ █▀ ▀ ▀██ [0m
[47m[30m ▀█ █▄█▄▄▄ █▄    █ ▀▄  ▄ ▀█ ▀▄▄█▄██ ▄▄▀ ▀ ▄█▄ ▄▀▄█▄ ▄▄▄▄▄▄█▄▀█ [0m
[47m[30m  ▄▀▄█ ▄ ██▀ █ █▄▀▄▄▄▄▀ ▀▀ ▄██ ▄ █▀▄▀▀▀▄▀ ▀█▀▄█▄▄██ ▀█ ▄ ██▀▄█ [0m
[47m[30m ▄ █▄█▄▄▄█▄█▄▀ ▄▄█▀▄▀▄▀▄  ▀ ▀█▄▄▄█▄▄▀▄▀▄▄▀ ▀▄▀█▄▀▄█▄██▄▄▄██▄   [0m
[47m[30m ▄▄█ ▀ ▄ █ █▀█ ▄ █▄▀▀▄▄ █▀▀█▄██ ██  ▀ ▀▄▄▀▄▀█ ▄  ▀▀▄▄▄▄██ █▀██ [0m
[47m[30m ▄  ▀▄▄▄▄▀▄▄▀▀   ██ ▄ ▀█▄▀█  █▄██ █▀███▄▄▀█▀▄▀██▄█ ██▀▀ ▄█▄ ██ [0m
[47m[30m ▀ ▄▄▀▄▄▄▀█▀▄█ ██▄▄ █ ▀▀██▄▄▄  ▀ █▀▄▄██▄██▄▀ ▀   ▀█   ▄█▄▄█ ▄  [0m
[47m[30m ▄▄▄▄ ▄▄ ▄ ▀███▀█▀▄█    ▀█▄█▀█ ▄█   ▄▄  █▀▀ ▀▀▄ █▄▀ ▄█▄█     █ [0m
[47m[30m ██  ▀▀▄█▄█▄▀▀ ▀▄▄ ▄ ▀ ▀▀   ▄▀▄  █▀▄▀▄▀ ▄▀██▄▀▄▄▀▄█  █▄██ ▀█▄▄ [0m
[47m[30m █▄  ██▄▄▀▄ ▄ ▄▄▄▄██▄▀  █▄▀ ▄ ▀██▄▄█▄█▀█▀▀▄▀▄ ▄ ▄▄▄▀▄█  ▀▄▄ ▄▄ [0m
[47m[30m ▀█▄ █▄▄▀ ▀ ▄█▄▀ ▄▀ ▄█▀▀██▀█▀▀ ▄ █▄▀▄▄▀▄▄██▀██    ▀▄▄█▀█▀▄▄▀▄█ [0m
[47m[30m ▄▀▄  ▀▄ ██ ▄█▀ █ █ ▀▀▄██▄█▀ █▀█▄▄▄▄▄█ ▄▀ ▀▀█ ▀█▀▄ ▀▄▄▄▄█▄▄▄▄▀ [0m
[47m[30m ▀▀▄▄██▄█  ▄█▀█  ▄▀  ▄▄▄▀█▄▄▄▀██▄ ▄ ▄██  ▀▀▀ ▀▄ ▀▀█  ▀▄▄█▄▀█▄▄ [0m
[47m[30m ███▄▀ ▄▄ ▄▄█▄▄▀▄▄██▀ █ █ ▀ ▀██▄▄▄█▄▄█▄▄▀▀▀▀▄ █▀██▀█▄█▄▄█▄ ▄▀▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀ ▄ ▄ ▄▄▀ █▀▄  █▀▄▀▀█ ▄ █▄▄▀██▄█▀▀█ █▄  ▄▄▄▄█ ▄ ████▄ [0m
[47m[30m █ ▄▄▄ █ █▀███▀▀▀█▀▄▀  ▄▀██▀██▄▄▄█  ▀▄█ ▀ ███▀▄▄█▄ ▀▄█▄▄▄█▀▄▀  [0m
[47m[30m █ ███ █ █ ▄▀███▀▀█▄▀▀▄ ▀▀   █▄▀▀ ▄▄▀▄▄▄ ▀▀▀▀ ▄▄▀ ▀   ▄█▀▀█▄ █ [0m
[47m[30m █▄▄▄▄▄█ ▄█▄ ▄█▄▄  ▄█  ▀██▀ ▀▀ ▀█▀▀▀█▄█▀▀ █▀▀▀█▀▀▄ █▀▄▀█ █▄ ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T10:20:06: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\qr-code.png
2025-09-19T10:20:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:07: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:07: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:07: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:07: [10:20:07 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:07: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:07: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:07: [INFO] Stopped polling
2025-09-19T10:20:07: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:07: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:07: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:07: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:07: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:07: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:07: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:07: [INFO] Stopped polling
2025-09-19T10:20:07: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:07: 🔌 WhatsApp client disconnected
2025-09-19T10:20:07: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:09: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:09: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:09: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:09: [10:20:09 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:09: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:09: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:09: [INFO] Stopped polling
2025-09-19T10:20:09: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:09: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:09: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:09: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:09: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:09: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:09: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:09: [INFO] Stopped polling
2025-09-19T10:20:09: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:09: 🔌 WhatsApp client disconnected
2025-09-19T10:20:09: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:11: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:11: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:11: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:11: [10:20:11 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:11: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:11: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:11: [INFO] Stopped polling
2025-09-19T10:20:11: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:11: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:11: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:11: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:11: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:11: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:11: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:11: [INFO] Stopped polling
2025-09-19T10:20:11: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:11: 🔌 WhatsApp client disconnected
2025-09-19T10:20:11: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:14: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:14: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:14: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:14: [10:20:14 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:14: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:14: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:14: [INFO] Stopped polling
2025-09-19T10:20:14: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:14: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:14: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:14: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:14: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:14: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:14: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:14: [INFO] Stopped polling
2025-09-19T10:20:14: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:14: 🔌 WhatsApp client disconnected
2025-09-19T10:20:14: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:16: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:16: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:16: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:16: [10:20:16 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:16: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:16: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:16: [INFO] Stopped polling
2025-09-19T10:20:16: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:16: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:16: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:16: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:16: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:16: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:16: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:16: [INFO] Stopped polling
2025-09-19T10:20:16: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:16: 🔌 WhatsApp client disconnected
2025-09-19T10:20:16: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:18: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:18: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:18: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:18: [10:20:18 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:18: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:18: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:18: [INFO] Stopped polling
2025-09-19T10:20:18: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:18: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:18: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:18: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:18: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:18: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:18: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:18: [INFO] Stopped polling
2025-09-19T10:20:18: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:18: 🔌 WhatsApp client disconnected
2025-09-19T10:20:18: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:20: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:20: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:20: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:20: [10:20:20 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:20: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:20: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:20: [INFO] Stopped polling
2025-09-19T10:20:20: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:20: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:20: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:20: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:20: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:20: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:20: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:20: [INFO] Stopped polling
2025-09-19T10:20:20: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:20: 🔌 WhatsApp client disconnected
2025-09-19T10:20:20: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:22: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:22: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:22: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:22: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:22: [10:20:22 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:22: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:22: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:22: [INFO] Stopped polling
2025-09-19T10:20:22: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:22: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:22: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:22: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:22: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:22: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:22: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:22: [INFO] Stopped polling
2025-09-19T10:20:22: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:22: 🔌 WhatsApp client disconnected
2025-09-19T10:20:22: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:24: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:24: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:24: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:24: [10:20:24 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:24: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:24: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:24: [INFO] Stopped polling
2025-09-19T10:20:24: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:24: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:24: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:24: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:24: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:24: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:24: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:24: [INFO] Stopped polling
2025-09-19T10:20:24: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:24: 🔌 WhatsApp client disconnected
2025-09-19T10:20:24: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:26: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:26: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:26: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:26: [10:20:26 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:26: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:26: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:26: [INFO] Stopped polling
2025-09-19T10:20:26: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:26: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:26: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:26: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:26: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:26: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:26: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:26: [INFO] Stopped polling
2025-09-19T10:20:26: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:26: 🔌 WhatsApp client disconnected
2025-09-19T10:20:26: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:28: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:28: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:28: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:28: [10:20:28 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:28: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:28: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:28: [INFO] Stopped polling
2025-09-19T10:20:28: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:28: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:28: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:28: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:28: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:28: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:28: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:28: [INFO] Stopped polling
2025-09-19T10:20:28: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:28: 🔌 WhatsApp client disconnected
2025-09-19T10:20:28: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:30: [INFO] ✅ Emergency recovery completed
2025-09-19T10:20:30: 🔄 Connecting to WhatsApp...
You have triggered an unhandledRejection, you may have forgotten to catch a Promise rejection:
TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:30: Unhandled Rejection at: Promise {
  <rejected> TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
} reason: TypeError: this.isKillSwitchActive is not a function
    at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
    at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48)
2025-09-19T10:20:30: [10:20:30 am] Unhandled Rejection: TypeError: this.isKillSwitchActive is not a function
2025-09-19T10:20:30: [ERROR] {
  err: TypeError: this.isKillSwitchActive is not a function
      at EnhancedSafetyManager.getSafetyStatus (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1215:44)
      at EnhancedWhatsAppClient.isHealthy (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:551:49)
      at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2318:48),
  stack: 'TypeError: this.isKillSwitchActive is not a function\n' +
    '    at EnhancedSafetyManager.getSafetyStatus (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-safety-manager.js:1215:44)\n' +
    '    at EnhancedWhatsAppClient.isHealthy (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\enhanced-whatsapp-client.js:551:49)\n' +
    '    at WhatsAppSheetBot.emergencyRecovery (C:\\Users\\gssai\\OneDrive\\Desktop\\Whatsapp-Moblie-Bot\\worker.js:2318:48)'
} CRITICAL: Unhandled Rejection
2025-09-19T10:20:30: [WARN] 🚨 Emergency recovery initiated...
2025-09-19T10:20:30: [INFO] Stopped polling
2025-09-19T10:20:30: 🔄 Shutting down Enhanced WhatsApp Client...
2025-09-19T10:20:30: 🔄 Shutting down Enhanced Safety Manager...
2025-09-19T10:20:30: Database close error: Error: SQLITE_MISUSE: Database is closed
    at C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1234:29
    at new Promise (<anonymous>)
    at EnhancedSafetyManager.shutdown (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-safety-manager.js:1233:23)
    at EnhancedWhatsAppClient.disconnect (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\enhanced-whatsapp-client.js:610:38)
    at EnhancedWhatsAppClient.restart (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\whatsapp-client.js:229:24)
    at WhatsAppSheetBot.emergencyRecovery (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2314:37)
    at process.<anonymous> (C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\worker.js:2295:18)
    at process.emit (node:events:531:35)
    at emitUnhandledRejection (node:internal/process/promises:252:13)
    at throwUnhandledRejectionsMode (node:internal/process/promises:388:19) {
  errno: 21,
  code: 'SQLITE_MISUSE'
}
2025-09-19T10:20:30: ✅ Enhanced Safety Manager shutdown complete
2025-09-19T10:20:30: 🔄 Duplicate Prevention Manager destroyed
2025-09-19T10:20:30: 🔌 Connection closed. Reason: undefined
2025-09-19T10:20:30: [WARN] WhatsApp disconnected, stopping polling...
2025-09-19T10:20:30: [INFO] Stopped polling
2025-09-19T10:20:30: ❌ Max reconnection attempts reached. Please restart the bot.
2025-09-19T10:20:30: 🔌 WhatsApp client disconnected
2025-09-19T10:20:30: ✅ Enhanced WhatsApp Client shutdown complete
2025-09-19T10:20:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:20:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:20:41: 📝 Loaded 12 template types
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257441094,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:20:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:20:41: ⏰ 4-minute startup delay active
2025-09-19T10:20:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:20:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:20:41: [INFO] Using PQueue for job processing
2025-09-19T10:20:41: [INFO] Memory management setup completed
2025-09-19T10:20:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:20:41: [INFO] Checking process locks...
2025-09-19T10:20:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:20:41: [INFO] Process locks acquired successfully
2025-09-19T10:20:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:20:41: [INFO] Logs directory created
2025-09-19T10:20:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:20:41: [10:20:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:20:41: [10:20:41 am] ✅ Google Sheets API initialized
2025-09-19T10:20:41: [INFO] Google Sheets helper initialized
2025-09-19T10:20:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:20:41: 🗑️ Deleted old log file: bot-2025-09-19T04-49-15-468Z.log
2025-09-19T10:20:41: 📝 Enhanced Logger initialized
2025-09-19T10:20:41: 📁 Loaded statistics from file
2025-09-19T10:20:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:20:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:20:41: 🔒 Process lock acquired (PID: 14000)
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14000
}
2025-09-19T10:20:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:20:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257441094, processId: 14000 },
  timestamp: 1758257441546
}
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257441094, willExpireAt: 1758257681094 },
  timestamp: 1758257441547
}
2025-09-19T10:20:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:20:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:20:41: 📋 Message rules loaded: 8 types
2025-09-19T10:20:41: ℹ️ [10:20:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 462,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:20:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:20:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:20:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:42: [INFO] WhatsApp client initialized
2025-09-19T10:20:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:20:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:20:48: 📝 Loaded 12 template types
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257448688,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10252,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:20:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:20:48: ⏰ 4-minute startup delay active
2025-09-19T10:20:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:20:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:20:48: [INFO] Using PQueue for job processing
2025-09-19T10:20:48: [INFO] Memory management setup completed
2025-09-19T10:20:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:20:48: [INFO] Checking process locks...
2025-09-19T10:20:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:20:48: [INFO] Process locks acquired successfully
2025-09-19T10:20:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:20:48: [INFO] Logs directory created
2025-09-19T10:20:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:20:48: [10:20:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:20:48: [10:20:48 am] ✅ Google Sheets API initialized
2025-09-19T10:20:48: [INFO] Google Sheets helper initialized
2025-09-19T10:20:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:20:48: 🗑️ Deleted old log file: bot-2025-09-19T04-49-18-656Z.log
2025-09-19T10:20:48: 📝 Enhanced Logger initialized
2025-09-19T10:20:48: 📁 Loaded statistics from file
2025-09-19T10:20:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:20:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:20:48: 🧹 Removed stale process lock
2025-09-19T10:20:48: 🔒 Process lock acquired (PID: 10252)
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10252
}
2025-09-19T10:20:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:20:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257448688, willExpireAt: 1758257688688 },
  timestamp: 1758257448959
}
2025-09-19T10:20:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:20:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:20:48: 📋 Message rules loaded: 8 types
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257448688, processId: 10252 },
  timestamp: 1758257448958
}
2025-09-19T10:20:48: ℹ️ [10:20:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 274,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:20:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:20:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:20:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:51: [INFO] WhatsApp client initialized
2025-09-19T10:20:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:20:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:20:54: 📝 Loaded 12 template types
2025-09-19T10:20:54: ℹ️ [10:20:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257454834,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8392,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:20:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:20:54: ⏰ 4-minute startup delay active
2025-09-19T10:20:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:20:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:20:54: [INFO] Using PQueue for job processing
2025-09-19T10:20:54: [INFO] Memory management setup completed
2025-09-19T10:20:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:20:54: [INFO] Checking process locks...
2025-09-19T10:20:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:20:54: ℹ️ [10:20:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:20:54: [INFO] Process locks acquired successfully
2025-09-19T10:20:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:20:54: [INFO] Logs directory created
2025-09-19T10:20:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:20:54: [10:20:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:20:54: [10:20:54 am] ✅ Google Sheets API initialized
2025-09-19T10:20:54: [INFO] Google Sheets helper initialized
2025-09-19T10:20:54: ℹ️ [10:20:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:20:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:20:55: 🗑️ Deleted old log file: bot-2025-09-19T04-49-21-937Z.log
2025-09-19T10:20:55: 📝 Enhanced Logger initialized
2025-09-19T10:20:55: 📁 Loaded statistics from file
2025-09-19T10:20:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:20:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:20:55: 🧹 Removed stale process lock
2025-09-19T10:20:55: 🔒 Process lock acquired (PID: 8392)
2025-09-19T10:20:55: ℹ️ [10:20:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8392
}
2025-09-19T10:20:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:20:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:20:55: ℹ️ [10:20:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257454834, processId: 8392 },
  timestamp: 1758257455128
}
2025-09-19T10:20:55: ℹ️ [10:20:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257454834, willExpireAt: 1758257694834 },
  timestamp: 1758257455128
}
2025-09-19T10:20:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:20:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:20:55: 📋 Message rules loaded: 8 types
2025-09-19T10:20:55: ℹ️ [10:20:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 298,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:20:56: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:20:56: [INFO] Initializing WhatsApp client...
2025-09-19T10:20:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:20:56: [INFO] WhatsApp client initialized
2025-09-19T10:20:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:20:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:20:59: 📝 Loaded 12 template types
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257459268,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17912,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:20:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:20:59: ⏰ 4-minute startup delay active
2025-09-19T10:20:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:20:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:20:59: [INFO] Using PQueue for job processing
2025-09-19T10:20:59: [INFO] Memory management setup completed
2025-09-19T10:20:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:20:59: [INFO] Checking process locks...
2025-09-19T10:20:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:20:59: [INFO] Process locks acquired successfully
2025-09-19T10:20:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:20:59: [INFO] Logs directory created
2025-09-19T10:20:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:20:59: [10:20:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:20:59: [10:20:59 am] ✅ Google Sheets API initialized
2025-09-19T10:20:59: [INFO] Google Sheets helper initialized
2025-09-19T10:20:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:20:59: 🗑️ Deleted old log file: bot-2025-09-19T04-49-25-804Z.log
2025-09-19T10:20:59: 📝 Enhanced Logger initialized
2025-09-19T10:20:59: 📁 Loaded statistics from file
2025-09-19T10:20:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:20:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:20:59: 🧹 Removed stale process lock
2025-09-19T10:20:59: 🔒 Process lock acquired (PID: 17912)
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17912
}
2025-09-19T10:20:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:20:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257459268, processId: 17912 },
  timestamp: 1758257459471
}
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257459268, willExpireAt: 1758257699268 },
  timestamp: 1758257459471
}
2025-09-19T10:20:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:20:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:20:59: 📋 Message rules loaded: 8 types
2025-09-19T10:20:59: ℹ️ [10:20:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 212,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:00: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:00: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:00: [INFO] WhatsApp client initialized
2025-09-19T10:21:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:03: 📝 Loaded 12 template types
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257463683,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:03: ⏰ 4-minute startup delay active
2025-09-19T10:21:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:03: [INFO] Using PQueue for job processing
2025-09-19T10:21:03: [INFO] Memory management setup completed
2025-09-19T10:21:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:03: [INFO] Checking process locks...
2025-09-19T10:21:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:03: [INFO] Process locks acquired successfully
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:03: [INFO] Logs directory created
2025-09-19T10:21:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:03: [10:21:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:03: [10:21:03 am] ✅ Google Sheets API initialized
2025-09-19T10:21:03: [INFO] Google Sheets helper initialized
2025-09-19T10:21:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:03: 🗑️ Deleted old log file: bot-2025-09-19T04-49-29-826Z.log
2025-09-19T10:21:03: 📝 Enhanced Logger initialized
2025-09-19T10:21:03: 📁 Loaded statistics from file
2025-09-19T10:21:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:03: 🧹 Removed stale process lock
2025-09-19T10:21:03: 🔒 Process lock acquired (PID: 9712)
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9712
}
2025-09-19T10:21:03: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:03: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257463683, processId: 9712 },
  timestamp: 1758257463932
}
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257463683, willExpireAt: 1758257703683 },
  timestamp: 1758257463933
}
2025-09-19T10:21:03: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:03: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:03: 📋 Message rules loaded: 8 types
2025-09-19T10:21:03: ℹ️ [10:21:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 255,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:04: [INFO] WhatsApp client initialized
2025-09-19T10:21:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:08: 📝 Loaded 12 template types
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257468053,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8796,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:08: ⏰ 4-minute startup delay active
2025-09-19T10:21:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:08: [INFO] Using PQueue for job processing
2025-09-19T10:21:08: [INFO] Memory management setup completed
2025-09-19T10:21:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:08: [INFO] Checking process locks...
2025-09-19T10:21:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:08: [INFO] Process locks acquired successfully
2025-09-19T10:21:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:08: [INFO] Logs directory created
2025-09-19T10:21:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:08: [10:21:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:08: [10:21:08 am] ✅ Google Sheets API initialized
2025-09-19T10:21:08: [INFO] Google Sheets helper initialized
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:08: 📁 Loaded statistics from file
2025-09-19T10:21:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:08: 🗑️ Deleted old log file: bot-2025-09-19T04-49-32-760Z.log
2025-09-19T10:21:08: 📝 Enhanced Logger initialized
2025-09-19T10:21:08: 🧹 Removed stale process lock
2025-09-19T10:21:08: 🔒 Process lock acquired (PID: 8796)
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8796
}
2025-09-19T10:21:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257468053, willExpireAt: 1758257708053 },
  timestamp: 1758257468334
}
2025-09-19T10:21:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:08: 📋 Message rules loaded: 8 types
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257468053, processId: 8796 },
  timestamp: 1758257468334
}
2025-09-19T10:21:08: ℹ️ [10:21:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 287,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:09: [INFO] WhatsApp client initialized
2025-09-19T10:21:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:11: 📝 Loaded 12 template types
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257471201,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16900,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:11: ⏰ 4-minute startup delay active
2025-09-19T10:21:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:11: [INFO] Using PQueue for job processing
2025-09-19T10:21:11: [INFO] Memory management setup completed
2025-09-19T10:21:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:11: [INFO] Checking process locks...
2025-09-19T10:21:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:11: [INFO] Process locks acquired successfully
2025-09-19T10:21:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:11: [INFO] Logs directory created
2025-09-19T10:21:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:11: [10:21:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:11: [10:21:11 am] ✅ Google Sheets API initialized
2025-09-19T10:21:11: [INFO] Google Sheets helper initialized
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:11: 🗑️ Deleted old log file: bot-2025-09-19T04-49-35-913Z.log
2025-09-19T10:21:11: 📝 Enhanced Logger initialized
2025-09-19T10:21:11: 📁 Loaded statistics from file
2025-09-19T10:21:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:11: 🧹 Removed stale process lock
2025-09-19T10:21:11: 🔒 Process lock acquired (PID: 16900)
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16900
}
2025-09-19T10:21:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257471201, processId: 16900 },
  timestamp: 1758257471426
}
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257471201, willExpireAt: 1758257711201 },
  timestamp: 1758257471427
}
2025-09-19T10:21:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:11: 📋 Message rules loaded: 8 types
2025-09-19T10:21:11: ℹ️ [10:21:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 229,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:12: [INFO] WhatsApp client initialized
2025-09-19T10:21:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:14: 📝 Loaded 12 template types
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257474269,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10744,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:14: ⏰ 4-minute startup delay active
2025-09-19T10:21:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:14: [INFO] Using PQueue for job processing
2025-09-19T10:21:14: [INFO] Memory management setup completed
2025-09-19T10:21:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:14: [INFO] Checking process locks...
2025-09-19T10:21:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:14: [INFO] Process locks acquired successfully
2025-09-19T10:21:14: [INFO] Logs directory created
2025-09-19T10:21:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:14: [10:21:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:14: [10:21:14 am] ✅ Google Sheets API initialized
2025-09-19T10:21:14: [INFO] Google Sheets helper initialized
2025-09-19T10:21:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:14: 📁 Loaded statistics from file
2025-09-19T10:21:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:14: 🗑️ Deleted old log file: bot-2025-09-19T04-49-39-318Z.log
2025-09-19T10:21:14: 📝 Enhanced Logger initialized
2025-09-19T10:21:14: 🧹 Removed stale process lock
2025-09-19T10:21:14: 🔒 Process lock acquired (PID: 10744)
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10744
}
2025-09-19T10:21:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257474269, processId: 10744 },
  timestamp: 1758257474396
}
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257474269, willExpireAt: 1758257714269 },
  timestamp: 1758257474396
}
2025-09-19T10:21:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:14: 📋 Message rules loaded: 8 types
2025-09-19T10:21:14: ℹ️ [10:21:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:15: [INFO] WhatsApp client initialized
2025-09-19T10:21:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:17: 📝 Loaded 12 template types
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257477432,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18244,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:17: ⏰ 4-minute startup delay active
2025-09-19T10:21:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:17: [INFO] Using PQueue for job processing
2025-09-19T10:21:17: [INFO] Memory management setup completed
2025-09-19T10:21:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:17: [INFO] Checking process locks...
2025-09-19T10:21:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:17: [INFO] Process locks acquired successfully
2025-09-19T10:21:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:17: [INFO] Logs directory created
2025-09-19T10:21:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:17: [10:21:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:17: [10:21:17 am] ✅ Google Sheets API initialized
2025-09-19T10:21:17: [INFO] Google Sheets helper initialized
2025-09-19T10:21:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:17: 🗑️ Deleted old log file: bot-2025-09-19T04-49-42-600Z.log
2025-09-19T10:21:17: 📝 Enhanced Logger initialized
2025-09-19T10:21:17: 📁 Loaded statistics from file
2025-09-19T10:21:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:17: 🧹 Removed stale process lock
2025-09-19T10:21:17: 🔒 Process lock acquired (PID: 18244)
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18244
}
2025-09-19T10:21:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257477432, processId: 18244 },
  timestamp: 1758257477584
}
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257477432, willExpireAt: 1758257717432 },
  timestamp: 1758257477584
}
2025-09-19T10:21:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:17: 📋 Message rules loaded: 8 types
2025-09-19T10:21:17: ℹ️ [10:21:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 156,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:18: [INFO] WhatsApp client initialized
2025-09-19T10:21:20: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:20: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:20: 📝 Loaded 12 template types
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257480646,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7288,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:20: ⏰ 4-minute startup delay active
2025-09-19T10:21:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:20: [INFO] Using PQueue for job processing
2025-09-19T10:21:20: [INFO] Memory management setup completed
2025-09-19T10:21:20: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:20: [INFO] Checking process locks...
2025-09-19T10:21:20: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:20: [INFO] Process locks acquired successfully
2025-09-19T10:21:20: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:20: [INFO] Logs directory created
2025-09-19T10:21:20: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:20: [10:21:20 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:20: [10:21:20 am] ✅ Google Sheets API initialized
2025-09-19T10:21:20: [INFO] Google Sheets helper initialized
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:20: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:20: 🗑️ Deleted old log file: bot-2025-09-19T04-49-46-547Z.log
2025-09-19T10:21:20: 📝 Enhanced Logger initialized
2025-09-19T10:21:20: 📁 Loaded statistics from file
2025-09-19T10:21:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:20: 🧹 Removed stale process lock
2025-09-19T10:21:20: 🔒 Process lock acquired (PID: 7288)
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7288
}
2025-09-19T10:21:20: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257480646, willExpireAt: 1758257720646 },
  timestamp: 1758257480769
}
2025-09-19T10:21:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:20: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:20: 📋 Message rules loaded: 8 types
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257480646, processId: 7288 },
  timestamp: 1758257480769
}
2025-09-19T10:21:20: ℹ️ [10:21:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:21: [INFO] WhatsApp client initialized
2025-09-19T10:21:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:23: 📝 Loaded 12 template types
2025-09-19T10:21:24: ℹ️ [10:21:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257483977,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16764,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:24: ⏰ 4-minute startup delay active
2025-09-19T10:21:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:24: [INFO] Using PQueue for job processing
2025-09-19T10:21:24: [INFO] Memory management setup completed
2025-09-19T10:21:24: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:24: [INFO] Checking process locks...
2025-09-19T10:21:24: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:24: ℹ️ [10:21:24 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:24: [INFO] Process locks acquired successfully
2025-09-19T10:21:24: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:24: [INFO] Logs directory created
2025-09-19T10:21:24: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:24: [10:21:24 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:24: [10:21:24 am] ✅ Google Sheets API initialized
2025-09-19T10:21:24: [INFO] Google Sheets helper initialized
2025-09-19T10:21:24: ℹ️ [10:21:24 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:24: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:24: 🗑️ Deleted old log file: bot-2025-09-19T04-49-52-167Z.log
2025-09-19T10:21:24: 📝 Enhanced Logger initialized
2025-09-19T10:21:24: 📁 Loaded statistics from file
2025-09-19T10:21:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:24: 🧹 Removed stale process lock
2025-09-19T10:21:24: 🔒 Process lock acquired (PID: 16764)
2025-09-19T10:21:24: ℹ️ [10:21:24 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16764
}
2025-09-19T10:21:24: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:24: ℹ️ [10:21:24 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257483977, processId: 16764 },
  timestamp: 1758257484118
}
2025-09-19T10:21:24: ℹ️ [10:21:24 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257483977, willExpireAt: 1758257723977 },
  timestamp: 1758257484118
}
2025-09-19T10:21:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:24: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:24: 📋 Message rules loaded: 8 types
2025-09-19T10:21:24: ℹ️ [10:21:24 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:25: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:25: [INFO] WhatsApp client initialized
2025-09-19T10:21:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:27: 📝 Loaded 12 template types
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257487306,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16596,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:27: ⏰ 4-minute startup delay active
2025-09-19T10:21:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:27: [INFO] Using PQueue for job processing
2025-09-19T10:21:27: [INFO] Memory management setup completed
2025-09-19T10:21:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:27: [INFO] Checking process locks...
2025-09-19T10:21:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:27: [INFO] Process locks acquired successfully
2025-09-19T10:21:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:27: [INFO] Logs directory created
2025-09-19T10:21:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:27: [10:21:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:27: [10:21:27 am] ✅ Google Sheets API initialized
2025-09-19T10:21:27: [INFO] Google Sheets helper initialized
2025-09-19T10:21:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:27: 🗑️ Deleted old log file: bot-2025-09-19T04-50-41-288Z.log
2025-09-19T10:21:27: 📝 Enhanced Logger initialized
2025-09-19T10:21:27: 📁 Loaded statistics from file
2025-09-19T10:21:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:27: 🧹 Removed stale process lock
2025-09-19T10:21:27: 🔒 Process lock acquired (PID: 16596)
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16596
}
2025-09-19T10:21:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257487306, processId: 16596 },
  timestamp: 1758257487456
}
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257487306, willExpireAt: 1758257727306 },
  timestamp: 1758257487456
}
2025-09-19T10:21:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:27: 📋 Message rules loaded: 8 types
2025-09-19T10:21:27: ℹ️ [10:21:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 153,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:28: [INFO] WhatsApp client initialized
2025-09-19T10:21:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:30: 📝 Loaded 12 template types
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257490464,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3144,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:30: ⏰ 4-minute startup delay active
2025-09-19T10:21:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:30: [INFO] Using PQueue for job processing
2025-09-19T10:21:30: [INFO] Memory management setup completed
2025-09-19T10:21:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:30: [INFO] Checking process locks...
2025-09-19T10:21:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:30: [INFO] Process locks acquired successfully
2025-09-19T10:21:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:30: [INFO] Logs directory created
2025-09-19T10:21:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:30: [10:21:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:30: [10:21:30 am] ✅ Google Sheets API initialized
2025-09-19T10:21:30: [INFO] Google Sheets helper initialized
2025-09-19T10:21:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:30: 🗑️ Deleted old log file: bot-2025-09-19T04-50-48-767Z.log
2025-09-19T10:21:30: 📝 Enhanced Logger initialized
2025-09-19T10:21:30: 📁 Loaded statistics from file
2025-09-19T10:21:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:30: 🧹 Removed stale process lock
2025-09-19T10:21:30: 🔒 Process lock acquired (PID: 3144)
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3144
}
2025-09-19T10:21:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257490464, willExpireAt: 1758257730464 },
  timestamp: 1758257490591
}
2025-09-19T10:21:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:30: 📋 Message rules loaded: 8 types
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257490464, processId: 3144 },
  timestamp: 1758257490591
}
2025-09-19T10:21:30: ℹ️ [10:21:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:31: [INFO] WhatsApp client initialized
2025-09-19T10:21:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:33: 📝 Loaded 12 template types
2025-09-19T10:21:33: ℹ️ [10:21:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257493860,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3292,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:33: ⏰ 4-minute startup delay active
2025-09-19T10:21:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:33: [INFO] Using PQueue for job processing
2025-09-19T10:21:33: [INFO] Memory management setup completed
2025-09-19T10:21:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:33: [INFO] Checking process locks...
2025-09-19T10:21:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:33: ℹ️ [10:21:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:33: [INFO] Process locks acquired successfully
2025-09-19T10:21:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:33: [INFO] Logs directory created
2025-09-19T10:21:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:33: [10:21:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:33: [10:21:33 am] ✅ Google Sheets API initialized
2025-09-19T10:21:33: [INFO] Google Sheets helper initialized
2025-09-19T10:21:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:34: ℹ️ [10:21:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:34: 🗑️ Deleted old log file: bot-2025-09-19T04-50-54-910Z.log
2025-09-19T10:21:34: 📝 Enhanced Logger initialized
2025-09-19T10:21:34: 📁 Loaded statistics from file
2025-09-19T10:21:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:34: 🧹 Removed stale process lock
2025-09-19T10:21:34: 🔒 Process lock acquired (PID: 3292)
2025-09-19T10:21:34: ℹ️ [10:21:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3292
}
2025-09-19T10:21:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:34: ℹ️ [10:21:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257493860, willExpireAt: 1758257733860 },
  timestamp: 1758257494033
}
2025-09-19T10:21:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:34: 📋 Message rules loaded: 8 types
2025-09-19T10:21:34: ℹ️ [10:21:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257493860, processId: 3292 },
  timestamp: 1758257494033
}
2025-09-19T10:21:34: ℹ️ [10:21:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 177,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:35: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:35: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:35: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:35: [INFO] WhatsApp client initialized
2025-09-19T10:21:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:38: 📝 Loaded 12 template types
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257498591,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 344,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:38: ⏰ 4-minute startup delay active
2025-09-19T10:21:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:38: [INFO] Using PQueue for job processing
2025-09-19T10:21:38: [INFO] Memory management setup completed
2025-09-19T10:21:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:38: [INFO] Checking process locks...
2025-09-19T10:21:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:38: [INFO] Process locks acquired successfully
2025-09-19T10:21:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:38: [INFO] Logs directory created
2025-09-19T10:21:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:38: [10:21:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:38: [10:21:38 am] ✅ Google Sheets API initialized
2025-09-19T10:21:38: [INFO] Google Sheets helper initialized
2025-09-19T10:21:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:38: 🗑️ Deleted old log file: bot-2025-09-19T04-50-59-320Z.log
2025-09-19T10:21:38: 📝 Enhanced Logger initialized
2025-09-19T10:21:38: 📁 Loaded statistics from file
2025-09-19T10:21:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:38: 🧹 Removed stale process lock
2025-09-19T10:21:38: 🔒 Process lock acquired (PID: 344)
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 344
}
2025-09-19T10:21:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257498591, processId: 344 },
  timestamp: 1758257498793
}
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257498591, willExpireAt: 1758257738591 },
  timestamp: 1758257498793
}
2025-09-19T10:21:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:38: 📋 Message rules loaded: 8 types
2025-09-19T10:21:38: ℹ️ [10:21:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 206,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:39: [INFO] WhatsApp client initialized
2025-09-19T10:21:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:42: 📝 Loaded 12 template types
2025-09-19T10:21:42: ℹ️ [10:21:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257502659,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7332,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:42: ⏰ 4-minute startup delay active
2025-09-19T10:21:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:42: [INFO] Using PQueue for job processing
2025-09-19T10:21:42: [INFO] Memory management setup completed
2025-09-19T10:21:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:42: [INFO] Checking process locks...
2025-09-19T10:21:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:42: ℹ️ [10:21:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:42: [INFO] Process locks acquired successfully
2025-09-19T10:21:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:42: [INFO] Logs directory created
2025-09-19T10:21:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:42: [10:21:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:42: [10:21:42 am] ✅ Google Sheets API initialized
2025-09-19T10:21:42: [INFO] Google Sheets helper initialized
2025-09-19T10:21:42: ℹ️ [10:21:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:42: 🗑️ Deleted old log file: bot-2025-09-19T04-51-03-744Z.log
2025-09-19T10:21:42: 📝 Enhanced Logger initialized
2025-09-19T10:21:42: 📁 Loaded statistics from file
2025-09-19T10:21:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:42: 🧹 Removed stale process lock
2025-09-19T10:21:42: 🔒 Process lock acquired (PID: 7332)
2025-09-19T10:21:42: ℹ️ [10:21:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7332
}
2025-09-19T10:21:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:42: ℹ️ [10:21:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257502659, processId: 7332 },
  timestamp: 1758257502996
}
2025-09-19T10:21:43: ℹ️ [10:21:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257502659, willExpireAt: 1758257742659 },
  timestamp: 1758257502997
}
2025-09-19T10:21:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:43: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:43: 📋 Message rules loaded: 8 types
2025-09-19T10:21:43: ℹ️ [10:21:43 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 341,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:44: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:44: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:44: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:44: [INFO] WhatsApp client initialized
2025-09-19T10:21:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:47: 📝 Loaded 12 template types
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257507361,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8368,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:47: ⏰ 4-minute startup delay active
2025-09-19T10:21:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:47: [INFO] Using PQueue for job processing
2025-09-19T10:21:47: [INFO] Memory management setup completed
2025-09-19T10:21:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:47: [INFO] Checking process locks...
2025-09-19T10:21:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:47: [INFO] Process locks acquired successfully
2025-09-19T10:21:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:47: [INFO] Logs directory created
2025-09-19T10:21:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:47: [10:21:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:47: [10:21:47 am] ✅ Google Sheets API initialized
2025-09-19T10:21:47: [INFO] Google Sheets helper initialized
2025-09-19T10:21:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:47: 🗑️ Deleted old log file: bot-2025-09-19T04-51-08-132Z.log
2025-09-19T10:21:47: 📝 Enhanced Logger initialized
2025-09-19T10:21:47: 📁 Loaded statistics from file
2025-09-19T10:21:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:47: 🧹 Removed stale process lock
2025-09-19T10:21:47: 🔒 Process lock acquired (PID: 8368)
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8368
}
2025-09-19T10:21:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257507361, processId: 8368 },
  timestamp: 1758257507540
}
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257507361, willExpireAt: 1758257747361 },
  timestamp: 1758257507541
}
2025-09-19T10:21:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:47: 📋 Message rules loaded: 8 types
2025-09-19T10:21:47: ℹ️ [10:21:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 185,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:48: [INFO] WhatsApp client initialized
2025-09-19T10:21:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:52: 📝 Loaded 12 template types
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257512775,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9860,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:52: ⏰ 4-minute startup delay active
2025-09-19T10:21:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:52: [INFO] Using PQueue for job processing
2025-09-19T10:21:52: [INFO] Memory management setup completed
2025-09-19T10:21:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:52: [INFO] Checking process locks...
2025-09-19T10:21:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:52: [INFO] Process locks acquired successfully
2025-09-19T10:21:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:52: [INFO] Logs directory created
2025-09-19T10:21:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:52: [10:21:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:52: [10:21:52 am] ✅ Google Sheets API initialized
2025-09-19T10:21:52: [INFO] Google Sheets helper initialized
2025-09-19T10:21:52: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:52: 🗑️ Deleted old log file: bot-2025-09-19T04-51-11-261Z.log
2025-09-19T10:21:52: 📝 Enhanced Logger initialized
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:52: 📁 Loaded statistics from file
2025-09-19T10:21:52: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:52: 🧹 Removed stale process lock
2025-09-19T10:21:52: 🔒 Process lock acquired (PID: 9860)
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9860
}
2025-09-19T10:21:52: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:52: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257512775, willExpireAt: 1758257752775 },
  timestamp: 1758257512913
}
2025-09-19T10:21:52: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:52: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:52: 📋 Message rules loaded: 8 types
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257512775, processId: 9860 },
  timestamp: 1758257512913
}
2025-09-19T10:21:52: ℹ️ [10:21:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:53: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:54: [INFO] WhatsApp client initialized
2025-09-19T10:21:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:56: 📝 Loaded 12 template types
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257516238,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11624,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:56: ⏰ 4-minute startup delay active
2025-09-19T10:21:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:56: [INFO] Using PQueue for job processing
2025-09-19T10:21:56: [INFO] Memory management setup completed
2025-09-19T10:21:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:56: [INFO] Checking process locks...
2025-09-19T10:21:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:56: [INFO] Process locks acquired successfully
2025-09-19T10:21:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:56: [INFO] Logs directory created
2025-09-19T10:21:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:56: [10:21:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:56: [10:21:56 am] ✅ Google Sheets API initialized
2025-09-19T10:21:56: [INFO] Google Sheets helper initialized
2025-09-19T10:21:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:56: 🗑️ Deleted old log file: bot-2025-09-19T04-51-14-308Z.log
2025-09-19T10:21:56: 📝 Enhanced Logger initialized
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:56: 📁 Loaded statistics from file
2025-09-19T10:21:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:56: 🧹 Removed stale process lock
2025-09-19T10:21:56: 🔒 Process lock acquired (PID: 11624)
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11624
}
2025-09-19T10:21:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257516238, processId: 11624 },
  timestamp: 1758257516379
}
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257516238, willExpireAt: 1758257756238 },
  timestamp: 1758257516379
}
2025-09-19T10:21:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:56: 📋 Message rules loaded: 8 types
2025-09-19T10:21:56: ℹ️ [10:21:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 144,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:21:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:21:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:21:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:21:57: [INFO] WhatsApp client initialized
2025-09-19T10:21:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:21:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:21:59: 📝 Loaded 12 template types
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257519780,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11516,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:21:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:21:59: ⏰ 4-minute startup delay active
2025-09-19T10:21:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:21:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:21:59: [INFO] Using PQueue for job processing
2025-09-19T10:21:59: [INFO] Memory management setup completed
2025-09-19T10:21:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:21:59: [INFO] Checking process locks...
2025-09-19T10:21:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:21:59: [INFO] Process locks acquired successfully
2025-09-19T10:21:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:21:59: [INFO] Logs directory created
2025-09-19T10:21:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:21:59: [10:21:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:21:59: [10:21:59 am] ✅ Google Sheets API initialized
2025-09-19T10:21:59: [INFO] Google Sheets helper initialized
2025-09-19T10:21:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:21:59: 🗑️ Deleted old log file: bot-2025-09-19T04-51-17-473Z.log
2025-09-19T10:21:59: 📝 Enhanced Logger initialized
2025-09-19T10:21:59: 📁 Loaded statistics from file
2025-09-19T10:21:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:21:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:21:59: 🧹 Removed stale process lock
2025-09-19T10:21:59: 🔒 Process lock acquired (PID: 11516)
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11516
}
2025-09-19T10:21:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:21:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257519780, processId: 11516 },
  timestamp: 1758257519930
}
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257519780, willExpireAt: 1758257759780 },
  timestamp: 1758257519931
}
2025-09-19T10:21:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:21:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:21:59: 📋 Message rules loaded: 8 types
2025-09-19T10:21:59: ℹ️ [10:21:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 153,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:01: [INFO] WhatsApp client initialized
2025-09-19T10:22:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:03: 📝 Loaded 12 template types
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257523255,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:03: ⏰ 4-minute startup delay active
2025-09-19T10:22:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:03: [INFO] Using PQueue for job processing
2025-09-19T10:22:03: [INFO] Memory management setup completed
2025-09-19T10:22:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:03: [INFO] Checking process locks...
2025-09-19T10:22:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:03: [INFO] Process locks acquired successfully
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:03: [INFO] Logs directory created
2025-09-19T10:22:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:03: [10:22:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:03: [10:22:03 am] ✅ Google Sheets API initialized
2025-09-19T10:22:03: [INFO] Google Sheets helper initialized
2025-09-19T10:22:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:03: 🗑️ Deleted old log file: bot-2025-09-19T04-51-20-679Z.log
2025-09-19T10:22:03: 📝 Enhanced Logger initialized
2025-09-19T10:22:03: 📁 Loaded statistics from file
2025-09-19T10:22:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:03: 🧹 Removed stale process lock
2025-09-19T10:22:03: 🔒 Process lock acquired (PID: 17720)
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17720
}
2025-09-19T10:22:03: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:03: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257523255, processId: 17720 },
  timestamp: 1758257523389
}
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257523255, willExpireAt: 1758257763255 },
  timestamp: 1758257523389
}
2025-09-19T10:22:03: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:03: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:03: 📋 Message rules loaded: 8 types
2025-09-19T10:22:03: ℹ️ [10:22:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 137,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:04: [INFO] WhatsApp client initialized
2025-09-19T10:22:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:06: 📝 Loaded 12 template types
2025-09-19T10:22:06: ℹ️ [10:22:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257526841,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16516,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:06: ⏰ 4-minute startup delay active
2025-09-19T10:22:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:06: [INFO] Using PQueue for job processing
2025-09-19T10:22:06: [INFO] Memory management setup completed
2025-09-19T10:22:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:06: [INFO] Checking process locks...
2025-09-19T10:22:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:06: ℹ️ [10:22:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:06: [INFO] Process locks acquired successfully
2025-09-19T10:22:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:06: [INFO] Logs directory created
2025-09-19T10:22:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:06: [10:22:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:06: [10:22:06 am] ✅ Google Sheets API initialized
2025-09-19T10:22:06: [INFO] Google Sheets helper initialized
2025-09-19T10:22:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:06: ℹ️ [10:22:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:06: 🗑️ Deleted old log file: bot-2025-09-19T04-51-24-017Z.log
2025-09-19T10:22:06: 📝 Enhanced Logger initialized
2025-09-19T10:22:06: 📁 Loaded statistics from file
2025-09-19T10:22:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:06: 🧹 Removed stale process lock
2025-09-19T10:22:06: 🔒 Process lock acquired (PID: 16516)
2025-09-19T10:22:07: ℹ️ [10:22:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16516
}
2025-09-19T10:22:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:07: ℹ️ [10:22:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257526841, processId: 16516 },
  timestamp: 1758257527003
}
2025-09-19T10:22:07: ℹ️ [10:22:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257526841, willExpireAt: 1758257766841 },
  timestamp: 1758257527004
}
2025-09-19T10:22:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:07: 📋 Message rules loaded: 8 types
2025-09-19T10:22:07: ℹ️ [10:22:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 169,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:08: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:08: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:08: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:08: [INFO] WhatsApp client initialized
2025-09-19T10:22:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:10: 📝 Loaded 12 template types
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257530492,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10052,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:10: ⏰ 4-minute startup delay active
2025-09-19T10:22:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:10: [INFO] Using PQueue for job processing
2025-09-19T10:22:10: [INFO] Memory management setup completed
2025-09-19T10:22:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:10: [INFO] Checking process locks...
2025-09-19T10:22:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:10: [INFO] Process locks acquired successfully
2025-09-19T10:22:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:10: [INFO] Logs directory created
2025-09-19T10:22:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:10: [10:22:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:10: [10:22:10 am] ✅ Google Sheets API initialized
2025-09-19T10:22:10: [INFO] Google Sheets helper initialized
2025-09-19T10:22:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:10: 🗑️ Deleted old log file: bot-2025-09-19T04-51-27-342Z.log
2025-09-19T10:22:10: 📝 Enhanced Logger initialized
2025-09-19T10:22:10: 📁 Loaded statistics from file
2025-09-19T10:22:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:10: 🧹 Removed stale process lock
2025-09-19T10:22:10: 🔒 Process lock acquired (PID: 10052)
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10052
}
2025-09-19T10:22:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257530492, processId: 10052 },
  timestamp: 1758257530710
}
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257530492, willExpireAt: 1758257770492 },
  timestamp: 1758257530711
}
2025-09-19T10:22:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:10: 📋 Message rules loaded: 8 types
2025-09-19T10:22:10: ℹ️ [10:22:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 224,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:11: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:11: [INFO] WhatsApp client initialized
2025-09-19T10:22:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:14: 📝 Loaded 12 template types
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257534288,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18388,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:14: ⏰ 4-minute startup delay active
2025-09-19T10:22:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:14: [INFO] Using PQueue for job processing
2025-09-19T10:22:14: [INFO] Memory management setup completed
2025-09-19T10:22:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:14: [INFO] Checking process locks...
2025-09-19T10:22:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:14: [INFO] Process locks acquired successfully
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:14: [INFO] Logs directory created
2025-09-19T10:22:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:14: [10:22:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:14: [10:22:14 am] ✅ Google Sheets API initialized
2025-09-19T10:22:14: [INFO] Google Sheets helper initialized
2025-09-19T10:22:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:14: 🗑️ Deleted old log file: bot-2025-09-19T04-51-30-499Z.log
2025-09-19T10:22:14: 📝 Enhanced Logger initialized
2025-09-19T10:22:14: 📁 Loaded statistics from file
2025-09-19T10:22:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:14: 🧹 Removed stale process lock
2025-09-19T10:22:14: 🔒 Process lock acquired (PID: 18388)
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18388
}
2025-09-19T10:22:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257534288, processId: 18388 },
  timestamp: 1758257534437
}
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257534288, willExpireAt: 1758257774288 },
  timestamp: 1758257534437
}
2025-09-19T10:22:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:14: 📋 Message rules loaded: 8 types
2025-09-19T10:22:14: ℹ️ [10:22:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 153,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:15: [INFO] WhatsApp client initialized
2025-09-19T10:22:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:17: 📝 Loaded 12 template types
2025-09-19T10:22:18: ℹ️ [10:22:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257537990,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3196,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:18: ⏰ 4-minute startup delay active
2025-09-19T10:22:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:18: [INFO] Using PQueue for job processing
2025-09-19T10:22:18: [INFO] Memory management setup completed
2025-09-19T10:22:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:18: [INFO] Checking process locks...
2025-09-19T10:22:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:18: [INFO] Process locks acquired successfully
2025-09-19T10:22:18: ℹ️ [10:22:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:18: [INFO] Logs directory created
2025-09-19T10:22:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:18: [10:22:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:18: [10:22:18 am] ✅ Google Sheets API initialized
2025-09-19T10:22:18: [INFO] Google Sheets helper initialized
2025-09-19T10:22:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:18: ℹ️ [10:22:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:18: 📁 Loaded statistics from file
2025-09-19T10:22:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:18: 🗑️ Deleted old log file: bot-2025-09-19T04-51-33-905Z.log
2025-09-19T10:22:18: 📝 Enhanced Logger initialized
2025-09-19T10:22:18: 🧹 Removed stale process lock
2025-09-19T10:22:18: 🔒 Process lock acquired (PID: 3196)
2025-09-19T10:22:18: ℹ️ [10:22:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3196
}
2025-09-19T10:22:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:18: ℹ️ [10:22:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257537990, processId: 3196 },
  timestamp: 1758257538176
}
2025-09-19T10:22:18: ℹ️ [10:22:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257537990, willExpireAt: 1758257777990 },
  timestamp: 1758257538176
}
2025-09-19T10:22:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:18: 📋 Message rules loaded: 8 types
2025-09-19T10:22:18: ℹ️ [10:22:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 189,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:19: [INFO] WhatsApp client initialized
2025-09-19T10:22:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:21: 📝 Loaded 12 template types
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257541499,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10320,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:21: ⏰ 4-minute startup delay active
2025-09-19T10:22:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:21: [INFO] Using PQueue for job processing
2025-09-19T10:22:21: [INFO] Memory management setup completed
2025-09-19T10:22:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:21: [INFO] Checking process locks...
2025-09-19T10:22:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:21: [INFO] Process locks acquired successfully
2025-09-19T10:22:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:21: [INFO] Logs directory created
2025-09-19T10:22:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:21: [10:22:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:21: [10:22:21 am] ✅ Google Sheets API initialized
2025-09-19T10:22:21: [INFO] Google Sheets helper initialized
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:21: 🗑️ Deleted old log file: bot-2025-09-19T04-51-38-640Z.log
2025-09-19T10:22:21: 📝 Enhanced Logger initialized
2025-09-19T10:22:21: 📁 Loaded statistics from file
2025-09-19T10:22:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:21: 🧹 Removed stale process lock
2025-09-19T10:22:21: 🔒 Process lock acquired (PID: 10320)
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10320
}
2025-09-19T10:22:21: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257541499, processId: 10320 },
  timestamp: 1758257541637
}
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257541499, willExpireAt: 1758257781499 },
  timestamp: 1758257541637
}
2025-09-19T10:22:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:21: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:21: 📋 Message rules loaded: 8 types
2025-09-19T10:22:21: ℹ️ [10:22:21 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 141,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:22: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:22: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:22: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:22: [INFO] WhatsApp client initialized
2025-09-19T10:22:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:25: 📝 Loaded 12 template types
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257545345,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5752,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:25: ⏰ 4-minute startup delay active
2025-09-19T10:22:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:25: [INFO] Using PQueue for job processing
2025-09-19T10:22:25: [INFO] Memory management setup completed
2025-09-19T10:22:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:25: [INFO] Checking process locks...
2025-09-19T10:22:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:25: [INFO] Process locks acquired successfully
2025-09-19T10:22:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:25: [INFO] Logs directory created
2025-09-19T10:22:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:25: [10:22:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:25: [10:22:25 am] ✅ Google Sheets API initialized
2025-09-19T10:22:25: [INFO] Google Sheets helper initialized
2025-09-19T10:22:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:25: 🗑️ Deleted old log file: bot-2025-09-19T04-51-42-759Z.log
2025-09-19T10:22:25: 📝 Enhanced Logger initialized
2025-09-19T10:22:25: 📁 Loaded statistics from file
2025-09-19T10:22:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:25: 🧹 Removed stale process lock
2025-09-19T10:22:25: 🔒 Process lock acquired (PID: 5752)
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5752
}
2025-09-19T10:22:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257545345, willExpireAt: 1758257785345 },
  timestamp: 1758257545507
}
2025-09-19T10:22:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:25: 📋 Message rules loaded: 8 types
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257545345, processId: 5752 },
  timestamp: 1758257545507
}
2025-09-19T10:22:25: ℹ️ [10:22:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 165,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:26: [INFO] WhatsApp client initialized
2025-09-19T10:22:28: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:28: 📝 Loaded 12 template types
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257548573,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4492,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:28: ⏰ 4-minute startup delay active
2025-09-19T10:22:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:28: [INFO] Using PQueue for job processing
2025-09-19T10:22:28: [INFO] Memory management setup completed
2025-09-19T10:22:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:28: [INFO] Checking process locks...
2025-09-19T10:22:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:28: [INFO] Process locks acquired successfully
2025-09-19T10:22:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:28: [INFO] Logs directory created
2025-09-19T10:22:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:28: [10:22:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:28: [10:22:28 am] ✅ Google Sheets API initialized
2025-09-19T10:22:28: [INFO] Google Sheets helper initialized
2025-09-19T10:22:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:28: 🗑️ Deleted old log file: bot-2025-09-19T04-51-47-407Z.log
2025-09-19T10:22:28: 📝 Enhanced Logger initialized
2025-09-19T10:22:28: 📁 Loaded statistics from file
2025-09-19T10:22:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:28: 🧹 Removed stale process lock
2025-09-19T10:22:28: 🔒 Process lock acquired (PID: 4492)
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4492
}
2025-09-19T10:22:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257548573, processId: 4492 },
  timestamp: 1758257548715
}
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257548573, willExpireAt: 1758257788573 },
  timestamp: 1758257548716
}
2025-09-19T10:22:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:28: 📋 Message rules loaded: 8 types
2025-09-19T10:22:28: ℹ️ [10:22:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:29: [INFO] WhatsApp client initialized
2025-09-19T10:22:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:31: 📝 Loaded 12 template types
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257551617,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1244,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:31: ⏰ 4-minute startup delay active
2025-09-19T10:22:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:31: [INFO] Using PQueue for job processing
2025-09-19T10:22:31: [INFO] Memory management setup completed
2025-09-19T10:22:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:31: [INFO] Checking process locks...
2025-09-19T10:22:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:31: [INFO] Process locks acquired successfully
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:31: [INFO] Logs directory created
2025-09-19T10:22:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:31: [10:22:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:31: [10:22:31 am] ✅ Google Sheets API initialized
2025-09-19T10:22:31: [INFO] Google Sheets helper initialized
2025-09-19T10:22:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:31: 🗑️ Deleted old log file: bot-2025-09-19T04-51-52-819Z.log
2025-09-19T10:22:31: 📝 Enhanced Logger initialized
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:31: 📁 Loaded statistics from file
2025-09-19T10:22:31: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:31: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:31: 🧹 Removed stale process lock
2025-09-19T10:22:31: 🔒 Process lock acquired (PID: 1244)
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1244
}
2025-09-19T10:22:31: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:31: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257551617, processId: 1244 },
  timestamp: 1758257551732
}
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257551617, willExpireAt: 1758257791617 },
  timestamp: 1758257551733
}
2025-09-19T10:22:31: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:31: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:31: 📋 Message rules loaded: 8 types
2025-09-19T10:22:31: ℹ️ [10:22:31 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:32: [INFO] WhatsApp client initialized
2025-09-19T10:22:34: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:34: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:34: 📝 Loaded 12 template types
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257554764,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2548,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:34: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:34: ⏰ 4-minute startup delay active
2025-09-19T10:22:34: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:34: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:34: [INFO] Using PQueue for job processing
2025-09-19T10:22:34: [INFO] Memory management setup completed
2025-09-19T10:22:34: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:34: [INFO] Checking process locks...
2025-09-19T10:22:34: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:34: [INFO] Process locks acquired successfully
2025-09-19T10:22:34: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:34: [INFO] Logs directory created
2025-09-19T10:22:34: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:34: [10:22:34 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:34: [10:22:34 am] ✅ Google Sheets API initialized
2025-09-19T10:22:34: [INFO] Google Sheets helper initialized
2025-09-19T10:22:34: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:34: 🗑️ Deleted old log file: bot-2025-09-19T04-51-56-282Z.log
2025-09-19T10:22:34: 📝 Enhanced Logger initialized
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:34: 📁 Loaded statistics from file
2025-09-19T10:22:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:34: 🧹 Removed stale process lock
2025-09-19T10:22:34: 🔒 Process lock acquired (PID: 2548)
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2548
}
2025-09-19T10:22:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257554764, processId: 2548 },
  timestamp: 1758257554929
}
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257554764, willExpireAt: 1758257794764 },
  timestamp: 1758257554929
}
2025-09-19T10:22:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:34: 📋 Message rules loaded: 8 types
2025-09-19T10:22:34: ℹ️ [10:22:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 170,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:35: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:35: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:35: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:36: [INFO] WhatsApp client initialized
2025-09-19T10:22:37: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:37: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:37: 📝 Loaded 12 template types
2025-09-19T10:22:37: ℹ️ [10:22:37 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257557942,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13448,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:37: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:37: ⏰ 4-minute startup delay active
2025-09-19T10:22:37: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:37: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:37: [INFO] Using PQueue for job processing
2025-09-19T10:22:37: [INFO] Memory management setup completed
2025-09-19T10:22:37: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:37: [INFO] Checking process locks...
2025-09-19T10:22:37: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:37: ℹ️ [10:22:37 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:37: [INFO] Process locks acquired successfully
2025-09-19T10:22:37: [INFO] Logs directory created
2025-09-19T10:22:37: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:37: [10:22:37 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:37: [10:22:37 am] ✅ Google Sheets API initialized
2025-09-19T10:22:37: [INFO] Google Sheets helper initialized
2025-09-19T10:22:37: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:38: ℹ️ [10:22:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:38: 🗑️ Deleted old log file: bot-2025-09-19T04-51-59-825Z.log
2025-09-19T10:22:38: 📝 Enhanced Logger initialized
2025-09-19T10:22:38: 📁 Loaded statistics from file
2025-09-19T10:22:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:38: 🧹 Removed stale process lock
2025-09-19T10:22:38: 🔒 Process lock acquired (PID: 13448)
2025-09-19T10:22:38: ℹ️ [10:22:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13448
}
2025-09-19T10:22:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:38: ℹ️ [10:22:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257557942, willExpireAt: 1758257797942 },
  timestamp: 1758257558068
}
2025-09-19T10:22:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:38: 📋 Message rules loaded: 8 types
2025-09-19T10:22:38: ℹ️ [10:22:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257557942, processId: 13448 },
  timestamp: 1758257558068
}
2025-09-19T10:22:38: ℹ️ [10:22:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:38: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:39: [INFO] WhatsApp client initialized
2025-09-19T10:22:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:41: 📝 Loaded 12 template types
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257561108,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6364,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:41: ⏰ 4-minute startup delay active
2025-09-19T10:22:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:41: [INFO] Using PQueue for job processing
2025-09-19T10:22:41: [INFO] Memory management setup completed
2025-09-19T10:22:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:41: [INFO] Checking process locks...
2025-09-19T10:22:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:41: [INFO] Process locks acquired successfully
2025-09-19T10:22:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:41: [INFO] Logs directory created
2025-09-19T10:22:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:41: [10:22:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:41: [10:22:41 am] ✅ Google Sheets API initialized
2025-09-19T10:22:41: [INFO] Google Sheets helper initialized
2025-09-19T10:22:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:41: 🗑️ Deleted old log file: bot-2025-09-19T04-52-03-292Z.log
2025-09-19T10:22:41: 📝 Enhanced Logger initialized
2025-09-19T10:22:41: 📁 Loaded statistics from file
2025-09-19T10:22:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:41: 🧹 Removed stale process lock
2025-09-19T10:22:41: 🔒 Process lock acquired (PID: 6364)
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6364
}
2025-09-19T10:22:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257561108, willExpireAt: 1758257801108 },
  timestamp: 1758257561253
}
2025-09-19T10:22:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:41: 📋 Message rules loaded: 8 types
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257561108, processId: 6364 },
  timestamp: 1758257561252
}
2025-09-19T10:22:41: ℹ️ [10:22:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 149,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:42: [INFO] WhatsApp client initialized
2025-09-19T10:22:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:44: 📝 Loaded 12 template types
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257564190,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4572,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:44: ⏰ 4-minute startup delay active
2025-09-19T10:22:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:44: [INFO] Using PQueue for job processing
2025-09-19T10:22:44: [INFO] Memory management setup completed
2025-09-19T10:22:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:44: [INFO] Checking process locks...
2025-09-19T10:22:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:44: [INFO] Process locks acquired successfully
2025-09-19T10:22:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:44: [INFO] Logs directory created
2025-09-19T10:22:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:44: [10:22:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:44: [10:22:44 am] ✅ Google Sheets API initialized
2025-09-19T10:22:44: [INFO] Google Sheets helper initialized
2025-09-19T10:22:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:44: 🗑️ Deleted old log file: bot-2025-09-19T04-52-06-883Z.log
2025-09-19T10:22:44: 📝 Enhanced Logger initialized
2025-09-19T10:22:44: 📁 Loaded statistics from file
2025-09-19T10:22:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:44: 🧹 Removed stale process lock
2025-09-19T10:22:44: 🔒 Process lock acquired (PID: 4572)
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4572
}
2025-09-19T10:22:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257564190, willExpireAt: 1758257804190 },
  timestamp: 1758257564329
}
2025-09-19T10:22:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:44: 📋 Message rules loaded: 8 types
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257564190, processId: 4572 },
  timestamp: 1758257564329
}
2025-09-19T10:22:44: ℹ️ [10:22:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 141,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:45: [INFO] WhatsApp client initialized
2025-09-19T10:22:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:47: 📝 Loaded 12 template types
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257567446,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4064,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:47: ⏰ 4-minute startup delay active
2025-09-19T10:22:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:47: [INFO] Using PQueue for job processing
2025-09-19T10:22:47: [INFO] Memory management setup completed
2025-09-19T10:22:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:47: [INFO] Checking process locks...
2025-09-19T10:22:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:47: [INFO] Process locks acquired successfully
2025-09-19T10:22:47: [INFO] Logs directory created
2025-09-19T10:22:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:47: [10:22:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:47: [10:22:47 am] ✅ Google Sheets API initialized
2025-09-19T10:22:47: [INFO] Google Sheets helper initialized
2025-09-19T10:22:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:47: 🗑️ Deleted old log file: bot-2025-09-19T04-52-10-543Z.log
2025-09-19T10:22:47: 📝 Enhanced Logger initialized
2025-09-19T10:22:47: 📁 Loaded statistics from file
2025-09-19T10:22:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:47: 🧹 Removed stale process lock
2025-09-19T10:22:47: 🔒 Process lock acquired (PID: 4064)
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4064
}
2025-09-19T10:22:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257567446, processId: 4064 },
  timestamp: 1758257567569
}
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257567446, willExpireAt: 1758257807446 },
  timestamp: 1758257567569
}
2025-09-19T10:22:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:47: 📋 Message rules loaded: 8 types
2025-09-19T10:22:47: ℹ️ [10:22:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:48: [INFO] WhatsApp client initialized
2025-09-19T10:22:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:50: 📝 Loaded 12 template types
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257570821,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13872,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:50: ⏰ 4-minute startup delay active
2025-09-19T10:22:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:50: [INFO] Using PQueue for job processing
2025-09-19T10:22:50: [INFO] Memory management setup completed
2025-09-19T10:22:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:50: [INFO] Checking process locks...
2025-09-19T10:22:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:50: [INFO] Process locks acquired successfully
2025-09-19T10:22:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:50: [INFO] Logs directory created
2025-09-19T10:22:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:50: [10:22:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:50: [10:22:50 am] ✅ Google Sheets API initialized
2025-09-19T10:22:50: [INFO] Google Sheets helper initialized
2025-09-19T10:22:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:50: 🗑️ Deleted old log file: bot-2025-09-19T04-52-14-333Z.log
2025-09-19T10:22:50: 📝 Enhanced Logger initialized
2025-09-19T10:22:50: 📁 Loaded statistics from file
2025-09-19T10:22:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:50: 🧹 Removed stale process lock
2025-09-19T10:22:50: 🔒 Process lock acquired (PID: 13872)
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13872
}
2025-09-19T10:22:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257570821, willExpireAt: 1758257810821 },
  timestamp: 1758257570973
}
2025-09-19T10:22:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:50: 📋 Message rules loaded: 8 types
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257570821, processId: 13872 },
  timestamp: 1758257570973
}
2025-09-19T10:22:50: ℹ️ [10:22:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 154,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:52: [INFO] WhatsApp client initialized
2025-09-19T10:22:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:54: 📝 Loaded 12 template types
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257574108,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18204,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:54: ⏰ 4-minute startup delay active
2025-09-19T10:22:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:54: [INFO] Using PQueue for job processing
2025-09-19T10:22:54: [INFO] Memory management setup completed
2025-09-19T10:22:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:54: [INFO] Checking process locks...
2025-09-19T10:22:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:54: [INFO] Process locks acquired successfully
2025-09-19T10:22:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:54: [INFO] Logs directory created
2025-09-19T10:22:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:54: [10:22:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:54: [10:22:54 am] ✅ Google Sheets API initialized
2025-09-19T10:22:54: [INFO] Google Sheets helper initialized
2025-09-19T10:22:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:54: 🗑️ Deleted old log file: bot-2025-09-19T04-52-18-059Z.log
2025-09-19T10:22:54: 📝 Enhanced Logger initialized
2025-09-19T10:22:54: 📁 Loaded statistics from file
2025-09-19T10:22:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:54: 🧹 Removed stale process lock
2025-09-19T10:22:54: 🔒 Process lock acquired (PID: 18204)
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18204
}
2025-09-19T10:22:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257574108, processId: 18204 },
  timestamp: 1758257574244
}
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257574108, willExpireAt: 1758257814108 },
  timestamp: 1758257574244
}
2025-09-19T10:22:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:54: 📋 Message rules loaded: 8 types
2025-09-19T10:22:54: ℹ️ [10:22:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:56: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:56: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:56: [INFO] WhatsApp client initialized
2025-09-19T10:22:58: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:22:58: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:22:58: 📝 Loaded 12 template types
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257578076,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17892,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:22:58: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:22:58: ⏰ 4-minute startup delay active
2025-09-19T10:22:58: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:22:58: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:22:58: [INFO] Using PQueue for job processing
2025-09-19T10:22:58: [INFO] Memory management setup completed
2025-09-19T10:22:58: [INFO] Starting WhatsApp Bot...
2025-09-19T10:22:58: [INFO] Checking process locks...
2025-09-19T10:22:58: 📁 Loaded 0 sent messages from file
2025-09-19T10:22:58: [INFO] Process locks acquired successfully
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:22:58: 📁 Loaded 0 customer histories from file
2025-09-19T10:22:58: [INFO] Logs directory created
2025-09-19T10:22:58: [INFO] Initializing Google Sheets helper...
2025-09-19T10:22:58: [10:22:58 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:22:58: [10:22:58 am] ✅ Google Sheets API initialized
2025-09-19T10:22:58: [INFO] Google Sheets helper initialized
2025-09-19T10:22:58: 📁 Loaded 0 message hashes from file
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:22:58: 🗑️ Deleted old log file: bot-2025-09-19T04-52-21-540Z.log
2025-09-19T10:22:58: 📝 Enhanced Logger initialized
2025-09-19T10:22:58: 📁 Loaded statistics from file
2025-09-19T10:22:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:22:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:22:58: 🧹 Removed stale process lock
2025-09-19T10:22:58: 🔒 Process lock acquired (PID: 17892)
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17892
}
2025-09-19T10:22:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:22:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257578076, processId: 17892 },
  timestamp: 1758257578188
}
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257578076, willExpireAt: 1758257818076 },
  timestamp: 1758257578188
}
2025-09-19T10:22:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:22:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:22:58: 📋 Message rules loaded: 8 types
2025-09-19T10:22:58: ℹ️ [10:22:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:22:59: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:22:59: [INFO] Initializing WhatsApp client...
2025-09-19T10:22:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:22:59: [INFO] WhatsApp client initialized
2025-09-19T10:23:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:01: 📝 Loaded 12 template types
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257581015,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18024,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:01: ⏰ 4-minute startup delay active
2025-09-19T10:23:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:01: [INFO] Using PQueue for job processing
2025-09-19T10:23:01: [INFO] Memory management setup completed
2025-09-19T10:23:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:01: [INFO] Checking process locks...
2025-09-19T10:23:01: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:01: [INFO] Process locks acquired successfully
2025-09-19T10:23:01: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:01: [INFO] Logs directory created
2025-09-19T10:23:01: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:01: [10:23:01 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:01: [10:23:01 am] ✅ Google Sheets API initialized
2025-09-19T10:23:01: [INFO] Google Sheets helper initialized
2025-09-19T10:23:01: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:01: 🗑️ Deleted old log file: bot-2025-09-19T04-52-25-395Z.log
2025-09-19T10:23:01: 📝 Enhanced Logger initialized
2025-09-19T10:23:01: 📁 Loaded statistics from file
2025-09-19T10:23:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:01: 🧹 Removed stale process lock
2025-09-19T10:23:01: 🔒 Process lock acquired (PID: 18024)
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18024
}
2025-09-19T10:23:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257581015, processId: 18024 },
  timestamp: 1758257581116
}
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257581015, willExpireAt: 1758257821015 },
  timestamp: 1758257581117
}
2025-09-19T10:23:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:01: 📋 Message rules loaded: 8 types
2025-09-19T10:23:01: ℹ️ [10:23:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:02: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:02: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:02: [INFO] WhatsApp client initialized
2025-09-19T10:23:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:03: 📝 Loaded 12 template types
2025-09-19T10:23:03: ℹ️ [10:23:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257583926,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3220,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:03: ⏰ 4-minute startup delay active
2025-09-19T10:23:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:03: [INFO] Using PQueue for job processing
2025-09-19T10:23:03: [INFO] Memory management setup completed
2025-09-19T10:23:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:03: [INFO] Checking process locks...
2025-09-19T10:23:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:03: ℹ️ [10:23:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:03: [INFO] Process locks acquired successfully
2025-09-19T10:23:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:03: [INFO] Logs directory created
2025-09-19T10:23:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:03: [10:23:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:03: [10:23:03 am] ✅ Google Sheets API initialized
2025-09-19T10:23:03: [INFO] Google Sheets helper initialized
2025-09-19T10:23:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:04: 🗑️ Deleted old log file: bot-2025-09-19T04-52-28-611Z.log
2025-09-19T10:23:04: 📝 Enhanced Logger initialized
2025-09-19T10:23:04: ℹ️ [10:23:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:04: 📁 Loaded statistics from file
2025-09-19T10:23:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:04: 🧹 Removed stale process lock
2025-09-19T10:23:04: 🔒 Process lock acquired (PID: 3220)
2025-09-19T10:23:04: ℹ️ [10:23:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3220
}
2025-09-19T10:23:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:04: ℹ️ [10:23:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257583926, processId: 3220 },
  timestamp: 1758257584039
}
2025-09-19T10:23:04: ℹ️ [10:23:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257583926, willExpireAt: 1758257823926 },
  timestamp: 1758257584039
}
2025-09-19T10:23:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:04: 📋 Message rules loaded: 8 types
2025-09-19T10:23:04: ℹ️ [10:23:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:06: 📝 Loaded 12 template types
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257586812,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1828,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:06: ⏰ 4-minute startup delay active
2025-09-19T10:23:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:06: [INFO] Using PQueue for job processing
2025-09-19T10:23:06: [INFO] Memory management setup completed
2025-09-19T10:23:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:06: [INFO] Checking process locks...
2025-09-19T10:23:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:06: [INFO] Process locks acquired successfully
2025-09-19T10:23:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:06: [INFO] Logs directory created
2025-09-19T10:23:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:06: [10:23:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:06: [10:23:06 am] ✅ Google Sheets API initialized
2025-09-19T10:23:06: [INFO] Google Sheets helper initialized
2025-09-19T10:23:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:06: 🗑️ Deleted old log file: bot-2025-09-19T04-52-31-649Z.log
2025-09-19T10:23:06: 📝 Enhanced Logger initialized
2025-09-19T10:23:06: 📁 Loaded statistics from file
2025-09-19T10:23:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:06: 🧹 Removed stale process lock
2025-09-19T10:23:06: 🔒 Process lock acquired (PID: 1828)
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1828
}
2025-09-19T10:23:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257586812, willExpireAt: 1758257826812 },
  timestamp: 1758257586949
}
2025-09-19T10:23:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:06: 📋 Message rules loaded: 8 types
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257586812, processId: 1828 },
  timestamp: 1758257586949
}
2025-09-19T10:23:06: ℹ️ [10:23:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:07: [INFO] WhatsApp client initialized
2025-09-19T10:23:09: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:09: 📝 Loaded 12 template types
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257589828,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10496,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:09: ⏰ 4-minute startup delay active
2025-09-19T10:23:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:09: [INFO] Using PQueue for job processing
2025-09-19T10:23:09: [INFO] Memory management setup completed
2025-09-19T10:23:09: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:09: [INFO] Checking process locks...
2025-09-19T10:23:09: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:09: [INFO] Process locks acquired successfully
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:09: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:09: [INFO] Logs directory created
2025-09-19T10:23:09: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:09: [10:23:09 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:09: [10:23:09 am] ✅ Google Sheets API initialized
2025-09-19T10:23:09: [INFO] Google Sheets helper initialized
2025-09-19T10:23:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:09: 🗑️ Deleted old log file: bot-2025-09-19T04-52-34-813Z.log
2025-09-19T10:23:09: 📝 Enhanced Logger initialized
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:09: 📁 Loaded statistics from file
2025-09-19T10:23:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:09: 🧹 Removed stale process lock
2025-09-19T10:23:09: 🔒 Process lock acquired (PID: 10496)
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10496
}
2025-09-19T10:23:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257589828, processId: 10496 },
  timestamp: 1758257589948
}
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257589828, willExpireAt: 1758257829828 },
  timestamp: 1758257589949
}
2025-09-19T10:23:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:09: 📋 Message rules loaded: 8 types
2025-09-19T10:23:09: ℹ️ [10:23:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:11: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:11: [INFO] WhatsApp client initialized
2025-09-19T10:23:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:13: 📝 Loaded 12 template types
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257593091,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8216,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:13: ⏰ 4-minute startup delay active
2025-09-19T10:23:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:13: [INFO] Using PQueue for job processing
2025-09-19T10:23:13: [INFO] Memory management setup completed
2025-09-19T10:23:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:13: [INFO] Checking process locks...
2025-09-19T10:23:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:13: [INFO] Process locks acquired successfully
2025-09-19T10:23:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:13: [INFO] Logs directory created
2025-09-19T10:23:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:13: [10:23:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:13: [10:23:13 am] ✅ Google Sheets API initialized
2025-09-19T10:23:13: [INFO] Google Sheets helper initialized
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:13: 🗑️ Deleted old log file: bot-2025-09-19T04-52-37-978Z.log
2025-09-19T10:23:13: 📝 Enhanced Logger initialized
2025-09-19T10:23:13: 📁 Loaded statistics from file
2025-09-19T10:23:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:13: 🧹 Removed stale process lock
2025-09-19T10:23:13: 🔒 Process lock acquired (PID: 8216)
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8216
}
2025-09-19T10:23:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257593091, processId: 8216 },
  timestamp: 1758257593226
}
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257593091, willExpireAt: 1758257833091 },
  timestamp: 1758257593226
}
2025-09-19T10:23:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:13: 📋 Message rules loaded: 8 types
2025-09-19T10:23:13: ℹ️ [10:23:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:14: [INFO] WhatsApp client initialized
2025-09-19T10:23:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:16: 📝 Loaded 12 template types
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257596123,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4424,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:16: ⏰ 4-minute startup delay active
2025-09-19T10:23:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:16: [INFO] Using PQueue for job processing
2025-09-19T10:23:16: [INFO] Memory management setup completed
2025-09-19T10:23:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:16: [INFO] Checking process locks...
2025-09-19T10:23:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:16: [INFO] Process locks acquired successfully
2025-09-19T10:23:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:16: [INFO] Logs directory created
2025-09-19T10:23:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:16: [10:23:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:16: [10:23:16 am] ✅ Google Sheets API initialized
2025-09-19T10:23:16: [INFO] Google Sheets helper initialized
2025-09-19T10:23:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:16: 🗑️ Deleted old log file: bot-2025-09-19T04-52-41-147Z.log
2025-09-19T10:23:16: 📝 Enhanced Logger initialized
2025-09-19T10:23:16: 📁 Loaded statistics from file
2025-09-19T10:23:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:16: 🧹 Removed stale process lock
2025-09-19T10:23:16: 🔒 Process lock acquired (PID: 4424)
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4424
}
2025-09-19T10:23:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257596123, willExpireAt: 1758257836123 },
  timestamp: 1758257596297
}
2025-09-19T10:23:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:16: 📋 Message rules loaded: 8 types
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257596123, processId: 4424 },
  timestamp: 1758257596297
}
2025-09-19T10:23:16: ℹ️ [10:23:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 178,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:17: [INFO] WhatsApp client initialized
2025-09-19T10:23:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:19: 📝 Loaded 12 template types
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257599560,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3768,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:19: ⏰ 4-minute startup delay active
2025-09-19T10:23:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:19: [INFO] Using PQueue for job processing
2025-09-19T10:23:19: [INFO] Memory management setup completed
2025-09-19T10:23:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:19: [INFO] Checking process locks...
2025-09-19T10:23:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:19: [INFO] Process locks acquired successfully
2025-09-19T10:23:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:19: [INFO] Logs directory created
2025-09-19T10:23:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:19: [10:23:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:19: [10:23:19 am] ✅ Google Sheets API initialized
2025-09-19T10:23:19: [INFO] Google Sheets helper initialized
2025-09-19T10:23:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:19: 🗑️ Deleted old log file: bot-2025-09-19T04-52-44-226Z.log
2025-09-19T10:23:19: 📝 Enhanced Logger initialized
2025-09-19T10:23:19: 📁 Loaded statistics from file
2025-09-19T10:23:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:19: 🧹 Removed stale process lock
2025-09-19T10:23:19: 🔒 Process lock acquired (PID: 3768)
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3768
}
2025-09-19T10:23:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257599560, willExpireAt: 1758257839560 },
  timestamp: 1758257599690
}
2025-09-19T10:23:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:19: 📋 Message rules loaded: 8 types
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257599560, processId: 3768 },
  timestamp: 1758257599690
}
2025-09-19T10:23:19: ℹ️ [10:23:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:20: [INFO] WhatsApp client initialized
2025-09-19T10:23:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:23: 📝 Loaded 12 template types
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257603090,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10300,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:23: ⏰ 4-minute startup delay active
2025-09-19T10:23:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:23: [INFO] Using PQueue for job processing
2025-09-19T10:23:23: [INFO] Memory management setup completed
2025-09-19T10:23:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:23: [INFO] Checking process locks...
2025-09-19T10:23:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:23: [INFO] Process locks acquired successfully
2025-09-19T10:23:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:23: [INFO] Logs directory created
2025-09-19T10:23:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:23: [10:23:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:23: [10:23:23 am] ✅ Google Sheets API initialized
2025-09-19T10:23:23: [INFO] Google Sheets helper initialized
2025-09-19T10:23:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:23: 🗑️ Deleted old log file: bot-2025-09-19T04-52-47-479Z.log
2025-09-19T10:23:23: 📝 Enhanced Logger initialized
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:23: 📁 Loaded statistics from file
2025-09-19T10:23:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:23: 🧹 Removed stale process lock
2025-09-19T10:23:23: 🔒 Process lock acquired (PID: 10300)
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10300
}
2025-09-19T10:23:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257603090, processId: 10300 },
  timestamp: 1758257603207
}
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257603090, willExpireAt: 1758257843090 },
  timestamp: 1758257603207
}
2025-09-19T10:23:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:23: 📋 Message rules loaded: 8 types
2025-09-19T10:23:23: ℹ️ [10:23:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:24: [INFO] WhatsApp client initialized
2025-09-19T10:23:26: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:26: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:26: 📝 Loaded 12 template types
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257606081,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:26: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:26: ⏰ 4-minute startup delay active
2025-09-19T10:23:26: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:26: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:26: [INFO] Using PQueue for job processing
2025-09-19T10:23:26: [INFO] Memory management setup completed
2025-09-19T10:23:26: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:26: [INFO] Checking process locks...
2025-09-19T10:23:26: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:26: [INFO] Process locks acquired successfully
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:26: [INFO] Logs directory created
2025-09-19T10:23:26: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:26: [10:23:26 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:26: [10:23:26 am] ✅ Google Sheets API initialized
2025-09-19T10:23:26: [INFO] Google Sheets helper initialized
2025-09-19T10:23:26: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:26: 🗑️ Deleted old log file: bot-2025-09-19T04-52-50-861Z.log
2025-09-19T10:23:26: 📝 Enhanced Logger initialized
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:26: 📁 Loaded statistics from file
2025-09-19T10:23:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:26: 🧹 Removed stale process lock
2025-09-19T10:23:26: 🔒 Process lock acquired (PID: 13720)
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13720
}
2025-09-19T10:23:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257606081, processId: 13720 },
  timestamp: 1758257606212
}
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257606081, willExpireAt: 1758257846081 },
  timestamp: 1758257606212
}
2025-09-19T10:23:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:26: 📋 Message rules loaded: 8 types
2025-09-19T10:23:26: ℹ️ [10:23:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:27: [INFO] WhatsApp client initialized
2025-09-19T10:23:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:29: 📝 Loaded 12 template types
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257609195,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 372,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:29: ⏰ 4-minute startup delay active
2025-09-19T10:23:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:29: [INFO] Using PQueue for job processing
2025-09-19T10:23:29: [INFO] Memory management setup completed
2025-09-19T10:23:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:29: [INFO] Checking process locks...
2025-09-19T10:23:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:29: [INFO] Process locks acquired successfully
2025-09-19T10:23:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:29: [INFO] Logs directory created
2025-09-19T10:23:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:29: [10:23:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:29: [10:23:29 am] ✅ Google Sheets API initialized
2025-09-19T10:23:29: [INFO] Google Sheets helper initialized
2025-09-19T10:23:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:29: 🗑️ Deleted old log file: bot-2025-09-19T04-52-54-145Z.log
2025-09-19T10:23:29: 📝 Enhanced Logger initialized
2025-09-19T10:23:29: 📁 Loaded statistics from file
2025-09-19T10:23:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:29: 🧹 Removed stale process lock
2025-09-19T10:23:29: 🔒 Process lock acquired (PID: 372)
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 372
}
2025-09-19T10:23:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257609195, willExpireAt: 1758257849195 },
  timestamp: 1758257609316
}
2025-09-19T10:23:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:29: 📋 Message rules loaded: 8 types
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257609195, processId: 372 },
  timestamp: 1758257609316
}
2025-09-19T10:23:29: ℹ️ [10:23:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:30: [INFO] WhatsApp client initialized
2025-09-19T10:23:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:32: 📝 Loaded 12 template types
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257612225,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17444,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:32: ⏰ 4-minute startup delay active
2025-09-19T10:23:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:32: [INFO] Using PQueue for job processing
2025-09-19T10:23:32: [INFO] Memory management setup completed
2025-09-19T10:23:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:32: [INFO] Checking process locks...
2025-09-19T10:23:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:32: [INFO] Process locks acquired successfully
2025-09-19T10:23:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:32: [INFO] Logs directory created
2025-09-19T10:23:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:32: [10:23:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:32: [10:23:32 am] ✅ Google Sheets API initialized
2025-09-19T10:23:32: [INFO] Google Sheets helper initialized
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:32: 🗑️ Deleted old log file: bot-2025-09-19T04-52-58-108Z.log
2025-09-19T10:23:32: 📝 Enhanced Logger initialized
2025-09-19T10:23:32: 📁 Loaded statistics from file
2025-09-19T10:23:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:32: 🧹 Removed stale process lock
2025-09-19T10:23:32: 🔒 Process lock acquired (PID: 17444)
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17444
}
2025-09-19T10:23:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257612225, willExpireAt: 1758257852225 },
  timestamp: 1758257612363
}
2025-09-19T10:23:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:32: 📋 Message rules loaded: 8 types
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257612225, processId: 17444 },
  timestamp: 1758257612362
}
2025-09-19T10:23:32: ℹ️ [10:23:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 142,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:33: [INFO] WhatsApp client initialized
2025-09-19T10:23:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:35: 📝 Loaded 12 template types
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257615380,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16596,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:35: ⏰ 4-minute startup delay active
2025-09-19T10:23:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:35: [INFO] Using PQueue for job processing
2025-09-19T10:23:35: [INFO] Memory management setup completed
2025-09-19T10:23:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:35: [INFO] Checking process locks...
2025-09-19T10:23:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:35: [INFO] Process locks acquired successfully
2025-09-19T10:23:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:35: [INFO] Logs directory created
2025-09-19T10:23:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:35: [10:23:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:35: [10:23:35 am] ✅ Google Sheets API initialized
2025-09-19T10:23:35: [INFO] Google Sheets helper initialized
2025-09-19T10:23:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:35: 🗑️ Deleted old log file: bot-2025-09-19T04-53-01-042Z.log
2025-09-19T10:23:35: 📝 Enhanced Logger initialized
2025-09-19T10:23:35: 📁 Loaded statistics from file
2025-09-19T10:23:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:35: 🧹 Removed stale process lock
2025-09-19T10:23:35: 🔒 Process lock acquired (PID: 16596)
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16596
}
2025-09-19T10:23:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257615380, willExpireAt: 1758257855380 },
  timestamp: 1758257615499
}
2025-09-19T10:23:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:35: 📋 Message rules loaded: 8 types
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257615380, processId: 16596 },
  timestamp: 1758257615499
}
2025-09-19T10:23:35: ℹ️ [10:23:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:36: [INFO] WhatsApp client initialized
2025-09-19T10:23:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:38: 📝 Loaded 12 template types
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257618433,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3828,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:38: ⏰ 4-minute startup delay active
2025-09-19T10:23:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:38: [INFO] Using PQueue for job processing
2025-09-19T10:23:38: [INFO] Memory management setup completed
2025-09-19T10:23:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:38: [INFO] Checking process locks...
2025-09-19T10:23:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:38: [INFO] Process locks acquired successfully
2025-09-19T10:23:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:38: [INFO] Logs directory created
2025-09-19T10:23:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:38: [10:23:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:38: [10:23:38 am] ✅ Google Sheets API initialized
2025-09-19T10:23:38: [INFO] Google Sheets helper initialized
2025-09-19T10:23:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:38: 🗑️ Deleted old log file: bot-2025-09-19T04-53-03-956Z.log
2025-09-19T10:23:38: 📝 Enhanced Logger initialized
2025-09-19T10:23:38: 📁 Loaded statistics from file
2025-09-19T10:23:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:38: 🧹 Removed stale process lock
2025-09-19T10:23:38: 🔒 Process lock acquired (PID: 3828)
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3828
}
2025-09-19T10:23:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257618433, processId: 3828 },
  timestamp: 1758257618553
}
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257618433, willExpireAt: 1758257858433 },
  timestamp: 1758257618553
}
2025-09-19T10:23:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:38: 📋 Message rules loaded: 8 types
2025-09-19T10:23:38: ℹ️ [10:23:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:39: [INFO] WhatsApp client initialized
2025-09-19T10:23:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:41: 📝 Loaded 12 template types
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257621379,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15156,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:41: ⏰ 4-minute startup delay active
2025-09-19T10:23:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:41: [INFO] Using PQueue for job processing
2025-09-19T10:23:41: [INFO] Memory management setup completed
2025-09-19T10:23:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:41: [INFO] Checking process locks...
2025-09-19T10:23:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:41: [INFO] Process locks acquired successfully
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:41: [INFO] Logs directory created
2025-09-19T10:23:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:41: [10:23:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:41: [10:23:41 am] ✅ Google Sheets API initialized
2025-09-19T10:23:41: [INFO] Google Sheets helper initialized
2025-09-19T10:23:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:41: 🗑️ Deleted old log file: bot-2025-09-19T04-53-06-850Z.log
2025-09-19T10:23:41: 📝 Enhanced Logger initialized
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:41: 📁 Loaded statistics from file
2025-09-19T10:23:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:41: 🧹 Removed stale process lock
2025-09-19T10:23:41: 🔒 Process lock acquired (PID: 15156)
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15156
}
2025-09-19T10:23:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257621379, processId: 15156 },
  timestamp: 1758257621522
}
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257621379, willExpireAt: 1758257861379 },
  timestamp: 1758257621522
}
2025-09-19T10:23:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:41: 📋 Message rules loaded: 8 types
2025-09-19T10:23:41: ℹ️ [10:23:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:42: [INFO] WhatsApp client initialized
2025-09-19T10:23:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:44: 📝 Loaded 12 template types
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257624607,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16472,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:44: ⏰ 4-minute startup delay active
2025-09-19T10:23:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:44: [INFO] Using PQueue for job processing
2025-09-19T10:23:44: [INFO] Memory management setup completed
2025-09-19T10:23:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:44: [INFO] Checking process locks...
2025-09-19T10:23:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:44: [INFO] Process locks acquired successfully
2025-09-19T10:23:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:44: [INFO] Logs directory created
2025-09-19T10:23:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:44: [10:23:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:44: [10:23:44 am] ✅ Google Sheets API initialized
2025-09-19T10:23:44: [INFO] Google Sheets helper initialized
2025-09-19T10:23:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:44: 📁 Loaded statistics from file
2025-09-19T10:23:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:44: 🗑️ Deleted old log file: bot-2025-09-19T04-53-09-863Z.log
2025-09-19T10:23:44: 🧹 Removed stale process lock
2025-09-19T10:23:44: 🗑️ Deleted old log file: bot-2025-09-19T04-53-13-123Z.log
2025-09-19T10:23:44: 📝 Enhanced Logger initialized
2025-09-19T10:23:44: 🔒 Process lock acquired (PID: 16472)
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16472
}
2025-09-19T10:23:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257624607, processId: 16472 },
  timestamp: 1758257624724
}
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257624607, willExpireAt: 1758257864607 },
  timestamp: 1758257624725
}
2025-09-19T10:23:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:44: 📋 Message rules loaded: 8 types
2025-09-19T10:23:44: ℹ️ [10:23:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:45: [INFO] WhatsApp client initialized
2025-09-19T10:23:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:48: 📝 Loaded 12 template types
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257628019,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17744,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:48: ⏰ 4-minute startup delay active
2025-09-19T10:23:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:48: [INFO] Using PQueue for job processing
2025-09-19T10:23:48: [INFO] Memory management setup completed
2025-09-19T10:23:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:48: [INFO] Checking process locks...
2025-09-19T10:23:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:48: [INFO] Process locks acquired successfully
2025-09-19T10:23:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:48: [INFO] Logs directory created
2025-09-19T10:23:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:48: [10:23:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:48: [10:23:48 am] ✅ Google Sheets API initialized
2025-09-19T10:23:48: [INFO] Google Sheets helper initialized
2025-09-19T10:23:48: 📝 Enhanced Logger initialized
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:48: 📁 Loaded statistics from file
2025-09-19T10:23:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:48: 🧹 Removed stale process lock
2025-09-19T10:23:48: 🔒 Process lock acquired (PID: 17744)
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17744
}
2025-09-19T10:23:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257628019, processId: 17744 },
  timestamp: 1758257628177
}
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257628019, willExpireAt: 1758257868019 },
  timestamp: 1758257628177
}
2025-09-19T10:23:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:48: 📋 Message rules loaded: 8 types
2025-09-19T10:23:48: ℹ️ [10:23:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 161,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:49: [INFO] WhatsApp client initialized
2025-09-19T10:23:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:51: 📝 Loaded 12 template types
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257631117,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5564,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:51: ⏰ 4-minute startup delay active
2025-09-19T10:23:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:51: [INFO] Using PQueue for job processing
2025-09-19T10:23:51: [INFO] Memory management setup completed
2025-09-19T10:23:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:51: [INFO] Checking process locks...
2025-09-19T10:23:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:51: [INFO] Process locks acquired successfully
2025-09-19T10:23:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:51: [INFO] Logs directory created
2025-09-19T10:23:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:51: [10:23:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:51: [10:23:51 am] ✅ Google Sheets API initialized
2025-09-19T10:23:51: [INFO] Google Sheets helper initialized
2025-09-19T10:23:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:51: 🗑️ Deleted old log file: bot-2025-09-19T04-53-16-180Z.log
2025-09-19T10:23:51: 📝 Enhanced Logger initialized
2025-09-19T10:23:51: 📁 Loaded statistics from file
2025-09-19T10:23:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:51: 🧹 Removed stale process lock
2025-09-19T10:23:51: 🔒 Process lock acquired (PID: 5564)
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5564
}
2025-09-19T10:23:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257631117, processId: 5564 },
  timestamp: 1758257631238
}
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257631117, willExpireAt: 1758257871117 },
  timestamp: 1758257631239
}
2025-09-19T10:23:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:51: 📋 Message rules loaded: 8 types
2025-09-19T10:23:51: ℹ️ [10:23:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:52: [INFO] WhatsApp client initialized
2025-09-19T10:23:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:54: 📝 Loaded 12 template types
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257634500,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9900,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:54: ⏰ 4-minute startup delay active
2025-09-19T10:23:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:54: [INFO] Using PQueue for job processing
2025-09-19T10:23:54: [INFO] Memory management setup completed
2025-09-19T10:23:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:54: [INFO] Checking process locks...
2025-09-19T10:23:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:54: [INFO] Process locks acquired successfully
2025-09-19T10:23:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:54: [INFO] Logs directory created
2025-09-19T10:23:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:54: [10:23:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:54: [10:23:54 am] ✅ Google Sheets API initialized
2025-09-19T10:23:54: [INFO] Google Sheets helper initialized
2025-09-19T10:23:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:54: 🗑️ Deleted old log file: bot-2025-09-19T04-53-19-594Z.log
2025-09-19T10:23:54: 📝 Enhanced Logger initialized
2025-09-19T10:23:54: 📁 Loaded statistics from file
2025-09-19T10:23:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:54: 🧹 Removed stale process lock
2025-09-19T10:23:54: 🔒 Process lock acquired (PID: 9900)
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9900
}
2025-09-19T10:23:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257634500, processId: 9900 },
  timestamp: 1758257634635
}
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257634500, willExpireAt: 1758257874500 },
  timestamp: 1758257634635
}
2025-09-19T10:23:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:54: 📋 Message rules loaded: 8 types
2025-09-19T10:23:54: ℹ️ [10:23:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 137,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:55: [INFO] WhatsApp client initialized
2025-09-19T10:23:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:23:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:23:57: 📝 Loaded 12 template types
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257637761,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10216,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:23:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:23:57: ⏰ 4-minute startup delay active
2025-09-19T10:23:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:23:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:23:57: [INFO] Using PQueue for job processing
2025-09-19T10:23:57: [INFO] Memory management setup completed
2025-09-19T10:23:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:23:57: [INFO] Checking process locks...
2025-09-19T10:23:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:23:57: [INFO] Process locks acquired successfully
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:23:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:23:57: [INFO] Logs directory created
2025-09-19T10:23:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:23:57: [10:23:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:23:57: [10:23:57 am] ✅ Google Sheets API initialized
2025-09-19T10:23:57: [INFO] Google Sheets helper initialized
2025-09-19T10:23:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:23:57: 🗑️ Deleted old log file: bot-2025-09-19T04-53-23-123Z.log
2025-09-19T10:23:57: 📝 Enhanced Logger initialized
2025-09-19T10:23:57: 📁 Loaded statistics from file
2025-09-19T10:23:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:23:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:23:57: 🧹 Removed stale process lock
2025-09-19T10:23:57: 🔒 Process lock acquired (PID: 10216)
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10216
}
2025-09-19T10:23:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:23:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257637761, processId: 10216 },
  timestamp: 1758257637892
}
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257637761, willExpireAt: 1758257877761 },
  timestamp: 1758257637892
}
2025-09-19T10:23:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:23:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:23:57: 📋 Message rules loaded: 8 types
2025-09-19T10:23:57: ℹ️ [10:23:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:23:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:23:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:23:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:23:59: [INFO] WhatsApp client initialized
2025-09-19T10:24:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:00: 📝 Loaded 12 template types
2025-09-19T10:24:00: ℹ️ [10:24:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257640909,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1220,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:00: ⏰ 4-minute startup delay active
2025-09-19T10:24:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:00: [INFO] Using PQueue for job processing
2025-09-19T10:24:00: [INFO] Memory management setup completed
2025-09-19T10:24:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:00: [INFO] Checking process locks...
2025-09-19T10:24:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:00: ℹ️ [10:24:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:00: [INFO] Process locks acquired successfully
2025-09-19T10:24:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:00: [INFO] Logs directory created
2025-09-19T10:24:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:00: [10:24:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:00: [10:24:00 am] ✅ Google Sheets API initialized
2025-09-19T10:24:00: [INFO] Google Sheets helper initialized
2025-09-19T10:24:01: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:01: 🗑️ Deleted old log file: bot-2025-09-19T04-53-26-112Z.log
2025-09-19T10:24:01: 📝 Enhanced Logger initialized
2025-09-19T10:24:01: ℹ️ [10:24:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:01: 📁 Loaded statistics from file
2025-09-19T10:24:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:01: 🧹 Removed stale process lock
2025-09-19T10:24:01: 🔒 Process lock acquired (PID: 1220)
2025-09-19T10:24:01: ℹ️ [10:24:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1220
}
2025-09-19T10:24:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:01: ℹ️ [10:24:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257640909, willExpireAt: 1758257880909 },
  timestamp: 1758257641046
}
2025-09-19T10:24:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:01: 📋 Message rules loaded: 8 types
2025-09-19T10:24:01: ℹ️ [10:24:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257640909, processId: 1220 },
  timestamp: 1758257641045
}
2025-09-19T10:24:01: ℹ️ [10:24:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 141,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:01: [INFO] WhatsApp client initialized
2025-09-19T10:24:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:03: 📝 Loaded 12 template types
2025-09-19T10:24:03: ℹ️ [10:24:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257643924,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11232,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:03: ⏰ 4-minute startup delay active
2025-09-19T10:24:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:03: [INFO] Using PQueue for job processing
2025-09-19T10:24:03: [INFO] Memory management setup completed
2025-09-19T10:24:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:03: [INFO] Checking process locks...
2025-09-19T10:24:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:03: ℹ️ [10:24:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:03: [INFO] Process locks acquired successfully
2025-09-19T10:24:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:03: [INFO] Logs directory created
2025-09-19T10:24:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:03: [10:24:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:03: [10:24:03 am] ✅ Google Sheets API initialized
2025-09-19T10:24:03: [INFO] Google Sheets helper initialized
2025-09-19T10:24:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:03: 🗑️ Deleted old log file: bot-2025-09-19T04-53-29-228Z.log
2025-09-19T10:24:03: 📝 Enhanced Logger initialized
2025-09-19T10:24:04: ℹ️ [10:24:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:04: 📁 Loaded statistics from file
2025-09-19T10:24:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:04: 🧹 Removed stale process lock
2025-09-19T10:24:04: 🔒 Process lock acquired (PID: 11232)
2025-09-19T10:24:04: ℹ️ [10:24:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11232
}
2025-09-19T10:24:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:04: ℹ️ [10:24:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257643924, willExpireAt: 1758257883924 },
  timestamp: 1758257644039
}
2025-09-19T10:24:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:04: 📋 Message rules loaded: 8 types
2025-09-19T10:24:04: ℹ️ [10:24:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257643924, processId: 11232 },
  timestamp: 1758257644039
}
2025-09-19T10:24:04: ℹ️ [10:24:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:05: [INFO] WhatsApp client initialized
2025-09-19T10:24:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:07: 📝 Loaded 12 template types
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257647049,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2532,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:07: ⏰ 4-minute startup delay active
2025-09-19T10:24:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:07: [INFO] Using PQueue for job processing
2025-09-19T10:24:07: [INFO] Memory management setup completed
2025-09-19T10:24:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:07: [INFO] Checking process locks...
2025-09-19T10:24:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:07: [INFO] Process locks acquired successfully
2025-09-19T10:24:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:07: [INFO] Logs directory created
2025-09-19T10:24:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:07: [10:24:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:07: [10:24:07 am] ✅ Google Sheets API initialized
2025-09-19T10:24:07: [INFO] Google Sheets helper initialized
2025-09-19T10:24:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:07: 🗑️ Deleted old log file: bot-2025-09-19T04-53-32-257Z.log
2025-09-19T10:24:07: 📝 Enhanced Logger initialized
2025-09-19T10:24:07: 📁 Loaded statistics from file
2025-09-19T10:24:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:07: 🧹 Removed stale process lock
2025-09-19T10:24:07: 🔒 Process lock acquired (PID: 2532)
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2532
}
2025-09-19T10:24:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257647049, processId: 2532 },
  timestamp: 1758257647184
}
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257647049, willExpireAt: 1758257887049 },
  timestamp: 1758257647185
}
2025-09-19T10:24:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:07: 📋 Message rules loaded: 8 types
2025-09-19T10:24:07: ℹ️ [10:24:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:08: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:08: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:08: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:08: [INFO] WhatsApp client initialized
2025-09-19T10:24:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:10: 📝 Loaded 12 template types
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257650365,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11524,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:10: ⏰ 4-minute startup delay active
2025-09-19T10:24:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:10: [INFO] Using PQueue for job processing
2025-09-19T10:24:10: [INFO] Memory management setup completed
2025-09-19T10:24:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:10: [INFO] Checking process locks...
2025-09-19T10:24:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:10: [INFO] Process locks acquired successfully
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:10: [INFO] Logs directory created
2025-09-19T10:24:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:10: [10:24:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:10: [10:24:10 am] ✅ Google Sheets API initialized
2025-09-19T10:24:10: [INFO] Google Sheets helper initialized
2025-09-19T10:24:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:10: 🗑️ Deleted old log file: bot-2025-09-19T04-53-35-410Z.log
2025-09-19T10:24:10: 📝 Enhanced Logger initialized
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:10: 📁 Loaded statistics from file
2025-09-19T10:24:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:10: 🧹 Removed stale process lock
2025-09-19T10:24:10: 🔒 Process lock acquired (PID: 11524)
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11524
}
2025-09-19T10:24:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257650365, willExpireAt: 1758257890365 },
  timestamp: 1758257650482
}
2025-09-19T10:24:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:10: 📋 Message rules loaded: 8 types
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257650365, processId: 11524 },
  timestamp: 1758257650482
}
2025-09-19T10:24:10: ℹ️ [10:24:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:11: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:11: [INFO] WhatsApp client initialized
2025-09-19T10:24:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:13: 📝 Loaded 12 template types
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257653268,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13464,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:13: ⏰ 4-minute startup delay active
2025-09-19T10:24:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:13: [INFO] Using PQueue for job processing
2025-09-19T10:24:13: [INFO] Memory management setup completed
2025-09-19T10:24:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:13: [INFO] Checking process locks...
2025-09-19T10:24:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:13: [INFO] Process locks acquired successfully
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:13: [INFO] Logs directory created
2025-09-19T10:24:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:13: [10:24:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:13: [10:24:13 am] ✅ Google Sheets API initialized
2025-09-19T10:24:13: [INFO] Google Sheets helper initialized
2025-09-19T10:24:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:13: 🗑️ Deleted old log file: bot-2025-09-19T04-53-38-466Z.log
2025-09-19T10:24:13: 📝 Enhanced Logger initialized
2025-09-19T10:24:13: 📁 Loaded statistics from file
2025-09-19T10:24:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:13: 🧹 Removed stale process lock
2025-09-19T10:24:13: 🔒 Process lock acquired (PID: 13464)
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13464
}
2025-09-19T10:24:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257653268, processId: 13464 },
  timestamp: 1758257653427
}
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257653268, willExpireAt: 1758257893268 },
  timestamp: 1758257653427
}
2025-09-19T10:24:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:13: 📋 Message rules loaded: 8 types
2025-09-19T10:24:13: ℹ️ [10:24:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 162,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:14: [INFO] WhatsApp client initialized
2025-09-19T10:24:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:16: 📝 Loaded 12 template types
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257656433,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4524,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:16: ⏰ 4-minute startup delay active
2025-09-19T10:24:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:16: [INFO] Using PQueue for job processing
2025-09-19T10:24:16: [INFO] Memory management setup completed
2025-09-19T10:24:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:16: [INFO] Checking process locks...
2025-09-19T10:24:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:16: [INFO] Process locks acquired successfully
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:16: [INFO] Logs directory created
2025-09-19T10:24:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:16: [10:24:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:16: [10:24:16 am] ✅ Google Sheets API initialized
2025-09-19T10:24:16: [INFO] Google Sheets helper initialized
2025-09-19T10:24:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:16: 🗑️ Deleted old log file: bot-2025-09-19T04-53-41-417Z.log
2025-09-19T10:24:16: 📝 Enhanced Logger initialized
2025-09-19T10:24:16: 📁 Loaded statistics from file
2025-09-19T10:24:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:16: 🧹 Removed stale process lock
2025-09-19T10:24:16: 🔒 Process lock acquired (PID: 4524)
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4524
}
2025-09-19T10:24:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257656433, processId: 4524 },
  timestamp: 1758257656555
}
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257656433, willExpireAt: 1758257896433 },
  timestamp: 1758257656555
}
2025-09-19T10:24:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:16: 📋 Message rules loaded: 8 types
2025-09-19T10:24:16: ℹ️ [10:24:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:17: [INFO] WhatsApp client initialized
2025-09-19T10:24:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:19: 📝 Loaded 12 template types
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257659532,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15784,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:19: ⏰ 4-minute startup delay active
2025-09-19T10:24:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:19: [INFO] Using PQueue for job processing
2025-09-19T10:24:19: [INFO] Memory management setup completed
2025-09-19T10:24:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:19: [INFO] Checking process locks...
2025-09-19T10:24:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:19: [INFO] Process locks acquired successfully
2025-09-19T10:24:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:19: [INFO] Logs directory created
2025-09-19T10:24:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:19: [10:24:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:19: [10:24:19 am] ✅ Google Sheets API initialized
2025-09-19T10:24:19: [INFO] Google Sheets helper initialized
2025-09-19T10:24:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:19: 🗑️ Deleted old log file: bot-2025-09-19T04-53-44-639Z.log
2025-09-19T10:24:19: 📝 Enhanced Logger initialized
2025-09-19T10:24:19: 📁 Loaded statistics from file
2025-09-19T10:24:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:19: 🧹 Removed stale process lock
2025-09-19T10:24:19: 🔒 Process lock acquired (PID: 15784)
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15784
}
2025-09-19T10:24:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257659532, processId: 15784 },
  timestamp: 1758257659671
}
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257659532, willExpireAt: 1758257899532 },
  timestamp: 1758257659671
}
2025-09-19T10:24:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:19: 📋 Message rules loaded: 8 types
2025-09-19T10:24:19: ℹ️ [10:24:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 142,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:20: [INFO] WhatsApp client initialized
2025-09-19T10:24:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:22: 📝 Loaded 12 template types
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257662704,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11028,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:22: ⏰ 4-minute startup delay active
2025-09-19T10:24:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:22: [INFO] Using PQueue for job processing
2025-09-19T10:24:22: [INFO] Memory management setup completed
2025-09-19T10:24:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:22: [INFO] Checking process locks...
2025-09-19T10:24:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:22: [INFO] Process locks acquired successfully
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:22: [INFO] Logs directory created
2025-09-19T10:24:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:22: [10:24:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:22: [10:24:22 am] ✅ Google Sheets API initialized
2025-09-19T10:24:22: [INFO] Google Sheets helper initialized
2025-09-19T10:24:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:22: 🗑️ Deleted old log file: bot-2025-09-19T04-53-48-065Z.log
2025-09-19T10:24:22: 📝 Enhanced Logger initialized
2025-09-19T10:24:22: 📁 Loaded statistics from file
2025-09-19T10:24:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:22: 🧹 Removed stale process lock
2025-09-19T10:24:22: 🔒 Process lock acquired (PID: 11028)
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11028
}
2025-09-19T10:24:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257662704, willExpireAt: 1758257902704 },
  timestamp: 1758257662822
}
2025-09-19T10:24:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:22: 📋 Message rules loaded: 8 types
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257662704, processId: 11028 },
  timestamp: 1758257662822
}
2025-09-19T10:24:22: ℹ️ [10:24:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:24: [INFO] WhatsApp client initialized
2025-09-19T10:24:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:25: 📝 Loaded 12 template types
2025-09-19T10:24:25: ℹ️ [10:24:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257665881,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11636,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:25: ⏰ 4-minute startup delay active
2025-09-19T10:24:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:25: [INFO] Using PQueue for job processing
2025-09-19T10:24:25: [INFO] Memory management setup completed
2025-09-19T10:24:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:25: [INFO] Checking process locks...
2025-09-19T10:24:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:25: ℹ️ [10:24:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:25: [INFO] Process locks acquired successfully
2025-09-19T10:24:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:25: [INFO] Logs directory created
2025-09-19T10:24:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:25: [10:24:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:25: [10:24:25 am] ✅ Google Sheets API initialized
2025-09-19T10:24:25: [INFO] Google Sheets helper initialized
2025-09-19T10:24:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:26: ℹ️ [10:24:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:26: 🗑️ Deleted old log file: bot-2025-09-19T04-53-51-149Z.log
2025-09-19T10:24:26: 📝 Enhanced Logger initialized
2025-09-19T10:24:26: 📁 Loaded statistics from file
2025-09-19T10:24:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:26: 🧹 Removed stale process lock
2025-09-19T10:24:26: 🔒 Process lock acquired (PID: 11636)
2025-09-19T10:24:26: ℹ️ [10:24:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11636
}
2025-09-19T10:24:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:26: ℹ️ [10:24:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257665881, willExpireAt: 1758257905881 },
  timestamp: 1758257666024
}
2025-09-19T10:24:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:26: 📋 Message rules loaded: 8 types
2025-09-19T10:24:26: ℹ️ [10:24:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257665881, processId: 11636 },
  timestamp: 1758257666023
}
2025-09-19T10:24:26: ℹ️ [10:24:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 145,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:27: [INFO] WhatsApp client initialized
2025-09-19T10:24:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:29: 📝 Loaded 12 template types
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257669142,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17588,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:29: ⏰ 4-minute startup delay active
2025-09-19T10:24:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:29: [INFO] Using PQueue for job processing
2025-09-19T10:24:29: [INFO] Memory management setup completed
2025-09-19T10:24:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:29: [INFO] Checking process locks...
2025-09-19T10:24:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:29: [INFO] Process locks acquired successfully
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:29: [INFO] Logs directory created
2025-09-19T10:24:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:29: [10:24:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:29: [10:24:29 am] ✅ Google Sheets API initialized
2025-09-19T10:24:29: [INFO] Google Sheets helper initialized
2025-09-19T10:24:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:29: 🗑️ Deleted old log file: bot-2025-09-19T04-53-54-535Z.log
2025-09-19T10:24:29: 📝 Enhanced Logger initialized
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:29: 📁 Loaded statistics from file
2025-09-19T10:24:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:29: 🧹 Removed stale process lock
2025-09-19T10:24:29: 🔒 Process lock acquired (PID: 17588)
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17588
}
2025-09-19T10:24:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257669142, processId: 17588 },
  timestamp: 1758257669268
}
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257669142, willExpireAt: 1758257909142 },
  timestamp: 1758257669268
}
2025-09-19T10:24:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:29: 📋 Message rules loaded: 8 types
2025-09-19T10:24:29: ℹ️ [10:24:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:30: [INFO] WhatsApp client initialized
2025-09-19T10:24:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:32: 📝 Loaded 12 template types
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257672793,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17980,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:32: ⏰ 4-minute startup delay active
2025-09-19T10:24:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:32: [INFO] Using PQueue for job processing
2025-09-19T10:24:32: [INFO] Memory management setup completed
2025-09-19T10:24:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:32: [INFO] Checking process locks...
2025-09-19T10:24:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:32: [INFO] Process locks acquired successfully
2025-09-19T10:24:32: [INFO] Logs directory created
2025-09-19T10:24:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:32: [10:24:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:32: [10:24:32 am] ✅ Google Sheets API initialized
2025-09-19T10:24:32: [INFO] Google Sheets helper initialized
2025-09-19T10:24:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:32: 🗑️ Deleted old log file: bot-2025-09-19T04-53-57-801Z.log
2025-09-19T10:24:32: 📝 Enhanced Logger initialized
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:32: 📁 Loaded statistics from file
2025-09-19T10:24:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:32: 🧹 Removed stale process lock
2025-09-19T10:24:32: 🔒 Process lock acquired (PID: 17980)
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17980
}
2025-09-19T10:24:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257672793, processId: 17980 },
  timestamp: 1758257672916
}
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257672793, willExpireAt: 1758257912793 },
  timestamp: 1758257672916
}
2025-09-19T10:24:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:32: 📋 Message rules loaded: 8 types
2025-09-19T10:24:32: ℹ️ [10:24:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:33: [INFO] WhatsApp client initialized
2025-09-19T10:24:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:35: 📝 Loaded 12 template types
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257675816,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13984,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:35: ⏰ 4-minute startup delay active
2025-09-19T10:24:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:35: [INFO] Using PQueue for job processing
2025-09-19T10:24:35: [INFO] Memory management setup completed
2025-09-19T10:24:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:35: [INFO] Checking process locks...
2025-09-19T10:24:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:35: [INFO] Process locks acquired successfully
2025-09-19T10:24:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:35: [INFO] Logs directory created
2025-09-19T10:24:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:35: [10:24:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:35: [10:24:35 am] ✅ Google Sheets API initialized
2025-09-19T10:24:35: [INFO] Google Sheets helper initialized
2025-09-19T10:24:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:35: 🗑️ Deleted old log file: bot-2025-09-19T04-54-00-948Z.log
2025-09-19T10:24:35: 📝 Enhanced Logger initialized
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:35: 📁 Loaded statistics from file
2025-09-19T10:24:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:35: 🧹 Removed stale process lock
2025-09-19T10:24:35: 🔒 Process lock acquired (PID: 13984)
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13984
}
2025-09-19T10:24:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257675816, willExpireAt: 1758257915816 },
  timestamp: 1758257675935
}
2025-09-19T10:24:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:35: 📋 Message rules loaded: 8 types
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257675816, processId: 13984 },
  timestamp: 1758257675935
}
2025-09-19T10:24:35: ℹ️ [10:24:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:36: [INFO] WhatsApp client initialized
2025-09-19T10:24:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:38: 📝 Loaded 12 template types
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257678704,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4580,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:38: ⏰ 4-minute startup delay active
2025-09-19T10:24:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:38: [INFO] Using PQueue for job processing
2025-09-19T10:24:38: [INFO] Memory management setup completed
2025-09-19T10:24:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:38: [INFO] Checking process locks...
2025-09-19T10:24:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:38: [INFO] Process locks acquired successfully
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:38: [INFO] Logs directory created
2025-09-19T10:24:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:38: [10:24:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:38: [10:24:38 am] ✅ Google Sheets API initialized
2025-09-19T10:24:38: [INFO] Google Sheets helper initialized
2025-09-19T10:24:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:38: 🗑️ Deleted old log file: bot-2025-09-19T04-54-03-956Z.log
2025-09-19T10:24:38: 📝 Enhanced Logger initialized
2025-09-19T10:24:38: 📁 Loaded statistics from file
2025-09-19T10:24:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:38: 🧹 Removed stale process lock
2025-09-19T10:24:38: 🔒 Process lock acquired (PID: 4580)
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4580
}
2025-09-19T10:24:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257678704, processId: 4580 },
  timestamp: 1758257678822
}
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257678704, willExpireAt: 1758257918704 },
  timestamp: 1758257678823
}
2025-09-19T10:24:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:38: 📋 Message rules loaded: 8 types
2025-09-19T10:24:38: ℹ️ [10:24:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:40: [INFO] WhatsApp client initialized
2025-09-19T10:24:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:41: 📝 Loaded 12 template types
2025-09-19T10:24:41: ℹ️ [10:24:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257681935,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17868,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:41: ⏰ 4-minute startup delay active
2025-09-19T10:24:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:41: [INFO] Using PQueue for job processing
2025-09-19T10:24:41: [INFO] Memory management setup completed
2025-09-19T10:24:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:41: [INFO] Checking process locks...
2025-09-19T10:24:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:41: ℹ️ [10:24:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:41: [INFO] Process locks acquired successfully
2025-09-19T10:24:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:41: [INFO] Logs directory created
2025-09-19T10:24:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:41: [10:24:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:41: [10:24:41 am] ✅ Google Sheets API initialized
2025-09-19T10:24:41: [INFO] Google Sheets helper initialized
2025-09-19T10:24:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:42: 🗑️ Deleted old log file: bot-2025-09-19T04-54-07-085Z.log
2025-09-19T10:24:42: 📝 Enhanced Logger initialized
2025-09-19T10:24:42: ℹ️ [10:24:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:42: 📁 Loaded statistics from file
2025-09-19T10:24:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:42: 🧹 Removed stale process lock
2025-09-19T10:24:42: 🔒 Process lock acquired (PID: 17868)
2025-09-19T10:24:42: ℹ️ [10:24:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17868
}
2025-09-19T10:24:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:42: ℹ️ [10:24:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257681935, processId: 17868 },
  timestamp: 1758257682058
}
2025-09-19T10:24:42: ℹ️ [10:24:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257681935, willExpireAt: 1758257921935 },
  timestamp: 1758257682059
}
2025-09-19T10:24:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:42: 📋 Message rules loaded: 8 types
2025-09-19T10:24:42: ℹ️ [10:24:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:43: [INFO] WhatsApp client initialized
2025-09-19T10:24:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:44: 📝 Loaded 12 template types
2025-09-19T10:24:44: ℹ️ [10:24:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257684875,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:44: ⏰ 4-minute startup delay active
2025-09-19T10:24:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:44: [INFO] Using PQueue for job processing
2025-09-19T10:24:44: [INFO] Memory management setup completed
2025-09-19T10:24:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:44: [INFO] Checking process locks...
2025-09-19T10:24:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:44: ℹ️ [10:24:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:44: [INFO] Process locks acquired successfully
2025-09-19T10:24:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:44: [INFO] Logs directory created
2025-09-19T10:24:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:44: [10:24:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:44: [10:24:44 am] ✅ Google Sheets API initialized
2025-09-19T10:24:44: [INFO] Google Sheets helper initialized
2025-09-19T10:24:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:44: ℹ️ [10:24:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:44: 🗑️ Deleted old log file: bot-2025-09-19T04-54-10-401Z.log
2025-09-19T10:24:44: 📝 Enhanced Logger initialized
2025-09-19T10:24:44: 📁 Loaded statistics from file
2025-09-19T10:24:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:44: 🧹 Removed stale process lock
2025-09-19T10:24:44: 🔒 Process lock acquired (PID: 15720)
2025-09-19T10:24:44: ℹ️ [10:24:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15720
}
2025-09-19T10:24:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:45: ℹ️ [10:24:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257684875, processId: 15720 },
  timestamp: 1758257684999
}
2025-09-19T10:24:45: ℹ️ [10:24:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257684875, willExpireAt: 1758257924875 },
  timestamp: 1758257684999
}
2025-09-19T10:24:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:45: 📋 Message rules loaded: 8 types
2025-09-19T10:24:45: ℹ️ [10:24:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:45: [INFO] WhatsApp client initialized
2025-09-19T10:24:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:47: 📝 Loaded 12 template types
2025-09-19T10:24:47: ℹ️ [10:24:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257687846,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4752,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:47: ⏰ 4-minute startup delay active
2025-09-19T10:24:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:47: [INFO] Using PQueue for job processing
2025-09-19T10:24:47: [INFO] Memory management setup completed
2025-09-19T10:24:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:47: [INFO] Checking process locks...
2025-09-19T10:24:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:47: ℹ️ [10:24:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:47: [INFO] Process locks acquired successfully
2025-09-19T10:24:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:47: [INFO] Logs directory created
2025-09-19T10:24:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:47: [10:24:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:47: [10:24:47 am] ✅ Google Sheets API initialized
2025-09-19T10:24:47: [INFO] Google Sheets helper initialized
2025-09-19T10:24:47: ℹ️ [10:24:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:47: 🗑️ Deleted old log file: bot-2025-09-19T04-54-13-312Z.log
2025-09-19T10:24:47: 📝 Enhanced Logger initialized
2025-09-19T10:24:47: 📁 Loaded statistics from file
2025-09-19T10:24:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:47: 🧹 Removed stale process lock
2025-09-19T10:24:48: 🔒 Process lock acquired (PID: 4752)
2025-09-19T10:24:48: ℹ️ [10:24:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4752
}
2025-09-19T10:24:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:48: ℹ️ [10:24:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257687846, processId: 4752 },
  timestamp: 1758257688006
}
2025-09-19T10:24:48: ℹ️ [10:24:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257687846, willExpireAt: 1758257927846 },
  timestamp: 1758257688006
}
2025-09-19T10:24:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:48: 📋 Message rules loaded: 8 types
2025-09-19T10:24:48: ℹ️ [10:24:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 163,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:48: [INFO] WhatsApp client initialized
2025-09-19T10:24:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:51: 📝 Loaded 12 template types
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257691199,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10496,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:51: ⏰ 4-minute startup delay active
2025-09-19T10:24:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:51: [INFO] Using PQueue for job processing
2025-09-19T10:24:51: [INFO] Memory management setup completed
2025-09-19T10:24:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:51: [INFO] Checking process locks...
2025-09-19T10:24:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:51: [INFO] Process locks acquired successfully
2025-09-19T10:24:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:51: [INFO] Logs directory created
2025-09-19T10:24:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:51: [10:24:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:51: [10:24:51 am] ✅ Google Sheets API initialized
2025-09-19T10:24:51: [INFO] Google Sheets helper initialized
2025-09-19T10:24:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:51: 🗑️ Deleted old log file: bot-2025-09-19T04-54-16-468Z.log
2025-09-19T10:24:51: 📝 Enhanced Logger initialized
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:51: 📁 Loaded statistics from file
2025-09-19T10:24:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:51: 🧹 Removed stale process lock
2025-09-19T10:24:51: 🔒 Process lock acquired (PID: 10496)
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10496
}
2025-09-19T10:24:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257691199, processId: 10496 },
  timestamp: 1758257691330
}
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257691199, willExpireAt: 1758257931199 },
  timestamp: 1758257691330
}
2025-09-19T10:24:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:51: 📋 Message rules loaded: 8 types
2025-09-19T10:24:51: ℹ️ [10:24:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:52: [INFO] WhatsApp client initialized
2025-09-19T10:24:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:54: 📝 Loaded 12 template types
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257694367,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3412,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:54: ⏰ 4-minute startup delay active
2025-09-19T10:24:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:54: [INFO] Using PQueue for job processing
2025-09-19T10:24:54: [INFO] Memory management setup completed
2025-09-19T10:24:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:54: [INFO] Checking process locks...
2025-09-19T10:24:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:54: [INFO] Process locks acquired successfully
2025-09-19T10:24:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:54: [INFO] Logs directory created
2025-09-19T10:24:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:54: [10:24:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:54: [10:24:54 am] ✅ Google Sheets API initialized
2025-09-19T10:24:54: [INFO] Google Sheets helper initialized
2025-09-19T10:24:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:54: 🗑️ Deleted old log file: bot-2025-09-19T04-54-19-566Z.log
2025-09-19T10:24:54: 📝 Enhanced Logger initialized
2025-09-19T10:24:54: 📁 Loaded statistics from file
2025-09-19T10:24:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:54: 🧹 Removed stale process lock
2025-09-19T10:24:54: 🔒 Process lock acquired (PID: 3412)
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3412
}
2025-09-19T10:24:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257694367, processId: 3412 },
  timestamp: 1758257694499
}
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257694367, willExpireAt: 1758257934367 },
  timestamp: 1758257694500
}
2025-09-19T10:24:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:54: 📋 Message rules loaded: 8 types
2025-09-19T10:24:54: ℹ️ [10:24:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 135,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:55: [INFO] WhatsApp client initialized
2025-09-19T10:24:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:24:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:24:57: 📝 Loaded 12 template types
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257697726,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6616,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:24:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:24:57: ⏰ 4-minute startup delay active
2025-09-19T10:24:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:24:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:24:57: [INFO] Using PQueue for job processing
2025-09-19T10:24:57: [INFO] Memory management setup completed
2025-09-19T10:24:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:24:57: [INFO] Checking process locks...
2025-09-19T10:24:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:24:57: [INFO] Process locks acquired successfully
2025-09-19T10:24:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:24:57: [INFO] Logs directory created
2025-09-19T10:24:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:24:57: [10:24:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:24:57: [10:24:57 am] ✅ Google Sheets API initialized
2025-09-19T10:24:57: [INFO] Google Sheets helper initialized
2025-09-19T10:24:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:24:57: 🗑️ Deleted old log file: bot-2025-09-19T04-54-22-735Z.log
2025-09-19T10:24:57: 📝 Enhanced Logger initialized
2025-09-19T10:24:57: 📁 Loaded statistics from file
2025-09-19T10:24:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:24:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:24:57: 🧹 Removed stale process lock
2025-09-19T10:24:57: 🔒 Process lock acquired (PID: 6616)
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6616
}
2025-09-19T10:24:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:24:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257697726, willExpireAt: 1758257937726 },
  timestamp: 1758257697884
}
2025-09-19T10:24:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:24:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:24:57: 📋 Message rules loaded: 8 types
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257697726, processId: 6616 },
  timestamp: 1758257697884
}
2025-09-19T10:24:57: ℹ️ [10:24:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 161,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:24:59: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:24:59: [INFO] Initializing WhatsApp client...
2025-09-19T10:24:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:24:59: [INFO] WhatsApp client initialized
2025-09-19T10:25:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:01: 📝 Loaded 12 template types
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257701555,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13020,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:01: ⏰ 4-minute startup delay active
2025-09-19T10:25:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:01: [INFO] Using PQueue for job processing
2025-09-19T10:25:01: [INFO] Memory management setup completed
2025-09-19T10:25:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:01: [INFO] Checking process locks...
2025-09-19T10:25:01: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:01: [INFO] Process locks acquired successfully
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:01: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:01: [INFO] Logs directory created
2025-09-19T10:25:01: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:01: [10:25:01 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:01: [10:25:01 am] ✅ Google Sheets API initialized
2025-09-19T10:25:01: [INFO] Google Sheets helper initialized
2025-09-19T10:25:01: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:01: 🗑️ Deleted old log file: bot-2025-09-19T04-54-25-915Z.log
2025-09-19T10:25:01: 📝 Enhanced Logger initialized
2025-09-19T10:25:01: 📁 Loaded statistics from file
2025-09-19T10:25:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:01: 🧹 Removed stale process lock
2025-09-19T10:25:01: 🔒 Process lock acquired (PID: 13020)
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13020
}
2025-09-19T10:25:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257701555, processId: 13020 },
  timestamp: 1758257701685
}
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257701555, willExpireAt: 1758257941555 },
  timestamp: 1758257701686
}
2025-09-19T10:25:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:01: 📋 Message rules loaded: 8 types
2025-09-19T10:25:01: ℹ️ [10:25:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:02: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:02: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:03: [INFO] WhatsApp client initialized
2025-09-19T10:25:04: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:04: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:04: 📝 Loaded 12 template types
2025-09-19T10:25:04: ℹ️ [10:25:04 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257704843,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6172,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:04: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:04: ⏰ 4-minute startup delay active
2025-09-19T10:25:04: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:04: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:04: [INFO] Using PQueue for job processing
2025-09-19T10:25:04: [INFO] Memory management setup completed
2025-09-19T10:25:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:04: [INFO] Checking process locks...
2025-09-19T10:25:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:04: ℹ️ [10:25:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:04: [INFO] Process locks acquired successfully
2025-09-19T10:25:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:04: [INFO] Logs directory created
2025-09-19T10:25:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:04: [10:25:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:04: [10:25:04 am] ✅ Google Sheets API initialized
2025-09-19T10:25:04: [INFO] Google Sheets helper initialized
2025-09-19T10:25:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:04: ℹ️ [10:25:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:04: 🗑️ Deleted old log file: bot-2025-09-19T04-54-29-180Z.log
2025-09-19T10:25:04: 📝 Enhanced Logger initialized
2025-09-19T10:25:04: 📁 Loaded statistics from file
2025-09-19T10:25:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:04: 🧹 Removed stale process lock
2025-09-19T10:25:04: 🔒 Process lock acquired (PID: 6172)
2025-09-19T10:25:04: ℹ️ [10:25:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6172
}
2025-09-19T10:25:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:04: ℹ️ [10:25:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257704843, processId: 6172 },
  timestamp: 1758257704990
}
2025-09-19T10:25:04: ℹ️ [10:25:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257704843, willExpireAt: 1758257944843 },
  timestamp: 1758257704990
}
2025-09-19T10:25:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:04: 📋 Message rules loaded: 8 types
2025-09-19T10:25:05: ℹ️ [10:25:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 154,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:06: [INFO] WhatsApp client initialized
2025-09-19T10:25:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:08: 📝 Loaded 12 template types
2025-09-19T10:25:08: ℹ️ [10:25:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257708901,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7756,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:08: ⏰ 4-minute startup delay active
2025-09-19T10:25:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:08: [INFO] Using PQueue for job processing
2025-09-19T10:25:08: [INFO] Memory management setup completed
2025-09-19T10:25:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:08: [INFO] Checking process locks...
2025-09-19T10:25:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:08: ℹ️ [10:25:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:08: [INFO] Process locks acquired successfully
2025-09-19T10:25:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:08: [INFO] Logs directory created
2025-09-19T10:25:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:08: [10:25:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:08: [10:25:08 am] ✅ Google Sheets API initialized
2025-09-19T10:25:08: [INFO] Google Sheets helper initialized
2025-09-19T10:25:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:08: ℹ️ [10:25:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:08: 🗑️ Deleted old log file: bot-2025-09-19T04-54-32-831Z.log
2025-09-19T10:25:08: 📝 Enhanced Logger initialized
2025-09-19T10:25:09: 📁 Loaded statistics from file
2025-09-19T10:25:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:09: 🧹 Removed stale process lock
2025-09-19T10:25:09: 🔒 Process lock acquired (PID: 7756)
2025-09-19T10:25:09: ℹ️ [10:25:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7756
}
2025-09-19T10:25:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:09: ℹ️ [10:25:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257708901, processId: 7756 },
  timestamp: 1758257709103
}
2025-09-19T10:25:09: ℹ️ [10:25:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257708901, willExpireAt: 1758257948901 },
  timestamp: 1758257709103
}
2025-09-19T10:25:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:09: 📋 Message rules loaded: 8 types
2025-09-19T10:25:09: ℹ️ [10:25:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 205,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:10: [INFO] WhatsApp client initialized
2025-09-19T10:25:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:12: 📝 Loaded 12 template types
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257712627,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17604,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:12: ⏰ 4-minute startup delay active
2025-09-19T10:25:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:12: [INFO] Using PQueue for job processing
2025-09-19T10:25:12: [INFO] Memory management setup completed
2025-09-19T10:25:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:12: [INFO] Checking process locks...
2025-09-19T10:25:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:12: [INFO] Process locks acquired successfully
2025-09-19T10:25:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:12: [INFO] Logs directory created
2025-09-19T10:25:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:12: [10:25:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:12: [10:25:12 am] ✅ Google Sheets API initialized
2025-09-19T10:25:12: [INFO] Google Sheets helper initialized
2025-09-19T10:25:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:12: 🗑️ Deleted old log file: bot-2025-09-19T04-54-35-849Z.log
2025-09-19T10:25:12: 📝 Enhanced Logger initialized
2025-09-19T10:25:12: 📁 Loaded statistics from file
2025-09-19T10:25:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:12: 🧹 Removed stale process lock
2025-09-19T10:25:12: 🔒 Process lock acquired (PID: 17604)
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17604
}
2025-09-19T10:25:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257712627, processId: 17604 },
  timestamp: 1758257712754
}
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257712627, willExpireAt: 1758257952627 },
  timestamp: 1758257712754
}
2025-09-19T10:25:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:12: 📋 Message rules loaded: 8 types
2025-09-19T10:25:12: ℹ️ [10:25:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:13: [INFO] WhatsApp client initialized
2025-09-19T10:25:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:18: 📝 Loaded 12 template types
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257718017,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17088,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:18: ⏰ 4-minute startup delay active
2025-09-19T10:25:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:18: [INFO] Using PQueue for job processing
2025-09-19T10:25:18: [INFO] Memory management setup completed
2025-09-19T10:25:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:18: [INFO] Checking process locks...
2025-09-19T10:25:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:18: [INFO] Process locks acquired successfully
2025-09-19T10:25:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:18: [INFO] Logs directory created
2025-09-19T10:25:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:18: [10:25:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:18: [10:25:18 am] ✅ Google Sheets API initialized
2025-09-19T10:25:18: [INFO] Google Sheets helper initialized
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:18: 🗑️ Deleted old log file: bot-2025-09-19T04-54-38-736Z.log
2025-09-19T10:25:18: 📝 Enhanced Logger initialized
2025-09-19T10:25:18: 📁 Loaded statistics from file
2025-09-19T10:25:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:18: 🧹 Removed stale process lock
2025-09-19T10:25:18: 🔒 Process lock acquired (PID: 17088)
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17088
}
2025-09-19T10:25:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257718017, willExpireAt: 1758257958017 },
  timestamp: 1758257718304
}
2025-09-19T10:25:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:18: 📋 Message rules loaded: 8 types
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257718017, processId: 17088 },
  timestamp: 1758257718304
}
2025-09-19T10:25:18: ℹ️ [10:25:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 290,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:21: [INFO] WhatsApp client initialized
2025-09-19T10:25:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:22: 📝 Loaded 12 template types
2025-09-19T10:25:23: ℹ️ [10:25:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257722985,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15428,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:23: ⏰ 4-minute startup delay active
2025-09-19T10:25:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:23: [INFO] Using PQueue for job processing
2025-09-19T10:25:23: [INFO] Memory management setup completed
2025-09-19T10:25:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:23: [INFO] Checking process locks...
2025-09-19T10:25:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:23: ℹ️ [10:25:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:23: [INFO] Process locks acquired successfully
2025-09-19T10:25:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:23: [INFO] Logs directory created
2025-09-19T10:25:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:23: [10:25:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:23: [10:25:23 am] ✅ Google Sheets API initialized
2025-09-19T10:25:23: [INFO] Google Sheets helper initialized
2025-09-19T10:25:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:23: 🗑️ Deleted old log file: bot-2025-09-19T04-54-41-970Z.log
2025-09-19T10:25:23: 📝 Enhanced Logger initialized
2025-09-19T10:25:23: ℹ️ [10:25:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:23: 📁 Loaded statistics from file
2025-09-19T10:25:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:23: 🧹 Removed stale process lock
2025-09-19T10:25:23: 🔒 Process lock acquired (PID: 15428)
2025-09-19T10:25:23: ℹ️ [10:25:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15428
}
2025-09-19T10:25:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:23: ℹ️ [10:25:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257722985, processId: 15428 },
  timestamp: 1758257723085
}
2025-09-19T10:25:23: ℹ️ [10:25:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257722985, willExpireAt: 1758257962985 },
  timestamp: 1758257723085
}
2025-09-19T10:25:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:23: 📋 Message rules loaded: 8 types
2025-09-19T10:25:23: ℹ️ [10:25:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:24: [INFO] WhatsApp client initialized
2025-09-19T10:25:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:25: 📝 Loaded 12 template types
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257725821,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5728,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:25: ⏰ 4-minute startup delay active
2025-09-19T10:25:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:25: [INFO] Using PQueue for job processing
2025-09-19T10:25:25: [INFO] Memory management setup completed
2025-09-19T10:25:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:25: [INFO] Checking process locks...
2025-09-19T10:25:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:25: [INFO] Process locks acquired successfully
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:25: [INFO] Logs directory created
2025-09-19T10:25:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:25: [10:25:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:25: [10:25:25 am] ✅ Google Sheets API initialized
2025-09-19T10:25:25: [INFO] Google Sheets helper initialized
2025-09-19T10:25:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:25: 🗑️ Deleted old log file: bot-2025-09-19T04-54-44-910Z.log
2025-09-19T10:25:25: 📝 Enhanced Logger initialized
2025-09-19T10:25:25: 📁 Loaded statistics from file
2025-09-19T10:25:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:25: 🧹 Removed stale process lock
2025-09-19T10:25:25: 🔒 Process lock acquired (PID: 5728)
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5728
}
2025-09-19T10:25:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257725821, processId: 5728 },
  timestamp: 1758257725956
}
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257725821, willExpireAt: 1758257965821 },
  timestamp: 1758257725956
}
2025-09-19T10:25:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:25: 📋 Message rules loaded: 8 types
2025-09-19T10:25:25: ℹ️ [10:25:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:27: [INFO] WhatsApp client initialized
2025-09-19T10:25:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:29: 📝 Loaded 12 template types
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257729459,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10176,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:29: ⏰ 4-minute startup delay active
2025-09-19T10:25:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:29: [INFO] Using PQueue for job processing
2025-09-19T10:25:29: [INFO] Memory management setup completed
2025-09-19T10:25:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:29: [INFO] Checking process locks...
2025-09-19T10:25:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:29: [INFO] Process locks acquired successfully
2025-09-19T10:25:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:29: [INFO] Logs directory created
2025-09-19T10:25:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:29: [10:25:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:29: [10:25:29 am] ✅ Google Sheets API initialized
2025-09-19T10:25:29: [INFO] Google Sheets helper initialized
2025-09-19T10:25:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:29: 🗑️ Deleted old log file: bot-2025-09-19T04-54-47-893Z.log
2025-09-19T10:25:29: 📝 Enhanced Logger initialized
2025-09-19T10:25:29: 📁 Loaded statistics from file
2025-09-19T10:25:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:29: 🧹 Removed stale process lock
2025-09-19T10:25:29: 🔒 Process lock acquired (PID: 10176)
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10176
}
2025-09-19T10:25:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257729459, willExpireAt: 1758257969459 },
  timestamp: 1758257729575
}
2025-09-19T10:25:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:29: 📋 Message rules loaded: 8 types
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257729459, processId: 10176 },
  timestamp: 1758257729575
}
2025-09-19T10:25:29: ℹ️ [10:25:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 118,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:30: [INFO] WhatsApp client initialized
2025-09-19T10:25:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:32: 📝 Loaded 12 template types
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257732711,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10476,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:32: ⏰ 4-minute startup delay active
2025-09-19T10:25:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:32: [INFO] Using PQueue for job processing
2025-09-19T10:25:32: [INFO] Memory management setup completed
2025-09-19T10:25:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:32: [INFO] Checking process locks...
2025-09-19T10:25:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:32: [INFO] Process locks acquired successfully
2025-09-19T10:25:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:32: [INFO] Logs directory created
2025-09-19T10:25:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:32: [10:25:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:32: [10:25:32 am] ✅ Google Sheets API initialized
2025-09-19T10:25:32: [INFO] Google Sheets helper initialized
2025-09-19T10:25:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:32: 🗑️ Deleted old log file: bot-2025-09-19T04-54-51-237Z.log
2025-09-19T10:25:32: 📝 Enhanced Logger initialized
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:32: 📁 Loaded statistics from file
2025-09-19T10:25:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:32: 🧹 Removed stale process lock
2025-09-19T10:25:32: 🔒 Process lock acquired (PID: 10476)
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10476
}
2025-09-19T10:25:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257732711, processId: 10476 },
  timestamp: 1758257732856
}
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257732711, willExpireAt: 1758257972711 },
  timestamp: 1758257732857
}
2025-09-19T10:25:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:32: 📋 Message rules loaded: 8 types
2025-09-19T10:25:32: ℹ️ [10:25:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 151,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:35: 📝 Loaded 12 template types
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257735532,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8400,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:35: ⏰ 4-minute startup delay active
2025-09-19T10:25:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:35: [INFO] Using PQueue for job processing
2025-09-19T10:25:35: [INFO] Memory management setup completed
2025-09-19T10:25:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:35: [INFO] Checking process locks...
2025-09-19T10:25:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:35: [INFO] Process locks acquired successfully
2025-09-19T10:25:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:35: [INFO] Logs directory created
2025-09-19T10:25:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:35: [10:25:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:35: [10:25:35 am] ✅ Google Sheets API initialized
2025-09-19T10:25:35: [INFO] Google Sheets helper initialized
2025-09-19T10:25:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:35: 🗑️ Deleted old log file: bot-2025-09-19T04-54-54-406Z.log
2025-09-19T10:25:35: 📝 Enhanced Logger initialized
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:35: 📁 Loaded statistics from file
2025-09-19T10:25:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:35: 🧹 Removed stale process lock
2025-09-19T10:25:35: 🔒 Process lock acquired (PID: 8400)
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8400
}
2025-09-19T10:25:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257735532, processId: 8400 },
  timestamp: 1758257735660
}
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257735532, willExpireAt: 1758257975532 },
  timestamp: 1758257735660
}
2025-09-19T10:25:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:35: 📋 Message rules loaded: 8 types
2025-09-19T10:25:35: ℹ️ [10:25:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:36: [INFO] WhatsApp client initialized
2025-09-19T10:25:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:38: 📝 Loaded 12 template types
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257738634,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17984,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:38: ⏰ 4-minute startup delay active
2025-09-19T10:25:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:38: [INFO] Using PQueue for job processing
2025-09-19T10:25:38: [INFO] Memory management setup completed
2025-09-19T10:25:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:38: [INFO] Checking process locks...
2025-09-19T10:25:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:38: [INFO] Process locks acquired successfully
2025-09-19T10:25:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:38: [INFO] Logs directory created
2025-09-19T10:25:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:38: [10:25:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:38: [10:25:38 am] ✅ Google Sheets API initialized
2025-09-19T10:25:38: [INFO] Google Sheets helper initialized
2025-09-19T10:25:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:38: 🗑️ Deleted old log file: bot-2025-09-19T04-54-57-766Z.log
2025-09-19T10:25:38: 📝 Enhanced Logger initialized
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:38: 📁 Loaded statistics from file
2025-09-19T10:25:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:38: 🧹 Removed stale process lock
2025-09-19T10:25:38: 🔒 Process lock acquired (PID: 17984)
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17984
}
2025-09-19T10:25:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257738634, processId: 17984 },
  timestamp: 1758257738747
}
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257738634, willExpireAt: 1758257978634 },
  timestamp: 1758257738748
}
2025-09-19T10:25:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:38: 📋 Message rules loaded: 8 types
2025-09-19T10:25:38: ℹ️ [10:25:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:40: [INFO] WhatsApp client initialized
2025-09-19T10:25:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:42: 📝 Loaded 12 template types
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257742234,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16912,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:42: ⏰ 4-minute startup delay active
2025-09-19T10:25:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:42: [INFO] Using PQueue for job processing
2025-09-19T10:25:42: [INFO] Memory management setup completed
2025-09-19T10:25:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:42: [INFO] Checking process locks...
2025-09-19T10:25:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:42: [INFO] Process locks acquired successfully
2025-09-19T10:25:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:42: [INFO] Logs directory created
2025-09-19T10:25:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:42: [10:25:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:42: [10:25:42 am] ✅ Google Sheets API initialized
2025-09-19T10:25:42: [INFO] Google Sheets helper initialized
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:42: 🗑️ Deleted old log file: bot-2025-09-19T04-55-01-597Z.log
2025-09-19T10:25:42: 📝 Enhanced Logger initialized
2025-09-19T10:25:42: 📁 Loaded statistics from file
2025-09-19T10:25:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:42: 🧹 Removed stale process lock
2025-09-19T10:25:42: 🔒 Process lock acquired (PID: 16912)
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16912
}
2025-09-19T10:25:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257742234, willExpireAt: 1758257982234 },
  timestamp: 1758257742351
}
2025-09-19T10:25:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:42: 📋 Message rules loaded: 8 types
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257742234, processId: 16912 },
  timestamp: 1758257742350
}
2025-09-19T10:25:42: ℹ️ [10:25:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 118,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:43: [INFO] WhatsApp client initialized
2025-09-19T10:25:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:45: 📝 Loaded 12 template types
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257745519,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6968,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:45: ⏰ 4-minute startup delay active
2025-09-19T10:25:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:45: [INFO] Using PQueue for job processing
2025-09-19T10:25:45: [INFO] Memory management setup completed
2025-09-19T10:25:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:45: [INFO] Checking process locks...
2025-09-19T10:25:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:45: [INFO] Process locks acquired successfully
2025-09-19T10:25:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:45: [INFO] Logs directory created
2025-09-19T10:25:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:45: [10:25:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:45: [10:25:45 am] ✅ Google Sheets API initialized
2025-09-19T10:25:45: [INFO] Google Sheets helper initialized
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:45: 🗑️ Deleted old log file: bot-2025-09-19T04-55-04-881Z.log
2025-09-19T10:25:45: 📝 Enhanced Logger initialized
2025-09-19T10:25:45: 📁 Loaded statistics from file
2025-09-19T10:25:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:45: 🧹 Removed stale process lock
2025-09-19T10:25:45: 🔒 Process lock acquired (PID: 6968)
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6968
}
2025-09-19T10:25:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257745519, willExpireAt: 1758257985519 },
  timestamp: 1758257745642
}
2025-09-19T10:25:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:45: 📋 Message rules loaded: 8 types
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257745519, processId: 6968 },
  timestamp: 1758257745642
}
2025-09-19T10:25:45: ℹ️ [10:25:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:47: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:47: [INFO] WhatsApp client initialized
2025-09-19T10:25:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:48: 📝 Loaded 12 template types
2025-09-19T10:25:49: ℹ️ [10:25:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257748984,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14772,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:49: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:49: ⏰ 4-minute startup delay active
2025-09-19T10:25:49: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:49: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:49: [INFO] Using PQueue for job processing
2025-09-19T10:25:49: [INFO] Memory management setup completed
2025-09-19T10:25:49: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:49: [INFO] Checking process locks...
2025-09-19T10:25:49: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:49: [INFO] Process locks acquired successfully
2025-09-19T10:25:49: ℹ️ [10:25:49 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:49: [INFO] Logs directory created
2025-09-19T10:25:49: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:49: [10:25:49 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:49: [10:25:49 am] ✅ Google Sheets API initialized
2025-09-19T10:25:49: [INFO] Google Sheets helper initialized
2025-09-19T10:25:49: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:49: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:49: 🗑️ Deleted old log file: bot-2025-09-19T04-55-08-961Z.log
2025-09-19T10:25:49: 📝 Enhanced Logger initialized
2025-09-19T10:25:49: ℹ️ [10:25:49 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:49: 📁 Loaded statistics from file
2025-09-19T10:25:49: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:49: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:49: 🧹 Removed stale process lock
2025-09-19T10:25:49: 🔒 Process lock acquired (PID: 14772)
2025-09-19T10:25:49: ℹ️ [10:25:49 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14772
}
2025-09-19T10:25:49: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:49: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:49: ℹ️ [10:25:49 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257748984, processId: 14772 },
  timestamp: 1758257749101
}
2025-09-19T10:25:49: ℹ️ [10:25:49 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257748984, willExpireAt: 1758257988984 },
  timestamp: 1758257749102
}
2025-09-19T10:25:49: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:49: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:49: 📋 Message rules loaded: 8 types
2025-09-19T10:25:49: ℹ️ [10:25:49 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:50: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:50: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:50: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:50: [INFO] WhatsApp client initialized
2025-09-19T10:25:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:52: 📝 Loaded 12 template types
2025-09-19T10:25:52: ℹ️ [10:25:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257752865,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15528,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:52: ⏰ 4-minute startup delay active
2025-09-19T10:25:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:52: [INFO] Using PQueue for job processing
2025-09-19T10:25:52: [INFO] Memory management setup completed
2025-09-19T10:25:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:52: [INFO] Checking process locks...
2025-09-19T10:25:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:52: ℹ️ [10:25:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:52: [INFO] Process locks acquired successfully
2025-09-19T10:25:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:52: [INFO] Logs directory created
2025-09-19T10:25:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:52: [10:25:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:52: [10:25:52 am] ✅ Google Sheets API initialized
2025-09-19T10:25:52: [INFO] Google Sheets helper initialized
2025-09-19T10:25:52: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:53: ℹ️ [10:25:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:53: 🗑️ Deleted old log file: bot-2025-09-19T04-55-12-667Z.log
2025-09-19T10:25:53: 📝 Enhanced Logger initialized
2025-09-19T10:25:53: 📁 Loaded statistics from file
2025-09-19T10:25:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:53: 🧹 Removed stale process lock
2025-09-19T10:25:53: 🔒 Process lock acquired (PID: 15528)
2025-09-19T10:25:53: ℹ️ [10:25:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15528
}
2025-09-19T10:25:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:53: ℹ️ [10:25:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257752865, processId: 15528 },
  timestamp: 1758257753011
}
2025-09-19T10:25:53: ℹ️ [10:25:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257752865, willExpireAt: 1758257992865 },
  timestamp: 1758257753011
}
2025-09-19T10:25:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:53: 📋 Message rules loaded: 8 types
2025-09-19T10:25:53: ℹ️ [10:25:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 149,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:54: [INFO] WhatsApp client initialized
2025-09-19T10:25:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:25:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:25:56: 📝 Loaded 12 template types
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257756360,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11084,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:25:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:25:56: ⏰ 4-minute startup delay active
2025-09-19T10:25:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:25:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:25:56: [INFO] Using PQueue for job processing
2025-09-19T10:25:56: [INFO] Memory management setup completed
2025-09-19T10:25:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:25:56: [INFO] Checking process locks...
2025-09-19T10:25:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:25:56: [INFO] Process locks acquired successfully
2025-09-19T10:25:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:25:56: [INFO] Logs directory created
2025-09-19T10:25:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:25:56: [10:25:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:25:56: [10:25:56 am] ✅ Google Sheets API initialized
2025-09-19T10:25:56: [INFO] Google Sheets helper initialized
2025-09-19T10:25:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:25:56: 🗑️ Deleted old log file: bot-2025-09-19T04-55-18-088Z.log
2025-09-19T10:25:56: 📝 Enhanced Logger initialized
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:25:56: 📁 Loaded statistics from file
2025-09-19T10:25:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:25:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:25:56: 🧹 Removed stale process lock
2025-09-19T10:25:56: 🔒 Process lock acquired (PID: 11084)
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11084
}
2025-09-19T10:25:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:25:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257756360, processId: 11084 },
  timestamp: 1758257756464
}
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257756360, willExpireAt: 1758257996360 },
  timestamp: 1758257756464
}
2025-09-19T10:25:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:25:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:25:56: 📋 Message rules loaded: 8 types
2025-09-19T10:25:56: ℹ️ [10:25:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 107,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:25:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:25:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:25:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:25:58: [INFO] WhatsApp client initialized
2025-09-19T10:26:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:00: 📝 Loaded 12 template types
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257760120,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15828,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:00: ⏰ 4-minute startup delay active
2025-09-19T10:26:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:00: [INFO] Using PQueue for job processing
2025-09-19T10:26:00: [INFO] Memory management setup completed
2025-09-19T10:26:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:00: [INFO] Checking process locks...
2025-09-19T10:26:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:00: [INFO] Process locks acquired successfully
2025-09-19T10:26:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:00: [INFO] Logs directory created
2025-09-19T10:26:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:00: [10:26:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:00: [10:26:00 am] ✅ Google Sheets API initialized
2025-09-19T10:26:00: [INFO] Google Sheets helper initialized
2025-09-19T10:26:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:00: 🗑️ Deleted old log file: bot-2025-09-19T04-55-23-012Z.log
2025-09-19T10:26:00: 📝 Enhanced Logger initialized
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:00: 📁 Loaded statistics from file
2025-09-19T10:26:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:00: 🧹 Removed stale process lock
2025-09-19T10:26:00: 🔒 Process lock acquired (PID: 15828)
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15828
}
2025-09-19T10:26:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257760120, processId: 15828 },
  timestamp: 1758257760233
}
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257760120, willExpireAt: 1758258000120 },
  timestamp: 1758257760234
}
2025-09-19T10:26:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:00: 📋 Message rules loaded: 8 types
2025-09-19T10:26:00: ℹ️ [10:26:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:01: [INFO] WhatsApp client initialized
2025-09-19T10:26:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:03: 📝 Loaded 12 template types
2025-09-19T10:26:03: ℹ️ [10:26:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257763901,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5540,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:03: ⏰ 4-minute startup delay active
2025-09-19T10:26:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:03: [INFO] Using PQueue for job processing
2025-09-19T10:26:03: [INFO] Memory management setup completed
2025-09-19T10:26:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:03: [INFO] Checking process locks...
2025-09-19T10:26:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:03: ℹ️ [10:26:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:03: [INFO] Process locks acquired successfully
2025-09-19T10:26:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:03: [INFO] Logs directory created
2025-09-19T10:26:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:03: [10:26:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:03: [10:26:03 am] ✅ Google Sheets API initialized
2025-09-19T10:26:03: [INFO] Google Sheets helper initialized
2025-09-19T10:26:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:04: 🗑️ Deleted old log file: bot-2025-09-19T04-55-25-850Z.log
2025-09-19T10:26:04: 📝 Enhanced Logger initialized
2025-09-19T10:26:04: ℹ️ [10:26:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:04: 📁 Loaded statistics from file
2025-09-19T10:26:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:04: 🧹 Removed stale process lock
2025-09-19T10:26:04: 🔒 Process lock acquired (PID: 5540)
2025-09-19T10:26:04: ℹ️ [10:26:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5540
}
2025-09-19T10:26:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:04: ℹ️ [10:26:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257763901, processId: 5540 },
  timestamp: 1758257764023
}
2025-09-19T10:26:04: ℹ️ [10:26:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257763901, willExpireAt: 1758258003901 },
  timestamp: 1758257764023
}
2025-09-19T10:26:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:04: 📋 Message rules loaded: 8 types
2025-09-19T10:26:04: ℹ️ [10:26:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:05: [INFO] WhatsApp client initialized
2025-09-19T10:26:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:07: 📝 Loaded 12 template types
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257767223,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18264,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:07: ⏰ 4-minute startup delay active
2025-09-19T10:26:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:07: [INFO] Using PQueue for job processing
2025-09-19T10:26:07: [INFO] Memory management setup completed
2025-09-19T10:26:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:07: [INFO] Checking process locks...
2025-09-19T10:26:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:07: [INFO] Process locks acquired successfully
2025-09-19T10:26:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:07: [INFO] Logs directory created
2025-09-19T10:26:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:07: [10:26:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:07: [10:26:07 am] ✅ Google Sheets API initialized
2025-09-19T10:26:07: [INFO] Google Sheets helper initialized
2025-09-19T10:26:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:07: 🗑️ Deleted old log file: bot-2025-09-19T04-55-29-492Z.log
2025-09-19T10:26:07: 📝 Enhanced Logger initialized
2025-09-19T10:26:07: 📁 Loaded statistics from file
2025-09-19T10:26:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:07: 🧹 Removed stale process lock
2025-09-19T10:26:07: 🔒 Process lock acquired (PID: 18264)
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18264
}
2025-09-19T10:26:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257767223, processId: 18264 },
  timestamp: 1758257767382
}
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257767223, willExpireAt: 1758258007223 },
  timestamp: 1758257767382
}
2025-09-19T10:26:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:07: 📋 Message rules loaded: 8 types
2025-09-19T10:26:07: ℹ️ [10:26:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 163,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:08: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:08: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:08: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:08: [INFO] WhatsApp client initialized
2025-09-19T10:26:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:10: 📝 Loaded 12 template types
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257770631,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3896,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:10: ⏰ 4-minute startup delay active
2025-09-19T10:26:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:10: [INFO] Using PQueue for job processing
2025-09-19T10:26:10: [INFO] Memory management setup completed
2025-09-19T10:26:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:10: [INFO] Checking process locks...
2025-09-19T10:26:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:10: [INFO] Process locks acquired successfully
2025-09-19T10:26:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:10: [INFO] Logs directory created
2025-09-19T10:26:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:10: [10:26:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:10: [10:26:10 am] ✅ Google Sheets API initialized
2025-09-19T10:26:10: [INFO] Google Sheets helper initialized
2025-09-19T10:26:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:10: 🗑️ Deleted old log file: bot-2025-09-19T04-55-32-755Z.log
2025-09-19T10:26:10: 📝 Enhanced Logger initialized
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:10: 📁 Loaded statistics from file
2025-09-19T10:26:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:10: 🧹 Removed stale process lock
2025-09-19T10:26:10: 🔒 Process lock acquired (PID: 3896)
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3896
}
2025-09-19T10:26:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257770631, processId: 3896 },
  timestamp: 1758257770769
}
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257770631, willExpireAt: 1758258010631 },
  timestamp: 1758257770769
}
2025-09-19T10:26:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:10: 📋 Message rules loaded: 8 types
2025-09-19T10:26:10: ℹ️ [10:26:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 141,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:12: [INFO] WhatsApp client initialized
2025-09-19T10:26:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:14: 📝 Loaded 12 template types
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257774769,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16536,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:14: ⏰ 4-minute startup delay active
2025-09-19T10:26:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:14: [INFO] Using PQueue for job processing
2025-09-19T10:26:14: [INFO] Memory management setup completed
2025-09-19T10:26:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:14: [INFO] Checking process locks...
2025-09-19T10:26:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:14: [INFO] Process locks acquired successfully
2025-09-19T10:26:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:14: [INFO] Logs directory created
2025-09-19T10:26:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:14: [10:26:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:14: [10:26:14 am] ✅ Google Sheets API initialized
2025-09-19T10:26:14: [INFO] Google Sheets helper initialized
2025-09-19T10:26:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:14: 🗑️ Deleted old log file: bot-2025-09-19T04-55-35-571Z.log
2025-09-19T10:26:14: 📝 Enhanced Logger initialized
2025-09-19T10:26:14: 📁 Loaded statistics from file
2025-09-19T10:26:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:14: 🧹 Removed stale process lock
2025-09-19T10:26:14: 🔒 Process lock acquired (PID: 16536)
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16536
}
2025-09-19T10:26:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257774769, processId: 16536 },
  timestamp: 1758257774917
}
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257774769, willExpireAt: 1758258014769 },
  timestamp: 1758257774918
}
2025-09-19T10:26:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:14: 📋 Message rules loaded: 8 types
2025-09-19T10:26:14: ℹ️ [10:26:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 151,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:15: [INFO] WhatsApp client initialized
2025-09-19T10:26:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:17: 📝 Loaded 12 template types
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257777643,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11032,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:17: ⏰ 4-minute startup delay active
2025-09-19T10:26:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:17: [INFO] Using PQueue for job processing
2025-09-19T10:26:17: [INFO] Memory management setup completed
2025-09-19T10:26:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:17: [INFO] Checking process locks...
2025-09-19T10:26:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:17: [INFO] Process locks acquired successfully
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:17: [INFO] Logs directory created
2025-09-19T10:26:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:17: [10:26:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:17: [10:26:17 am] ✅ Google Sheets API initialized
2025-09-19T10:26:17: [INFO] Google Sheets helper initialized
2025-09-19T10:26:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:17: 🗑️ Deleted old log file: bot-2025-09-19T04-55-38-664Z.log
2025-09-19T10:26:17: 📝 Enhanced Logger initialized
2025-09-19T10:26:17: 📁 Loaded statistics from file
2025-09-19T10:26:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:17: 🧹 Removed stale process lock
2025-09-19T10:26:17: 🔒 Process lock acquired (PID: 11032)
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11032
}
2025-09-19T10:26:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257777643, willExpireAt: 1758258017643 },
  timestamp: 1758257777781
}
2025-09-19T10:26:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:17: 📋 Message rules loaded: 8 types
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257777643, processId: 11032 },
  timestamp: 1758257777781
}
2025-09-19T10:26:17: ℹ️ [10:26:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:18: [INFO] WhatsApp client initialized
2025-09-19T10:26:20: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:20: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:20: 📝 Loaded 12 template types
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257780507,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18180,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:20: ⏰ 4-minute startup delay active
2025-09-19T10:26:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:20: [INFO] Using PQueue for job processing
2025-09-19T10:26:20: [INFO] Memory management setup completed
2025-09-19T10:26:20: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:20: [INFO] Checking process locks...
2025-09-19T10:26:20: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:20: [INFO] Process locks acquired successfully
2025-09-19T10:26:20: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:20: [INFO] Logs directory created
2025-09-19T10:26:20: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:20: [10:26:20 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:20: [10:26:20 am] ✅ Google Sheets API initialized
2025-09-19T10:26:20: [INFO] Google Sheets helper initialized
2025-09-19T10:26:20: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:20: 🗑️ Deleted old log file: bot-2025-09-19T04-55-42-266Z.log
2025-09-19T10:26:20: 📝 Enhanced Logger initialized
2025-09-19T10:26:20: 📁 Loaded statistics from file
2025-09-19T10:26:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:20: 🧹 Removed stale process lock
2025-09-19T10:26:20: 🔒 Process lock acquired (PID: 18180)
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18180
}
2025-09-19T10:26:20: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257780507, processId: 18180 },
  timestamp: 1758257780621
}
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257780507, willExpireAt: 1758258020507 },
  timestamp: 1758257780622
}
2025-09-19T10:26:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:20: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:20: 📋 Message rules loaded: 8 types
2025-09-19T10:26:20: ℹ️ [10:26:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:21: [INFO] WhatsApp client initialized
2025-09-19T10:26:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:23: 📝 Loaded 12 template types
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257783545,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11524,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:23: ⏰ 4-minute startup delay active
2025-09-19T10:26:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:23: [INFO] Using PQueue for job processing
2025-09-19T10:26:23: [INFO] Memory management setup completed
2025-09-19T10:26:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:23: [INFO] Checking process locks...
2025-09-19T10:26:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:23: [INFO] Process locks acquired successfully
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:23: [INFO] Logs directory created
2025-09-19T10:26:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:23: [10:26:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:23: [10:26:23 am] ✅ Google Sheets API initialized
2025-09-19T10:26:23: [INFO] Google Sheets helper initialized
2025-09-19T10:26:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:23: 🗑️ Deleted old log file: bot-2025-09-19T04-55-45-551Z.log
2025-09-19T10:26:23: 📝 Enhanced Logger initialized
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:23: 📁 Loaded statistics from file
2025-09-19T10:26:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:23: 🧹 Removed stale process lock
2025-09-19T10:26:23: 🔒 Process lock acquired (PID: 11524)
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11524
}
2025-09-19T10:26:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257783545, processId: 11524 },
  timestamp: 1758257783681
}
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257783545, willExpireAt: 1758258023545 },
  timestamp: 1758257783681
}
2025-09-19T10:26:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:23: 📋 Message rules loaded: 8 types
2025-09-19T10:26:23: ℹ️ [10:26:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:25: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:25: [INFO] WhatsApp client initialized
2025-09-19T10:26:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:27: 📝 Loaded 12 template types
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257787141,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1372,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:27: ⏰ 4-minute startup delay active
2025-09-19T10:26:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:27: [INFO] Using PQueue for job processing
2025-09-19T10:26:27: [INFO] Memory management setup completed
2025-09-19T10:26:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:27: [INFO] Checking process locks...
2025-09-19T10:26:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:27: [INFO] Process locks acquired successfully
2025-09-19T10:26:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:27: [INFO] Logs directory created
2025-09-19T10:26:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:27: [10:26:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:27: [10:26:27 am] ✅ Google Sheets API initialized
2025-09-19T10:26:27: [INFO] Google Sheets helper initialized
2025-09-19T10:26:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:27: 🗑️ Deleted old log file: bot-2025-09-19T04-55-49-017Z.log
2025-09-19T10:26:27: 📝 Enhanced Logger initialized
2025-09-19T10:26:27: 📁 Loaded statistics from file
2025-09-19T10:26:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:27: 🧹 Removed stale process lock
2025-09-19T10:26:27: 🔒 Process lock acquired (PID: 1372)
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1372
}
2025-09-19T10:26:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257787141, willExpireAt: 1758258027141 },
  timestamp: 1758257787239
}
2025-09-19T10:26:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:27: 📋 Message rules loaded: 8 types
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257787141, processId: 1372 },
  timestamp: 1758257787239
}
2025-09-19T10:26:27: ℹ️ [10:26:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 100,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:28: [INFO] WhatsApp client initialized
2025-09-19T10:26:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:29: 📝 Loaded 12 template types
2025-09-19T10:26:29: ℹ️ [10:26:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257789957,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6592,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:29: ⏰ 4-minute startup delay active
2025-09-19T10:26:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:29: [INFO] Using PQueue for job processing
2025-09-19T10:26:29: [INFO] Memory management setup completed
2025-09-19T10:26:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:29: [INFO] Checking process locks...
2025-09-19T10:26:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:30: ℹ️ [10:26:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:30: [INFO] Process locks acquired successfully
2025-09-19T10:26:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:30: [INFO] Logs directory created
2025-09-19T10:26:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:30: [10:26:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:30: [10:26:30 am] ✅ Google Sheets API initialized
2025-09-19T10:26:30: [INFO] Google Sheets helper initialized
2025-09-19T10:26:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:30: ℹ️ [10:26:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:30: 🗑️ Deleted old log file: bot-2025-09-19T04-55-52-902Z.log
2025-09-19T10:26:30: 📝 Enhanced Logger initialized
2025-09-19T10:26:30: 📁 Loaded statistics from file
2025-09-19T10:26:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:30: 🧹 Removed stale process lock
2025-09-19T10:26:30: 🔒 Process lock acquired (PID: 6592)
2025-09-19T10:26:30: ℹ️ [10:26:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6592
}
2025-09-19T10:26:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:30: ℹ️ [10:26:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257789957, processId: 6592 },
  timestamp: 1758257790104
}
2025-09-19T10:26:30: ℹ️ [10:26:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257789957, willExpireAt: 1758258029957 },
  timestamp: 1758257790105
}
2025-09-19T10:26:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:30: 📋 Message rules loaded: 8 types
2025-09-19T10:26:30: ℹ️ [10:26:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 151,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:31: [INFO] WhatsApp client initialized
2025-09-19T10:26:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:32: 📝 Loaded 12 template types
2025-09-19T10:26:32: ℹ️ [10:26:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257792874,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7176,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:32: ⏰ 4-minute startup delay active
2025-09-19T10:26:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:32: [INFO] Using PQueue for job processing
2025-09-19T10:26:32: [INFO] Memory management setup completed
2025-09-19T10:26:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:32: [INFO] Checking process locks...
2025-09-19T10:26:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:32: ℹ️ [10:26:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:32: [INFO] Process locks acquired successfully
2025-09-19T10:26:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:32: [INFO] Logs directory created
2025-09-19T10:26:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:32: [10:26:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:32: [10:26:32 am] ✅ Google Sheets API initialized
2025-09-19T10:26:32: [INFO] Google Sheets helper initialized
2025-09-19T10:26:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:32: 🗑️ Deleted old log file: bot-2025-09-19T04-55-56-393Z.log
2025-09-19T10:26:32: 📝 Enhanced Logger initialized
2025-09-19T10:26:32: ℹ️ [10:26:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:32: 📁 Loaded statistics from file
2025-09-19T10:26:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:32: 🧹 Removed stale process lock
2025-09-19T10:26:32: 🔒 Process lock acquired (PID: 7176)
2025-09-19T10:26:32: ℹ️ [10:26:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7176
}
2025-09-19T10:26:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:32: ℹ️ [10:26:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257792874, processId: 7176 },
  timestamp: 1758257792994
}
2025-09-19T10:26:32: ℹ️ [10:26:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257792874, willExpireAt: 1758258032874 },
  timestamp: 1758257792995
}
2025-09-19T10:26:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:32: 📋 Message rules loaded: 8 types
2025-09-19T10:26:33: ℹ️ [10:26:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:33: [INFO] WhatsApp client initialized
2025-09-19T10:26:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:35: 📝 Loaded 12 template types
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257795800,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17924,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:35: ⏰ 4-minute startup delay active
2025-09-19T10:26:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:35: [INFO] Using PQueue for job processing
2025-09-19T10:26:35: [INFO] Memory management setup completed
2025-09-19T10:26:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:35: [INFO] Checking process locks...
2025-09-19T10:26:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:35: [INFO] Process locks acquired successfully
2025-09-19T10:26:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:35: [INFO] Logs directory created
2025-09-19T10:26:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:35: [10:26:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:35: [10:26:35 am] ✅ Google Sheets API initialized
2025-09-19T10:26:35: [INFO] Google Sheets helper initialized
2025-09-19T10:26:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:35: 🗑️ Deleted old log file: bot-2025-09-19T04-56-00-152Z.log
2025-09-19T10:26:35: 📝 Enhanced Logger initialized
2025-09-19T10:26:35: 📁 Loaded statistics from file
2025-09-19T10:26:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:35: 🧹 Removed stale process lock
2025-09-19T10:26:35: 🔒 Process lock acquired (PID: 17924)
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17924
}
2025-09-19T10:26:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257795800, processId: 17924 },
  timestamp: 1758257795914
}
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257795800, willExpireAt: 1758258035800 },
  timestamp: 1758257795914
}
2025-09-19T10:26:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:35: 📋 Message rules loaded: 8 types
2025-09-19T10:26:35: ℹ️ [10:26:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:36: [INFO] WhatsApp client initialized
2025-09-19T10:26:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:38: 📝 Loaded 12 template types
2025-09-19T10:26:38: ℹ️ [10:26:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257798970,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5288,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:39: ⏰ 4-minute startup delay active
2025-09-19T10:26:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:39: [INFO] Using PQueue for job processing
2025-09-19T10:26:39: [INFO] Memory management setup completed
2025-09-19T10:26:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:39: [INFO] Checking process locks...
2025-09-19T10:26:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:39: ℹ️ [10:26:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:39: [INFO] Process locks acquired successfully
2025-09-19T10:26:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:39: [INFO] Logs directory created
2025-09-19T10:26:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:39: [10:26:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:39: [10:26:39 am] ✅ Google Sheets API initialized
2025-09-19T10:26:39: [INFO] Google Sheets helper initialized
2025-09-19T10:26:39: ℹ️ [10:26:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:39: 📁 Loaded statistics from file
2025-09-19T10:26:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:39: 🗑️ Deleted old log file: bot-2025-09-19T04-56-03-940Z.log
2025-09-19T10:26:39: 📝 Enhanced Logger initialized
2025-09-19T10:26:39: 🧹 Removed stale process lock
2025-09-19T10:26:39: 🔒 Process lock acquired (PID: 5288)
2025-09-19T10:26:39: ℹ️ [10:26:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5288
}
2025-09-19T10:26:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:39: ℹ️ [10:26:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257798970, processId: 5288 },
  timestamp: 1758257799127
}
2025-09-19T10:26:39: ℹ️ [10:26:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257798970, willExpireAt: 1758258038970 },
  timestamp: 1758257799127
}
2025-09-19T10:26:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:39: 📋 Message rules loaded: 8 types
2025-09-19T10:26:39: ℹ️ [10:26:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 161,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:40: [INFO] WhatsApp client initialized
2025-09-19T10:26:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:42: 📝 Loaded 12 template types
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257802124,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16776,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:42: ⏰ 4-minute startup delay active
2025-09-19T10:26:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:42: [INFO] Using PQueue for job processing
2025-09-19T10:26:42: [INFO] Memory management setup completed
2025-09-19T10:26:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:42: [INFO] Checking process locks...
2025-09-19T10:26:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:42: [INFO] Process locks acquired successfully
2025-09-19T10:26:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:42: [INFO] Logs directory created
2025-09-19T10:26:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:42: [10:26:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:42: [10:26:42 am] ✅ Google Sheets API initialized
2025-09-19T10:26:42: [INFO] Google Sheets helper initialized
2025-09-19T10:26:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:42: 🗑️ Deleted old log file: bot-2025-09-19T04-56-07-266Z.log
2025-09-19T10:26:42: 📝 Enhanced Logger initialized
2025-09-19T10:26:42: 📁 Loaded statistics from file
2025-09-19T10:26:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:42: 🧹 Removed stale process lock
2025-09-19T10:26:42: 🔒 Process lock acquired (PID: 16776)
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16776
}
2025-09-19T10:26:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257802124, processId: 16776 },
  timestamp: 1758257802242
}
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257802124, willExpireAt: 1758258042124 },
  timestamp: 1758257802242
}
2025-09-19T10:26:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:42: 📋 Message rules loaded: 8 types
2025-09-19T10:26:42: ℹ️ [10:26:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:43: [INFO] WhatsApp client initialized
2025-09-19T10:26:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:45: 📝 Loaded 12 template types
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257805409,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10776,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:45: ⏰ 4-minute startup delay active
2025-09-19T10:26:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:45: [INFO] Using PQueue for job processing
2025-09-19T10:26:45: [INFO] Memory management setup completed
2025-09-19T10:26:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:45: [INFO] Checking process locks...
2025-09-19T10:26:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:45: [INFO] Process locks acquired successfully
2025-09-19T10:26:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:45: [INFO] Logs directory created
2025-09-19T10:26:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:45: [10:26:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:45: [10:26:45 am] ✅ Google Sheets API initialized
2025-09-19T10:26:45: [INFO] Google Sheets helper initialized
2025-09-19T10:26:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:45: 🗑️ Deleted old log file: bot-2025-09-19T04-56-10-669Z.log
2025-09-19T10:26:45: 📝 Enhanced Logger initialized
2025-09-19T10:26:45: 📁 Loaded statistics from file
2025-09-19T10:26:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:45: 🧹 Removed stale process lock
2025-09-19T10:26:45: 🔒 Process lock acquired (PID: 10776)
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10776
}
2025-09-19T10:26:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257805409, willExpireAt: 1758258045409 },
  timestamp: 1758257805555
}
2025-09-19T10:26:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:45: 📋 Message rules loaded: 8 types
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257805409, processId: 10776 },
  timestamp: 1758257805555
}
2025-09-19T10:26:45: ℹ️ [10:26:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:46: [INFO] WhatsApp client initialized
2025-09-19T10:26:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:48: 📝 Loaded 12 template types
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257808590,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9164,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:48: ⏰ 4-minute startup delay active
2025-09-19T10:26:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:48: [INFO] Using PQueue for job processing
2025-09-19T10:26:48: [INFO] Memory management setup completed
2025-09-19T10:26:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:48: [INFO] Checking process locks...
2025-09-19T10:26:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:48: [INFO] Process locks acquired successfully
2025-09-19T10:26:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:48: [INFO] Logs directory created
2025-09-19T10:26:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:48: [10:26:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:48: [10:26:48 am] ✅ Google Sheets API initialized
2025-09-19T10:26:48: [INFO] Google Sheets helper initialized
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:48: 🗑️ Deleted old log file: bot-2025-09-19T04-56-14-812Z.log
2025-09-19T10:26:48: 📝 Enhanced Logger initialized
2025-09-19T10:26:48: 📁 Loaded statistics from file
2025-09-19T10:26:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:48: 🧹 Removed stale process lock
2025-09-19T10:26:48: 🔒 Process lock acquired (PID: 9164)
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9164
}
2025-09-19T10:26:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257808590, processId: 9164 },
  timestamp: 1758257808754
}
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257808590, willExpireAt: 1758258048590 },
  timestamp: 1758257808754
}
2025-09-19T10:26:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:48: 📋 Message rules loaded: 8 types
2025-09-19T10:26:48: ℹ️ [10:26:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 169,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:49: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:49: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:49: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:49: [INFO] WhatsApp client initialized
2025-09-19T10:26:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:51: 📝 Loaded 12 template types
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257811749,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18136,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:51: ⏰ 4-minute startup delay active
2025-09-19T10:26:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:51: [INFO] Using PQueue for job processing
2025-09-19T10:26:51: [INFO] Memory management setup completed
2025-09-19T10:26:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:51: [INFO] Checking process locks...
2025-09-19T10:26:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:51: [INFO] Process locks acquired successfully
2025-09-19T10:26:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:51: [INFO] Logs directory created
2025-09-19T10:26:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:51: [10:26:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:51: [10:26:51 am] ✅ Google Sheets API initialized
2025-09-19T10:26:51: [INFO] Google Sheets helper initialized
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:51: 🗑️ Deleted old log file: bot-2025-09-19T04-56-17-685Z.log
2025-09-19T10:26:51: 📝 Enhanced Logger initialized
2025-09-19T10:26:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:51: 📁 Loaded statistics from file
2025-09-19T10:26:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:51: 🧹 Removed stale process lock
2025-09-19T10:26:51: 🔒 Process lock acquired (PID: 18136)
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18136
}
2025-09-19T10:26:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257811749, processId: 18136 },
  timestamp: 1758257811868
}
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257811749, willExpireAt: 1758258051749 },
  timestamp: 1758257811869
}
2025-09-19T10:26:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:51: 📋 Message rules loaded: 8 types
2025-09-19T10:26:51: ℹ️ [10:26:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:52: [INFO] WhatsApp client initialized
2025-09-19T10:26:55: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:55: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:55: 📝 Loaded 12 template types
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257815054,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10680,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:55: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:55: ⏰ 4-minute startup delay active
2025-09-19T10:26:55: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:55: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:55: [INFO] Using PQueue for job processing
2025-09-19T10:26:55: [INFO] Memory management setup completed
2025-09-19T10:26:55: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:55: [INFO] Checking process locks...
2025-09-19T10:26:55: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:55: [INFO] Process locks acquired successfully
2025-09-19T10:26:55: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:55: [INFO] Logs directory created
2025-09-19T10:26:55: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:55: [10:26:55 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:55: [10:26:55 am] ✅ Google Sheets API initialized
2025-09-19T10:26:55: [INFO] Google Sheets helper initialized
2025-09-19T10:26:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:55: 🗑️ Deleted old log file: bot-2025-09-19T04-56-20-539Z.log
2025-09-19T10:26:55: 📝 Enhanced Logger initialized
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:55: 📁 Loaded statistics from file
2025-09-19T10:26:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:55: 🧹 Removed stale process lock
2025-09-19T10:26:55: 🔒 Process lock acquired (PID: 10680)
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10680
}
2025-09-19T10:26:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257815054, processId: 10680 },
  timestamp: 1758257815179
}
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257815054, willExpireAt: 1758258055054 },
  timestamp: 1758257815179
}
2025-09-19T10:26:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:55: 📋 Message rules loaded: 8 types
2025-09-19T10:26:55: ℹ️ [10:26:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:56: [INFO] WhatsApp client initialized
2025-09-19T10:26:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:26:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:26:57: 📝 Loaded 12 template types
2025-09-19T10:26:57: ℹ️ [10:26:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257817945,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15952,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:26:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:26:57: ⏰ 4-minute startup delay active
2025-09-19T10:26:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:26:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:26:57: [INFO] Using PQueue for job processing
2025-09-19T10:26:57: [INFO] Memory management setup completed
2025-09-19T10:26:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:26:57: [INFO] Checking process locks...
2025-09-19T10:26:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:26:57: ℹ️ [10:26:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:26:57: [INFO] Process locks acquired successfully
2025-09-19T10:26:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:26:57: [INFO] Logs directory created
2025-09-19T10:26:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:26:57: [10:26:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:26:57: [10:26:57 am] ✅ Google Sheets API initialized
2025-09-19T10:26:57: [INFO] Google Sheets helper initialized
2025-09-19T10:26:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:26:57: ℹ️ [10:26:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:26:58: 🗑️ Deleted old log file: bot-2025-09-19T04-56-23-582Z.log
2025-09-19T10:26:58: 📝 Enhanced Logger initialized
2025-09-19T10:26:58: 📁 Loaded statistics from file
2025-09-19T10:26:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:26:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:26:58: 🧹 Removed stale process lock
2025-09-19T10:26:58: 🔒 Process lock acquired (PID: 15952)
2025-09-19T10:26:58: ℹ️ [10:26:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15952
}
2025-09-19T10:26:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:26:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:26:58: ℹ️ [10:26:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257817945, processId: 15952 },
  timestamp: 1758257818059
}
2025-09-19T10:26:58: ℹ️ [10:26:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257817945, willExpireAt: 1758258057945 },
  timestamp: 1758257818059
}
2025-09-19T10:26:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:26:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:26:58: 📋 Message rules loaded: 8 types
2025-09-19T10:26:58: ℹ️ [10:26:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:26:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:26:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:26:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:26:58: [INFO] WhatsApp client initialized
2025-09-19T10:27:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:00: 📝 Loaded 12 template types
2025-09-19T10:27:00: ℹ️ [10:27:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257820869,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17748,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:00: ⏰ 4-minute startup delay active
2025-09-19T10:27:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:00: [INFO] Using PQueue for job processing
2025-09-19T10:27:00: [INFO] Memory management setup completed
2025-09-19T10:27:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:00: [INFO] Checking process locks...
2025-09-19T10:27:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:00: [INFO] Process locks acquired successfully
2025-09-19T10:27:00: ℹ️ [10:27:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:00: [INFO] Logs directory created
2025-09-19T10:27:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:00: [10:27:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:00: [10:27:00 am] ✅ Google Sheets API initialized
2025-09-19T10:27:00: [INFO] Google Sheets helper initialized
2025-09-19T10:27:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:00: ℹ️ [10:27:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:00: 🗑️ Deleted old log file: bot-2025-09-19T04-56-27-166Z.log
2025-09-19T10:27:00: 📝 Enhanced Logger initialized
2025-09-19T10:27:00: 📁 Loaded statistics from file
2025-09-19T10:27:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:01: 🧹 Removed stale process lock
2025-09-19T10:27:01: 🔒 Process lock acquired (PID: 17748)
2025-09-19T10:27:01: ℹ️ [10:27:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17748
}
2025-09-19T10:27:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:01: ℹ️ [10:27:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257820869, processId: 17748 },
  timestamp: 1758257821007
}
2025-09-19T10:27:01: ℹ️ [10:27:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257820869, willExpireAt: 1758258060869 },
  timestamp: 1758257821008
}
2025-09-19T10:27:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:01: 📋 Message rules loaded: 8 types
2025-09-19T10:27:01: ℹ️ [10:27:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 143,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:01: [INFO] WhatsApp client initialized
2025-09-19T10:27:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:03: 📝 Loaded 12 template types
2025-09-19T10:27:03: ℹ️ [10:27:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257823972,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18164,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:03: ⏰ 4-minute startup delay active
2025-09-19T10:27:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:03: [INFO] Using PQueue for job processing
2025-09-19T10:27:04: [INFO] Memory management setup completed
2025-09-19T10:27:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:04: [INFO] Checking process locks...
2025-09-19T10:27:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:04: ℹ️ [10:27:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:04: [INFO] Process locks acquired successfully
2025-09-19T10:27:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:04: [INFO] Logs directory created
2025-09-19T10:27:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:04: [10:27:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:04: [10:27:04 am] ✅ Google Sheets API initialized
2025-09-19T10:27:04: [INFO] Google Sheets helper initialized
2025-09-19T10:27:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:04: ℹ️ [10:27:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:04: 📁 Loaded statistics from file
2025-09-19T10:27:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:04: 🗑️ Deleted old log file: bot-2025-09-19T04-56-29-998Z.log
2025-09-19T10:27:04: 📝 Enhanced Logger initialized
2025-09-19T10:27:04: 🧹 Removed stale process lock
2025-09-19T10:27:04: 🔒 Process lock acquired (PID: 18164)
2025-09-19T10:27:04: ℹ️ [10:27:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18164
}
2025-09-19T10:27:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:04: ℹ️ [10:27:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257823972, willExpireAt: 1758258063972 },
  timestamp: 1758257824116
}
2025-09-19T10:27:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:04: 📋 Message rules loaded: 8 types
2025-09-19T10:27:04: ℹ️ [10:27:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257823972, processId: 18164 },
  timestamp: 1758257824115
}
2025-09-19T10:27:04: ℹ️ [10:27:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:04: [INFO] WhatsApp client initialized
2025-09-19T10:27:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:06: 📝 Loaded 12 template types
2025-09-19T10:27:06: ℹ️ [10:27:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257826897,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16992,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:06: ⏰ 4-minute startup delay active
2025-09-19T10:27:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:06: [INFO] Using PQueue for job processing
2025-09-19T10:27:06: [INFO] Memory management setup completed
2025-09-19T10:27:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:06: [INFO] Checking process locks...
2025-09-19T10:27:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:06: ℹ️ [10:27:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:06: [INFO] Process locks acquired successfully
2025-09-19T10:27:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:06: [INFO] Logs directory created
2025-09-19T10:27:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:06: [10:27:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:06: [10:27:06 am] ✅ Google Sheets API initialized
2025-09-19T10:27:06: [INFO] Google Sheets helper initialized
2025-09-19T10:27:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:06: 🗑️ Deleted old log file: bot-2025-09-19T04-56-32-907Z.log
2025-09-19T10:27:06: 📝 Enhanced Logger initialized
2025-09-19T10:27:07: ℹ️ [10:27:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:07: 📁 Loaded statistics from file
2025-09-19T10:27:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:07: 🧹 Removed stale process lock
2025-09-19T10:27:07: 🔒 Process lock acquired (PID: 16992)
2025-09-19T10:27:07: ℹ️ [10:27:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16992
}
2025-09-19T10:27:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:07: ℹ️ [10:27:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257826897, processId: 16992 },
  timestamp: 1758257827019
}
2025-09-19T10:27:07: ℹ️ [10:27:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257826897, willExpireAt: 1758258066897 },
  timestamp: 1758257827019
}
2025-09-19T10:27:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:07: 📋 Message rules loaded: 8 types
2025-09-19T10:27:07: ℹ️ [10:27:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:07: [INFO] WhatsApp client initialized
2025-09-19T10:27:09: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:09: 📝 Loaded 12 template types
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257829810,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6648,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:09: ⏰ 4-minute startup delay active
2025-09-19T10:27:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:09: [INFO] Using PQueue for job processing
2025-09-19T10:27:09: [INFO] Memory management setup completed
2025-09-19T10:27:09: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:09: [INFO] Checking process locks...
2025-09-19T10:27:09: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:09: [INFO] Process locks acquired successfully
2025-09-19T10:27:09: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:09: [INFO] Logs directory created
2025-09-19T10:27:09: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:09: [10:27:09 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:09: [10:27:09 am] ✅ Google Sheets API initialized
2025-09-19T10:27:09: [INFO] Google Sheets helper initialized
2025-09-19T10:27:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:09: 🗑️ Deleted old log file: bot-2025-09-19T04-56-35-834Z.log
2025-09-19T10:27:09: 📝 Enhanced Logger initialized
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:09: 📁 Loaded statistics from file
2025-09-19T10:27:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:09: 🧹 Removed stale process lock
2025-09-19T10:27:09: 🔒 Process lock acquired (PID: 6648)
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6648
}
2025-09-19T10:27:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257829810, willExpireAt: 1758258069810 },
  timestamp: 1758257829950
}
2025-09-19T10:27:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:09: 📋 Message rules loaded: 8 types
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257829810, processId: 6648 },
  timestamp: 1758257829950
}
2025-09-19T10:27:09: ℹ️ [10:27:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 143,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:10: [INFO] WhatsApp client initialized
2025-09-19T10:27:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:12: 📝 Loaded 12 template types
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257832588,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14416,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:12: ⏰ 4-minute startup delay active
2025-09-19T10:27:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:12: [INFO] Using PQueue for job processing
2025-09-19T10:27:12: [INFO] Memory management setup completed
2025-09-19T10:27:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:12: [INFO] Checking process locks...
2025-09-19T10:27:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:12: [INFO] Process locks acquired successfully
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:12: [INFO] Logs directory created
2025-09-19T10:27:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:12: [10:27:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:12: [10:27:12 am] ✅ Google Sheets API initialized
2025-09-19T10:27:12: [INFO] Google Sheets helper initialized
2025-09-19T10:27:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:12: 🗑️ Deleted old log file: bot-2025-09-19T04-56-39-011Z.log
2025-09-19T10:27:12: 📝 Enhanced Logger initialized
2025-09-19T10:27:12: 📁 Loaded statistics from file
2025-09-19T10:27:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:12: 🧹 Removed stale process lock
2025-09-19T10:27:12: 🔒 Process lock acquired (PID: 14416)
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14416
}
2025-09-19T10:27:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257832588, processId: 14416 },
  timestamp: 1758257832716
}
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257832588, willExpireAt: 1758258072588 },
  timestamp: 1758257832717
}
2025-09-19T10:27:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:12: 📋 Message rules loaded: 8 types
2025-09-19T10:27:12: ℹ️ [10:27:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:13: [INFO] WhatsApp client initialized
2025-09-19T10:27:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:15: 📝 Loaded 12 template types
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257835620,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1552,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:15: ⏰ 4-minute startup delay active
2025-09-19T10:27:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:15: [INFO] Using PQueue for job processing
2025-09-19T10:27:15: [INFO] Memory management setup completed
2025-09-19T10:27:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:15: [INFO] Checking process locks...
2025-09-19T10:27:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:15: [INFO] Process locks acquired successfully
2025-09-19T10:27:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:15: [INFO] Logs directory created
2025-09-19T10:27:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:15: [10:27:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:15: [10:27:15 am] ✅ Google Sheets API initialized
2025-09-19T10:27:15: [INFO] Google Sheets helper initialized
2025-09-19T10:27:15: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:15: 🗑️ Deleted old log file: bot-2025-09-19T04-56-42-158Z.log
2025-09-19T10:27:15: 📝 Enhanced Logger initialized
2025-09-19T10:27:15: 📁 Loaded statistics from file
2025-09-19T10:27:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:15: 🧹 Removed stale process lock
2025-09-19T10:27:15: 🔒 Process lock acquired (PID: 1552)
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1552
}
2025-09-19T10:27:15: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257835620, processId: 1552 },
  timestamp: 1758257835737
}
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257835620, willExpireAt: 1758258075620 },
  timestamp: 1758257835738
}
2025-09-19T10:27:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:15: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:15: 📋 Message rules loaded: 8 types
2025-09-19T10:27:15: ℹ️ [10:27:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:16: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:16: [INFO] WhatsApp client initialized
2025-09-19T10:27:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:18: 📝 Loaded 12 template types
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257838526,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15596,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:18: ⏰ 4-minute startup delay active
2025-09-19T10:27:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:18: [INFO] Using PQueue for job processing
2025-09-19T10:27:18: [INFO] Memory management setup completed
2025-09-19T10:27:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:18: [INFO] Checking process locks...
2025-09-19T10:27:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:18: [INFO] Process locks acquired successfully
2025-09-19T10:27:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:18: [INFO] Logs directory created
2025-09-19T10:27:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:18: [10:27:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:18: [10:27:18 am] ✅ Google Sheets API initialized
2025-09-19T10:27:18: [INFO] Google Sheets helper initialized
2025-09-19T10:27:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:18: 🗑️ Deleted old log file: bot-2025-09-19T04-56-45-453Z.log
2025-09-19T10:27:18: 📝 Enhanced Logger initialized
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:18: 📁 Loaded statistics from file
2025-09-19T10:27:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:18: 🧹 Removed stale process lock
2025-09-19T10:27:18: 🔒 Process lock acquired (PID: 15596)
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15596
}
2025-09-19T10:27:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257838526, willExpireAt: 1758258078526 },
  timestamp: 1758257838646
}
2025-09-19T10:27:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:18: 📋 Message rules loaded: 8 types
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257838526, processId: 15596 },
  timestamp: 1758257838645
}
2025-09-19T10:27:18: ℹ️ [10:27:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:19: [INFO] WhatsApp client initialized
2025-09-19T10:27:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:21: 📝 Loaded 12 template types
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257841729,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14776,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:21: ⏰ 4-minute startup delay active
2025-09-19T10:27:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:21: [INFO] Using PQueue for job processing
2025-09-19T10:27:21: [INFO] Memory management setup completed
2025-09-19T10:27:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:21: [INFO] Checking process locks...
2025-09-19T10:27:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:21: [INFO] Process locks acquired successfully
2025-09-19T10:27:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:21: [INFO] Logs directory created
2025-09-19T10:27:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:21: [10:27:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:21: [10:27:21 am] ✅ Google Sheets API initialized
2025-09-19T10:27:21: [INFO] Google Sheets helper initialized
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:21: 🗑️ Deleted old log file: bot-2025-09-19T04-56-48-633Z.log
2025-09-19T10:27:21: 📝 Enhanced Logger initialized
2025-09-19T10:27:21: 📁 Loaded statistics from file
2025-09-19T10:27:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:21: 🧹 Removed stale process lock
2025-09-19T10:27:21: 🔒 Process lock acquired (PID: 14776)
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14776
}
2025-09-19T10:27:21: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257841729, processId: 14776 },
  timestamp: 1758257841852
}
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257841729, willExpireAt: 1758258081729 },
  timestamp: 1758257841852
}
2025-09-19T10:27:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:21: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:21: 📋 Message rules loaded: 8 types
2025-09-19T10:27:21: ℹ️ [10:27:21 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:27: [INFO] WhatsApp client initialized
2025-09-19T10:27:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:29: 📝 Loaded 12 template types
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257849361,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18360,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:29: ⏰ 4-minute startup delay active
2025-09-19T10:27:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:29: [INFO] Using PQueue for job processing
2025-09-19T10:27:29: [INFO] Memory management setup completed
2025-09-19T10:27:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:29: [INFO] Checking process locks...
2025-09-19T10:27:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:29: [INFO] Process locks acquired successfully
2025-09-19T10:27:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:29: [INFO] Logs directory created
2025-09-19T10:27:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:29: [10:27:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:29: [10:27:29 am] ✅ Google Sheets API initialized
2025-09-19T10:27:29: [INFO] Google Sheets helper initialized
2025-09-19T10:27:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:29: 🗑️ Deleted old log file: bot-2025-09-19T04-56-51-781Z.log
2025-09-19T10:27:29: 📝 Enhanced Logger initialized
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:29: 📁 Loaded statistics from file
2025-09-19T10:27:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:29: 🧹 Removed stale process lock
2025-09-19T10:27:29: 🔒 Process lock acquired (PID: 18360)
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18360
}
2025-09-19T10:27:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257849361, processId: 18360 },
  timestamp: 1758257849458
}
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257849361, willExpireAt: 1758258089361 },
  timestamp: 1758257849459
}
2025-09-19T10:27:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:29: 📋 Message rules loaded: 8 types
2025-09-19T10:27:29: ℹ️ [10:27:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 100,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:31: [INFO] WhatsApp client initialized
2025-09-19T10:27:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:33: 📝 Loaded 12 template types
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257853073,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4676,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:33: ⏰ 4-minute startup delay active
2025-09-19T10:27:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:33: [INFO] Using PQueue for job processing
2025-09-19T10:27:33: [INFO] Memory management setup completed
2025-09-19T10:27:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:33: [INFO] Checking process locks...
2025-09-19T10:27:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:33: [INFO] Process locks acquired successfully
2025-09-19T10:27:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:33: [INFO] Logs directory created
2025-09-19T10:27:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:33: [10:27:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:33: [10:27:33 am] ✅ Google Sheets API initialized
2025-09-19T10:27:33: [INFO] Google Sheets helper initialized
2025-09-19T10:27:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:33: 🗑️ Deleted old log file: bot-2025-09-19T04-56-55-088Z.log
2025-09-19T10:27:33: 📝 Enhanced Logger initialized
2025-09-19T10:27:33: 📁 Loaded statistics from file
2025-09-19T10:27:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:33: 🧹 Removed stale process lock
2025-09-19T10:27:33: 🔒 Process lock acquired (PID: 4676)
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4676
}
2025-09-19T10:27:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257853073, processId: 4676 },
  timestamp: 1758257853164
}
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257853073, willExpireAt: 1758258093073 },
  timestamp: 1758257853164
}
2025-09-19T10:27:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:33: 📋 Message rules loaded: 8 types
2025-09-19T10:27:33: ℹ️ [10:27:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 93,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:33: [INFO] WhatsApp client initialized
2025-09-19T10:27:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:35: 📝 Loaded 12 template types
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257855751,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17680,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:35: ⏰ 4-minute startup delay active
2025-09-19T10:27:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:35: [INFO] Using PQueue for job processing
2025-09-19T10:27:35: [INFO] Memory management setup completed
2025-09-19T10:27:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:35: [INFO] Checking process locks...
2025-09-19T10:27:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:35: [INFO] Process locks acquired successfully
2025-09-19T10:27:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:35: [INFO] Logs directory created
2025-09-19T10:27:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:35: [10:27:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:35: [10:27:35 am] ✅ Google Sheets API initialized
2025-09-19T10:27:35: [INFO] Google Sheets helper initialized
2025-09-19T10:27:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:35: 🗑️ Deleted old log file: bot-2025-09-19T04-56-57-975Z.log
2025-09-19T10:27:35: 📝 Enhanced Logger initialized
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:35: 📁 Loaded statistics from file
2025-09-19T10:27:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:35: 🧹 Removed stale process lock
2025-09-19T10:27:35: 🔒 Process lock acquired (PID: 17680)
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17680
}
2025-09-19T10:27:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257855751, processId: 17680 },
  timestamp: 1758257855849
}
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257855751, willExpireAt: 1758258095751 },
  timestamp: 1758257855849
}
2025-09-19T10:27:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:35: 📋 Message rules loaded: 8 types
2025-09-19T10:27:35: ℹ️ [10:27:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:36: [INFO] WhatsApp client initialized
2025-09-19T10:27:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:38: 📝 Loaded 12 template types
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257858345,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15824,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:38: ⏰ 4-minute startup delay active
2025-09-19T10:27:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:38: [INFO] Using PQueue for job processing
2025-09-19T10:27:38: [INFO] Memory management setup completed
2025-09-19T10:27:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:38: [INFO] Checking process locks...
2025-09-19T10:27:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:38: [INFO] Process locks acquired successfully
2025-09-19T10:27:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:38: [INFO] Logs directory created
2025-09-19T10:27:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:38: [10:27:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:38: [10:27:38 am] ✅ Google Sheets API initialized
2025-09-19T10:27:38: [INFO] Google Sheets helper initialized
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:38: 🗑️ Deleted old log file: bot-2025-09-19T04-57-00-903Z.log
2025-09-19T10:27:38: 📝 Enhanced Logger initialized
2025-09-19T10:27:38: 📁 Loaded statistics from file
2025-09-19T10:27:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:38: 🧹 Removed stale process lock
2025-09-19T10:27:38: 🔒 Process lock acquired (PID: 15824)
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15824
}
2025-09-19T10:27:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257858345, processId: 15824 },
  timestamp: 1758257858455
}
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257858345, willExpireAt: 1758258098345 },
  timestamp: 1758257858455
}
2025-09-19T10:27:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:38: 📋 Message rules loaded: 8 types
2025-09-19T10:27:38: ℹ️ [10:27:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:39: [INFO] WhatsApp client initialized
2025-09-19T10:27:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:41: 📝 Loaded 12 template types
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257861379,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14524,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:41: ⏰ 4-minute startup delay active
2025-09-19T10:27:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:41: [INFO] Using PQueue for job processing
2025-09-19T10:27:41: [INFO] Memory management setup completed
2025-09-19T10:27:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:41: [INFO] Checking process locks...
2025-09-19T10:27:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:41: [INFO] Process locks acquired successfully
2025-09-19T10:27:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:41: [INFO] Logs directory created
2025-09-19T10:27:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:41: [10:27:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:41: [10:27:41 am] ✅ Google Sheets API initialized
2025-09-19T10:27:41: [INFO] Google Sheets helper initialized
2025-09-19T10:27:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:41: 🗑️ Deleted old log file: bot-2025-09-19T04-57-04-009Z.log
2025-09-19T10:27:41: 📝 Enhanced Logger initialized
2025-09-19T10:27:41: 📁 Loaded statistics from file
2025-09-19T10:27:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:41: 🧹 Removed stale process lock
2025-09-19T10:27:41: 🔒 Process lock acquired (PID: 14524)
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14524
}
2025-09-19T10:27:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257861379, willExpireAt: 1758258101379 },
  timestamp: 1758257861537
}
2025-09-19T10:27:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:41: 📋 Message rules loaded: 8 types
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257861379, processId: 14524 },
  timestamp: 1758257861537
}
2025-09-19T10:27:41: ℹ️ [10:27:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 161,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:42: [INFO] WhatsApp client initialized
2025-09-19T10:27:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:44: 📝 Loaded 12 template types
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257864303,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9340,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:44: ⏰ 4-minute startup delay active
2025-09-19T10:27:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:44: [INFO] Using PQueue for job processing
2025-09-19T10:27:44: [INFO] Memory management setup completed
2025-09-19T10:27:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:44: [INFO] Checking process locks...
2025-09-19T10:27:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:44: [INFO] Process locks acquired successfully
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:44: [INFO] Logs directory created
2025-09-19T10:27:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:44: [10:27:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:44: [10:27:44 am] ✅ Google Sheets API initialized
2025-09-19T10:27:44: [INFO] Google Sheets helper initialized
2025-09-19T10:27:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:44: 🗑️ Deleted old log file: bot-2025-09-19T04-57-06-933Z.log
2025-09-19T10:27:44: 📝 Enhanced Logger initialized
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:44: 📁 Loaded statistics from file
2025-09-19T10:27:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:44: 🧹 Removed stale process lock
2025-09-19T10:27:44: 🔒 Process lock acquired (PID: 9340)
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9340
}
2025-09-19T10:27:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257864303, willExpireAt: 1758258104303 },
  timestamp: 1758257864442
}
2025-09-19T10:27:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:44: 📋 Message rules loaded: 8 types
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257864303, processId: 9340 },
  timestamp: 1758257864442
}
2025-09-19T10:27:44: ℹ️ [10:27:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 141,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:45: [INFO] WhatsApp client initialized
2025-09-19T10:27:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:47: 📝 Loaded 12 template types
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257867374,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17464,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:47: ⏰ 4-minute startup delay active
2025-09-19T10:27:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:47: [INFO] Using PQueue for job processing
2025-09-19T10:27:47: [INFO] Memory management setup completed
2025-09-19T10:27:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:47: [INFO] Checking process locks...
2025-09-19T10:27:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:47: [INFO] Process locks acquired successfully
2025-09-19T10:27:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:47: [INFO] Logs directory created
2025-09-19T10:27:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:47: [10:27:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:47: [10:27:47 am] ✅ Google Sheets API initialized
2025-09-19T10:27:47: [INFO] Google Sheets helper initialized
2025-09-19T10:27:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:47: 🗑️ Deleted old log file: bot-2025-09-19T04-57-09-852Z.log
2025-09-19T10:27:47: 📝 Enhanced Logger initialized
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:47: 📁 Loaded statistics from file
2025-09-19T10:27:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:47: 🧹 Removed stale process lock
2025-09-19T10:27:47: 🔒 Process lock acquired (PID: 17464)
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17464
}
2025-09-19T10:27:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257867374, processId: 17464 },
  timestamp: 1758257867497
}
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257867374, willExpireAt: 1758258107374 },
  timestamp: 1758257867498
}
2025-09-19T10:27:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:47: 📋 Message rules loaded: 8 types
2025-09-19T10:27:47: ℹ️ [10:27:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:48: [INFO] WhatsApp client initialized
2025-09-19T10:27:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:50: 📝 Loaded 12 template types
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257870558,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14040,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:50: ⏰ 4-minute startup delay active
2025-09-19T10:27:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:50: [INFO] Using PQueue for job processing
2025-09-19T10:27:50: [INFO] Memory management setup completed
2025-09-19T10:27:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:50: [INFO] Checking process locks...
2025-09-19T10:27:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:50: [INFO] Process locks acquired successfully
2025-09-19T10:27:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:50: [INFO] Logs directory created
2025-09-19T10:27:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:50: [10:27:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:50: [10:27:50 am] ✅ Google Sheets API initialized
2025-09-19T10:27:50: [INFO] Google Sheets helper initialized
2025-09-19T10:27:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:50: 🗑️ Deleted old log file: bot-2025-09-19T04-57-12-620Z.log
2025-09-19T10:27:50: 📝 Enhanced Logger initialized
2025-09-19T10:27:50: 📁 Loaded statistics from file
2025-09-19T10:27:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:50: 🧹 Removed stale process lock
2025-09-19T10:27:50: 🔒 Process lock acquired (PID: 14040)
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14040
}
2025-09-19T10:27:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257870558, processId: 14040 },
  timestamp: 1758257870777
}
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257870558, willExpireAt: 1758258110558 },
  timestamp: 1758257870778
}
2025-09-19T10:27:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:50: 📋 Message rules loaded: 8 types
2025-09-19T10:27:50: ℹ️ [10:27:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 226,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:51: [INFO] WhatsApp client initialized
2025-09-19T10:27:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:53: 📝 Loaded 12 template types
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257873580,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18152,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:53: ⏰ 4-minute startup delay active
2025-09-19T10:27:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:53: [INFO] Using PQueue for job processing
2025-09-19T10:27:53: [INFO] Memory management setup completed
2025-09-19T10:27:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:53: [INFO] Checking process locks...
2025-09-19T10:27:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:53: [INFO] Process locks acquired successfully
2025-09-19T10:27:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:53: [INFO] Logs directory created
2025-09-19T10:27:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:53: [10:27:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:53: [10:27:53 am] ✅ Google Sheets API initialized
2025-09-19T10:27:53: [INFO] Google Sheets helper initialized
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:53: 🗑️ Deleted old log file: bot-2025-09-19T04-57-15-656Z.log
2025-09-19T10:27:53: 📝 Enhanced Logger initialized
2025-09-19T10:27:53: 📁 Loaded statistics from file
2025-09-19T10:27:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:53: 🧹 Removed stale process lock
2025-09-19T10:27:53: 🔒 Process lock acquired (PID: 18152)
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18152
}
2025-09-19T10:27:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257873580, processId: 18152 },
  timestamp: 1758257873728
}
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257873580, willExpireAt: 1758258113580 },
  timestamp: 1758257873729
}
2025-09-19T10:27:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:53: 📋 Message rules loaded: 8 types
2025-09-19T10:27:53: ℹ️ [10:27:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 152,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:54: [INFO] WhatsApp client initialized
2025-09-19T10:27:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:56: 📝 Loaded 12 template types
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257876744,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7776,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:56: ⏰ 4-minute startup delay active
2025-09-19T10:27:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:56: [INFO] Using PQueue for job processing
2025-09-19T10:27:56: [INFO] Memory management setup completed
2025-09-19T10:27:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:56: [INFO] Checking process locks...
2025-09-19T10:27:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:56: [INFO] Process locks acquired successfully
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:56: [INFO] Logs directory created
2025-09-19T10:27:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:56: [10:27:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:56: [10:27:56 am] ✅ Google Sheets API initialized
2025-09-19T10:27:56: [INFO] Google Sheets helper initialized
2025-09-19T10:27:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:56: 🗑️ Deleted old log file: bot-2025-09-19T04-57-18-562Z.log
2025-09-19T10:27:56: 📝 Enhanced Logger initialized
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:56: 📁 Loaded statistics from file
2025-09-19T10:27:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:56: 🧹 Removed stale process lock
2025-09-19T10:27:56: 🔒 Process lock acquired (PID: 7776)
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7776
}
2025-09-19T10:27:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257876744, processId: 7776 },
  timestamp: 1758257876862
}
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257876744, willExpireAt: 1758258116744 },
  timestamp: 1758257876862
}
2025-09-19T10:27:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:56: 📋 Message rules loaded: 8 types
2025-09-19T10:27:56: ℹ️ [10:27:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:27:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:27:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:27:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:27:58: [INFO] WhatsApp client initialized
2025-09-19T10:27:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:27:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:27:59: 📝 Loaded 12 template types
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257879855,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11844,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:27:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:27:59: ⏰ 4-minute startup delay active
2025-09-19T10:27:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:27:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:27:59: [INFO] Using PQueue for job processing
2025-09-19T10:27:59: [INFO] Memory management setup completed
2025-09-19T10:27:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:27:59: [INFO] Checking process locks...
2025-09-19T10:27:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:27:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:27:59: [INFO] Process locks acquired successfully
2025-09-19T10:27:59: [INFO] Logs directory created
2025-09-19T10:27:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:27:59: [10:27:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:27:59: [10:27:59 am] ✅ Google Sheets API initialized
2025-09-19T10:27:59: [INFO] Google Sheets helper initialized
2025-09-19T10:27:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:27:59: 🗑️ Deleted old log file: bot-2025-09-19T04-57-21-764Z.log
2025-09-19T10:27:59: 📝 Enhanced Logger initialized
2025-09-19T10:27:59: 📁 Loaded statistics from file
2025-09-19T10:27:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:27:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:27:59: 🧹 Removed stale process lock
2025-09-19T10:27:59: 🔒 Process lock acquired (PID: 11844)
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11844
}
2025-09-19T10:27:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:27:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257879855, processId: 11844 },
  timestamp: 1758257879989
}
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257879855, willExpireAt: 1758258119855 },
  timestamp: 1758257879990
}
2025-09-19T10:27:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:27:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:27:59: 📋 Message rules loaded: 8 types
2025-09-19T10:27:59: ℹ️ [10:27:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:00: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:00: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:00: [INFO] WhatsApp client initialized
2025-09-19T10:28:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:02: 📝 Loaded 12 template types
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257882708,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13840,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:02: ⏰ 4-minute startup delay active
2025-09-19T10:28:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:02: [INFO] Using PQueue for job processing
2025-09-19T10:28:02: [INFO] Memory management setup completed
2025-09-19T10:28:02: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:02: [INFO] Checking process locks...
2025-09-19T10:28:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:02: [INFO] Process locks acquired successfully
2025-09-19T10:28:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:02: [INFO] Logs directory created
2025-09-19T10:28:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:02: [10:28:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:02: [10:28:02 am] ✅ Google Sheets API initialized
2025-09-19T10:28:02: [INFO] Google Sheets helper initialized
2025-09-19T10:28:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:02: 🗑️ Deleted old log file: bot-2025-09-19T04-57-29-387Z.log
2025-09-19T10:28:02: 📝 Enhanced Logger initialized
2025-09-19T10:28:02: 📁 Loaded statistics from file
2025-09-19T10:28:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:02: 🧹 Removed stale process lock
2025-09-19T10:28:02: 🔒 Process lock acquired (PID: 13840)
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13840
}
2025-09-19T10:28:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257882708, processId: 13840 },
  timestamp: 1758257882862
}
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257882708, willExpireAt: 1758258122708 },
  timestamp: 1758257882863
}
2025-09-19T10:28:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:02: 📋 Message rules loaded: 8 types
2025-09-19T10:28:02: ℹ️ [10:28:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 157,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:03: [INFO] WhatsApp client initialized
2025-09-19T10:28:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:05: 📝 Loaded 12 template types
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257885637,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9804,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:05: ⏰ 4-minute startup delay active
2025-09-19T10:28:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:05: [INFO] Using PQueue for job processing
2025-09-19T10:28:05: [INFO] Memory management setup completed
2025-09-19T10:28:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:05: [INFO] Checking process locks...
2025-09-19T10:28:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:05: [INFO] Process locks acquired successfully
2025-09-19T10:28:05: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:05: [INFO] Logs directory created
2025-09-19T10:28:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:05: [10:28:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:05: [10:28:05 am] ✅ Google Sheets API initialized
2025-09-19T10:28:05: [INFO] Google Sheets helper initialized
2025-09-19T10:28:05: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:05: 🗑️ Deleted old log file: bot-2025-09-19T04-57-33-097Z.log
2025-09-19T10:28:05: 📝 Enhanced Logger initialized
2025-09-19T10:28:05: 📁 Loaded statistics from file
2025-09-19T10:28:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:05: 🧹 Removed stale process lock
2025-09-19T10:28:05: 🔒 Process lock acquired (PID: 9804)
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9804
}
2025-09-19T10:28:05: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257885637, processId: 9804 },
  timestamp: 1758257885803
}
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257885637, willExpireAt: 1758258125637 },
  timestamp: 1758257885803
}
2025-09-19T10:28:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:05: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:05: 📋 Message rules loaded: 8 types
2025-09-19T10:28:05: ℹ️ [10:28:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 169,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:06: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:06: [INFO] WhatsApp client initialized
2025-09-19T10:28:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:08: 📝 Loaded 12 template types
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257888858,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4636,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:08: ⏰ 4-minute startup delay active
2025-09-19T10:28:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:08: [INFO] Using PQueue for job processing
2025-09-19T10:28:08: [INFO] Memory management setup completed
2025-09-19T10:28:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:08: [INFO] Checking process locks...
2025-09-19T10:28:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:08: [INFO] Process locks acquired successfully
2025-09-19T10:28:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:08: [INFO] Logs directory created
2025-09-19T10:28:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:08: [10:28:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:08: [10:28:08 am] ✅ Google Sheets API initialized
2025-09-19T10:28:08: [INFO] Google Sheets helper initialized
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:08: 🗑️ Deleted old log file: bot-2025-09-19T04-57-35-778Z.log
2025-09-19T10:28:08: 📝 Enhanced Logger initialized
2025-09-19T10:28:08: 📁 Loaded statistics from file
2025-09-19T10:28:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:08: 🧹 Removed stale process lock
2025-09-19T10:28:08: 🔒 Process lock acquired (PID: 4636)
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4636
}
2025-09-19T10:28:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257888858, willExpireAt: 1758258128858 },
  timestamp: 1758257888972
}
2025-09-19T10:28:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:08: 📋 Message rules loaded: 8 types
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257888858, processId: 4636 },
  timestamp: 1758257888972
}
2025-09-19T10:28:08: ℹ️ [10:28:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:09: [INFO] WhatsApp client initialized
2025-09-19T10:28:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:11: 📝 Loaded 12 template types
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257891672,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15916,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:11: ⏰ 4-minute startup delay active
2025-09-19T10:28:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:11: [INFO] Using PQueue for job processing
2025-09-19T10:28:11: [INFO] Memory management setup completed
2025-09-19T10:28:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:11: [INFO] Checking process locks...
2025-09-19T10:28:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:11: [INFO] Process locks acquired successfully
2025-09-19T10:28:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:11: [INFO] Logs directory created
2025-09-19T10:28:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:11: [10:28:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:11: [10:28:11 am] ✅ Google Sheets API initialized
2025-09-19T10:28:11: [INFO] Google Sheets helper initialized
2025-09-19T10:28:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:11: 🗑️ Deleted old log file: bot-2025-09-19T04-57-38-375Z.log
2025-09-19T10:28:11: 📝 Enhanced Logger initialized
2025-09-19T10:28:11: 📁 Loaded statistics from file
2025-09-19T10:28:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:11: 🧹 Removed stale process lock
2025-09-19T10:28:11: 🔒 Process lock acquired (PID: 15916)
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15916
}
2025-09-19T10:28:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257891672, processId: 15916 },
  timestamp: 1758257891811
}
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257891672, willExpireAt: 1758258131672 },
  timestamp: 1758257891812
}
2025-09-19T10:28:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:11: 📋 Message rules loaded: 8 types
2025-09-19T10:28:11: ℹ️ [10:28:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 144,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:12: [INFO] WhatsApp client initialized
2025-09-19T10:28:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:14: 📝 Loaded 12 template types
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257894572,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15960,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:14: ⏰ 4-minute startup delay active
2025-09-19T10:28:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:14: [INFO] Using PQueue for job processing
2025-09-19T10:28:14: [INFO] Memory management setup completed
2025-09-19T10:28:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:14: [INFO] Checking process locks...
2025-09-19T10:28:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:14: [INFO] Process locks acquired successfully
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:14: [INFO] Logs directory created
2025-09-19T10:28:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:14: [10:28:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:14: [10:28:14 am] ✅ Google Sheets API initialized
2025-09-19T10:28:14: [INFO] Google Sheets helper initialized
2025-09-19T10:28:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:14: 🗑️ Deleted old log file: bot-2025-09-19T04-57-41-419Z.log
2025-09-19T10:28:14: 📝 Enhanced Logger initialized
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:14: 📁 Loaded statistics from file
2025-09-19T10:28:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:14: 🧹 Removed stale process lock
2025-09-19T10:28:14: 🔒 Process lock acquired (PID: 15960)
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15960
}
2025-09-19T10:28:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257894572, processId: 15960 },
  timestamp: 1758257894698
}
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257894572, willExpireAt: 1758258134572 },
  timestamp: 1758257894698
}
2025-09-19T10:28:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:14: 📋 Message rules loaded: 8 types
2025-09-19T10:28:14: ℹ️ [10:28:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:15: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:15: [INFO] WhatsApp client initialized
2025-09-19T10:28:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:17: 📝 Loaded 12 template types
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257897585,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1716,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:17: ⏰ 4-minute startup delay active
2025-09-19T10:28:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:17: [INFO] Using PQueue for job processing
2025-09-19T10:28:17: [INFO] Memory management setup completed
2025-09-19T10:28:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:17: [INFO] Checking process locks...
2025-09-19T10:28:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:17: [INFO] Process locks acquired successfully
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:17: [INFO] Logs directory created
2025-09-19T10:28:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:17: [10:28:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:17: [10:28:17 am] ✅ Google Sheets API initialized
2025-09-19T10:28:17: [INFO] Google Sheets helper initialized
2025-09-19T10:28:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:17: 🗑️ Deleted old log file: bot-2025-09-19T04-57-44-339Z.log
2025-09-19T10:28:17: 📝 Enhanced Logger initialized
2025-09-19T10:28:17: 📁 Loaded statistics from file
2025-09-19T10:28:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:17: 🧹 Removed stale process lock
2025-09-19T10:28:17: 🔒 Process lock acquired (PID: 1716)
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1716
}
2025-09-19T10:28:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257897585, processId: 1716 },
  timestamp: 1758257897704
}
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257897585, willExpireAt: 1758258137585 },
  timestamp: 1758257897704
}
2025-09-19T10:28:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:17: 📋 Message rules loaded: 8 types
2025-09-19T10:28:17: ℹ️ [10:28:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:18: [INFO] WhatsApp client initialized
2025-09-19T10:28:20: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:20: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:20: 📝 Loaded 12 template types
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257900394,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16172,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:20: ⏰ 4-minute startup delay active
2025-09-19T10:28:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:20: [INFO] Using PQueue for job processing
2025-09-19T10:28:20: [INFO] Memory management setup completed
2025-09-19T10:28:20: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:20: [INFO] Checking process locks...
2025-09-19T10:28:20: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:20: [INFO] Process locks acquired successfully
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:20: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:20: [INFO] Logs directory created
2025-09-19T10:28:20: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:20: [10:28:20 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:20: [10:28:20 am] ✅ Google Sheets API initialized
2025-09-19T10:28:20: [INFO] Google Sheets helper initialized
2025-09-19T10:28:20: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:20: 🗑️ Deleted old log file: bot-2025-09-19T04-57-47-410Z.log
2025-09-19T10:28:20: 📝 Enhanced Logger initialized
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:20: 📁 Loaded statistics from file
2025-09-19T10:28:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:20: 🧹 Removed stale process lock
2025-09-19T10:28:20: 🔒 Process lock acquired (PID: 16172)
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16172
}
2025-09-19T10:28:20: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257900394, processId: 16172 },
  timestamp: 1758257900505
}
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257900394, willExpireAt: 1758258140394 },
  timestamp: 1758257900505
}
2025-09-19T10:28:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:20: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:20: 📋 Message rules loaded: 8 types
2025-09-19T10:28:20: ℹ️ [10:28:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:21: [INFO] WhatsApp client initialized
2025-09-19T10:28:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:23: 📝 Loaded 12 template types
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257903456,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15880,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:23: ⏰ 4-minute startup delay active
2025-09-19T10:28:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:23: [INFO] Using PQueue for job processing
2025-09-19T10:28:23: [INFO] Memory management setup completed
2025-09-19T10:28:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:23: [INFO] Checking process locks...
2025-09-19T10:28:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:23: [INFO] Process locks acquired successfully
2025-09-19T10:28:23: [INFO] Logs directory created
2025-09-19T10:28:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:23: [10:28:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:23: [10:28:23 am] ✅ Google Sheets API initialized
2025-09-19T10:28:23: [INFO] Google Sheets helper initialized
2025-09-19T10:28:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:23: 🗑️ Deleted old log file: bot-2025-09-19T04-57-50-608Z.log
2025-09-19T10:28:23: 📝 Enhanced Logger initialized
2025-09-19T10:28:23: 📁 Loaded statistics from file
2025-09-19T10:28:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:23: 🧹 Removed stale process lock
2025-09-19T10:28:23: 🔒 Process lock acquired (PID: 15880)
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15880
}
2025-09-19T10:28:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257903456, willExpireAt: 1758258143456 },
  timestamp: 1758257903586
}
2025-09-19T10:28:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:23: 📋 Message rules loaded: 8 types
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257903456, processId: 15880 },
  timestamp: 1758257903586
}
2025-09-19T10:28:23: ℹ️ [10:28:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:24: [INFO] WhatsApp client initialized
2025-09-19T10:28:26: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:26: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:26: 📝 Loaded 12 template types
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257906294,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17932,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:26: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:26: ⏰ 4-minute startup delay active
2025-09-19T10:28:26: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:26: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:26: [INFO] Using PQueue for job processing
2025-09-19T10:28:26: [INFO] Memory management setup completed
2025-09-19T10:28:26: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:26: [INFO] Checking process locks...
2025-09-19T10:28:26: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:26: [INFO] Process locks acquired successfully
2025-09-19T10:28:26: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:26: [INFO] Logs directory created
2025-09-19T10:28:26: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:26: [10:28:26 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:26: [10:28:26 am] ✅ Google Sheets API initialized
2025-09-19T10:28:26: [INFO] Google Sheets helper initialized
2025-09-19T10:28:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:26: 🗑️ Deleted old log file: bot-2025-09-19T04-57-53-620Z.log
2025-09-19T10:28:26: 📝 Enhanced Logger initialized
2025-09-19T10:28:26: 📁 Loaded statistics from file
2025-09-19T10:28:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:26: 🧹 Removed stale process lock
2025-09-19T10:28:26: 🔒 Process lock acquired (PID: 17932)
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17932
}
2025-09-19T10:28:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257906294, processId: 17932 },
  timestamp: 1758257906412
}
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257906294, willExpireAt: 1758258146294 },
  timestamp: 1758257906412
}
2025-09-19T10:28:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:26: 📋 Message rules loaded: 8 types
2025-09-19T10:28:26: ℹ️ [10:28:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:27: [INFO] WhatsApp client initialized
2025-09-19T10:28:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:29: 📝 Loaded 12 template types
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257909105,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13960,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:29: ⏰ 4-minute startup delay active
2025-09-19T10:28:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:29: [INFO] Using PQueue for job processing
2025-09-19T10:28:29: [INFO] Memory management setup completed
2025-09-19T10:28:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:29: [INFO] Checking process locks...
2025-09-19T10:28:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:29: [INFO] Process locks acquired successfully
2025-09-19T10:28:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:29: [INFO] Logs directory created
2025-09-19T10:28:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:29: [10:28:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:29: [10:28:29 am] ✅ Google Sheets API initialized
2025-09-19T10:28:29: [INFO] Google Sheets helper initialized
2025-09-19T10:28:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:29: 🗑️ Deleted old log file: bot-2025-09-19T04-57-56-776Z.log
2025-09-19T10:28:29: 📝 Enhanced Logger initialized
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:29: 📁 Loaded statistics from file
2025-09-19T10:28:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:29: 🧹 Removed stale process lock
2025-09-19T10:28:29: 🔒 Process lock acquired (PID: 13960)
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13960
}
2025-09-19T10:28:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257909105, processId: 13960 },
  timestamp: 1758257909227
}
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257909105, willExpireAt: 1758258149105 },
  timestamp: 1758257909227
}
2025-09-19T10:28:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:29: 📋 Message rules loaded: 8 types
2025-09-19T10:28:29: ℹ️ [10:28:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:30: [INFO] WhatsApp client initialized
2025-09-19T10:28:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:31: 📝 Loaded 12 template types
2025-09-19T10:28:31: ℹ️ [10:28:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257911930,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16836,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:31: ⏰ 4-minute startup delay active
2025-09-19T10:28:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:31: [INFO] Using PQueue for job processing
2025-09-19T10:28:31: [INFO] Memory management setup completed
2025-09-19T10:28:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:31: [INFO] Checking process locks...
2025-09-19T10:28:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:31: ℹ️ [10:28:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:31: [INFO] Process locks acquired successfully
2025-09-19T10:28:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:31: [INFO] Logs directory created
2025-09-19T10:28:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:31: [10:28:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:31: [10:28:31 am] ✅ Google Sheets API initialized
2025-09-19T10:28:31: [INFO] Google Sheets helper initialized
2025-09-19T10:28:31: 🗑️ Deleted old log file: bot-2025-09-19T04-57-59-895Z.log
2025-09-19T10:28:31: 📝 Enhanced Logger initialized
2025-09-19T10:28:32: 📁 Loaded statistics from file
2025-09-19T10:28:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:32: ℹ️ [10:28:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:32: 🧹 Removed stale process lock
2025-09-19T10:28:32: 🔒 Process lock acquired (PID: 16836)
2025-09-19T10:28:32: ℹ️ [10:28:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16836
}
2025-09-19T10:28:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:32: ℹ️ [10:28:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257911930, processId: 16836 },
  timestamp: 1758257912051
}
2025-09-19T10:28:32: ℹ️ [10:28:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257911930, willExpireAt: 1758258151930 },
  timestamp: 1758257912051
}
2025-09-19T10:28:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:32: 📋 Message rules loaded: 8 types
2025-09-19T10:28:32: ℹ️ [10:28:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:33: [INFO] WhatsApp client initialized
2025-09-19T10:28:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:35: 📝 Loaded 12 template types
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257915318,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11344,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:35: ⏰ 4-minute startup delay active
2025-09-19T10:28:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:35: [INFO] Using PQueue for job processing
2025-09-19T10:28:35: [INFO] Memory management setup completed
2025-09-19T10:28:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:35: [INFO] Checking process locks...
2025-09-19T10:28:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:35: [INFO] Process locks acquired successfully
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:35: [INFO] Logs directory created
2025-09-19T10:28:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:35: [10:28:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:35: [10:28:35 am] ✅ Google Sheets API initialized
2025-09-19T10:28:35: [INFO] Google Sheets helper initialized
2025-09-19T10:28:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:35: 🗑️ Deleted old log file: bot-2025-09-19T04-58-02-762Z.log
2025-09-19T10:28:35: 📝 Enhanced Logger initialized
2025-09-19T10:28:35: 📁 Loaded statistics from file
2025-09-19T10:28:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:35: 🧹 Removed stale process lock
2025-09-19T10:28:35: 🔒 Process lock acquired (PID: 11344)
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11344
}
2025-09-19T10:28:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257915318, willExpireAt: 1758258155318 },
  timestamp: 1758257915438
}
2025-09-19T10:28:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:35: 📋 Message rules loaded: 8 types
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257915318, processId: 11344 },
  timestamp: 1758257915437
}
2025-09-19T10:28:35: ℹ️ [10:28:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:36: [INFO] WhatsApp client initialized
2025-09-19T10:28:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:38: 📝 Loaded 12 template types
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257918184,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1984,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:38: ⏰ 4-minute startup delay active
2025-09-19T10:28:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:38: [INFO] Using PQueue for job processing
2025-09-19T10:28:38: [INFO] Memory management setup completed
2025-09-19T10:28:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:38: [INFO] Checking process locks...
2025-09-19T10:28:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:38: [INFO] Process locks acquired successfully
2025-09-19T10:28:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:38: [INFO] Logs directory created
2025-09-19T10:28:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:38: [10:28:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:38: [10:28:38 am] ✅ Google Sheets API initialized
2025-09-19T10:28:38: [INFO] Google Sheets helper initialized
2025-09-19T10:28:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:38: 🗑️ Deleted old log file: bot-2025-09-19T04-58-05-674Z.log
2025-09-19T10:28:38: 📝 Enhanced Logger initialized
2025-09-19T10:28:38: 📁 Loaded statistics from file
2025-09-19T10:28:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:38: 🧹 Removed stale process lock
2025-09-19T10:28:38: 🔒 Process lock acquired (PID: 1984)
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1984
}
2025-09-19T10:28:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257918184, processId: 1984 },
  timestamp: 1758257918305
}
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257918184, willExpireAt: 1758258158184 },
  timestamp: 1758257918305
}
2025-09-19T10:28:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:38: 📋 Message rules loaded: 8 types
2025-09-19T10:28:38: ℹ️ [10:28:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:38: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:39: [INFO] WhatsApp client initialized
2025-09-19T10:28:40: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:40: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:40: 📝 Loaded 12 template types
2025-09-19T10:28:40: ℹ️ [10:28:40 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257920970,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17904,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:40: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:40: ⏰ 4-minute startup delay active
2025-09-19T10:28:40: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:40: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:40: [INFO] Using PQueue for job processing
2025-09-19T10:28:40: [INFO] Memory management setup completed
2025-09-19T10:28:40: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:40: [INFO] Checking process locks...
2025-09-19T10:28:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:41: ℹ️ [10:28:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:41: [INFO] Process locks acquired successfully
2025-09-19T10:28:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:41: [INFO] Logs directory created
2025-09-19T10:28:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:41: [10:28:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:41: [10:28:41 am] ✅ Google Sheets API initialized
2025-09-19T10:28:41: [INFO] Google Sheets helper initialized
2025-09-19T10:28:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:41: 🗑️ Deleted old log file: bot-2025-09-19T04-58-08-890Z.log
2025-09-19T10:28:41: 📝 Enhanced Logger initialized
2025-09-19T10:28:41: ℹ️ [10:28:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:41: 📁 Loaded statistics from file
2025-09-19T10:28:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:41: 🧹 Removed stale process lock
2025-09-19T10:28:41: 🔒 Process lock acquired (PID: 17904)
2025-09-19T10:28:41: ℹ️ [10:28:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17904
}
2025-09-19T10:28:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:41: ℹ️ [10:28:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257920970, processId: 17904 },
  timestamp: 1758257921091
}
2025-09-19T10:28:41: ℹ️ [10:28:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257920970, willExpireAt: 1758258160970 },
  timestamp: 1758257921091
}
2025-09-19T10:28:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:41: 📋 Message rules loaded: 8 types
2025-09-19T10:28:41: ℹ️ [10:28:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:41: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:41: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:41: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:41: [INFO] WhatsApp client initialized
2025-09-19T10:28:43: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:43: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:43: 📝 Loaded 12 template types
2025-09-19T10:28:43: ℹ️ [10:28:43 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257923902,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9772,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:43: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:43: ⏰ 4-minute startup delay active
2025-09-19T10:28:43: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:43: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:43: [INFO] Using PQueue for job processing
2025-09-19T10:28:43: [INFO] Memory management setup completed
2025-09-19T10:28:43: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:43: [INFO] Checking process locks...
2025-09-19T10:28:43: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:43: [INFO] Process locks acquired successfully
2025-09-19T10:28:43: ℹ️ [10:28:43 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:43: [INFO] Logs directory created
2025-09-19T10:28:43: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:43: [10:28:43 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:43: [10:28:43 am] ✅ Google Sheets API initialized
2025-09-19T10:28:43: [INFO] Google Sheets helper initialized
2025-09-19T10:28:43: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:44: ℹ️ [10:28:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:44: 🗑️ Deleted old log file: bot-2025-09-19T04-58-11-710Z.log
2025-09-19T10:28:44: 📝 Enhanced Logger initialized
2025-09-19T10:28:44: 📁 Loaded statistics from file
2025-09-19T10:28:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:44: 🧹 Removed stale process lock
2025-09-19T10:28:44: 🔒 Process lock acquired (PID: 9772)
2025-09-19T10:28:44: ℹ️ [10:28:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9772
}
2025-09-19T10:28:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:44: ℹ️ [10:28:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257923902, processId: 9772 },
  timestamp: 1758257924050
}
2025-09-19T10:28:44: ℹ️ [10:28:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257923902, willExpireAt: 1758258163902 },
  timestamp: 1758257924051
}
2025-09-19T10:28:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:44: 📋 Message rules loaded: 8 types
2025-09-19T10:28:44: ℹ️ [10:28:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 153,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:44: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:44: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:44: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:44: [INFO] WhatsApp client initialized
2025-09-19T10:28:46: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:46: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:46: 📝 Loaded 12 template types
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257926792,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2296,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:46: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:46: ⏰ 4-minute startup delay active
2025-09-19T10:28:46: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:46: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:46: [INFO] Using PQueue for job processing
2025-09-19T10:28:46: [INFO] Memory management setup completed
2025-09-19T10:28:46: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:46: [INFO] Checking process locks...
2025-09-19T10:28:46: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:46: [INFO] Process locks acquired successfully
2025-09-19T10:28:46: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:46: [INFO] Logs directory created
2025-09-19T10:28:46: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:46: [10:28:46 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:46: [10:28:46 am] ✅ Google Sheets API initialized
2025-09-19T10:28:46: [INFO] Google Sheets helper initialized
2025-09-19T10:28:46: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:46: 🗑️ Deleted old log file: bot-2025-09-19T04-58-14-611Z.log
2025-09-19T10:28:46: 📝 Enhanced Logger initialized
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:46: 📁 Loaded statistics from file
2025-09-19T10:28:46: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:46: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:46: 🧹 Removed stale process lock
2025-09-19T10:28:46: 🔒 Process lock acquired (PID: 2296)
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2296
}
2025-09-19T10:28:46: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:46: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257926792, processId: 2296 },
  timestamp: 1758257926913
}
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257926792, willExpireAt: 1758258166792 },
  timestamp: 1758257926913
}
2025-09-19T10:28:46: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:46: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:46: 📋 Message rules loaded: 8 types
2025-09-19T10:28:46: ℹ️ [10:28:46 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:47: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:47: [INFO] WhatsApp client initialized
2025-09-19T10:28:49: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:49: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:49: 📝 Loaded 12 template types
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257929821,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16012,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:49: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:49: ⏰ 4-minute startup delay active
2025-09-19T10:28:49: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:49: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:49: [INFO] Using PQueue for job processing
2025-09-19T10:28:49: [INFO] Memory management setup completed
2025-09-19T10:28:49: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:49: [INFO] Checking process locks...
2025-09-19T10:28:49: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:49: [INFO] Process locks acquired successfully
2025-09-19T10:28:49: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:49: [INFO] Logs directory created
2025-09-19T10:28:49: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:49: [10:28:49 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:49: [10:28:49 am] ✅ Google Sheets API initialized
2025-09-19T10:28:49: [INFO] Google Sheets helper initialized
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:49: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:49: 🗑️ Deleted old log file: bot-2025-09-19T04-58-17-620Z.log
2025-09-19T10:28:49: 📝 Enhanced Logger initialized
2025-09-19T10:28:49: 📁 Loaded statistics from file
2025-09-19T10:28:49: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:49: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:49: 🧹 Removed stale process lock
2025-09-19T10:28:49: 🔒 Process lock acquired (PID: 16012)
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16012
}
2025-09-19T10:28:49: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:49: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257929821, willExpireAt: 1758258169821 },
  timestamp: 1758257929934
}
2025-09-19T10:28:49: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:49: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:49: 📋 Message rules loaded: 8 types
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257929821, processId: 16012 },
  timestamp: 1758257929934
}
2025-09-19T10:28:49: ℹ️ [10:28:49 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:50: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:50: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:50: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:50: [INFO] WhatsApp client initialized
2025-09-19T10:28:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:52: 📝 Loaded 12 template types
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257932698,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5564,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:52: ⏰ 4-minute startup delay active
2025-09-19T10:28:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:52: [INFO] Using PQueue for job processing
2025-09-19T10:28:52: [INFO] Memory management setup completed
2025-09-19T10:28:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:52: [INFO] Checking process locks...
2025-09-19T10:28:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:52: [INFO] Process locks acquired successfully
2025-09-19T10:28:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:52: [INFO] Logs directory created
2025-09-19T10:28:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:52: [10:28:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:52: [10:28:52 am] ✅ Google Sheets API initialized
2025-09-19T10:28:52: [INFO] Google Sheets helper initialized
2025-09-19T10:28:52: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:52: 🗑️ Deleted old log file: bot-2025-09-19T04-58-20-423Z.log
2025-09-19T10:28:52: 📝 Enhanced Logger initialized
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:52: 📁 Loaded statistics from file
2025-09-19T10:28:52: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:52: 🧹 Removed stale process lock
2025-09-19T10:28:52: 🔒 Process lock acquired (PID: 5564)
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5564
}
2025-09-19T10:28:52: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:52: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257932698, processId: 5564 },
  timestamp: 1758257932829
}
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257932698, willExpireAt: 1758258172698 },
  timestamp: 1758257932829
}
2025-09-19T10:28:52: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:52: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:52: 📋 Message rules loaded: 8 types
2025-09-19T10:28:52: ℹ️ [10:28:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:53: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:53: [INFO] WhatsApp client initialized
2025-09-19T10:28:55: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:55: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:55: 📝 Loaded 12 template types
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257935575,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17740,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:55: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:55: ⏰ 4-minute startup delay active
2025-09-19T10:28:55: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:55: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:55: [INFO] Using PQueue for job processing
2025-09-19T10:28:55: [INFO] Memory management setup completed
2025-09-19T10:28:55: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:55: [INFO] Checking process locks...
2025-09-19T10:28:55: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:55: [INFO] Process locks acquired successfully
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:55: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:55: [INFO] Logs directory created
2025-09-19T10:28:55: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:55: [10:28:55 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:55: [10:28:55 am] ✅ Google Sheets API initialized
2025-09-19T10:28:55: [INFO] Google Sheets helper initialized
2025-09-19T10:28:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:55: 🗑️ Deleted old log file: bot-2025-09-19T04-58-23-491Z.log
2025-09-19T10:28:55: 📝 Enhanced Logger initialized
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:55: 📁 Loaded statistics from file
2025-09-19T10:28:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:55: 🧹 Removed stale process lock
2025-09-19T10:28:55: 🔒 Process lock acquired (PID: 17740)
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17740
}
2025-09-19T10:28:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257935575, processId: 17740 },
  timestamp: 1758257935698
}
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257935575, willExpireAt: 1758258175575 },
  timestamp: 1758257935698
}
2025-09-19T10:28:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:55: 📋 Message rules loaded: 8 types
2025-09-19T10:28:55: ℹ️ [10:28:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:56: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:56: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:56: [INFO] WhatsApp client initialized
2025-09-19T10:28:58: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:28:58: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:28:58: 📝 Loaded 12 template types
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257938524,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9560,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:28:58: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:28:58: ⏰ 4-minute startup delay active
2025-09-19T10:28:58: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:28:58: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:28:58: [INFO] Using PQueue for job processing
2025-09-19T10:28:58: [INFO] Memory management setup completed
2025-09-19T10:28:58: [INFO] Starting WhatsApp Bot...
2025-09-19T10:28:58: [INFO] Checking process locks...
2025-09-19T10:28:58: 📁 Loaded 0 sent messages from file
2025-09-19T10:28:58: [INFO] Process locks acquired successfully
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:28:58: 📁 Loaded 0 customer histories from file
2025-09-19T10:28:58: [INFO] Logs directory created
2025-09-19T10:28:58: [INFO] Initializing Google Sheets helper...
2025-09-19T10:28:58: [10:28:58 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:28:58: [10:28:58 am] ✅ Google Sheets API initialized
2025-09-19T10:28:58: [INFO] Google Sheets helper initialized
2025-09-19T10:28:58: 📁 Loaded 0 message hashes from file
2025-09-19T10:28:58: 🗑️ Deleted old log file: bot-2025-09-19T04-58-26-326Z.log
2025-09-19T10:28:58: 📝 Enhanced Logger initialized
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:28:58: 📁 Loaded statistics from file
2025-09-19T10:28:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:28:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:28:58: 🧹 Removed stale process lock
2025-09-19T10:28:58: 🔒 Process lock acquired (PID: 9560)
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9560
}
2025-09-19T10:28:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:28:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257938524, willExpireAt: 1758258178524 },
  timestamp: 1758257938647
}
2025-09-19T10:28:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:28:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:28:58: 📋 Message rules loaded: 8 types
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257938524, processId: 9560 },
  timestamp: 1758257938646
}
2025-09-19T10:28:58: ℹ️ [10:28:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:28:59: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:28:59: [INFO] Initializing WhatsApp client...
2025-09-19T10:28:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:28:59: [INFO] WhatsApp client initialized
2025-09-19T10:29:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:01: 📝 Loaded 12 template types
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257941406,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17344,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:01: ⏰ 4-minute startup delay active
2025-09-19T10:29:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:01: [INFO] Using PQueue for job processing
2025-09-19T10:29:01: [INFO] Memory management setup completed
2025-09-19T10:29:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:01: [INFO] Checking process locks...
2025-09-19T10:29:01: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:01: [INFO] Process locks acquired successfully
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:01: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:01: [INFO] Logs directory created
2025-09-19T10:29:01: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:01: [10:29:01 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:01: [10:29:01 am] ✅ Google Sheets API initialized
2025-09-19T10:29:01: [INFO] Google Sheets helper initialized
2025-09-19T10:29:01: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:01: 🗑️ Deleted old log file: bot-2025-09-19T04-58-29-142Z.log
2025-09-19T10:29:01: 📝 Enhanced Logger initialized
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:01: 📁 Loaded statistics from file
2025-09-19T10:29:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:01: 🧹 Removed stale process lock
2025-09-19T10:29:01: 🔒 Process lock acquired (PID: 17344)
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17344
}
2025-09-19T10:29:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257941406, processId: 17344 },
  timestamp: 1758257941516
}
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257941406, willExpireAt: 1758258181406 },
  timestamp: 1758257941516
}
2025-09-19T10:29:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:01: 📋 Message rules loaded: 8 types
2025-09-19T10:29:01: ℹ️ [10:29:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 114,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:02: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:02: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:02: [INFO] WhatsApp client initialized
2025-09-19T10:29:04: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:04: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:04: 📝 Loaded 12 template types
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257944659,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16548,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:04: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:04: ⏰ 4-minute startup delay active
2025-09-19T10:29:04: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:04: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:04: [INFO] Using PQueue for job processing
2025-09-19T10:29:04: [INFO] Memory management setup completed
2025-09-19T10:29:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:04: [INFO] Checking process locks...
2025-09-19T10:29:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:04: [INFO] Process locks acquired successfully
2025-09-19T10:29:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:04: [INFO] Logs directory created
2025-09-19T10:29:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:04: [10:29:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:04: [10:29:04 am] ✅ Google Sheets API initialized
2025-09-19T10:29:04: [INFO] Google Sheets helper initialized
2025-09-19T10:29:04: 🗑️ Deleted old log file: bot-2025-09-19T04-58-31-961Z.log
2025-09-19T10:29:04: 📝 Enhanced Logger initialized
2025-09-19T10:29:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:04: 📁 Loaded statistics from file
2025-09-19T10:29:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:04: 🧹 Removed stale process lock
2025-09-19T10:29:04: 🔒 Process lock acquired (PID: 16548)
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16548
}
2025-09-19T10:29:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257944659, processId: 16548 },
  timestamp: 1758257944773
}
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257944659, willExpireAt: 1758258184659 },
  timestamp: 1758257944773
}
2025-09-19T10:29:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:04: 📋 Message rules loaded: 8 types
2025-09-19T10:29:04: ℹ️ [10:29:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:05: [INFO] WhatsApp client initialized
2025-09-19T10:29:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:07: 📝 Loaded 12 template types
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257947698,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8256,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:07: ⏰ 4-minute startup delay active
2025-09-19T10:29:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:07: [INFO] Using PQueue for job processing
2025-09-19T10:29:07: [INFO] Memory management setup completed
2025-09-19T10:29:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:07: [INFO] Checking process locks...
2025-09-19T10:29:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:07: [INFO] Process locks acquired successfully
2025-09-19T10:29:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:07: [INFO] Logs directory created
2025-09-19T10:29:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:07: [10:29:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:07: [10:29:07 am] ✅ Google Sheets API initialized
2025-09-19T10:29:07: [INFO] Google Sheets helper initialized
2025-09-19T10:29:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:07: 🗑️ Deleted old log file: bot-2025-09-19T04-58-35-350Z.log
2025-09-19T10:29:07: 📝 Enhanced Logger initialized
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:07: 📁 Loaded statistics from file
2025-09-19T10:29:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:07: 🧹 Removed stale process lock
2025-09-19T10:29:07: 🔒 Process lock acquired (PID: 8256)
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8256
}
2025-09-19T10:29:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257947698, processId: 8256 },
  timestamp: 1758257947821
}
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257947698, willExpireAt: 1758258187698 },
  timestamp: 1758257947821
}
2025-09-19T10:29:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:07: 📋 Message rules loaded: 8 types
2025-09-19T10:29:07: ℹ️ [10:29:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:09: [INFO] WhatsApp client initialized
2025-09-19T10:29:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:11: 📝 Loaded 12 template types
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257951463,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18416,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:11: ⏰ 4-minute startup delay active
2025-09-19T10:29:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:11: [INFO] Using PQueue for job processing
2025-09-19T10:29:11: [INFO] Memory management setup completed
2025-09-19T10:29:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:11: [INFO] Checking process locks...
2025-09-19T10:29:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:11: [INFO] Process locks acquired successfully
2025-09-19T10:29:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:11: [INFO] Logs directory created
2025-09-19T10:29:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:11: [10:29:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:11: [10:29:11 am] ✅ Google Sheets API initialized
2025-09-19T10:29:11: [INFO] Google Sheets helper initialized
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:11: 🗑️ Deleted old log file: bot-2025-09-19T04-58-38-218Z.log
2025-09-19T10:29:11: 📝 Enhanced Logger initialized
2025-09-19T10:29:11: 📁 Loaded statistics from file
2025-09-19T10:29:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:11: 🧹 Removed stale process lock
2025-09-19T10:29:11: 🔒 Process lock acquired (PID: 18416)
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18416
}
2025-09-19T10:29:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257951463, processId: 18416 },
  timestamp: 1758257951591
}
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257951463, willExpireAt: 1758258191463 },
  timestamp: 1758257951591
}
2025-09-19T10:29:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:11: 📋 Message rules loaded: 8 types
2025-09-19T10:29:11: ℹ️ [10:29:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:13: [INFO] WhatsApp client initialized
2025-09-19T10:29:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:15: 📝 Loaded 12 template types
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257955127,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17868,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:15: ⏰ 4-minute startup delay active
2025-09-19T10:29:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:15: [INFO] Using PQueue for job processing
2025-09-19T10:29:15: [INFO] Memory management setup completed
2025-09-19T10:29:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:15: [INFO] Checking process locks...
2025-09-19T10:29:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:15: [INFO] Process locks acquired successfully
2025-09-19T10:29:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:15: [INFO] Logs directory created
2025-09-19T10:29:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:15: [10:29:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:15: [10:29:15 am] ✅ Google Sheets API initialized
2025-09-19T10:29:15: [INFO] Google Sheets helper initialized
2025-09-19T10:29:15: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:15: 🗑️ Deleted old log file: bot-2025-09-19T04-58-41-003Z.log
2025-09-19T10:29:15: 📝 Enhanced Logger initialized
2025-09-19T10:29:15: 📁 Loaded statistics from file
2025-09-19T10:29:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:15: 🧹 Removed stale process lock
2025-09-19T10:29:15: 🔒 Process lock acquired (PID: 17868)
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17868
}
2025-09-19T10:29:15: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257955127, processId: 17868 },
  timestamp: 1758257955232
}
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257955127, willExpireAt: 1758258195127 },
  timestamp: 1758257955232
}
2025-09-19T10:29:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:15: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:15: 📋 Message rules loaded: 8 types
2025-09-19T10:29:15: ℹ️ [10:29:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:16: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:16: [INFO] WhatsApp client initialized
2025-09-19T10:29:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:18: 📝 Loaded 12 template types
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257958331,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18412,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:18: ⏰ 4-minute startup delay active
2025-09-19T10:29:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:18: [INFO] Using PQueue for job processing
2025-09-19T10:29:18: [INFO] Memory management setup completed
2025-09-19T10:29:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:18: [INFO] Checking process locks...
2025-09-19T10:29:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:18: [INFO] Process locks acquired successfully
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:18: [INFO] Logs directory created
2025-09-19T10:29:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:18: [10:29:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:18: [10:29:18 am] ✅ Google Sheets API initialized
2025-09-19T10:29:18: [INFO] Google Sheets helper initialized
2025-09-19T10:29:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:18: 🗑️ Deleted old log file: bot-2025-09-19T04-58-43-939Z.log
2025-09-19T10:29:18: 📝 Enhanced Logger initialized
2025-09-19T10:29:18: 📁 Loaded statistics from file
2025-09-19T10:29:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:18: 🧹 Removed stale process lock
2025-09-19T10:29:18: 🔒 Process lock acquired (PID: 18412)
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18412
}
2025-09-19T10:29:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257958331, processId: 18412 },
  timestamp: 1758257958446
}
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257958331, willExpireAt: 1758258198331 },
  timestamp: 1758257958446
}
2025-09-19T10:29:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:18: 📋 Message rules loaded: 8 types
2025-09-19T10:29:18: ℹ️ [10:29:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:19: [INFO] WhatsApp client initialized
2025-09-19T10:29:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:21: 📝 Loaded 12 template types
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257961324,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17572,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:21: ⏰ 4-minute startup delay active
2025-09-19T10:29:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:21: [INFO] Using PQueue for job processing
2025-09-19T10:29:21: [INFO] Memory management setup completed
2025-09-19T10:29:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:21: [INFO] Checking process locks...
2025-09-19T10:29:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:21: [INFO] Process locks acquired successfully
2025-09-19T10:29:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:21: [INFO] Logs directory created
2025-09-19T10:29:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:21: [10:29:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:21: [10:29:21 am] ✅ Google Sheets API initialized
2025-09-19T10:29:21: [INFO] Google Sheets helper initialized
2025-09-19T10:29:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:21: 🗑️ Deleted old log file: bot-2025-09-19T04-58-46-829Z.log
2025-09-19T10:29:21: 📝 Enhanced Logger initialized
2025-09-19T10:29:21: 📁 Loaded statistics from file
2025-09-19T10:29:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:21: 🧹 Removed stale process lock
2025-09-19T10:29:21: 🔒 Process lock acquired (PID: 17572)
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17572
}
2025-09-19T10:29:21: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257961324, willExpireAt: 1758258201324 },
  timestamp: 1758257961447
}
2025-09-19T10:29:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:21: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:21: 📋 Message rules loaded: 8 types
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257961324, processId: 17572 },
  timestamp: 1758257961447
}
2025-09-19T10:29:21: ℹ️ [10:29:21 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:22: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:22: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:22: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:22: [INFO] WhatsApp client initialized
2025-09-19T10:29:24: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:24: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:24: 📝 Loaded 12 template types
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257964437,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3016,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:24: ⏰ 4-minute startup delay active
2025-09-19T10:29:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:24: [INFO] Using PQueue for job processing
2025-09-19T10:29:24: [INFO] Memory management setup completed
2025-09-19T10:29:24: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:24: [INFO] Checking process locks...
2025-09-19T10:29:24: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:24: [INFO] Process locks acquired successfully
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:24: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:24: [INFO] Logs directory created
2025-09-19T10:29:24: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:24: [10:29:24 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:24: [10:29:24 am] ✅ Google Sheets API initialized
2025-09-19T10:29:24: [INFO] Google Sheets helper initialized
2025-09-19T10:29:24: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:24: 🗑️ Deleted old log file: bot-2025-09-19T04-58-49-853Z.log
2025-09-19T10:29:24: 📝 Enhanced Logger initialized
2025-09-19T10:29:24: 📁 Loaded statistics from file
2025-09-19T10:29:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:24: 🧹 Removed stale process lock
2025-09-19T10:29:24: 🔒 Process lock acquired (PID: 3016)
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3016
}
2025-09-19T10:29:24: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257964437, willExpireAt: 1758258204437 },
  timestamp: 1758257964592
}
2025-09-19T10:29:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:24: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:24: 📋 Message rules loaded: 8 types
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257964437, processId: 3016 },
  timestamp: 1758257964591
}
2025-09-19T10:29:24: ℹ️ [10:29:24 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 158,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:25: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:25: [INFO] WhatsApp client initialized
2025-09-19T10:29:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:27: 📝 Loaded 12 template types
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257967277,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11040,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:27: ⏰ 4-minute startup delay active
2025-09-19T10:29:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:27: [INFO] Using PQueue for job processing
2025-09-19T10:29:27: [INFO] Memory management setup completed
2025-09-19T10:29:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:27: [INFO] Checking process locks...
2025-09-19T10:29:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:27: [INFO] Process locks acquired successfully
2025-09-19T10:29:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:27: [INFO] Logs directory created
2025-09-19T10:29:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:27: [10:29:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:27: [10:29:27 am] ✅ Google Sheets API initialized
2025-09-19T10:29:27: [INFO] Google Sheets helper initialized
2025-09-19T10:29:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:27: 🗑️ Deleted old log file: bot-2025-09-19T04-58-52-735Z.log
2025-09-19T10:29:27: 📝 Enhanced Logger initialized
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:27: 📁 Loaded statistics from file
2025-09-19T10:29:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:27: 🧹 Removed stale process lock
2025-09-19T10:29:27: 🔒 Process lock acquired (PID: 11040)
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11040
}
2025-09-19T10:29:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257967277, processId: 11040 },
  timestamp: 1758257967396
}
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257967277, willExpireAt: 1758258207277 },
  timestamp: 1758257967396
}
2025-09-19T10:29:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:27: 📋 Message rules loaded: 8 types
2025-09-19T10:29:27: ℹ️ [10:29:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:28: [INFO] WhatsApp client initialized
2025-09-19T10:29:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:30: 📝 Loaded 12 template types
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257970441,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9432,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:30: ⏰ 4-minute startup delay active
2025-09-19T10:29:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:30: [INFO] Using PQueue for job processing
2025-09-19T10:29:30: [INFO] Memory management setup completed
2025-09-19T10:29:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:30: [INFO] Checking process locks...
2025-09-19T10:29:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:30: [INFO] Process locks acquired successfully
2025-09-19T10:29:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:30: [INFO] Logs directory created
2025-09-19T10:29:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:30: [10:29:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:30: [10:29:30 am] ✅ Google Sheets API initialized
2025-09-19T10:29:30: [INFO] Google Sheets helper initialized
2025-09-19T10:29:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:30: 🗑️ Deleted old log file: bot-2025-09-19T04-58-55-610Z.log
2025-09-19T10:29:30: 📝 Enhanced Logger initialized
2025-09-19T10:29:30: 📁 Loaded statistics from file
2025-09-19T10:29:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:30: 🧹 Removed stale process lock
2025-09-19T10:29:30: 🔒 Process lock acquired (PID: 9432)
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9432
}
2025-09-19T10:29:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257970441, willExpireAt: 1758258210441 },
  timestamp: 1758257970577
}
2025-09-19T10:29:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:30: 📋 Message rules loaded: 8 types
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257970441, processId: 9432 },
  timestamp: 1758257970577
}
2025-09-19T10:29:30: ℹ️ [10:29:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:32: [INFO] WhatsApp client initialized
2025-09-19T10:29:34: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:34: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:34: 📝 Loaded 12 template types
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257974078,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5576,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:34: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:34: ⏰ 4-minute startup delay active
2025-09-19T10:29:34: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:34: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:34: [INFO] Using PQueue for job processing
2025-09-19T10:29:34: [INFO] Memory management setup completed
2025-09-19T10:29:34: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:34: [INFO] Checking process locks...
2025-09-19T10:29:34: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:34: [INFO] Process locks acquired successfully
2025-09-19T10:29:34: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:34: [INFO] Logs directory created
2025-09-19T10:29:34: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:34: [10:29:34 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:34: [10:29:34 am] ✅ Google Sheets API initialized
2025-09-19T10:29:34: [INFO] Google Sheets helper initialized
2025-09-19T10:29:34: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:34: 🗑️ Deleted old log file: bot-2025-09-19T04-58-58-559Z.log
2025-09-19T10:29:34: 📝 Enhanced Logger initialized
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:34: 📁 Loaded statistics from file
2025-09-19T10:29:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:34: 🧹 Removed stale process lock
2025-09-19T10:29:34: 🔒 Process lock acquired (PID: 5576)
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5576
}
2025-09-19T10:29:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257974078, processId: 5576 },
  timestamp: 1758257974187
}
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257974078, willExpireAt: 1758258214078 },
  timestamp: 1758257974187
}
2025-09-19T10:29:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:34: 📋 Message rules loaded: 8 types
2025-09-19T10:29:34: ℹ️ [10:29:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:37: [INFO] WhatsApp client initialized
2025-09-19T10:29:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:39: 📝 Loaded 12 template types
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257979027,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7352,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:39: ⏰ 4-minute startup delay active
2025-09-19T10:29:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:39: [INFO] Using PQueue for job processing
2025-09-19T10:29:39: [INFO] Memory management setup completed
2025-09-19T10:29:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:39: [INFO] Checking process locks...
2025-09-19T10:29:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:39: [INFO] Process locks acquired successfully
2025-09-19T10:29:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:39: [INFO] Logs directory created
2025-09-19T10:29:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:39: [10:29:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:39: [10:29:39 am] ✅ Google Sheets API initialized
2025-09-19T10:29:39: [INFO] Google Sheets helper initialized
2025-09-19T10:29:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:39: 🗑️ Deleted old log file: bot-2025-09-19T04-59-01-438Z.log
2025-09-19T10:29:39: 📝 Enhanced Logger initialized
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:39: 📁 Loaded statistics from file
2025-09-19T10:29:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:39: 🧹 Removed stale process lock
2025-09-19T10:29:39: 🔒 Process lock acquired (PID: 7352)
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7352
}
2025-09-19T10:29:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257979027, processId: 7352 },
  timestamp: 1758257979130
}
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257979027, willExpireAt: 1758258219027 },
  timestamp: 1758257979131
}
2025-09-19T10:29:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:39: 📋 Message rules loaded: 8 types
2025-09-19T10:29:39: ℹ️ [10:29:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 108,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:42: [INFO] WhatsApp client initialized
2025-09-19T10:29:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:44: 📝 Loaded 12 template types
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257984530,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1912,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:44: ⏰ 4-minute startup delay active
2025-09-19T10:29:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:44: [INFO] Using PQueue for job processing
2025-09-19T10:29:44: [INFO] Memory management setup completed
2025-09-19T10:29:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:44: [INFO] Checking process locks...
2025-09-19T10:29:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:44: [INFO] Process locks acquired successfully
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:44: [INFO] Logs directory created
2025-09-19T10:29:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:44: [10:29:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:44: [10:29:44 am] ✅ Google Sheets API initialized
2025-09-19T10:29:44: [INFO] Google Sheets helper initialized
2025-09-19T10:29:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:44: 🗑️ Deleted old log file: bot-2025-09-19T04-59-04-692Z.log
2025-09-19T10:29:44: 📝 Enhanced Logger initialized
2025-09-19T10:29:44: 📁 Loaded statistics from file
2025-09-19T10:29:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:44: 🧹 Removed stale process lock
2025-09-19T10:29:44: 🔒 Process lock acquired (PID: 1912)
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1912
}
2025-09-19T10:29:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257984530, processId: 1912 },
  timestamp: 1758257984637
}
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257984530, willExpireAt: 1758258224530 },
  timestamp: 1758257984637
}
2025-09-19T10:29:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:44: 📋 Message rules loaded: 8 types
2025-09-19T10:29:44: ℹ️ [10:29:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 109,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:46: [INFO] WhatsApp client initialized
2025-09-19T10:29:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:47: 📝 Loaded 12 template types
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257987823,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15784,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:47: ⏰ 4-minute startup delay active
2025-09-19T10:29:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:47: [INFO] Using PQueue for job processing
2025-09-19T10:29:47: [INFO] Memory management setup completed
2025-09-19T10:29:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:47: [INFO] Checking process locks...
2025-09-19T10:29:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:47: [INFO] Process locks acquired successfully
2025-09-19T10:29:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:47: [INFO] Logs directory created
2025-09-19T10:29:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:47: [10:29:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:47: [10:29:47 am] ✅ Google Sheets API initialized
2025-09-19T10:29:47: [INFO] Google Sheets helper initialized
2025-09-19T10:29:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:47: 🗑️ Deleted old log file: bot-2025-09-19T04-59-07-729Z.log
2025-09-19T10:29:47: 📝 Enhanced Logger initialized
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:47: 📁 Loaded statistics from file
2025-09-19T10:29:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:47: 🧹 Removed stale process lock
2025-09-19T10:29:47: 🔒 Process lock acquired (PID: 15784)
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15784
}
2025-09-19T10:29:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257987823, processId: 15784 },
  timestamp: 1758257987955
}
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257987823, willExpireAt: 1758258227823 },
  timestamp: 1758257987956
}
2025-09-19T10:29:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:47: 📋 Message rules loaded: 8 types
2025-09-19T10:29:47: ℹ️ [10:29:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:48: [INFO] WhatsApp client initialized
2025-09-19T10:29:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:50: 📝 Loaded 12 template types
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257990578,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10216,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:50: ⏰ 4-minute startup delay active
2025-09-19T10:29:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:50: [INFO] Using PQueue for job processing
2025-09-19T10:29:50: [INFO] Memory management setup completed
2025-09-19T10:29:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:50: [INFO] Checking process locks...
2025-09-19T10:29:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:50: [INFO] Process locks acquired successfully
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:50: [INFO] Logs directory created
2025-09-19T10:29:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:50: [10:29:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:50: [10:29:50 am] ✅ Google Sheets API initialized
2025-09-19T10:29:50: [INFO] Google Sheets helper initialized
2025-09-19T10:29:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:50: 🗑️ Deleted old log file: bot-2025-09-19T04-59-11-494Z.log
2025-09-19T10:29:50: 📝 Enhanced Logger initialized
2025-09-19T10:29:50: 📁 Loaded statistics from file
2025-09-19T10:29:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:50: 🧹 Removed stale process lock
2025-09-19T10:29:50: 🔒 Process lock acquired (PID: 10216)
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10216
}
2025-09-19T10:29:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257990578, processId: 10216 },
  timestamp: 1758257990689
}
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257990578, willExpireAt: 1758258230578 },
  timestamp: 1758257990690
}
2025-09-19T10:29:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:50: 📋 Message rules loaded: 8 types
2025-09-19T10:29:50: ℹ️ [10:29:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 114,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:51: [INFO] WhatsApp client initialized
2025-09-19T10:29:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:53: 📝 Loaded 12 template types
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257993459,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17748,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:53: ⏰ 4-minute startup delay active
2025-09-19T10:29:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:53: [INFO] Using PQueue for job processing
2025-09-19T10:29:53: [INFO] Memory management setup completed
2025-09-19T10:29:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:53: [INFO] Checking process locks...
2025-09-19T10:29:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:53: [INFO] Process locks acquired successfully
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:53: [INFO] Logs directory created
2025-09-19T10:29:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:53: [10:29:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:53: [10:29:53 am] ✅ Google Sheets API initialized
2025-09-19T10:29:53: [INFO] Google Sheets helper initialized
2025-09-19T10:29:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:53: 🗑️ Deleted old log file: bot-2025-09-19T04-59-15-155Z.log
2025-09-19T10:29:53: 📝 Enhanced Logger initialized
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:53: 📁 Loaded statistics from file
2025-09-19T10:29:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:53: 🧹 Removed stale process lock
2025-09-19T10:29:53: 🔒 Process lock acquired (PID: 17748)
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17748
}
2025-09-19T10:29:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257993459, willExpireAt: 1758258233459 },
  timestamp: 1758257993585
}
2025-09-19T10:29:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:53: 📋 Message rules loaded: 8 types
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257993459, processId: 17748 },
  timestamp: 1758257993584
}
2025-09-19T10:29:53: ℹ️ [10:29:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:54: [INFO] WhatsApp client initialized
2025-09-19T10:29:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:56: 📝 Loaded 12 template types
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257996570,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9172,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:56: ⏰ 4-minute startup delay active
2025-09-19T10:29:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:56: [INFO] Using PQueue for job processing
2025-09-19T10:29:56: [INFO] Memory management setup completed
2025-09-19T10:29:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:56: [INFO] Checking process locks...
2025-09-19T10:29:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:56: [INFO] Process locks acquired successfully
2025-09-19T10:29:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:56: [INFO] Logs directory created
2025-09-19T10:29:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:56: [10:29:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:56: [10:29:56 am] ✅ Google Sheets API initialized
2025-09-19T10:29:56: [INFO] Google Sheets helper initialized
2025-09-19T10:29:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:56: 🗑️ Deleted old log file: bot-2025-09-19T04-59-18-361Z.log
2025-09-19T10:29:56: 📝 Enhanced Logger initialized
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:56: 📁 Loaded statistics from file
2025-09-19T10:29:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:56: 🧹 Removed stale process lock
2025-09-19T10:29:56: 🔒 Process lock acquired (PID: 9172)
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9172
}
2025-09-19T10:29:56: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:56: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257996570, processId: 9172 },
  timestamp: 1758257996689
}
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257996570, willExpireAt: 1758258236570 },
  timestamp: 1758257996689
}
2025-09-19T10:29:56: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:56: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:56: 📋 Message rules loaded: 8 types
2025-09-19T10:29:56: ℹ️ [10:29:56 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:29:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:29:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:29:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:29:57: [INFO] WhatsApp client initialized
2025-09-19T10:29:59: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:29:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:29:59: 📝 Loaded 12 template types
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758257999550,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17344,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:29:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:29:59: ⏰ 4-minute startup delay active
2025-09-19T10:29:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:29:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:29:59: [INFO] Using PQueue for job processing
2025-09-19T10:29:59: [INFO] Memory management setup completed
2025-09-19T10:29:59: [INFO] Starting WhatsApp Bot...
2025-09-19T10:29:59: [INFO] Checking process locks...
2025-09-19T10:29:59: 📁 Loaded 0 sent messages from file
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:29:59: [INFO] Process locks acquired successfully
2025-09-19T10:29:59: 📁 Loaded 0 customer histories from file
2025-09-19T10:29:59: [INFO] Logs directory created
2025-09-19T10:29:59: [INFO] Initializing Google Sheets helper...
2025-09-19T10:29:59: [10:29:59 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:29:59: [10:29:59 am] ✅ Google Sheets API initialized
2025-09-19T10:29:59: [INFO] Google Sheets helper initialized
2025-09-19T10:29:59: 📁 Loaded 0 message hashes from file
2025-09-19T10:29:59: 🗑️ Deleted old log file: bot-2025-09-19T04-59-21-358Z.log
2025-09-19T10:29:59: 📝 Enhanced Logger initialized
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:29:59: 📁 Loaded statistics from file
2025-09-19T10:29:59: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:29:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:29:59: 🧹 Removed stale process lock
2025-09-19T10:29:59: 🔒 Process lock acquired (PID: 17344)
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17344
}
2025-09-19T10:29:59: ⏰ Starting 240 second startup grace period...
2025-09-19T10:29:59: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257999550, processId: 17344 },
  timestamp: 1758257999700
}
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758257999550, willExpireAt: 1758258239550 },
  timestamp: 1758257999701
}
2025-09-19T10:29:59: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:29:59: ⏰ Startup grace period: 240 seconds
2025-09-19T10:29:59: 📋 Message rules loaded: 8 types
2025-09-19T10:29:59: ℹ️ [10:29:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 154,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:00: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:00: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:00: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:00: [INFO] WhatsApp client initialized
2025-09-19T10:30:02: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:02: 📝 Loaded 12 template types
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258002681,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16496,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:02: ⏰ 4-minute startup delay active
2025-09-19T10:30:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:02: [INFO] Using PQueue for job processing
2025-09-19T10:30:02: [INFO] Memory management setup completed
2025-09-19T10:30:02: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:02: [INFO] Checking process locks...
2025-09-19T10:30:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:02: [INFO] Process locks acquired successfully
2025-09-19T10:30:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:02: [INFO] Logs directory created
2025-09-19T10:30:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:02: [10:30:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:02: [10:30:02 am] ✅ Google Sheets API initialized
2025-09-19T10:30:02: [INFO] Google Sheets helper initialized
2025-09-19T10:30:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:02: 🗑️ Deleted old log file: bot-2025-09-19T04-59-24-477Z.log
2025-09-19T10:30:02: 📝 Enhanced Logger initialized
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:02: 📁 Loaded statistics from file
2025-09-19T10:30:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:02: 🧹 Removed stale process lock
2025-09-19T10:30:02: 🔒 Process lock acquired (PID: 16496)
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16496
}
2025-09-19T10:30:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258002681, processId: 16496 },
  timestamp: 1758258002805
}
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258002681, willExpireAt: 1758258242681 },
  timestamp: 1758258002805
}
2025-09-19T10:30:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:02: 📋 Message rules loaded: 8 types
2025-09-19T10:30:02: ℹ️ [10:30:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:04: [INFO] WhatsApp client initialized
2025-09-19T10:30:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:06: 📝 Loaded 12 template types
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258006017,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8200,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:06: ⏰ 4-minute startup delay active
2025-09-19T10:30:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:06: [INFO] Using PQueue for job processing
2025-09-19T10:30:06: [INFO] Memory management setup completed
2025-09-19T10:30:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:06: [INFO] Checking process locks...
2025-09-19T10:30:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:06: [INFO] Process locks acquired successfully
2025-09-19T10:30:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:06: [INFO] Logs directory created
2025-09-19T10:30:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:06: [10:30:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:06: [10:30:06 am] ✅ Google Sheets API initialized
2025-09-19T10:30:06: [INFO] Google Sheets helper initialized
2025-09-19T10:30:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:06: 🗑️ Deleted old log file: bot-2025-09-19T04-59-27-309Z.log
2025-09-19T10:30:06: 📝 Enhanced Logger initialized
2025-09-19T10:30:06: 📁 Loaded statistics from file
2025-09-19T10:30:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:06: 🧹 Removed stale process lock
2025-09-19T10:30:06: 🔒 Process lock acquired (PID: 8200)
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8200
}
2025-09-19T10:30:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258006017, willExpireAt: 1758258246017 },
  timestamp: 1758258006148
}
2025-09-19T10:30:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:06: 📋 Message rules loaded: 8 types
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258006017, processId: 8200 },
  timestamp: 1758258006148
}
2025-09-19T10:30:06: ℹ️ [10:30:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:06: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:07: [INFO] WhatsApp client initialized
2025-09-19T10:30:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:08: 📝 Loaded 12 template types
2025-09-19T10:30:08: ℹ️ [10:30:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258008902,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14544,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:08: ⏰ 4-minute startup delay active
2025-09-19T10:30:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:08: [INFO] Using PQueue for job processing
2025-09-19T10:30:08: [INFO] Memory management setup completed
2025-09-19T10:30:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:08: [INFO] Checking process locks...
2025-09-19T10:30:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:08: ℹ️ [10:30:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:08: [INFO] Process locks acquired successfully
2025-09-19T10:30:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:08: [INFO] Logs directory created
2025-09-19T10:30:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:08: [10:30:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:08: [10:30:08 am] ✅ Google Sheets API initialized
2025-09-19T10:30:08: [INFO] Google Sheets helper initialized
2025-09-19T10:30:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:09: ℹ️ [10:30:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:09: 🗑️ Deleted old log file: bot-2025-09-19T04-59-30-478Z.log
2025-09-19T10:30:09: 📝 Enhanced Logger initialized
2025-09-19T10:30:09: 📁 Loaded statistics from file
2025-09-19T10:30:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:09: 🧹 Removed stale process lock
2025-09-19T10:30:09: 🔒 Process lock acquired (PID: 14544)
2025-09-19T10:30:09: ℹ️ [10:30:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14544
}
2025-09-19T10:30:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:09: ℹ️ [10:30:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258008902, processId: 14544 },
  timestamp: 1758258009026
}
2025-09-19T10:30:09: ℹ️ [10:30:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258008902, willExpireAt: 1758258248902 },
  timestamp: 1758258009026
}
2025-09-19T10:30:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:09: 📋 Message rules loaded: 8 types
2025-09-19T10:30:09: ℹ️ [10:30:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:09: [INFO] WhatsApp client initialized
2025-09-19T10:30:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:11: 📝 Loaded 12 template types
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258011848,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1972,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:11: ⏰ 4-minute startup delay active
2025-09-19T10:30:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:11: [INFO] Using PQueue for job processing
2025-09-19T10:30:11: [INFO] Memory management setup completed
2025-09-19T10:30:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:11: [INFO] Checking process locks...
2025-09-19T10:30:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:11: [INFO] Process locks acquired successfully
2025-09-19T10:30:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:11: [INFO] Logs directory created
2025-09-19T10:30:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:11: [10:30:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:11: [10:30:11 am] ✅ Google Sheets API initialized
2025-09-19T10:30:11: [INFO] Google Sheets helper initialized
2025-09-19T10:30:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:11: 🗑️ Deleted old log file: bot-2025-09-19T04-59-34-106Z.log
2025-09-19T10:30:11: 📝 Enhanced Logger initialized
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:11: 📁 Loaded statistics from file
2025-09-19T10:30:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:11: 🧹 Removed stale process lock
2025-09-19T10:30:11: 🔒 Process lock acquired (PID: 1972)
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1972
}
2025-09-19T10:30:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258011848, processId: 1972 },
  timestamp: 1758258011969
}
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258011848, willExpireAt: 1758258251848 },
  timestamp: 1758258011969
}
2025-09-19T10:30:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:11: 📋 Message rules loaded: 8 types
2025-09-19T10:30:11: ℹ️ [10:30:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:12: [INFO] WhatsApp client initialized
2025-09-19T10:30:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:14: 📝 Loaded 12 template types
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258014781,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8568,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:14: ⏰ 4-minute startup delay active
2025-09-19T10:30:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:14: [INFO] Using PQueue for job processing
2025-09-19T10:30:14: [INFO] Memory management setup completed
2025-09-19T10:30:14: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:14: [INFO] Checking process locks...
2025-09-19T10:30:14: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:14: [INFO] Process locks acquired successfully
2025-09-19T10:30:14: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:14: [INFO] Logs directory created
2025-09-19T10:30:14: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:14: [10:30:14 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:14: [10:30:14 am] ✅ Google Sheets API initialized
2025-09-19T10:30:14: [INFO] Google Sheets helper initialized
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:14: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:14: 🗑️ Deleted old log file: bot-2025-09-19T04-59-39-054Z.log
2025-09-19T10:30:14: 📝 Enhanced Logger initialized
2025-09-19T10:30:14: 📁 Loaded statistics from file
2025-09-19T10:30:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:14: 🧹 Removed stale process lock
2025-09-19T10:30:14: 🔒 Process lock acquired (PID: 8568)
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8568
}
2025-09-19T10:30:14: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258014781, processId: 8568 },
  timestamp: 1758258014922
}
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258014781, willExpireAt: 1758258254781 },
  timestamp: 1758258014922
}
2025-09-19T10:30:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:14: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:14: 📋 Message rules loaded: 8 types
2025-09-19T10:30:14: ℹ️ [10:30:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 144,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:16: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:16: [INFO] WhatsApp client initialized
2025-09-19T10:30:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:18: 📝 Loaded 12 template types
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258018325,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1320,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:18: ⏰ 4-minute startup delay active
2025-09-19T10:30:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:18: [INFO] Using PQueue for job processing
2025-09-19T10:30:18: [INFO] Memory management setup completed
2025-09-19T10:30:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:18: [INFO] Checking process locks...
2025-09-19T10:30:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:18: [INFO] Process locks acquired successfully
2025-09-19T10:30:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:18: [INFO] Logs directory created
2025-09-19T10:30:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:18: [10:30:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:18: [10:30:18 am] ✅ Google Sheets API initialized
2025-09-19T10:30:18: [INFO] Google Sheets helper initialized
2025-09-19T10:30:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:18: 🗑️ Deleted old log file: bot-2025-09-19T04-59-44-563Z.log
2025-09-19T10:30:18: 📝 Enhanced Logger initialized
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:18: 📁 Loaded statistics from file
2025-09-19T10:30:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:18: 🧹 Removed stale process lock
2025-09-19T10:30:18: 🔒 Process lock acquired (PID: 1320)
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1320
}
2025-09-19T10:30:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258018325, processId: 1320 },
  timestamp: 1758258018438
}
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258018325, willExpireAt: 1758258258325 },
  timestamp: 1758258018438
}
2025-09-19T10:30:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:18: 📋 Message rules loaded: 8 types
2025-09-19T10:30:18: ℹ️ [10:30:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 116,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:19: [INFO] WhatsApp client initialized
2025-09-19T10:30:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:21: 📝 Loaded 12 template types
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258021372,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3420,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:21: ⏰ 4-minute startup delay active
2025-09-19T10:30:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:21: [INFO] Using PQueue for job processing
2025-09-19T10:30:21: [INFO] Memory management setup completed
2025-09-19T10:30:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:21: [INFO] Checking process locks...
2025-09-19T10:30:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:21: [INFO] Process locks acquired successfully
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:21: [INFO] Logs directory created
2025-09-19T10:30:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:21: [10:30:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:21: [10:30:21 am] ✅ Google Sheets API initialized
2025-09-19T10:30:21: [INFO] Google Sheets helper initialized
2025-09-19T10:30:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:21: 🗑️ Deleted old log file: bot-2025-09-19T04-59-47-853Z.log
2025-09-19T10:30:21: 📝 Enhanced Logger initialized
2025-09-19T10:30:21: 📁 Loaded statistics from file
2025-09-19T10:30:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:21: 🧹 Removed stale process lock
2025-09-19T10:30:21: 🔒 Process lock acquired (PID: 3420)
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3420
}
2025-09-19T10:30:21: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258021372, processId: 3420 },
  timestamp: 1758258021518
}
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258021372, willExpireAt: 1758258261372 },
  timestamp: 1758258021518
}
2025-09-19T10:30:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:21: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:21: 📋 Message rules loaded: 8 types
2025-09-19T10:30:21: ℹ️ [10:30:21 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 149,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:22: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:22: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:22: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:22: [INFO] WhatsApp client initialized
2025-09-19T10:30:24: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:24: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:24: 📝 Loaded 12 template types
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258024162,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18132,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:24: ⏰ 4-minute startup delay active
2025-09-19T10:30:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:24: [INFO] Using PQueue for job processing
2025-09-19T10:30:24: [INFO] Memory management setup completed
2025-09-19T10:30:24: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:24: [INFO] Checking process locks...
2025-09-19T10:30:24: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:24: [INFO] Process locks acquired successfully
2025-09-19T10:30:24: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:24: [INFO] Logs directory created
2025-09-19T10:30:24: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:24: [10:30:24 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:24: [10:30:24 am] ✅ Google Sheets API initialized
2025-09-19T10:30:24: [INFO] Google Sheets helper initialized
2025-09-19T10:30:24: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:24: 🗑️ Deleted old log file: bot-2025-09-19T04-59-50-609Z.log
2025-09-19T10:30:24: 📝 Enhanced Logger initialized
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:24: 📁 Loaded statistics from file
2025-09-19T10:30:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:24: 🧹 Removed stale process lock
2025-09-19T10:30:24: 🔒 Process lock acquired (PID: 18132)
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18132
}
2025-09-19T10:30:24: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258024162, processId: 18132 },
  timestamp: 1758258024285
}
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258024162, willExpireAt: 1758258264162 },
  timestamp: 1758258024285
}
2025-09-19T10:30:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:24: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:24: 📋 Message rules loaded: 8 types
2025-09-19T10:30:24: ℹ️ [10:30:24 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:25: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:25: [INFO] WhatsApp client initialized
2025-09-19T10:30:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:27: 📝 Loaded 12 template types
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258027108,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2888,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:27: ⏰ 4-minute startup delay active
2025-09-19T10:30:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:27: [INFO] Using PQueue for job processing
2025-09-19T10:30:27: [INFO] Memory management setup completed
2025-09-19T10:30:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:27: [INFO] Checking process locks...
2025-09-19T10:30:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:27: [INFO] Process locks acquired successfully
2025-09-19T10:30:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:27: [INFO] Logs directory created
2025-09-19T10:30:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:27: [10:30:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:27: [10:30:27 am] ✅ Google Sheets API initialized
2025-09-19T10:30:27: [INFO] Google Sheets helper initialized
2025-09-19T10:30:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:27: 🗑️ Deleted old log file: bot-2025-09-19T04-59-53-497Z.log
2025-09-19T10:30:27: 📝 Enhanced Logger initialized
2025-09-19T10:30:27: 📁 Loaded statistics from file
2025-09-19T10:30:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:27: 🧹 Removed stale process lock
2025-09-19T10:30:27: 🔒 Process lock acquired (PID: 2888)
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2888
}
2025-09-19T10:30:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258027108, processId: 2888 },
  timestamp: 1758258027226
}
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258027108, willExpireAt: 1758258267108 },
  timestamp: 1758258027226
}
2025-09-19T10:30:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:27: 📋 Message rules loaded: 8 types
2025-09-19T10:30:27: ℹ️ [10:30:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:27: [INFO] WhatsApp client initialized
2025-09-19T10:30:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:29: 📝 Loaded 12 template types
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258029864,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5796,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:29: ⏰ 4-minute startup delay active
2025-09-19T10:30:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:29: [INFO] Using PQueue for job processing
2025-09-19T10:30:29: [INFO] Memory management setup completed
2025-09-19T10:30:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:29: [INFO] Checking process locks...
2025-09-19T10:30:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:29: [INFO] Process locks acquired successfully
2025-09-19T10:30:29: [INFO] Logs directory created
2025-09-19T10:30:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:29: [10:30:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:29: [10:30:29 am] ✅ Google Sheets API initialized
2025-09-19T10:30:29: [INFO] Google Sheets helper initialized
2025-09-19T10:30:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:29: 🗑️ Deleted old log file: bot-2025-09-19T04-59-56-602Z.log
2025-09-19T10:30:29: 📝 Enhanced Logger initialized
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:29: 📁 Loaded statistics from file
2025-09-19T10:30:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:29: 🧹 Removed stale process lock
2025-09-19T10:30:29: 🔒 Process lock acquired (PID: 5796)
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5796
}
2025-09-19T10:30:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258029864, processId: 5796 },
  timestamp: 1758258029986
}
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258029864, willExpireAt: 1758258269864 },
  timestamp: 1758258029986
}
2025-09-19T10:30:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:29: 📋 Message rules loaded: 8 types
2025-09-19T10:30:29: ℹ️ [10:30:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:30: [INFO] WhatsApp client initialized
2025-09-19T10:30:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:32: 📝 Loaded 12 template types
2025-09-19T10:30:32: ℹ️ [10:30:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258032866,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7716,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:32: ⏰ 4-minute startup delay active
2025-09-19T10:30:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:32: [INFO] Using PQueue for job processing
2025-09-19T10:30:32: [INFO] Memory management setup completed
2025-09-19T10:30:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:32: [INFO] Checking process locks...
2025-09-19T10:30:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:32: ℹ️ [10:30:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:32: [INFO] Process locks acquired successfully
2025-09-19T10:30:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:32: [INFO] Logs directory created
2025-09-19T10:30:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:32: [10:30:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:32: [10:30:32 am] ✅ Google Sheets API initialized
2025-09-19T10:30:32: [INFO] Google Sheets helper initialized
2025-09-19T10:30:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:32: ℹ️ [10:30:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:32: 🗑️ Deleted old log file: bot-2025-09-19T04-59-59-586Z.log
2025-09-19T10:30:32: 📝 Enhanced Logger initialized
2025-09-19T10:30:32: 📁 Loaded statistics from file
2025-09-19T10:30:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:33: 🧹 Removed stale process lock
2025-09-19T10:30:33: 🔒 Process lock acquired (PID: 7716)
2025-09-19T10:30:33: ℹ️ [10:30:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7716
}
2025-09-19T10:30:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:33: ℹ️ [10:30:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258032866, processId: 7716 },
  timestamp: 1758258033007
}
2025-09-19T10:30:33: ℹ️ [10:30:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258032866, willExpireAt: 1758258272866 },
  timestamp: 1758258033007
}
2025-09-19T10:30:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:33: 📋 Message rules loaded: 8 types
2025-09-19T10:30:33: ℹ️ [10:30:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 144,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:34: [INFO] WhatsApp client initialized
2025-09-19T10:30:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:35: 📝 Loaded 12 template types
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258035850,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14212,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:35: ⏰ 4-minute startup delay active
2025-09-19T10:30:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:35: [INFO] Using PQueue for job processing
2025-09-19T10:30:35: [INFO] Memory management setup completed
2025-09-19T10:30:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:35: [INFO] Checking process locks...
2025-09-19T10:30:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:35: [INFO] Process locks acquired successfully
2025-09-19T10:30:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:35: [INFO] Logs directory created
2025-09-19T10:30:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:35: [10:30:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:35: [10:30:35 am] ✅ Google Sheets API initialized
2025-09-19T10:30:35: [INFO] Google Sheets helper initialized
2025-09-19T10:30:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:35: 🗑️ Deleted old log file: bot-2025-09-19T05-00-02-716Z.log
2025-09-19T10:30:35: 📝 Enhanced Logger initialized
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:35: 📁 Loaded statistics from file
2025-09-19T10:30:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:35: 🧹 Removed stale process lock
2025-09-19T10:30:35: 🔒 Process lock acquired (PID: 14212)
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14212
}
2025-09-19T10:30:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258035850, processId: 14212 },
  timestamp: 1758258035979
}
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258035850, willExpireAt: 1758258275850 },
  timestamp: 1758258035979
}
2025-09-19T10:30:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:35: 📋 Message rules loaded: 8 types
2025-09-19T10:30:35: ℹ️ [10:30:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:37: [INFO] WhatsApp client initialized
2025-09-19T10:30:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:39: 📝 Loaded 12 template types
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258039112,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5288,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:39: ⏰ 4-minute startup delay active
2025-09-19T10:30:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:39: [INFO] Using PQueue for job processing
2025-09-19T10:30:39: [INFO] Memory management setup completed
2025-09-19T10:30:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:39: [INFO] Checking process locks...
2025-09-19T10:30:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:39: [INFO] Process locks acquired successfully
2025-09-19T10:30:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:39: [INFO] Logs directory created
2025-09-19T10:30:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:39: [10:30:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:39: [10:30:39 am] ✅ Google Sheets API initialized
2025-09-19T10:30:39: [INFO] Google Sheets helper initialized
2025-09-19T10:30:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:39: 🗑️ Deleted old log file: bot-2025-09-19T05-00-06-055Z.log
2025-09-19T10:30:39: 📝 Enhanced Logger initialized
2025-09-19T10:30:39: 📁 Loaded statistics from file
2025-09-19T10:30:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:39: 🧹 Removed stale process lock
2025-09-19T10:30:39: 🔒 Process lock acquired (PID: 5288)
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5288
}
2025-09-19T10:30:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258039112, processId: 5288 },
  timestamp: 1758258039252
}
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258039112, willExpireAt: 1758258279112 },
  timestamp: 1758258039252
}
2025-09-19T10:30:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:39: 📋 Message rules loaded: 8 types
2025-09-19T10:30:39: ℹ️ [10:30:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 144,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:40: [INFO] WhatsApp client initialized
2025-09-19T10:30:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:42: 📝 Loaded 12 template types
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258042139,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 956,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:42: ⏰ 4-minute startup delay active
2025-09-19T10:30:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:42: [INFO] Using PQueue for job processing
2025-09-19T10:30:42: [INFO] Memory management setup completed
2025-09-19T10:30:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:42: [INFO] Checking process locks...
2025-09-19T10:30:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:42: [INFO] Process locks acquired successfully
2025-09-19T10:30:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:42: [INFO] Logs directory created
2025-09-19T10:30:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:42: [10:30:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:42: [10:30:42 am] ✅ Google Sheets API initialized
2025-09-19T10:30:42: [INFO] Google Sheets helper initialized
2025-09-19T10:30:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:42: 🗑️ Deleted old log file: bot-2025-09-19T05-00-08-936Z.log
2025-09-19T10:30:42: 📝 Enhanced Logger initialized
2025-09-19T10:30:42: 📁 Loaded statistics from file
2025-09-19T10:30:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:42: 🧹 Removed stale process lock
2025-09-19T10:30:42: 🔒 Process lock acquired (PID: 956)
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 956
}
2025-09-19T10:30:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258042139, processId: 956 },
  timestamp: 1758258042273
}
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258042139, willExpireAt: 1758258282139 },
  timestamp: 1758258042273
}
2025-09-19T10:30:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:42: 📋 Message rules loaded: 8 types
2025-09-19T10:30:42: ℹ️ [10:30:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:43: [INFO] WhatsApp client initialized
2025-09-19T10:30:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:44: 📝 Loaded 12 template types
2025-09-19T10:30:45: ℹ️ [10:30:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258044988,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9676,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:45: ⏰ 4-minute startup delay active
2025-09-19T10:30:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:45: [INFO] Using PQueue for job processing
2025-09-19T10:30:45: [INFO] Memory management setup completed
2025-09-19T10:30:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:45: [INFO] Checking process locks...
2025-09-19T10:30:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:45: [INFO] Process locks acquired successfully
2025-09-19T10:30:45: ℹ️ [10:30:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:45: [INFO] Logs directory created
2025-09-19T10:30:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:45: [10:30:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:45: [10:30:45 am] ✅ Google Sheets API initialized
2025-09-19T10:30:45: [INFO] Google Sheets helper initialized
2025-09-19T10:30:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:45: ℹ️ [10:30:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:45: 🗑️ Deleted old log file: bot-2025-09-19T05-00-11-882Z.log
2025-09-19T10:30:45: 📝 Enhanced Logger initialized
2025-09-19T10:30:45: 📁 Loaded statistics from file
2025-09-19T10:30:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:45: 🧹 Removed stale process lock
2025-09-19T10:30:45: 🔒 Process lock acquired (PID: 9676)
2025-09-19T10:30:45: ℹ️ [10:30:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9676
}
2025-09-19T10:30:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:45: ℹ️ [10:30:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258044988, processId: 9676 },
  timestamp: 1758258045114
}
2025-09-19T10:30:45: ℹ️ [10:30:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258044988, willExpireAt: 1758258284988 },
  timestamp: 1758258045115
}
2025-09-19T10:30:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:45: 📋 Message rules loaded: 8 types
2025-09-19T10:30:45: ℹ️ [10:30:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:45: [INFO] WhatsApp client initialized
2025-09-19T10:30:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:30:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:30:50: 📝 Loaded 12 template types
2025-09-19T10:30:50: ℹ️ [10:30:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258050761,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13724,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:30:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:30:50: ⏰ 4-minute startup delay active
2025-09-19T10:30:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:30:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:30:50: [INFO] Using PQueue for job processing
2025-09-19T10:30:50: [INFO] Memory management setup completed
2025-09-19T10:30:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:30:50: [INFO] Checking process locks...
2025-09-19T10:30:51: ℹ️ [10:30:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:30:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:30:51: [INFO] Process locks acquired successfully
2025-09-19T10:30:51: [INFO] Logs directory created
2025-09-19T10:30:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:30:51: [10:30:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:30:51: [10:30:51 am] ✅ Google Sheets API initialized
2025-09-19T10:30:51: [INFO] Google Sheets helper initialized
2025-09-19T10:30:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:30:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:30:51: ℹ️ [10:30:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:30:51: 🗑️ Deleted old log file: bot-2025-09-19T05-00-14-821Z.log
2025-09-19T10:30:51: 📝 Enhanced Logger initialized
2025-09-19T10:30:51: 📁 Loaded statistics from file
2025-09-19T10:30:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:30:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:30:51: 🧹 Removed stale process lock
2025-09-19T10:30:51: 🔒 Process lock acquired (PID: 13724)
2025-09-19T10:30:51: ℹ️ [10:30:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13724
}
2025-09-19T10:30:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:30:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:30:51: ℹ️ [10:30:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258050761, processId: 13724 },
  timestamp: 1758258051539
}
2025-09-19T10:30:51: ℹ️ [10:30:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258050761, willExpireAt: 1758258290761 },
  timestamp: 1758258051539
}
2025-09-19T10:30:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:30:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:30:51: 📋 Message rules loaded: 8 types
2025-09-19T10:30:51: ℹ️ [10:30:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 783,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:30:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:30:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:30:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:30:52: [INFO] WhatsApp client initialized
2025-09-19T10:31:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:00: 📝 Loaded 12 template types
2025-09-19T10:31:00: ℹ️ [10:31:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258060707,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10028,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:00: ⏰ 4-minute startup delay active
2025-09-19T10:31:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:00: [INFO] Using PQueue for job processing
2025-09-19T10:31:00: [INFO] Memory management setup completed
2025-09-19T10:31:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:00: [INFO] Checking process locks...
2025-09-19T10:31:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:00: ℹ️ [10:31:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:00: [INFO] Process locks acquired successfully
2025-09-19T10:31:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:00: [INFO] Logs directory created
2025-09-19T10:31:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:00: [10:31:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:00: [10:31:00 am] ✅ Google Sheets API initialized
2025-09-19T10:31:00: [INFO] Google Sheets helper initialized
2025-09-19T10:31:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:01: ℹ️ [10:31:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:01: 🗑️ Deleted old log file: bot-2025-09-19T05-00-18-353Z.log
2025-09-19T10:31:01: 📝 Enhanced Logger initialized
2025-09-19T10:31:01: 📁 Loaded statistics from file
2025-09-19T10:31:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:01: 🧹 Removed stale process lock
2025-09-19T10:31:01: 🔒 Process lock acquired (PID: 10028)
2025-09-19T10:31:01: ℹ️ [10:31:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10028
}
2025-09-19T10:31:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:01: ℹ️ [10:31:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258060707, processId: 10028 },
  timestamp: 1758258061190
}
2025-09-19T10:31:01: ℹ️ [10:31:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258060707, willExpireAt: 1758258300707 },
  timestamp: 1758258061191
}
2025-09-19T10:31:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:01: 📋 Message rules loaded: 8 types
2025-09-19T10:31:01: ℹ️ [10:31:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 498,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:02: [INFO] WhatsApp client initialized
2025-09-19T10:31:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:08: 📝 Loaded 12 template types
2025-09-19T10:31:08: ℹ️ [10:31:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258068630,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17996,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:08: ⏰ 4-minute startup delay active
2025-09-19T10:31:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:08: [INFO] Using PQueue for job processing
2025-09-19T10:31:08: [INFO] Memory management setup completed
2025-09-19T10:31:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:08: [INFO] Checking process locks...
2025-09-19T10:31:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:08: ℹ️ [10:31:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:08: [INFO] Process locks acquired successfully
2025-09-19T10:31:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:08: [INFO] Logs directory created
2025-09-19T10:31:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:08: [10:31:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:08: [10:31:08 am] ✅ Google Sheets API initialized
2025-09-19T10:31:08: [INFO] Google Sheets helper initialized
2025-09-19T10:31:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:08: 🗑️ Deleted old log file: bot-2025-09-19T05-00-21-415Z.log
2025-09-19T10:31:08: 📝 Enhanced Logger initialized
2025-09-19T10:31:09: ℹ️ [10:31:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:09: 📁 Loaded statistics from file
2025-09-19T10:31:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:09: 🧹 Removed stale process lock
2025-09-19T10:31:09: 🔒 Process lock acquired (PID: 17996)
2025-09-19T10:31:09: ℹ️ [10:31:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17996
}
2025-09-19T10:31:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:09: ℹ️ [10:31:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258068630, willExpireAt: 1758258308630 },
  timestamp: 1758258069086
}
2025-09-19T10:31:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:09: 📋 Message rules loaded: 8 types
2025-09-19T10:31:09: ℹ️ [10:31:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258068630, processId: 17996 },
  timestamp: 1758258069086
}
2025-09-19T10:31:09: ℹ️ [10:31:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 459,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:10: [INFO] WhatsApp client initialized
2025-09-19T10:31:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:12: 📝 Loaded 12 template types
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258072578,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8200,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:12: ⏰ 4-minute startup delay active
2025-09-19T10:31:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:12: [INFO] Using PQueue for job processing
2025-09-19T10:31:12: [INFO] Memory management setup completed
2025-09-19T10:31:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:12: [INFO] Checking process locks...
2025-09-19T10:31:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:12: [INFO] Process locks acquired successfully
2025-09-19T10:31:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:12: [INFO] Logs directory created
2025-09-19T10:31:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:12: [10:31:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:12: [10:31:12 am] ✅ Google Sheets API initialized
2025-09-19T10:31:12: [INFO] Google Sheets helper initialized
2025-09-19T10:31:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:12: 📁 Loaded statistics from file
2025-09-19T10:31:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:12: 🗑️ Deleted old log file: bot-2025-09-19T05-00-24-195Z.log
2025-09-19T10:31:12: 📝 Enhanced Logger initialized
2025-09-19T10:31:12: 🧹 Removed stale process lock
2025-09-19T10:31:12: 🔒 Process lock acquired (PID: 8200)
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8200
}
2025-09-19T10:31:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258072578, willExpireAt: 1758258312578 },
  timestamp: 1758258072725
}
2025-09-19T10:31:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:12: 📋 Message rules loaded: 8 types
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258072578, processId: 8200 },
  timestamp: 1758258072724
}
2025-09-19T10:31:12: ℹ️ [10:31:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 150,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:13: [INFO] WhatsApp client initialized
2025-09-19T10:31:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:15: 📝 Loaded 12 template types
2025-09-19T10:31:15: ℹ️ [10:31:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258075903,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16172,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:15: ⏰ 4-minute startup delay active
2025-09-19T10:31:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:15: [INFO] Using PQueue for job processing
2025-09-19T10:31:15: [INFO] Memory management setup completed
2025-09-19T10:31:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:15: [INFO] Checking process locks...
2025-09-19T10:31:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:15: [INFO] Process locks acquired successfully
2025-09-19T10:31:15: ℹ️ [10:31:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:15: [INFO] Logs directory created
2025-09-19T10:31:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:15: [10:31:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:15: [10:31:15 am] ✅ Google Sheets API initialized
2025-09-19T10:31:15: [INFO] Google Sheets helper initialized
2025-09-19T10:31:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:16: ℹ️ [10:31:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:16: 🗑️ Deleted old log file: bot-2025-09-19T05-00-27-141Z.log
2025-09-19T10:31:16: 📝 Enhanced Logger initialized
2025-09-19T10:31:16: 📁 Loaded statistics from file
2025-09-19T10:31:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:16: 🧹 Removed stale process lock
2025-09-19T10:31:16: 🔒 Process lock acquired (PID: 16172)
2025-09-19T10:31:16: ℹ️ [10:31:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16172
}
2025-09-19T10:31:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:16: ℹ️ [10:31:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258075903, processId: 16172 },
  timestamp: 1758258076025
}
2025-09-19T10:31:16: ℹ️ [10:31:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258075903, willExpireAt: 1758258315903 },
  timestamp: 1758258076025
}
2025-09-19T10:31:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:16: 📋 Message rules loaded: 8 types
2025-09-19T10:31:16: ℹ️ [10:31:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:17: [INFO] WhatsApp client initialized
2025-09-19T10:31:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:19: 📝 Loaded 12 template types
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258079439,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5124,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:19: ⏰ 4-minute startup delay active
2025-09-19T10:31:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:19: [INFO] Using PQueue for job processing
2025-09-19T10:31:19: [INFO] Memory management setup completed
2025-09-19T10:31:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:19: [INFO] Checking process locks...
2025-09-19T10:31:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:19: [INFO] Process locks acquired successfully
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:19: [INFO] Logs directory created
2025-09-19T10:31:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:19: [10:31:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:19: [10:31:19 am] ✅ Google Sheets API initialized
2025-09-19T10:31:19: [INFO] Google Sheets helper initialized
2025-09-19T10:31:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:19: 🗑️ Deleted old log file: bot-2025-09-19T05-00-29-901Z.log
2025-09-19T10:31:19: 📝 Enhanced Logger initialized
2025-09-19T10:31:19: 📁 Loaded statistics from file
2025-09-19T10:31:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:19: 🧹 Removed stale process lock
2025-09-19T10:31:19: 🔒 Process lock acquired (PID: 5124)
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5124
}
2025-09-19T10:31:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258079439, processId: 5124 },
  timestamp: 1758258079558
}
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258079439, willExpireAt: 1758258319439 },
  timestamp: 1758258079558
}
2025-09-19T10:31:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:19: 📋 Message rules loaded: 8 types
2025-09-19T10:31:19: ℹ️ [10:31:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:20: [INFO] WhatsApp client initialized
2025-09-19T10:31:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:22: 📝 Loaded 12 template types
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258082669,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9264,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:22: ⏰ 4-minute startup delay active
2025-09-19T10:31:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:22: [INFO] Using PQueue for job processing
2025-09-19T10:31:22: [INFO] Memory management setup completed
2025-09-19T10:31:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:22: [INFO] Checking process locks...
2025-09-19T10:31:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:22: [INFO] Process locks acquired successfully
2025-09-19T10:31:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:22: [INFO] Logs directory created
2025-09-19T10:31:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:22: [10:31:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:22: [10:31:22 am] ✅ Google Sheets API initialized
2025-09-19T10:31:22: [INFO] Google Sheets helper initialized
2025-09-19T10:31:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:22: 🗑️ Deleted old log file: bot-2025-09-19T05-00-32-901Z.log
2025-09-19T10:31:22: 📝 Enhanced Logger initialized
2025-09-19T10:31:22: 📁 Loaded statistics from file
2025-09-19T10:31:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:22: 🧹 Removed stale process lock
2025-09-19T10:31:22: 🔒 Process lock acquired (PID: 9264)
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9264
}
2025-09-19T10:31:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258082669, processId: 9264 },
  timestamp: 1758258082818
}
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258082669, willExpireAt: 1758258322669 },
  timestamp: 1758258082819
}
2025-09-19T10:31:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:22: 📋 Message rules loaded: 8 types
2025-09-19T10:31:22: ℹ️ [10:31:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 152,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:23: [INFO] WhatsApp client initialized
2025-09-19T10:31:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:25: 📝 Loaded 12 template types
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258085700,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16476,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:25: ⏰ 4-minute startup delay active
2025-09-19T10:31:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:25: [INFO] Using PQueue for job processing
2025-09-19T10:31:25: [INFO] Memory management setup completed
2025-09-19T10:31:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:25: [INFO] Checking process locks...
2025-09-19T10:31:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:25: [INFO] Process locks acquired successfully
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:25: [INFO] Logs directory created
2025-09-19T10:31:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:25: [10:31:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:25: [10:31:25 am] ✅ Google Sheets API initialized
2025-09-19T10:31:25: [INFO] Google Sheets helper initialized
2025-09-19T10:31:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:25: 🗑️ Deleted old log file: bot-2025-09-19T05-00-35-886Z.log
2025-09-19T10:31:25: 📝 Enhanced Logger initialized
2025-09-19T10:31:25: 📁 Loaded statistics from file
2025-09-19T10:31:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:25: 🧹 Removed stale process lock
2025-09-19T10:31:25: 🔒 Process lock acquired (PID: 16476)
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16476
}
2025-09-19T10:31:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258085700, processId: 16476 },
  timestamp: 1758258085836
}
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258085700, willExpireAt: 1758258325700 },
  timestamp: 1758258085836
}
2025-09-19T10:31:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:25: 📋 Message rules loaded: 8 types
2025-09-19T10:31:25: ℹ️ [10:31:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:26: [INFO] WhatsApp client initialized
2025-09-19T10:31:28: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:28: 📝 Loaded 12 template types
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258088584,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15876,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:28: ⏰ 4-minute startup delay active
2025-09-19T10:31:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:28: [INFO] Using PQueue for job processing
2025-09-19T10:31:28: [INFO] Memory management setup completed
2025-09-19T10:31:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:28: [INFO] Checking process locks...
2025-09-19T10:31:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:28: [INFO] Process locks acquired successfully
2025-09-19T10:31:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:28: [INFO] Logs directory created
2025-09-19T10:31:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:28: [10:31:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:28: [10:31:28 am] ✅ Google Sheets API initialized
2025-09-19T10:31:28: [INFO] Google Sheets helper initialized
2025-09-19T10:31:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:28: 🗑️ Deleted old log file: bot-2025-09-19T05-00-39-153Z.log
2025-09-19T10:31:28: 📝 Enhanced Logger initialized
2025-09-19T10:31:28: 📁 Loaded statistics from file
2025-09-19T10:31:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:28: 🧹 Removed stale process lock
2025-09-19T10:31:28: 🔒 Process lock acquired (PID: 15876)
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15876
}
2025-09-19T10:31:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258088584, processId: 15876 },
  timestamp: 1758258088706
}
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258088584, willExpireAt: 1758258328584 },
  timestamp: 1758258088706
}
2025-09-19T10:31:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:28: 📋 Message rules loaded: 8 types
2025-09-19T10:31:28: ℹ️ [10:31:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:29: [INFO] WhatsApp client initialized
2025-09-19T10:31:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:31: 📝 Loaded 12 template types
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258091486,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11068,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:31: ⏰ 4-minute startup delay active
2025-09-19T10:31:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:31: [INFO] Using PQueue for job processing
2025-09-19T10:31:31: [INFO] Memory management setup completed
2025-09-19T10:31:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:31: [INFO] Checking process locks...
2025-09-19T10:31:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:31: [INFO] Process locks acquired successfully
2025-09-19T10:31:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:31: [INFO] Logs directory created
2025-09-19T10:31:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:31: [10:31:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:31: [10:31:31 am] ✅ Google Sheets API initialized
2025-09-19T10:31:31: [INFO] Google Sheets helper initialized
2025-09-19T10:31:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:31: 🗑️ Deleted old log file: bot-2025-09-19T05-00-42-178Z.log
2025-09-19T10:31:31: 📝 Enhanced Logger initialized
2025-09-19T10:31:31: 📁 Loaded statistics from file
2025-09-19T10:31:31: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:31: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:31: 🧹 Removed stale process lock
2025-09-19T10:31:31: 🔒 Process lock acquired (PID: 11068)
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11068
}
2025-09-19T10:31:31: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:31: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258091486, processId: 11068 },
  timestamp: 1758258091595
}
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258091486, willExpireAt: 1758258331486 },
  timestamp: 1758258091595
}
2025-09-19T10:31:31: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:31: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:31: 📋 Message rules loaded: 8 types
2025-09-19T10:31:31: ℹ️ [10:31:31 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 113,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:32: [INFO] WhatsApp client initialized
2025-09-19T10:31:34: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:34: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:34: 📝 Loaded 12 template types
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258094520,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1368,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:34: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:34: ⏰ 4-minute startup delay active
2025-09-19T10:31:34: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:34: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:34: [INFO] Using PQueue for job processing
2025-09-19T10:31:34: [INFO] Memory management setup completed
2025-09-19T10:31:34: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:34: [INFO] Checking process locks...
2025-09-19T10:31:34: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:34: [INFO] Process locks acquired successfully
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:34: [INFO] Logs directory created
2025-09-19T10:31:34: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:34: [10:31:34 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:34: [10:31:34 am] ✅ Google Sheets API initialized
2025-09-19T10:31:34: [INFO] Google Sheets helper initialized
2025-09-19T10:31:34: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:34: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:34: 🗑️ Deleted old log file: bot-2025-09-19T05-00-45-024Z.log
2025-09-19T10:31:34: 📝 Enhanced Logger initialized
2025-09-19T10:31:34: 📁 Loaded statistics from file
2025-09-19T10:31:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:34: 🧹 Removed stale process lock
2025-09-19T10:31:34: 🔒 Process lock acquired (PID: 1368)
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1368
}
2025-09-19T10:31:34: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258094520, processId: 1368 },
  timestamp: 1758258094658
}
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258094520, willExpireAt: 1758258334520 },
  timestamp: 1758258094659
}
2025-09-19T10:31:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:34: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:34: 📋 Message rules loaded: 8 types
2025-09-19T10:31:34: ℹ️ [10:31:34 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 142,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:35: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:35: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:35: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:35: [INFO] WhatsApp client initialized
2025-09-19T10:31:37: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:37: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:37: 📝 Loaded 12 template types
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258097557,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5780,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:37: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:37: ⏰ 4-minute startup delay active
2025-09-19T10:31:37: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:37: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:37: [INFO] Using PQueue for job processing
2025-09-19T10:31:37: [INFO] Memory management setup completed
2025-09-19T10:31:37: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:37: [INFO] Checking process locks...
2025-09-19T10:31:37: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:37: [INFO] Process locks acquired successfully
2025-09-19T10:31:37: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:37: [INFO] Logs directory created
2025-09-19T10:31:37: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:37: [10:31:37 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:37: [10:31:37 am] ✅ Google Sheets API initialized
2025-09-19T10:31:37: [INFO] Google Sheets helper initialized
2025-09-19T10:31:37: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:37: 🗑️ Deleted old log file: bot-2025-09-19T05-00-50-991Z.log
2025-09-19T10:31:37: 📝 Enhanced Logger initialized
2025-09-19T10:31:37: 📁 Loaded statistics from file
2025-09-19T10:31:37: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:37: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:37: 🧹 Removed stale process lock
2025-09-19T10:31:37: 🔒 Process lock acquired (PID: 5780)
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5780
}
2025-09-19T10:31:37: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:37: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258097557, processId: 5780 },
  timestamp: 1758258097707
}
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258097557, willExpireAt: 1758258337557 },
  timestamp: 1758258097707
}
2025-09-19T10:31:37: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:37: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:37: 📋 Message rules loaded: 8 types
2025-09-19T10:31:37: ℹ️ [10:31:37 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 155,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:38: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:38: [INFO] WhatsApp client initialized
2025-09-19T10:31:40: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:40: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:40: 📝 Loaded 12 template types
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258100535,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9052,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:40: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:40: ⏰ 4-minute startup delay active
2025-09-19T10:31:40: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:40: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:40: [INFO] Using PQueue for job processing
2025-09-19T10:31:40: [INFO] Memory management setup completed
2025-09-19T10:31:40: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:40: [INFO] Checking process locks...
2025-09-19T10:31:40: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:40: [INFO] Process locks acquired successfully
2025-09-19T10:31:40: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:40: [INFO] Logs directory created
2025-09-19T10:31:40: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:40: [10:31:40 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:40: [10:31:40 am] ✅ Google Sheets API initialized
2025-09-19T10:31:40: [INFO] Google Sheets helper initialized
2025-09-19T10:31:40: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:40: 🗑️ Deleted old log file: bot-2025-09-19T05-01-00-937Z.log
2025-09-19T10:31:40: 📝 Enhanced Logger initialized
2025-09-19T10:31:40: 📁 Loaded statistics from file
2025-09-19T10:31:40: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:40: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:40: 🧹 Removed stale process lock
2025-09-19T10:31:40: 🔒 Process lock acquired (PID: 9052)
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9052
}
2025-09-19T10:31:40: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:40: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258100535, willExpireAt: 1758258340535 },
  timestamp: 1758258100662
}
2025-09-19T10:31:40: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:40: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:40: 📋 Message rules loaded: 8 types
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258100535, processId: 9052 },
  timestamp: 1758258100661
}
2025-09-19T10:31:40: ℹ️ [10:31:40 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:41: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:41: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:41: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:41: [INFO] WhatsApp client initialized
2025-09-19T10:31:43: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:43: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:43: 📝 Loaded 12 template types
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258103546,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3196,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:43: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:43: ⏰ 4-minute startup delay active
2025-09-19T10:31:43: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:43: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:43: [INFO] Using PQueue for job processing
2025-09-19T10:31:43: [INFO] Memory management setup completed
2025-09-19T10:31:43: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:43: [INFO] Checking process locks...
2025-09-19T10:31:43: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:43: [INFO] Process locks acquired successfully
2025-09-19T10:31:43: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:43: [INFO] Logs directory created
2025-09-19T10:31:43: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:43: [10:31:43 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:43: [10:31:43 am] ✅ Google Sheets API initialized
2025-09-19T10:31:43: [INFO] Google Sheets helper initialized
2025-09-19T10:31:43: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:43: 🗑️ Deleted old log file: bot-2025-09-19T05-01-08-788Z.log
2025-09-19T10:31:43: 📝 Enhanced Logger initialized
2025-09-19T10:31:43: 📁 Loaded statistics from file
2025-09-19T10:31:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:43: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:43: 🧹 Removed stale process lock
2025-09-19T10:31:43: 🔒 Process lock acquired (PID: 3196)
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3196
}
2025-09-19T10:31:43: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:43: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258103546, processId: 3196 },
  timestamp: 1758258103689
}
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258103546, willExpireAt: 1758258343546 },
  timestamp: 1758258103690
}
2025-09-19T10:31:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:43: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:43: 📋 Message rules loaded: 8 types
2025-09-19T10:31:43: ℹ️ [10:31:43 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:44: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:44: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:44: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:44: [INFO] WhatsApp client initialized
2025-09-19T10:31:46: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:46: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:46: 📝 Loaded 12 template types
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258106651,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11940,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:46: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:46: ⏰ 4-minute startup delay active
2025-09-19T10:31:46: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:46: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:46: [INFO] Using PQueue for job processing
2025-09-19T10:31:46: [INFO] Memory management setup completed
2025-09-19T10:31:46: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:46: [INFO] Checking process locks...
2025-09-19T10:31:46: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:46: [INFO] Process locks acquired successfully
2025-09-19T10:31:46: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:46: [INFO] Logs directory created
2025-09-19T10:31:46: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:46: [10:31:46 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:46: [10:31:46 am] ✅ Google Sheets API initialized
2025-09-19T10:31:46: [INFO] Google Sheets helper initialized
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:46: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:46: 🗑️ Deleted old log file: bot-2025-09-19T05-01-12-620Z.log
2025-09-19T10:31:46: 📝 Enhanced Logger initialized
2025-09-19T10:31:46: 📁 Loaded statistics from file
2025-09-19T10:31:46: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:46: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:46: 🧹 Removed stale process lock
2025-09-19T10:31:46: 🔒 Process lock acquired (PID: 11940)
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11940
}
2025-09-19T10:31:46: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:46: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258106651, processId: 11940 },
  timestamp: 1758258106769
}
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258106651, willExpireAt: 1758258346651 },
  timestamp: 1758258106769
}
2025-09-19T10:31:46: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:46: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:46: 📋 Message rules loaded: 8 types
2025-09-19T10:31:46: ℹ️ [10:31:46 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:48: [INFO] WhatsApp client initialized
2025-09-19T10:31:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:50: 📝 Loaded 12 template types
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258110095,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10300,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:50: ⏰ 4-minute startup delay active
2025-09-19T10:31:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:50: [INFO] Using PQueue for job processing
2025-09-19T10:31:50: [INFO] Memory management setup completed
2025-09-19T10:31:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:50: [INFO] Checking process locks...
2025-09-19T10:31:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:50: [INFO] Process locks acquired successfully
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:50: [INFO] Logs directory created
2025-09-19T10:31:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:50: [10:31:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:50: [10:31:50 am] ✅ Google Sheets API initialized
2025-09-19T10:31:50: [INFO] Google Sheets helper initialized
2025-09-19T10:31:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:50: 🗑️ Deleted old log file: bot-2025-09-19T05-01-15-940Z.log
2025-09-19T10:31:50: 📝 Enhanced Logger initialized
2025-09-19T10:31:50: 📁 Loaded statistics from file
2025-09-19T10:31:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:50: 🧹 Removed stale process lock
2025-09-19T10:31:50: 🔒 Process lock acquired (PID: 10300)
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10300
}
2025-09-19T10:31:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258110095, willExpireAt: 1758258350095 },
  timestamp: 1758258110221
}
2025-09-19T10:31:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:50: 📋 Message rules loaded: 8 types
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258110095, processId: 10300 },
  timestamp: 1758258110220
}
2025-09-19T10:31:50: ℹ️ [10:31:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:50: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:50: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:50: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:51: [INFO] WhatsApp client initialized
2025-09-19T10:31:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:53: 📝 Loaded 12 template types
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258113379,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17640,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:53: ⏰ 4-minute startup delay active
2025-09-19T10:31:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:53: [INFO] Using PQueue for job processing
2025-09-19T10:31:53: [INFO] Memory management setup completed
2025-09-19T10:31:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:53: [INFO] Checking process locks...
2025-09-19T10:31:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:53: [INFO] Process locks acquired successfully
2025-09-19T10:31:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:53: [INFO] Logs directory created
2025-09-19T10:31:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:53: [10:31:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:53: [10:31:53 am] ✅ Google Sheets API initialized
2025-09-19T10:31:53: [INFO] Google Sheets helper initialized
2025-09-19T10:31:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:53: 🗑️ Deleted old log file: bot-2025-09-19T05-01-19-471Z.log
2025-09-19T10:31:53: 📝 Enhanced Logger initialized
2025-09-19T10:31:53: 📁 Loaded statistics from file
2025-09-19T10:31:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:53: 🧹 Removed stale process lock
2025-09-19T10:31:53: 🔒 Process lock acquired (PID: 17640)
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17640
}
2025-09-19T10:31:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258113379, processId: 17640 },
  timestamp: 1758258113515
}
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258113379, willExpireAt: 1758258353379 },
  timestamp: 1758258113515
}
2025-09-19T10:31:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:53: 📋 Message rules loaded: 8 types
2025-09-19T10:31:53: ℹ️ [10:31:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:55: [INFO] WhatsApp client initialized
2025-09-19T10:31:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:31:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:31:57: 📝 Loaded 12 template types
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258117117,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17832,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:31:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:31:57: ⏰ 4-minute startup delay active
2025-09-19T10:31:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:31:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:31:57: [INFO] Using PQueue for job processing
2025-09-19T10:31:57: [INFO] Memory management setup completed
2025-09-19T10:31:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:31:57: [INFO] Checking process locks...
2025-09-19T10:31:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:31:57: [INFO] Process locks acquired successfully
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:31:57: [INFO] Logs directory created
2025-09-19T10:31:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:31:57: [10:31:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:31:57: [10:31:57 am] ✅ Google Sheets API initialized
2025-09-19T10:31:57: [INFO] Google Sheets helper initialized
2025-09-19T10:31:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:31:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:31:57: 🗑️ Deleted old log file: bot-2025-09-19T05-01-22-705Z.log
2025-09-19T10:31:57: 📝 Enhanced Logger initialized
2025-09-19T10:31:57: 📁 Loaded statistics from file
2025-09-19T10:31:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:31:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:31:57: 🧹 Removed stale process lock
2025-09-19T10:31:57: 🔒 Process lock acquired (PID: 17832)
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17832
}
2025-09-19T10:31:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:31:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258117117, willExpireAt: 1758258357117 },
  timestamp: 1758258117228
}
2025-09-19T10:31:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:31:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:31:57: 📋 Message rules loaded: 8 types
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258117117, processId: 17832 },
  timestamp: 1758258117227
}
2025-09-19T10:31:57: ℹ️ [10:31:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:31:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:31:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:31:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:31:58: [INFO] WhatsApp client initialized
2025-09-19T10:32:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:00: 📝 Loaded 12 template types
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258120451,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3144,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:00: ⏰ 4-minute startup delay active
2025-09-19T10:32:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:00: [INFO] Using PQueue for job processing
2025-09-19T10:32:00: [INFO] Memory management setup completed
2025-09-19T10:32:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:00: [INFO] Checking process locks...
2025-09-19T10:32:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:00: [INFO] Process locks acquired successfully
2025-09-19T10:32:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:00: [INFO] Logs directory created
2025-09-19T10:32:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:00: [10:32:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:00: [10:32:00 am] ✅ Google Sheets API initialized
2025-09-19T10:32:00: [INFO] Google Sheets helper initialized
2025-09-19T10:32:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:00: 🗑️ Deleted old log file: bot-2025-09-19T05-01-25-745Z.log
2025-09-19T10:32:00: 📝 Enhanced Logger initialized
2025-09-19T10:32:00: 📁 Loaded statistics from file
2025-09-19T10:32:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:00: 🧹 Removed stale process lock
2025-09-19T10:32:00: 🔒 Process lock acquired (PID: 3144)
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3144
}
2025-09-19T10:32:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258120451, processId: 3144 },
  timestamp: 1758258120576
}
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258120451, willExpireAt: 1758258360451 },
  timestamp: 1758258120577
}
2025-09-19T10:32:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:00: 📋 Message rules loaded: 8 types
2025-09-19T10:32:00: ℹ️ [10:32:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:01: [INFO] WhatsApp client initialized
2025-09-19T10:32:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:03: 📝 Loaded 12 template types
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258123624,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18016,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:03: ⏰ 4-minute startup delay active
2025-09-19T10:32:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:03: [INFO] Using PQueue for job processing
2025-09-19T10:32:03: [INFO] Memory management setup completed
2025-09-19T10:32:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:03: [INFO] Checking process locks...
2025-09-19T10:32:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:03: [INFO] Process locks acquired successfully
2025-09-19T10:32:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:03: [INFO] Logs directory created
2025-09-19T10:32:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:03: [10:32:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:03: [10:32:03 am] ✅ Google Sheets API initialized
2025-09-19T10:32:03: [INFO] Google Sheets helper initialized
2025-09-19T10:32:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:03: 🗑️ Deleted old log file: bot-2025-09-19T05-01-28-618Z.log
2025-09-19T10:32:03: 📝 Enhanced Logger initialized
2025-09-19T10:32:03: 📁 Loaded statistics from file
2025-09-19T10:32:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:03: 🧹 Removed stale process lock
2025-09-19T10:32:03: 🔒 Process lock acquired (PID: 18016)
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18016
}
2025-09-19T10:32:03: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:03: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258123624, processId: 18016 },
  timestamp: 1758258123753
}
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258123624, willExpireAt: 1758258363624 },
  timestamp: 1758258123753
}
2025-09-19T10:32:03: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:03: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:03: 📋 Message rules loaded: 8 types
2025-09-19T10:32:03: ℹ️ [10:32:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:04: [INFO] WhatsApp client initialized
2025-09-19T10:32:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:06: 📝 Loaded 12 template types
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258126575,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3696,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:06: ⏰ 4-minute startup delay active
2025-09-19T10:32:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:06: [INFO] Using PQueue for job processing
2025-09-19T10:32:06: [INFO] Memory management setup completed
2025-09-19T10:32:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:06: [INFO] Checking process locks...
2025-09-19T10:32:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:06: [INFO] Process locks acquired successfully
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:06: [INFO] Logs directory created
2025-09-19T10:32:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:06: [10:32:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:06: [10:32:06 am] ✅ Google Sheets API initialized
2025-09-19T10:32:06: [INFO] Google Sheets helper initialized
2025-09-19T10:32:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:06: 🗑️ Deleted old log file: bot-2025-09-19T05-01-31-515Z.log
2025-09-19T10:32:06: 📝 Enhanced Logger initialized
2025-09-19T10:32:06: 📁 Loaded statistics from file
2025-09-19T10:32:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:06: 🧹 Removed stale process lock
2025-09-19T10:32:06: 🔒 Process lock acquired (PID: 3696)
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3696
}
2025-09-19T10:32:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258126575, willExpireAt: 1758258366575 },
  timestamp: 1758258126719
}
2025-09-19T10:32:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:06: 📋 Message rules loaded: 8 types
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258126575, processId: 3696 },
  timestamp: 1758258126719
}
2025-09-19T10:32:06: ℹ️ [10:32:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:07: [INFO] WhatsApp client initialized
2025-09-19T10:32:09: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:09: 📝 Loaded 12 template types
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258129643,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2112,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:09: ⏰ 4-minute startup delay active
2025-09-19T10:32:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:09: [INFO] Using PQueue for job processing
2025-09-19T10:32:09: [INFO] Memory management setup completed
2025-09-19T10:32:09: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:09: [INFO] Checking process locks...
2025-09-19T10:32:09: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:09: [INFO] Process locks acquired successfully
2025-09-19T10:32:09: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:09: [INFO] Logs directory created
2025-09-19T10:32:09: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:09: [10:32:09 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:09: [10:32:09 am] ✅ Google Sheets API initialized
2025-09-19T10:32:09: [INFO] Google Sheets helper initialized
2025-09-19T10:32:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:09: 🗑️ Deleted old log file: bot-2025-09-19T05-01-34-560Z.log
2025-09-19T10:32:09: 📝 Enhanced Logger initialized
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:09: 📁 Loaded statistics from file
2025-09-19T10:32:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:09: 🧹 Removed stale process lock
2025-09-19T10:32:09: 🔒 Process lock acquired (PID: 2112)
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2112
}
2025-09-19T10:32:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258129643, willExpireAt: 1758258369643 },
  timestamp: 1758258129767
}
2025-09-19T10:32:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:09: 📋 Message rules loaded: 8 types
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258129643, processId: 2112 },
  timestamp: 1758258129766
}
2025-09-19T10:32:09: ℹ️ [10:32:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:10: [INFO] WhatsApp client initialized
2025-09-19T10:32:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:12: 📝 Loaded 12 template types
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258132549,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17536,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:12: ⏰ 4-minute startup delay active
2025-09-19T10:32:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:12: [INFO] Using PQueue for job processing
2025-09-19T10:32:12: [INFO] Memory management setup completed
2025-09-19T10:32:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:12: [INFO] Checking process locks...
2025-09-19T10:32:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:12: [INFO] Process locks acquired successfully
2025-09-19T10:32:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:12: [INFO] Logs directory created
2025-09-19T10:32:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:12: [10:32:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:12: [10:32:12 am] ✅ Google Sheets API initialized
2025-09-19T10:32:12: [INFO] Google Sheets helper initialized
2025-09-19T10:32:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:12: 🗑️ Deleted old log file: bot-2025-09-19T05-01-37-601Z.log
2025-09-19T10:32:12: 📝 Enhanced Logger initialized
2025-09-19T10:32:12: 📁 Loaded statistics from file
2025-09-19T10:32:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:12: 🧹 Removed stale process lock
2025-09-19T10:32:12: 🔒 Process lock acquired (PID: 17536)
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17536
}
2025-09-19T10:32:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258132549, willExpireAt: 1758258372549 },
  timestamp: 1758258132670
}
2025-09-19T10:32:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:12: 📋 Message rules loaded: 8 types
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258132549, processId: 17536 },
  timestamp: 1758258132670
}
2025-09-19T10:32:12: ℹ️ [10:32:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 124,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:14: [INFO] WhatsApp client initialized
2025-09-19T10:32:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:16: 📝 Loaded 12 template types
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258136381,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18036,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:16: ⏰ 4-minute startup delay active
2025-09-19T10:32:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:16: [INFO] Using PQueue for job processing
2025-09-19T10:32:16: [INFO] Memory management setup completed
2025-09-19T10:32:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:16: [INFO] Checking process locks...
2025-09-19T10:32:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:16: [INFO] Process locks acquired successfully
2025-09-19T10:32:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:16: [INFO] Logs directory created
2025-09-19T10:32:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:16: [10:32:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:16: [10:32:16 am] ✅ Google Sheets API initialized
2025-09-19T10:32:16: [INFO] Google Sheets helper initialized
2025-09-19T10:32:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:16: 🗑️ Deleted old log file: bot-2025-09-19T05-01-40-568Z.log
2025-09-19T10:32:16: 📝 Enhanced Logger initialized
2025-09-19T10:32:16: 📁 Loaded statistics from file
2025-09-19T10:32:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:16: 🧹 Removed stale process lock
2025-09-19T10:32:16: 🔒 Process lock acquired (PID: 18036)
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18036
}
2025-09-19T10:32:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258136381, processId: 18036 },
  timestamp: 1758258136523
}
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258136381, willExpireAt: 1758258376381 },
  timestamp: 1758258136524
}
2025-09-19T10:32:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:16: 📋 Message rules loaded: 8 types
2025-09-19T10:32:16: ℹ️ [10:32:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:17: [INFO] WhatsApp client initialized
2025-09-19T10:32:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:19: 📝 Loaded 12 template types
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258139840,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7556,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:19: ⏰ 4-minute startup delay active
2025-09-19T10:32:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:19: [INFO] Using PQueue for job processing
2025-09-19T10:32:19: [INFO] Memory management setup completed
2025-09-19T10:32:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:19: [INFO] Checking process locks...
2025-09-19T10:32:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:19: [INFO] Process locks acquired successfully
2025-09-19T10:32:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:19: [INFO] Logs directory created
2025-09-19T10:32:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:19: [10:32:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:19: [10:32:19 am] ✅ Google Sheets API initialized
2025-09-19T10:32:19: [INFO] Google Sheets helper initialized
2025-09-19T10:32:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:19: 🗑️ Deleted old log file: bot-2025-09-19T05-01-43-593Z.log
2025-09-19T10:32:19: 📝 Enhanced Logger initialized
2025-09-19T10:32:19: 📁 Loaded statistics from file
2025-09-19T10:32:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:19: 🧹 Removed stale process lock
2025-09-19T10:32:19: 🔒 Process lock acquired (PID: 7556)
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7556
}
2025-09-19T10:32:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258139840, processId: 7556 },
  timestamp: 1758258139965
}
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258139840, willExpireAt: 1758258379840 },
  timestamp: 1758258139966
}
2025-09-19T10:32:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:19: 📋 Message rules loaded: 8 types
2025-09-19T10:32:19: ℹ️ [10:32:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:20: [INFO] WhatsApp client initialized
2025-09-19T10:32:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:22: 📝 Loaded 12 template types
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258142828,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13448,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:22: ⏰ 4-minute startup delay active
2025-09-19T10:32:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:22: [INFO] Using PQueue for job processing
2025-09-19T10:32:22: [INFO] Memory management setup completed
2025-09-19T10:32:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:22: [INFO] Checking process locks...
2025-09-19T10:32:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:22: [INFO] Process locks acquired successfully
2025-09-19T10:32:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:22: [INFO] Logs directory created
2025-09-19T10:32:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:22: [10:32:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:22: [10:32:22 am] ✅ Google Sheets API initialized
2025-09-19T10:32:22: [INFO] Google Sheets helper initialized
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:22: 🗑️ Deleted old log file: bot-2025-09-19T05-01-46-684Z.log
2025-09-19T10:32:22: 📝 Enhanced Logger initialized
2025-09-19T10:32:22: 📁 Loaded statistics from file
2025-09-19T10:32:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:22: 🧹 Removed stale process lock
2025-09-19T10:32:22: 🔒 Process lock acquired (PID: 13448)
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13448
}
2025-09-19T10:32:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258142828, willExpireAt: 1758258382828 },
  timestamp: 1758258142971
}
2025-09-19T10:32:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:22: 📋 Message rules loaded: 8 types
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258142828, processId: 13448 },
  timestamp: 1758258142970
}
2025-09-19T10:32:22: ℹ️ [10:32:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 145,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:25: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:25: [INFO] WhatsApp client initialized
2025-09-19T10:32:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:27: 📝 Loaded 12 template types
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258147669,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17488,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:27: ⏰ 4-minute startup delay active
2025-09-19T10:32:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:27: [INFO] Using PQueue for job processing
2025-09-19T10:32:27: [INFO] Memory management setup completed
2025-09-19T10:32:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:27: [INFO] Checking process locks...
2025-09-19T10:32:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:27: [INFO] Process locks acquired successfully
2025-09-19T10:32:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:27: [INFO] Logs directory created
2025-09-19T10:32:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:27: [10:32:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:27: [10:32:27 am] ✅ Google Sheets API initialized
2025-09-19T10:32:27: [INFO] Google Sheets helper initialized
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:27: 🗑️ Deleted old log file: bot-2025-09-19T05-01-50-132Z.log
2025-09-19T10:32:27: 📝 Enhanced Logger initialized
2025-09-19T10:32:27: 📁 Loaded statistics from file
2025-09-19T10:32:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:27: 🧹 Removed stale process lock
2025-09-19T10:32:27: 🔒 Process lock acquired (PID: 17488)
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17488
}
2025-09-19T10:32:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258147669, processId: 17488 },
  timestamp: 1758258147798
}
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258147669, willExpireAt: 1758258387669 },
  timestamp: 1758258147799
}
2025-09-19T10:32:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:27: 📋 Message rules loaded: 8 types
2025-09-19T10:32:27: ℹ️ [10:32:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:28: [INFO] WhatsApp client initialized
2025-09-19T10:32:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:30: 📝 Loaded 12 template types
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258150799,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4628,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:30: ⏰ 4-minute startup delay active
2025-09-19T10:32:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:30: [INFO] Using PQueue for job processing
2025-09-19T10:32:30: [INFO] Memory management setup completed
2025-09-19T10:32:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:30: [INFO] Checking process locks...
2025-09-19T10:32:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:30: [INFO] Process locks acquired successfully
2025-09-19T10:32:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:30: [INFO] Logs directory created
2025-09-19T10:32:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:30: [10:32:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:30: [10:32:30 am] ✅ Google Sheets API initialized
2025-09-19T10:32:30: [INFO] Google Sheets helper initialized
2025-09-19T10:32:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:30: 🗑️ Deleted old log file: bot-2025-09-19T05-01-53-416Z.log
2025-09-19T10:32:30: 📝 Enhanced Logger initialized
2025-09-19T10:32:30: 📁 Loaded statistics from file
2025-09-19T10:32:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:30: 🧹 Removed stale process lock
2025-09-19T10:32:30: 🔒 Process lock acquired (PID: 4628)
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4628
}
2025-09-19T10:32:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258150799, processId: 4628 },
  timestamp: 1758258150946
}
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258150799, willExpireAt: 1758258390799 },
  timestamp: 1758258150947
}
2025-09-19T10:32:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:30: 📋 Message rules loaded: 8 types
2025-09-19T10:32:30: ℹ️ [10:32:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 151,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:31: [INFO] WhatsApp client initialized
2025-09-19T10:32:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:33: 📝 Loaded 12 template types
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258153742,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9028,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:33: ⏰ 4-minute startup delay active
2025-09-19T10:32:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:33: [INFO] Using PQueue for job processing
2025-09-19T10:32:33: [INFO] Memory management setup completed
2025-09-19T10:32:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:33: [INFO] Checking process locks...
2025-09-19T10:32:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:33: [INFO] Process locks acquired successfully
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:33: [INFO] Logs directory created
2025-09-19T10:32:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:33: [10:32:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:33: [10:32:33 am] ✅ Google Sheets API initialized
2025-09-19T10:32:33: [INFO] Google Sheets helper initialized
2025-09-19T10:32:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:33: 🗑️ Deleted old log file: bot-2025-09-19T05-01-57-149Z.log
2025-09-19T10:32:33: 📝 Enhanced Logger initialized
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:33: 📁 Loaded statistics from file
2025-09-19T10:32:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:33: 🧹 Removed stale process lock
2025-09-19T10:32:33: 🔒 Process lock acquired (PID: 9028)
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9028
}
2025-09-19T10:32:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258153742, processId: 9028 },
  timestamp: 1758258153872
}
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258153742, willExpireAt: 1758258393742 },
  timestamp: 1758258153872
}
2025-09-19T10:32:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:33: 📋 Message rules loaded: 8 types
2025-09-19T10:32:33: ℹ️ [10:32:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:37: [INFO] WhatsApp client initialized
2025-09-19T10:32:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:38: 📝 Loaded 12 template types
2025-09-19T10:32:39: ℹ️ [10:32:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258158994,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9052,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:39: ⏰ 4-minute startup delay active
2025-09-19T10:32:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:39: [INFO] Using PQueue for job processing
2025-09-19T10:32:39: [INFO] Memory management setup completed
2025-09-19T10:32:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:39: [INFO] Checking process locks...
2025-09-19T10:32:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:39: ℹ️ [10:32:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:39: [INFO] Process locks acquired successfully
2025-09-19T10:32:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:39: [INFO] Logs directory created
2025-09-19T10:32:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:39: [10:32:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:39: [10:32:39 am] ✅ Google Sheets API initialized
2025-09-19T10:32:39: [INFO] Google Sheets helper initialized
2025-09-19T10:32:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:39: 🗑️ Deleted old log file: bot-2025-09-19T05-02-00-489Z.log
2025-09-19T10:32:39: 📝 Enhanced Logger initialized
2025-09-19T10:32:39: ℹ️ [10:32:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:39: 📁 Loaded statistics from file
2025-09-19T10:32:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:39: 🧹 Removed stale process lock
2025-09-19T10:32:39: 🔒 Process lock acquired (PID: 9052)
2025-09-19T10:32:39: ℹ️ [10:32:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9052
}
2025-09-19T10:32:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:39: ℹ️ [10:32:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258158994, processId: 9052 },
  timestamp: 1758258159088
}
2025-09-19T10:32:39: ℹ️ [10:32:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258158994, willExpireAt: 1758258398994 },
  timestamp: 1758258159088
}
2025-09-19T10:32:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:39: 📋 Message rules loaded: 8 types
2025-09-19T10:32:39: ℹ️ [10:32:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 95,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:40: [INFO] WhatsApp client initialized
2025-09-19T10:32:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:41: 📝 Loaded 12 template types
2025-09-19T10:32:41: ℹ️ [10:32:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258161933,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9224,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:41: ⏰ 4-minute startup delay active
2025-09-19T10:32:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:41: [INFO] Using PQueue for job processing
2025-09-19T10:32:41: [INFO] Memory management setup completed
2025-09-19T10:32:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:41: [INFO] Checking process locks...
2025-09-19T10:32:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:41: ℹ️ [10:32:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:41: [INFO] Process locks acquired successfully
2025-09-19T10:32:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:41: [INFO] Logs directory created
2025-09-19T10:32:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:41: [10:32:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:41: [10:32:41 am] ✅ Google Sheets API initialized
2025-09-19T10:32:41: [INFO] Google Sheets helper initialized
2025-09-19T10:32:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:41: ℹ️ [10:32:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:41: 🗑️ Deleted old log file: bot-2025-09-19T05-02-03-661Z.log
2025-09-19T10:32:41: 📝 Enhanced Logger initialized
2025-09-19T10:32:42: 📁 Loaded statistics from file
2025-09-19T10:32:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:42: 🧹 Removed stale process lock
2025-09-19T10:32:42: 🔒 Process lock acquired (PID: 9224)
2025-09-19T10:32:42: ℹ️ [10:32:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9224
}
2025-09-19T10:32:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:42: ℹ️ [10:32:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258161933, willExpireAt: 1758258401933 },
  timestamp: 1758258162072
}
2025-09-19T10:32:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:42: 📋 Message rules loaded: 8 types
2025-09-19T10:32:42: ℹ️ [10:32:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258161933, processId: 9224 },
  timestamp: 1758258162072
}
2025-09-19T10:32:42: ℹ️ [10:32:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 142,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:43: [INFO] WhatsApp client initialized
2025-09-19T10:32:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:45: 📝 Loaded 12 template types
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258165563,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3248,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:45: ⏰ 4-minute startup delay active
2025-09-19T10:32:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:45: [INFO] Using PQueue for job processing
2025-09-19T10:32:45: [INFO] Memory management setup completed
2025-09-19T10:32:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:45: [INFO] Checking process locks...
2025-09-19T10:32:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:45: [INFO] Process locks acquired successfully
2025-09-19T10:32:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:45: [INFO] Logs directory created
2025-09-19T10:32:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:45: [10:32:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:45: [10:32:45 am] ✅ Google Sheets API initialized
2025-09-19T10:32:45: [INFO] Google Sheets helper initialized
2025-09-19T10:32:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:45: 🗑️ Deleted old log file: bot-2025-09-19T05-02-06-618Z.log
2025-09-19T10:32:45: 📝 Enhanced Logger initialized
2025-09-19T10:32:45: 📁 Loaded statistics from file
2025-09-19T10:32:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:45: 🧹 Removed stale process lock
2025-09-19T10:32:45: 🔒 Process lock acquired (PID: 3248)
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3248
}
2025-09-19T10:32:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258165563, willExpireAt: 1758258405563 },
  timestamp: 1758258165687
}
2025-09-19T10:32:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:45: 📋 Message rules loaded: 8 types
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258165563, processId: 3248 },
  timestamp: 1758258165686
}
2025-09-19T10:32:45: ℹ️ [10:32:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:46: [INFO] WhatsApp client initialized
2025-09-19T10:32:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:48: 📝 Loaded 12 template types
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258168522,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16804,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:48: ⏰ 4-minute startup delay active
2025-09-19T10:32:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:48: [INFO] Using PQueue for job processing
2025-09-19T10:32:48: [INFO] Memory management setup completed
2025-09-19T10:32:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:48: [INFO] Checking process locks...
2025-09-19T10:32:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:48: [INFO] Process locks acquired successfully
2025-09-19T10:32:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:48: [INFO] Logs directory created
2025-09-19T10:32:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:48: [10:32:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:48: [10:32:48 am] ✅ Google Sheets API initialized
2025-09-19T10:32:48: [INFO] Google Sheets helper initialized
2025-09-19T10:32:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:48: 🗑️ Deleted old log file: bot-2025-09-19T05-02-09-674Z.log
2025-09-19T10:32:48: 📝 Enhanced Logger initialized
2025-09-19T10:32:48: 📁 Loaded statistics from file
2025-09-19T10:32:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:48: 🧹 Removed stale process lock
2025-09-19T10:32:48: 🔒 Process lock acquired (PID: 16804)
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16804
}
2025-09-19T10:32:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258168522, processId: 16804 },
  timestamp: 1758258168667
}
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258168522, willExpireAt: 1758258408522 },
  timestamp: 1758258168667
}
2025-09-19T10:32:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:48: 📋 Message rules loaded: 8 types
2025-09-19T10:32:48: ℹ️ [10:32:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:52: [INFO] WhatsApp client initialized
2025-09-19T10:32:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:54: 📝 Loaded 12 template types
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258174281,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13848,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:54: ⏰ 4-minute startup delay active
2025-09-19T10:32:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:54: [INFO] Using PQueue for job processing
2025-09-19T10:32:54: [INFO] Memory management setup completed
2025-09-19T10:32:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:54: [INFO] Checking process locks...
2025-09-19T10:32:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:54: [INFO] Process locks acquired successfully
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:54: [INFO] Logs directory created
2025-09-19T10:32:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:54: [10:32:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:54: [10:32:54 am] ✅ Google Sheets API initialized
2025-09-19T10:32:54: [INFO] Google Sheets helper initialized
2025-09-19T10:32:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:54: 🗑️ Deleted old log file: bot-2025-09-19T05-02-12-581Z.log
2025-09-19T10:32:54: 📝 Enhanced Logger initialized
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:54: 📁 Loaded statistics from file
2025-09-19T10:32:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:54: 🧹 Removed stale process lock
2025-09-19T10:32:54: 🔒 Process lock acquired (PID: 13848)
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13848
}
2025-09-19T10:32:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258174281, processId: 13848 },
  timestamp: 1758258174375
}
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258174281, willExpireAt: 1758258414281 },
  timestamp: 1758258174375
}
2025-09-19T10:32:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:54: 📋 Message rules loaded: 8 types
2025-09-19T10:32:54: ℹ️ [10:32:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 96,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:55: [INFO] WhatsApp client initialized
2025-09-19T10:32:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:32:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:32:57: 📝 Loaded 12 template types
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258177155,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17832,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:32:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:32:57: ⏰ 4-minute startup delay active
2025-09-19T10:32:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:32:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:32:57: [INFO] Using PQueue for job processing
2025-09-19T10:32:57: [INFO] Memory management setup completed
2025-09-19T10:32:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:32:57: [INFO] Checking process locks...
2025-09-19T10:32:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:32:57: [INFO] Process locks acquired successfully
2025-09-19T10:32:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:32:57: [INFO] Logs directory created
2025-09-19T10:32:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:32:57: [10:32:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:32:57: [10:32:57 am] ✅ Google Sheets API initialized
2025-09-19T10:32:57: [INFO] Google Sheets helper initialized
2025-09-19T10:32:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:32:57: 🗑️ Deleted old log file: bot-2025-09-19T05-02-16-418Z.log
2025-09-19T10:32:57: 📝 Enhanced Logger initialized
2025-09-19T10:32:57: 📁 Loaded statistics from file
2025-09-19T10:32:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:32:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:32:57: 🧹 Removed stale process lock
2025-09-19T10:32:57: 🔒 Process lock acquired (PID: 17832)
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17832
}
2025-09-19T10:32:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:32:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258177155, willExpireAt: 1758258417155 },
  timestamp: 1758258177307
}
2025-09-19T10:32:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:32:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:32:57: 📋 Message rules loaded: 8 types
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258177155, processId: 17832 },
  timestamp: 1758258177307
}
2025-09-19T10:32:57: ℹ️ [10:32:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 154,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:32:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:32:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:32:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:32:58: [INFO] WhatsApp client initialized
2025-09-19T10:33:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:00: 📝 Loaded 12 template types
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258180410,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14168,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:00: ⏰ 4-minute startup delay active
2025-09-19T10:33:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:00: [INFO] Using PQueue for job processing
2025-09-19T10:33:00: [INFO] Memory management setup completed
2025-09-19T10:33:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:00: [INFO] Checking process locks...
2025-09-19T10:33:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:00: [INFO] Process locks acquired successfully
2025-09-19T10:33:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:00: [INFO] Logs directory created
2025-09-19T10:33:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:00: [10:33:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:00: [10:33:00 am] ✅ Google Sheets API initialized
2025-09-19T10:33:00: [INFO] Google Sheets helper initialized
2025-09-19T10:33:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:00: 🗑️ Deleted old log file: bot-2025-09-19T05-02-19-879Z.log
2025-09-19T10:33:00: 📝 Enhanced Logger initialized
2025-09-19T10:33:00: 📁 Loaded statistics from file
2025-09-19T10:33:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:00: 🧹 Removed stale process lock
2025-09-19T10:33:00: 🔒 Process lock acquired (PID: 14168)
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14168
}
2025-09-19T10:33:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258180410, processId: 14168 },
  timestamp: 1758258180546
}
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258180410, willExpireAt: 1758258420410 },
  timestamp: 1758258180546
}
2025-09-19T10:33:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:00: 📋 Message rules loaded: 8 types
2025-09-19T10:33:00: ℹ️ [10:33:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:02: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:02: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:02: [INFO] WhatsApp client initialized
2025-09-19T10:33:04: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:04: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:04: 📝 Loaded 12 template types
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258184185,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:04: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:04: ⏰ 4-minute startup delay active
2025-09-19T10:33:04: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:04: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:04: [INFO] Using PQueue for job processing
2025-09-19T10:33:04: [INFO] Memory management setup completed
2025-09-19T10:33:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:04: [INFO] Checking process locks...
2025-09-19T10:33:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:04: [INFO] Process locks acquired successfully
2025-09-19T10:33:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:04: [INFO] Logs directory created
2025-09-19T10:33:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:04: [10:33:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:04: [10:33:04 am] ✅ Google Sheets API initialized
2025-09-19T10:33:04: [INFO] Google Sheets helper initialized
2025-09-19T10:33:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:04: 🗑️ Deleted old log file: bot-2025-09-19T05-02-22-862Z.log
2025-09-19T10:33:04: 📝 Enhanced Logger initialized
2025-09-19T10:33:04: 📁 Loaded statistics from file
2025-09-19T10:33:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:04: 🧹 Removed stale process lock
2025-09-19T10:33:04: 🔒 Process lock acquired (PID: 16720)
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16720
}
2025-09-19T10:33:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258184185, processId: 16720 },
  timestamp: 1758258184301
}
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258184185, willExpireAt: 1758258424185 },
  timestamp: 1758258184302
}
2025-09-19T10:33:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:04: 📋 Message rules loaded: 8 types
2025-09-19T10:33:04: ℹ️ [10:33:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:05: [INFO] WhatsApp client initialized
2025-09-19T10:33:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:07: 📝 Loaded 12 template types
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258187260,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10716,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:07: ⏰ 4-minute startup delay active
2025-09-19T10:33:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:07: [INFO] Using PQueue for job processing
2025-09-19T10:33:07: [INFO] Memory management setup completed
2025-09-19T10:33:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:07: [INFO] Checking process locks...
2025-09-19T10:33:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:07: [INFO] Process locks acquired successfully
2025-09-19T10:33:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:07: [INFO] Logs directory created
2025-09-19T10:33:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:07: [10:33:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:07: [10:33:07 am] ✅ Google Sheets API initialized
2025-09-19T10:33:07: [INFO] Google Sheets helper initialized
2025-09-19T10:33:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:07: 🗑️ Deleted old log file: bot-2025-09-19T05-02-27-704Z.log
2025-09-19T10:33:07: 📝 Enhanced Logger initialized
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:07: 📁 Loaded statistics from file
2025-09-19T10:33:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:07: 🧹 Removed stale process lock
2025-09-19T10:33:07: 🔒 Process lock acquired (PID: 10716)
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10716
}
2025-09-19T10:33:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258187260, processId: 10716 },
  timestamp: 1758258187388
}
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258187260, willExpireAt: 1758258427260 },
  timestamp: 1758258187388
}
2025-09-19T10:33:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:07: 📋 Message rules loaded: 8 types
2025-09-19T10:33:07: ℹ️ [10:33:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:08: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:08: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:08: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:08: [INFO] WhatsApp client initialized
2025-09-19T10:33:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:10: 📝 Loaded 12 template types
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258190646,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15832,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:10: ⏰ 4-minute startup delay active
2025-09-19T10:33:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:10: [INFO] Using PQueue for job processing
2025-09-19T10:33:10: [INFO] Memory management setup completed
2025-09-19T10:33:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:10: [INFO] Checking process locks...
2025-09-19T10:33:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:10: [INFO] Process locks acquired successfully
2025-09-19T10:33:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:10: [INFO] Logs directory created
2025-09-19T10:33:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:10: [10:33:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:10: [10:33:10 am] ✅ Google Sheets API initialized
2025-09-19T10:33:10: [INFO] Google Sheets helper initialized
2025-09-19T10:33:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:10: 🗑️ Deleted old log file: bot-2025-09-19T05-02-30-839Z.log
2025-09-19T10:33:10: 📝 Enhanced Logger initialized
2025-09-19T10:33:10: 📁 Loaded statistics from file
2025-09-19T10:33:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:10: 🧹 Removed stale process lock
2025-09-19T10:33:10: 🔒 Process lock acquired (PID: 15832)
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15832
}
2025-09-19T10:33:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258190646, willExpireAt: 1758258430646 },
  timestamp: 1758258190775
}
2025-09-19T10:33:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:10: 📋 Message rules loaded: 8 types
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258190646, processId: 15832 },
  timestamp: 1758258190774
}
2025-09-19T10:33:10: ℹ️ [10:33:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:11: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:11: [INFO] WhatsApp client initialized
2025-09-19T10:33:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:13: 📝 Loaded 12 template types
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258193609,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14964,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:13: ⏰ 4-minute startup delay active
2025-09-19T10:33:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:13: [INFO] Using PQueue for job processing
2025-09-19T10:33:13: [INFO] Memory management setup completed
2025-09-19T10:33:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:13: [INFO] Checking process locks...
2025-09-19T10:33:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:13: [INFO] Process locks acquired successfully
2025-09-19T10:33:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:13: [INFO] Logs directory created
2025-09-19T10:33:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:13: [10:33:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:13: [10:33:13 am] ✅ Google Sheets API initialized
2025-09-19T10:33:13: [INFO] Google Sheets helper initialized
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:13: 🗑️ Deleted old log file: bot-2025-09-19T05-02-33-779Z.log
2025-09-19T10:33:13: 📝 Enhanced Logger initialized
2025-09-19T10:33:13: 📁 Loaded statistics from file
2025-09-19T10:33:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:13: 🧹 Removed stale process lock
2025-09-19T10:33:13: 🔒 Process lock acquired (PID: 14964)
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14964
}
2025-09-19T10:33:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258193609, processId: 14964 },
  timestamp: 1758258193753
}
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258193609, willExpireAt: 1758258433609 },
  timestamp: 1758258193753
}
2025-09-19T10:33:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:13: 📋 Message rules loaded: 8 types
2025-09-19T10:33:13: ℹ️ [10:33:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 147,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:14: [INFO] WhatsApp client initialized
2025-09-19T10:33:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:16: 📝 Loaded 12 template types
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258196658,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9580,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:16: ⏰ 4-minute startup delay active
2025-09-19T10:33:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:16: [INFO] Using PQueue for job processing
2025-09-19T10:33:16: [INFO] Memory management setup completed
2025-09-19T10:33:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:16: [INFO] Checking process locks...
2025-09-19T10:33:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:16: [INFO] Process locks acquired successfully
2025-09-19T10:33:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:16: [INFO] Logs directory created
2025-09-19T10:33:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:16: [10:33:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:16: [10:33:16 am] ✅ Google Sheets API initialized
2025-09-19T10:33:16: [INFO] Google Sheets helper initialized
2025-09-19T10:33:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:16: 🗑️ Deleted old log file: bot-2025-09-19T05-02-39-019Z.log
2025-09-19T10:33:16: 📝 Enhanced Logger initialized
2025-09-19T10:33:16: 📁 Loaded statistics from file
2025-09-19T10:33:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:16: 🧹 Removed stale process lock
2025-09-19T10:33:16: 🔒 Process lock acquired (PID: 9580)
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9580
}
2025-09-19T10:33:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258196658, processId: 9580 },
  timestamp: 1758258196783
}
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258196658, willExpireAt: 1758258436658 },
  timestamp: 1758258196783
}
2025-09-19T10:33:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:16: 📋 Message rules loaded: 8 types
2025-09-19T10:33:16: ℹ️ [10:33:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:17: [INFO] WhatsApp client initialized
2025-09-19T10:33:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:19: 📝 Loaded 12 template types
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258199748,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4804,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:19: ⏰ 4-minute startup delay active
2025-09-19T10:33:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:19: [INFO] Using PQueue for job processing
2025-09-19T10:33:19: [INFO] Memory management setup completed
2025-09-19T10:33:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:19: [INFO] Checking process locks...
2025-09-19T10:33:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:19: [INFO] Process locks acquired successfully
2025-09-19T10:33:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:19: [INFO] Logs directory created
2025-09-19T10:33:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:19: [10:33:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:19: [10:33:19 am] ✅ Google Sheets API initialized
2025-09-19T10:33:19: [INFO] Google Sheets helper initialized
2025-09-19T10:33:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:19: 🗑️ Deleted old log file: bot-2025-09-19T05-02-41-973Z.log
2025-09-19T10:33:19: 📝 Enhanced Logger initialized
2025-09-19T10:33:19: 📁 Loaded statistics from file
2025-09-19T10:33:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:19: 🧹 Removed stale process lock
2025-09-19T10:33:19: 🔒 Process lock acquired (PID: 4804)
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4804
}
2025-09-19T10:33:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258199748, processId: 4804 },
  timestamp: 1758258199862
}
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258199748, willExpireAt: 1758258439748 },
  timestamp: 1758258199862
}
2025-09-19T10:33:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:19: 📋 Message rules loaded: 8 types
2025-09-19T10:33:19: ℹ️ [10:33:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:21: [INFO] WhatsApp client initialized
2025-09-19T10:33:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:23: 📝 Loaded 12 template types
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258203186,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15800,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:23: ⏰ 4-minute startup delay active
2025-09-19T10:33:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:23: [INFO] Using PQueue for job processing
2025-09-19T10:33:23: [INFO] Memory management setup completed
2025-09-19T10:33:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:23: [INFO] Checking process locks...
2025-09-19T10:33:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:23: [INFO] Process locks acquired successfully
2025-09-19T10:33:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:23: [INFO] Logs directory created
2025-09-19T10:33:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:23: [10:33:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:23: [10:33:23 am] ✅ Google Sheets API initialized
2025-09-19T10:33:23: [INFO] Google Sheets helper initialized
2025-09-19T10:33:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:23: 🗑️ Deleted old log file: bot-2025-09-19T05-02-45-599Z.log
2025-09-19T10:33:23: 📝 Enhanced Logger initialized
2025-09-19T10:33:23: 📁 Loaded statistics from file
2025-09-19T10:33:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:23: 🧹 Removed stale process lock
2025-09-19T10:33:23: 🔒 Process lock acquired (PID: 15800)
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15800
}
2025-09-19T10:33:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258203186, willExpireAt: 1758258443186 },
  timestamp: 1758258203307
}
2025-09-19T10:33:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:23: 📋 Message rules loaded: 8 types
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258203186, processId: 15800 },
  timestamp: 1758258203306
}
2025-09-19T10:33:23: ℹ️ [10:33:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:24: [INFO] WhatsApp client initialized
2025-09-19T10:33:26: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:26: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:26: 📝 Loaded 12 template types
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258206405,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13540,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:26: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:26: ⏰ 4-minute startup delay active
2025-09-19T10:33:26: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:26: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:26: [INFO] Using PQueue for job processing
2025-09-19T10:33:26: [INFO] Memory management setup completed
2025-09-19T10:33:26: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:26: [INFO] Checking process locks...
2025-09-19T10:33:26: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:26: [INFO] Process locks acquired successfully
2025-09-19T10:33:26: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:26: [INFO] Logs directory created
2025-09-19T10:33:26: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:26: [10:33:26 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:26: [10:33:26 am] ✅ Google Sheets API initialized
2025-09-19T10:33:26: [INFO] Google Sheets helper initialized
2025-09-19T10:33:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:26: 🗑️ Deleted old log file: bot-2025-09-19T05-02-48-563Z.log
2025-09-19T10:33:26: 📝 Enhanced Logger initialized
2025-09-19T10:33:26: 📁 Loaded statistics from file
2025-09-19T10:33:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:26: 🧹 Removed stale process lock
2025-09-19T10:33:26: 🔒 Process lock acquired (PID: 13540)
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13540
}
2025-09-19T10:33:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258206405, processId: 13540 },
  timestamp: 1758258206549
}
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258206405, willExpireAt: 1758258446405 },
  timestamp: 1758258206549
}
2025-09-19T10:33:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:26: 📋 Message rules loaded: 8 types
2025-09-19T10:33:26: ℹ️ [10:33:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 147,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:27: [INFO] WhatsApp client initialized
2025-09-19T10:33:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:29: 📝 Loaded 12 template types
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258209510,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8436,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:29: ⏰ 4-minute startup delay active
2025-09-19T10:33:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:29: [INFO] Using PQueue for job processing
2025-09-19T10:33:29: [INFO] Memory management setup completed
2025-09-19T10:33:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:29: [INFO] Checking process locks...
2025-09-19T10:33:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:29: [INFO] Process locks acquired successfully
2025-09-19T10:33:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:29: [INFO] Logs directory created
2025-09-19T10:33:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:29: [10:33:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:29: [10:33:29 am] ✅ Google Sheets API initialized
2025-09-19T10:33:29: [INFO] Google Sheets helper initialized
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:29: 🗑️ Deleted old log file: bot-2025-09-19T05-02-54-307Z.log
2025-09-19T10:33:29: 📝 Enhanced Logger initialized
2025-09-19T10:33:29: 📁 Loaded statistics from file
2025-09-19T10:33:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:29: 🧹 Removed stale process lock
2025-09-19T10:33:29: 🔒 Process lock acquired (PID: 8436)
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8436
}
2025-09-19T10:33:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258209510, processId: 8436 },
  timestamp: 1758258209632
}
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258209510, willExpireAt: 1758258449510 },
  timestamp: 1758258209632
}
2025-09-19T10:33:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:29: 📋 Message rules loaded: 8 types
2025-09-19T10:33:29: ℹ️ [10:33:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:30: [INFO] WhatsApp client initialized
2025-09-19T10:33:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:32: 📝 Loaded 12 template types
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258212433,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9640,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:32: ⏰ 4-minute startup delay active
2025-09-19T10:33:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:32: [INFO] Using PQueue for job processing
2025-09-19T10:33:32: [INFO] Memory management setup completed
2025-09-19T10:33:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:32: [INFO] Checking process locks...
2025-09-19T10:33:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:32: [INFO] Process locks acquired successfully
2025-09-19T10:33:32: [INFO] Logs directory created
2025-09-19T10:33:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:32: [10:33:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:32: [10:33:32 am] ✅ Google Sheets API initialized
2025-09-19T10:33:32: [INFO] Google Sheets helper initialized
2025-09-19T10:33:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:32: 📁 Loaded statistics from file
2025-09-19T10:33:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:32: 🗑️ Deleted old log file: bot-2025-09-19T05-02-57-197Z.log
2025-09-19T10:33:32: 📝 Enhanced Logger initialized
2025-09-19T10:33:32: 🧹 Removed stale process lock
2025-09-19T10:33:32: 🔒 Process lock acquired (PID: 9640)
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9640
}
2025-09-19T10:33:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258212433, processId: 9640 },
  timestamp: 1758258212549
}
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258212433, willExpireAt: 1758258452433 },
  timestamp: 1758258212549
}
2025-09-19T10:33:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:32: 📋 Message rules loaded: 8 types
2025-09-19T10:33:32: ℹ️ [10:33:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:33: [INFO] WhatsApp client initialized
2025-09-19T10:33:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:35: 📝 Loaded 12 template types
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258215740,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3052,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:35: ⏰ 4-minute startup delay active
2025-09-19T10:33:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:35: [INFO] Using PQueue for job processing
2025-09-19T10:33:35: [INFO] Memory management setup completed
2025-09-19T10:33:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:35: [INFO] Checking process locks...
2025-09-19T10:33:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:35: [INFO] Process locks acquired successfully
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:35: [INFO] Logs directory created
2025-09-19T10:33:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:35: [10:33:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:35: [10:33:35 am] ✅ Google Sheets API initialized
2025-09-19T10:33:35: [INFO] Google Sheets helper initialized
2025-09-19T10:33:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:35: 🗑️ Deleted old log file: bot-2025-09-19T05-03-00-451Z.log
2025-09-19T10:33:35: 📝 Enhanced Logger initialized
2025-09-19T10:33:35: 📁 Loaded statistics from file
2025-09-19T10:33:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:35: 🧹 Removed stale process lock
2025-09-19T10:33:35: 🔒 Process lock acquired (PID: 3052)
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3052
}
2025-09-19T10:33:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258215740, processId: 3052 },
  timestamp: 1758258215854
}
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258215740, willExpireAt: 1758258455740 },
  timestamp: 1758258215854
}
2025-09-19T10:33:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:35: 📋 Message rules loaded: 8 types
2025-09-19T10:33:35: ℹ️ [10:33:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:36: [INFO] WhatsApp client initialized
2025-09-19T10:33:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:38: 📝 Loaded 12 template types
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258218855,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6968,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:38: ⏰ 4-minute startup delay active
2025-09-19T10:33:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:38: [INFO] Using PQueue for job processing
2025-09-19T10:33:38: [INFO] Memory management setup completed
2025-09-19T10:33:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:38: [INFO] Checking process locks...
2025-09-19T10:33:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:38: [INFO] Process locks acquired successfully
2025-09-19T10:33:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:38: [INFO] Logs directory created
2025-09-19T10:33:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:38: [10:33:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:38: [10:33:38 am] ✅ Google Sheets API initialized
2025-09-19T10:33:38: [INFO] Google Sheets helper initialized
2025-09-19T10:33:38: 🗑️ Deleted old log file: bot-2025-09-19T05-03-04-218Z.log
2025-09-19T10:33:38: 📝 Enhanced Logger initialized
2025-09-19T10:33:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:38: 📁 Loaded statistics from file
2025-09-19T10:33:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:38: 🧹 Removed stale process lock
2025-09-19T10:33:38: 🔒 Process lock acquired (PID: 6968)
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6968
}
2025-09-19T10:33:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258218855, processId: 6968 },
  timestamp: 1758258218982
}
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258218855, willExpireAt: 1758258458855 },
  timestamp: 1758258218983
}
2025-09-19T10:33:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:38: 📋 Message rules loaded: 8 types
2025-09-19T10:33:38: ℹ️ [10:33:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:39: [INFO] WhatsApp client initialized
2025-09-19T10:33:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:41: 📝 Loaded 12 template types
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258221749,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3100,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:41: ⏰ 4-minute startup delay active
2025-09-19T10:33:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:41: [INFO] Using PQueue for job processing
2025-09-19T10:33:41: [INFO] Memory management setup completed
2025-09-19T10:33:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:41: [INFO] Checking process locks...
2025-09-19T10:33:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:41: [INFO] Process locks acquired successfully
2025-09-19T10:33:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:41: [INFO] Logs directory created
2025-09-19T10:33:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:41: [10:33:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:41: [10:33:41 am] ✅ Google Sheets API initialized
2025-09-19T10:33:41: [INFO] Google Sheets helper initialized
2025-09-19T10:33:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:41: 🗑️ Deleted old log file: bot-2025-09-19T05-03-07-300Z.log
2025-09-19T10:33:41: 📝 Enhanced Logger initialized
2025-09-19T10:33:41: 📁 Loaded statistics from file
2025-09-19T10:33:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:41: 🧹 Removed stale process lock
2025-09-19T10:33:41: 🔒 Process lock acquired (PID: 3100)
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3100
}
2025-09-19T10:33:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258221749, processId: 3100 },
  timestamp: 1758258221898
}
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258221749, willExpireAt: 1758258461749 },
  timestamp: 1758258221899
}
2025-09-19T10:33:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:41: 📋 Message rules loaded: 8 types
2025-09-19T10:33:41: ℹ️ [10:33:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 153,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:42: [INFO] WhatsApp client initialized
2025-09-19T10:33:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:44: 📝 Loaded 12 template types
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258224623,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11436,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:44: ⏰ 4-minute startup delay active
2025-09-19T10:33:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:44: [INFO] Using PQueue for job processing
2025-09-19T10:33:44: [INFO] Memory management setup completed
2025-09-19T10:33:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:44: [INFO] Checking process locks...
2025-09-19T10:33:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:44: [INFO] Process locks acquired successfully
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:44: [INFO] Logs directory created
2025-09-19T10:33:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:44: [10:33:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:44: [10:33:44 am] ✅ Google Sheets API initialized
2025-09-19T10:33:44: [INFO] Google Sheets helper initialized
2025-09-19T10:33:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:44: 🗑️ Deleted old log file: bot-2025-09-19T05-03-10-683Z.log
2025-09-19T10:33:44: 📝 Enhanced Logger initialized
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:44: 📁 Loaded statistics from file
2025-09-19T10:33:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:44: 🧹 Removed stale process lock
2025-09-19T10:33:44: 🔒 Process lock acquired (PID: 11436)
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11436
}
2025-09-19T10:33:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258224623, processId: 11436 },
  timestamp: 1758258224752
}
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258224623, willExpireAt: 1758258464623 },
  timestamp: 1758258224753
}
2025-09-19T10:33:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:44: 📋 Message rules loaded: 8 types
2025-09-19T10:33:44: ℹ️ [10:33:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:46: [INFO] WhatsApp client initialized
2025-09-19T10:33:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:48: 📝 Loaded 12 template types
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258228415,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8984,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:48: ⏰ 4-minute startup delay active
2025-09-19T10:33:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:48: [INFO] Using PQueue for job processing
2025-09-19T10:33:48: [INFO] Memory management setup completed
2025-09-19T10:33:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:48: [INFO] Checking process locks...
2025-09-19T10:33:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:48: [INFO] Process locks acquired successfully
2025-09-19T10:33:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:48: [INFO] Logs directory created
2025-09-19T10:33:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:48: [10:33:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:48: [10:33:48 am] ✅ Google Sheets API initialized
2025-09-19T10:33:48: [INFO] Google Sheets helper initialized
2025-09-19T10:33:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:48: 🗑️ Deleted old log file: bot-2025-09-19T05-03-13-649Z.log
2025-09-19T10:33:48: 📝 Enhanced Logger initialized
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:48: 📁 Loaded statistics from file
2025-09-19T10:33:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:48: 🧹 Removed stale process lock
2025-09-19T10:33:48: 🔒 Process lock acquired (PID: 8984)
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8984
}
2025-09-19T10:33:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258228415, processId: 8984 },
  timestamp: 1758258228528
}
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258228415, willExpireAt: 1758258468415 },
  timestamp: 1758258228528
}
2025-09-19T10:33:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:48: 📋 Message rules loaded: 8 types
2025-09-19T10:33:48: ℹ️ [10:33:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:49: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:51: 📝 Loaded 12 template types
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258231203,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1320,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:51: ⏰ 4-minute startup delay active
2025-09-19T10:33:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:51: [INFO] Using PQueue for job processing
2025-09-19T10:33:51: [INFO] Memory management setup completed
2025-09-19T10:33:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:51: [INFO] Checking process locks...
2025-09-19T10:33:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:51: [INFO] Process locks acquired successfully
2025-09-19T10:33:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:51: [INFO] Logs directory created
2025-09-19T10:33:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:51: [10:33:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:51: [10:33:51 am] ✅ Google Sheets API initialized
2025-09-19T10:33:51: [INFO] Google Sheets helper initialized
2025-09-19T10:33:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:51: 🗑️ Deleted old log file: bot-2025-09-19T05-03-16-693Z.log
2025-09-19T10:33:51: 📝 Enhanced Logger initialized
2025-09-19T10:33:51: 📁 Loaded statistics from file
2025-09-19T10:33:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:51: 🧹 Removed stale process lock
2025-09-19T10:33:51: 🔒 Process lock acquired (PID: 1320)
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1320
}
2025-09-19T10:33:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258231203, processId: 1320 },
  timestamp: 1758258231338
}
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258231203, willExpireAt: 1758258471203 },
  timestamp: 1758258231338
}
2025-09-19T10:33:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:51: 📋 Message rules loaded: 8 types
2025-09-19T10:33:51: ℹ️ [10:33:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:52: [INFO] WhatsApp client initialized
2025-09-19T10:33:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:54: 📝 Loaded 12 template types
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258234618,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18336,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:54: ⏰ 4-minute startup delay active
2025-09-19T10:33:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:54: [INFO] Using PQueue for job processing
2025-09-19T10:33:54: [INFO] Memory management setup completed
2025-09-19T10:33:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:54: [INFO] Checking process locks...
2025-09-19T10:33:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:54: [INFO] Process locks acquired successfully
2025-09-19T10:33:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:54: [INFO] Logs directory created
2025-09-19T10:33:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:54: [10:33:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:54: [10:33:54 am] ✅ Google Sheets API initialized
2025-09-19T10:33:54: [INFO] Google Sheets helper initialized
2025-09-19T10:33:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:54: 🗑️ Deleted old log file: bot-2025-09-19T05-03-19-780Z.log
2025-09-19T10:33:54: 📝 Enhanced Logger initialized
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:54: 📁 Loaded statistics from file
2025-09-19T10:33:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:54: 🧹 Removed stale process lock
2025-09-19T10:33:54: 🔒 Process lock acquired (PID: 18336)
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18336
}
2025-09-19T10:33:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258234618, willExpireAt: 1758258474618 },
  timestamp: 1758258234748
}
2025-09-19T10:33:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:54: 📋 Message rules loaded: 8 types
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258234618, processId: 18336 },
  timestamp: 1758258234747
}
2025-09-19T10:33:54: ℹ️ [10:33:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:56: [INFO] WhatsApp client initialized
2025-09-19T10:33:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:33:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:33:57: 📝 Loaded 12 template types
2025-09-19T10:33:57: ℹ️ [10:33:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258237927,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16312,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:33:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:33:57: ⏰ 4-minute startup delay active
2025-09-19T10:33:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:33:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:33:57: [INFO] Using PQueue for job processing
2025-09-19T10:33:57: [INFO] Memory management setup completed
2025-09-19T10:33:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:33:57: [INFO] Checking process locks...
2025-09-19T10:33:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:33:57: ℹ️ [10:33:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:33:57: [INFO] Process locks acquired successfully
2025-09-19T10:33:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:33:57: [INFO] Logs directory created
2025-09-19T10:33:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:33:57: [10:33:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:33:57: [10:33:57 am] ✅ Google Sheets API initialized
2025-09-19T10:33:57: [INFO] Google Sheets helper initialized
2025-09-19T10:33:58: 📁 Loaded 0 message hashes from file
2025-09-19T10:33:58: ℹ️ [10:33:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:33:58: 🗑️ Deleted old log file: bot-2025-09-19T05-03-23-218Z.log
2025-09-19T10:33:58: 📝 Enhanced Logger initialized
2025-09-19T10:33:58: 📁 Loaded statistics from file
2025-09-19T10:33:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:33:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:33:58: 🧹 Removed stale process lock
2025-09-19T10:33:58: 🔒 Process lock acquired (PID: 16312)
2025-09-19T10:33:58: ℹ️ [10:33:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16312
}
2025-09-19T10:33:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:33:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:33:58: ℹ️ [10:33:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258237927, processId: 16312 },
  timestamp: 1758258238043
}
2025-09-19T10:33:58: ℹ️ [10:33:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258237927, willExpireAt: 1758258477927 },
  timestamp: 1758258238043
}
2025-09-19T10:33:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:33:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:33:58: 📋 Message rules loaded: 8 types
2025-09-19T10:33:58: ℹ️ [10:33:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:33:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:33:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:33:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:33:59: [INFO] WhatsApp client initialized
2025-09-19T10:34:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:00: 📝 Loaded 12 template types
2025-09-19T10:34:00: ℹ️ [10:34:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258240915,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3884,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:00: ⏰ 4-minute startup delay active
2025-09-19T10:34:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:00: [INFO] Using PQueue for job processing
2025-09-19T10:34:00: [INFO] Memory management setup completed
2025-09-19T10:34:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:00: [INFO] Checking process locks...
2025-09-19T10:34:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:00: ℹ️ [10:34:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:00: [INFO] Process locks acquired successfully
2025-09-19T10:34:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:00: [INFO] Logs directory created
2025-09-19T10:34:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:00: [10:34:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:00: [10:34:00 am] ✅ Google Sheets API initialized
2025-09-19T10:34:00: [INFO] Google Sheets helper initialized
2025-09-19T10:34:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:00: ℹ️ [10:34:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:01: 🗑️ Deleted old log file: bot-2025-09-19T05-03-26-444Z.log
2025-09-19T10:34:01: 📝 Enhanced Logger initialized
2025-09-19T10:34:01: 📁 Loaded statistics from file
2025-09-19T10:34:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:01: 🧹 Removed stale process lock
2025-09-19T10:34:01: 🔒 Process lock acquired (PID: 3884)
2025-09-19T10:34:01: ℹ️ [10:34:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3884
}
2025-09-19T10:34:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:01: ℹ️ [10:34:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258240915, willExpireAt: 1758258480915 },
  timestamp: 1758258241045
}
2025-09-19T10:34:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:01: 📋 Message rules loaded: 8 types
2025-09-19T10:34:01: ℹ️ [10:34:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258240915, processId: 3884 },
  timestamp: 1758258241045
}
2025-09-19T10:34:01: ℹ️ [10:34:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:01: [INFO] WhatsApp client initialized
2025-09-19T10:34:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:03: 📝 Loaded 12 template types
2025-09-19T10:34:03: ℹ️ [10:34:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258243874,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6856,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:03: ⏰ 4-minute startup delay active
2025-09-19T10:34:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:03: [INFO] Using PQueue for job processing
2025-09-19T10:34:03: [INFO] Memory management setup completed
2025-09-19T10:34:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:03: [INFO] Checking process locks...
2025-09-19T10:34:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:03: ℹ️ [10:34:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:03: [INFO] Process locks acquired successfully
2025-09-19T10:34:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:03: [INFO] Logs directory created
2025-09-19T10:34:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:03: [10:34:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:03: [10:34:03 am] ✅ Google Sheets API initialized
2025-09-19T10:34:03: [INFO] Google Sheets helper initialized
2025-09-19T10:34:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:03: ℹ️ [10:34:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:03: 🗑️ Deleted old log file: bot-2025-09-19T05-03-29-546Z.log
2025-09-19T10:34:03: 📝 Enhanced Logger initialized
2025-09-19T10:34:03: 📁 Loaded statistics from file
2025-09-19T10:34:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:03: 🧹 Removed stale process lock
2025-09-19T10:34:03: 🔒 Process lock acquired (PID: 6856)
2025-09-19T10:34:04: ℹ️ [10:34:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6856
}
2025-09-19T10:34:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:04: ℹ️ [10:34:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258243874, willExpireAt: 1758258483874 },
  timestamp: 1758258244003
}
2025-09-19T10:34:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:04: 📋 Message rules loaded: 8 types
2025-09-19T10:34:04: ℹ️ [10:34:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258243874, processId: 6856 },
  timestamp: 1758258244002
}
2025-09-19T10:34:04: ℹ️ [10:34:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:05: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:05: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:05: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:05: [INFO] WhatsApp client initialized
2025-09-19T10:34:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:07: 📝 Loaded 12 template types
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258247011,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15336,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:07: ⏰ 4-minute startup delay active
2025-09-19T10:34:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:07: [INFO] Using PQueue for job processing
2025-09-19T10:34:07: [INFO] Memory management setup completed
2025-09-19T10:34:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:07: [INFO] Checking process locks...
2025-09-19T10:34:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:07: [INFO] Process locks acquired successfully
2025-09-19T10:34:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:07: [INFO] Logs directory created
2025-09-19T10:34:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:07: [10:34:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:07: [10:34:07 am] ✅ Google Sheets API initialized
2025-09-19T10:34:07: [INFO] Google Sheets helper initialized
2025-09-19T10:34:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:07: 🗑️ Deleted old log file: bot-2025-09-19T05-03-32-465Z.log
2025-09-19T10:34:07: 📝 Enhanced Logger initialized
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:07: 📁 Loaded statistics from file
2025-09-19T10:34:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:07: 🧹 Removed stale process lock
2025-09-19T10:34:07: 🔒 Process lock acquired (PID: 15336)
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15336
}
2025-09-19T10:34:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258247011, processId: 15336 },
  timestamp: 1758258247119
}
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258247011, willExpireAt: 1758258487011 },
  timestamp: 1758258247119
}
2025-09-19T10:34:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:07: 📋 Message rules loaded: 8 types
2025-09-19T10:34:07: ℹ️ [10:34:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:08: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:08: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:08: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:08: [INFO] WhatsApp client initialized
2025-09-19T10:34:10: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:10: 📝 Loaded 12 template types
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258250359,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7404,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:10: ⏰ 4-minute startup delay active
2025-09-19T10:34:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:10: [INFO] Using PQueue for job processing
2025-09-19T10:34:10: [INFO] Memory management setup completed
2025-09-19T10:34:10: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:10: [INFO] Checking process locks...
2025-09-19T10:34:10: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:10: [INFO] Process locks acquired successfully
2025-09-19T10:34:10: [INFO] Logs directory created
2025-09-19T10:34:10: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:10: [10:34:10 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:10: [10:34:10 am] ✅ Google Sheets API initialized
2025-09-19T10:34:10: [INFO] Google Sheets helper initialized
2025-09-19T10:34:10: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:10: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:10: 🗑️ Deleted old log file: bot-2025-09-19T05-03-35-773Z.log
2025-09-19T10:34:10: 📝 Enhanced Logger initialized
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:10: 📁 Loaded statistics from file
2025-09-19T10:34:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:10: 🧹 Removed stale process lock
2025-09-19T10:34:10: 🔒 Process lock acquired (PID: 7404)
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7404
}
2025-09-19T10:34:10: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258250359, processId: 7404 },
  timestamp: 1758258250478
}
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258250359, willExpireAt: 1758258490359 },
  timestamp: 1758258250478
}
2025-09-19T10:34:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:10: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:10: 📋 Message rules loaded: 8 types
2025-09-19T10:34:10: ℹ️ [10:34:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:11: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:11: [INFO] WhatsApp client initialized
2025-09-19T10:34:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:13: 📝 Loaded 12 template types
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258253315,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17872,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:13: ⏰ 4-minute startup delay active
2025-09-19T10:34:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:13: [INFO] Using PQueue for job processing
2025-09-19T10:34:13: [INFO] Memory management setup completed
2025-09-19T10:34:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:13: [INFO] Checking process locks...
2025-09-19T10:34:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:13: [INFO] Process locks acquired successfully
2025-09-19T10:34:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:13: [INFO] Logs directory created
2025-09-19T10:34:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:13: [10:34:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:13: [10:34:13 am] ✅ Google Sheets API initialized
2025-09-19T10:34:13: [INFO] Google Sheets helper initialized
2025-09-19T10:34:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:13: 🗑️ Deleted old log file: bot-2025-09-19T05-03-38-898Z.log
2025-09-19T10:34:13: 📝 Enhanced Logger initialized
2025-09-19T10:34:13: 📁 Loaded statistics from file
2025-09-19T10:34:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:13: 🧹 Removed stale process lock
2025-09-19T10:34:13: 🔒 Process lock acquired (PID: 17872)
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17872
}
2025-09-19T10:34:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258253315, processId: 17872 },
  timestamp: 1758258253434
}
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258253315, willExpireAt: 1758258493315 },
  timestamp: 1758258253434
}
2025-09-19T10:34:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:13: 📋 Message rules loaded: 8 types
2025-09-19T10:34:13: ℹ️ [10:34:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:14: [INFO] WhatsApp client initialized
2025-09-19T10:34:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:16: 📝 Loaded 12 template types
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258256429,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3244,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:16: ⏰ 4-minute startup delay active
2025-09-19T10:34:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:16: [INFO] Using PQueue for job processing
2025-09-19T10:34:16: [INFO] Memory management setup completed
2025-09-19T10:34:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:16: [INFO] Checking process locks...
2025-09-19T10:34:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:16: [INFO] Process locks acquired successfully
2025-09-19T10:34:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:16: [INFO] Logs directory created
2025-09-19T10:34:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:16: [10:34:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:16: [10:34:16 am] ✅ Google Sheets API initialized
2025-09-19T10:34:16: [INFO] Google Sheets helper initialized
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:16: 🗑️ Deleted old log file: bot-2025-09-19T05-03-41-800Z.log
2025-09-19T10:34:16: 📝 Enhanced Logger initialized
2025-09-19T10:34:16: 📁 Loaded statistics from file
2025-09-19T10:34:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:16: 🧹 Removed stale process lock
2025-09-19T10:34:16: 🔒 Process lock acquired (PID: 3244)
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3244
}
2025-09-19T10:34:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258256429, processId: 3244 },
  timestamp: 1758258256575
}
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258256429, willExpireAt: 1758258496429 },
  timestamp: 1758258256576
}
2025-09-19T10:34:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:16: 📋 Message rules loaded: 8 types
2025-09-19T10:34:16: ℹ️ [10:34:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 150,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:17: [INFO] WhatsApp client initialized
2025-09-19T10:34:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:19: 📝 Loaded 12 template types
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258259778,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7352,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:19: ⏰ 4-minute startup delay active
2025-09-19T10:34:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:19: [INFO] Using PQueue for job processing
2025-09-19T10:34:19: [INFO] Memory management setup completed
2025-09-19T10:34:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:19: [INFO] Checking process locks...
2025-09-19T10:34:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:19: [INFO] Process locks acquired successfully
2025-09-19T10:34:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:19: [INFO] Logs directory created
2025-09-19T10:34:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:19: [10:34:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:19: [10:34:19 am] ✅ Google Sheets API initialized
2025-09-19T10:34:19: [INFO] Google Sheets helper initialized
2025-09-19T10:34:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:19: 🗑️ Deleted old log file: bot-2025-09-19T05-03-44-660Z.log
2025-09-19T10:34:19: 📝 Enhanced Logger initialized
2025-09-19T10:34:19: 📁 Loaded statistics from file
2025-09-19T10:34:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:19: 🧹 Removed stale process lock
2025-09-19T10:34:19: 🔒 Process lock acquired (PID: 7352)
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7352
}
2025-09-19T10:34:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258259778, processId: 7352 },
  timestamp: 1758258259897
}
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258259778, willExpireAt: 1758258499778 },
  timestamp: 1758258259897
}
2025-09-19T10:34:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:19: 📋 Message rules loaded: 8 types
2025-09-19T10:34:19: ℹ️ [10:34:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:21: [INFO] WhatsApp client initialized
2025-09-19T10:34:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:23: 📝 Loaded 12 template types
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258263541,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11568,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:23: ⏰ 4-minute startup delay active
2025-09-19T10:34:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:23: [INFO] Using PQueue for job processing
2025-09-19T10:34:23: [INFO] Memory management setup completed
2025-09-19T10:34:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:23: [INFO] Checking process locks...
2025-09-19T10:34:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:23: [INFO] Process locks acquired successfully
2025-09-19T10:34:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:23: [INFO] Logs directory created
2025-09-19T10:34:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:23: [10:34:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:23: [10:34:23 am] ✅ Google Sheets API initialized
2025-09-19T10:34:23: [INFO] Google Sheets helper initialized
2025-09-19T10:34:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:23: 🗑️ Deleted old log file: bot-2025-09-19T05-03-48-443Z.log
2025-09-19T10:34:23: 📝 Enhanced Logger initialized
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:23: 📁 Loaded statistics from file
2025-09-19T10:34:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:23: 🧹 Removed stale process lock
2025-09-19T10:34:23: 🔒 Process lock acquired (PID: 11568)
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11568
}
2025-09-19T10:34:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258263541, processId: 11568 },
  timestamp: 1758258263713
}
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258263541, willExpireAt: 1758258503541 },
  timestamp: 1758258263714
}
2025-09-19T10:34:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:23: 📋 Message rules loaded: 8 types
2025-09-19T10:34:23: ℹ️ [10:34:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 193,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:24: [INFO] WhatsApp client initialized
2025-09-19T10:34:26: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:26: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:26: 📝 Loaded 12 template types
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258266596,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9376,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:26: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:26: ⏰ 4-minute startup delay active
2025-09-19T10:34:26: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:26: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:26: [INFO] Using PQueue for job processing
2025-09-19T10:34:26: [INFO] Memory management setup completed
2025-09-19T10:34:26: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:26: [INFO] Checking process locks...
2025-09-19T10:34:26: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:26: [INFO] Process locks acquired successfully
2025-09-19T10:34:26: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:26: [INFO] Logs directory created
2025-09-19T10:34:26: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:26: [10:34:26 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:26: [10:34:26 am] ✅ Google Sheets API initialized
2025-09-19T10:34:26: [INFO] Google Sheets helper initialized
2025-09-19T10:34:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:26: 🗑️ Deleted old log file: bot-2025-09-19T05-03-51-238Z.log
2025-09-19T10:34:26: 📝 Enhanced Logger initialized
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:26: 📁 Loaded statistics from file
2025-09-19T10:34:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:26: 🧹 Removed stale process lock
2025-09-19T10:34:26: 🔒 Process lock acquired (PID: 9376)
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9376
}
2025-09-19T10:34:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258266596, willExpireAt: 1758258506596 },
  timestamp: 1758258266729
}
2025-09-19T10:34:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:26: 📋 Message rules loaded: 8 types
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258266596, processId: 9376 },
  timestamp: 1758258266729
}
2025-09-19T10:34:26: ℹ️ [10:34:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 135,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:28: [INFO] WhatsApp client initialized
2025-09-19T10:34:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:30: 📝 Loaded 12 template types
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258270093,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2880,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:30: ⏰ 4-minute startup delay active
2025-09-19T10:34:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:30: [INFO] Using PQueue for job processing
2025-09-19T10:34:30: [INFO] Memory management setup completed
2025-09-19T10:34:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:30: [INFO] Checking process locks...
2025-09-19T10:34:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:30: [INFO] Process locks acquired successfully
2025-09-19T10:34:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:30: [INFO] Logs directory created
2025-09-19T10:34:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:30: [10:34:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:30: [10:34:30 am] ✅ Google Sheets API initialized
2025-09-19T10:34:30: [INFO] Google Sheets helper initialized
2025-09-19T10:34:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:30: 🗑️ Deleted old log file: bot-2025-09-19T05-03-54-654Z.log
2025-09-19T10:34:30: 📝 Enhanced Logger initialized
2025-09-19T10:34:30: 📁 Loaded statistics from file
2025-09-19T10:34:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:30: 🧹 Removed stale process lock
2025-09-19T10:34:30: 🔒 Process lock acquired (PID: 2880)
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2880
}
2025-09-19T10:34:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258270093, processId: 2880 },
  timestamp: 1758258270230
}
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258270093, willExpireAt: 1758258510093 },
  timestamp: 1758258270231
}
2025-09-19T10:34:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:30: 📋 Message rules loaded: 8 types
2025-09-19T10:34:30: ℹ️ [10:34:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:31: [INFO] WhatsApp client initialized
2025-09-19T10:34:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:33: 📝 Loaded 12 template types
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258273041,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2548,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:33: ⏰ 4-minute startup delay active
2025-09-19T10:34:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:33: [INFO] Using PQueue for job processing
2025-09-19T10:34:33: [INFO] Memory management setup completed
2025-09-19T10:34:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:33: [INFO] Checking process locks...
2025-09-19T10:34:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:33: [INFO] Process locks acquired successfully
2025-09-19T10:34:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:33: [INFO] Logs directory created
2025-09-19T10:34:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:33: [10:34:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:33: [10:34:33 am] ✅ Google Sheets API initialized
2025-09-19T10:34:33: [INFO] Google Sheets helper initialized
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:33: 🗑️ Deleted old log file: bot-2025-09-19T05-03-57-958Z.log
2025-09-19T10:34:33: 📝 Enhanced Logger initialized
2025-09-19T10:34:33: 📁 Loaded statistics from file
2025-09-19T10:34:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:33: 🧹 Removed stale process lock
2025-09-19T10:34:33: 🔒 Process lock acquired (PID: 2548)
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2548
}
2025-09-19T10:34:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258273041, processId: 2548 },
  timestamp: 1758258273180
}
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258273041, willExpireAt: 1758258513041 },
  timestamp: 1758258273180
}
2025-09-19T10:34:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:33: 📋 Message rules loaded: 8 types
2025-09-19T10:34:33: ℹ️ [10:34:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 142,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:34: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:34: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:34: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:34: [INFO] WhatsApp client initialized
2025-09-19T10:34:36: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:36: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:36: 📝 Loaded 12 template types
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258276027,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14508,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:36: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:36: ⏰ 4-minute startup delay active
2025-09-19T10:34:36: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:36: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:36: [INFO] Using PQueue for job processing
2025-09-19T10:34:36: [INFO] Memory management setup completed
2025-09-19T10:34:36: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:36: [INFO] Checking process locks...
2025-09-19T10:34:36: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:36: [INFO] Process locks acquired successfully
2025-09-19T10:34:36: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:36: [INFO] Logs directory created
2025-09-19T10:34:36: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:36: [10:34:36 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:36: [10:34:36 am] ✅ Google Sheets API initialized
2025-09-19T10:34:36: [INFO] Google Sheets helper initialized
2025-09-19T10:34:36: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:36: 📁 Loaded statistics from file
2025-09-19T10:34:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:36: 🗑️ Deleted old log file: bot-2025-09-19T05-04-00-949Z.log
2025-09-19T10:34:36: 📝 Enhanced Logger initialized
2025-09-19T10:34:36: 🧹 Removed stale process lock
2025-09-19T10:34:36: 🔒 Process lock acquired (PID: 14508)
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14508
}
2025-09-19T10:34:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258276027, processId: 14508 },
  timestamp: 1758258276146
}
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258276027, willExpireAt: 1758258516027 },
  timestamp: 1758258276146
}
2025-09-19T10:34:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:36: 📋 Message rules loaded: 8 types
2025-09-19T10:34:36: ℹ️ [10:34:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:37: [INFO] WhatsApp client initialized
2025-09-19T10:34:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:39: 📝 Loaded 12 template types
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258279018,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16764,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:39: ⏰ 4-minute startup delay active
2025-09-19T10:34:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:39: [INFO] Using PQueue for job processing
2025-09-19T10:34:39: [INFO] Memory management setup completed
2025-09-19T10:34:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:39: [INFO] Checking process locks...
2025-09-19T10:34:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:39: [INFO] Process locks acquired successfully
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:39: [INFO] Logs directory created
2025-09-19T10:34:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:39: [10:34:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:39: [10:34:39 am] ✅ Google Sheets API initialized
2025-09-19T10:34:39: [INFO] Google Sheets helper initialized
2025-09-19T10:34:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:39: 🗑️ Deleted old log file: bot-2025-09-19T05-04-03-910Z.log
2025-09-19T10:34:39: 📝 Enhanced Logger initialized
2025-09-19T10:34:39: 📁 Loaded statistics from file
2025-09-19T10:34:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:39: 🧹 Removed stale process lock
2025-09-19T10:34:39: 🔒 Process lock acquired (PID: 16764)
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16764
}
2025-09-19T10:34:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258279018, willExpireAt: 1758258519018 },
  timestamp: 1758258279165
}
2025-09-19T10:34:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:39: 📋 Message rules loaded: 8 types
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258279018, processId: 16764 },
  timestamp: 1758258279165
}
2025-09-19T10:34:39: ℹ️ [10:34:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 149,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:39: [INFO] WhatsApp client initialized
2025-09-19T10:34:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:41: 📝 Loaded 12 template types
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258281852,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18396,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:41: ⏰ 4-minute startup delay active
2025-09-19T10:34:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:41: [INFO] Using PQueue for job processing
2025-09-19T10:34:41: [INFO] Memory management setup completed
2025-09-19T10:34:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:41: [INFO] Checking process locks...
2025-09-19T10:34:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:41: [INFO] Process locks acquired successfully
2025-09-19T10:34:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:41: [INFO] Logs directory created
2025-09-19T10:34:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:41: [10:34:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:41: [10:34:41 am] ✅ Google Sheets API initialized
2025-09-19T10:34:41: [INFO] Google Sheets helper initialized
2025-09-19T10:34:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:41: 🗑️ Deleted old log file: bot-2025-09-19T05-04-07-042Z.log
2025-09-19T10:34:41: 📝 Enhanced Logger initialized
2025-09-19T10:34:41: 📁 Loaded statistics from file
2025-09-19T10:34:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:41: 🧹 Removed stale process lock
2025-09-19T10:34:41: 🔒 Process lock acquired (PID: 18396)
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18396
}
2025-09-19T10:34:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258281852, processId: 18396 },
  timestamp: 1758258281991
}
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258281852, willExpireAt: 1758258521852 },
  timestamp: 1758258281991
}
2025-09-19T10:34:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:41: 📋 Message rules loaded: 8 types
2025-09-19T10:34:41: ℹ️ [10:34:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 143,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:42: [INFO] WhatsApp client initialized
2025-09-19T10:34:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:44: 📝 Loaded 12 template types
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258284776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4848,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:44: ⏰ 4-minute startup delay active
2025-09-19T10:34:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:44: [INFO] Using PQueue for job processing
2025-09-19T10:34:44: [INFO] Memory management setup completed
2025-09-19T10:34:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:44: [INFO] Checking process locks...
2025-09-19T10:34:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:44: [INFO] Process locks acquired successfully
2025-09-19T10:34:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:44: [INFO] Logs directory created
2025-09-19T10:34:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:44: [10:34:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:44: [10:34:44 am] ✅ Google Sheets API initialized
2025-09-19T10:34:44: [INFO] Google Sheets helper initialized
2025-09-19T10:34:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:44: 🗑️ Deleted old log file: bot-2025-09-19T05-04-10-395Z.log
2025-09-19T10:34:44: 📝 Enhanced Logger initialized
2025-09-19T10:34:44: 📁 Loaded statistics from file
2025-09-19T10:34:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:44: 🧹 Removed stale process lock
2025-09-19T10:34:44: 🔒 Process lock acquired (PID: 4848)
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4848
}
2025-09-19T10:34:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258284776, willExpireAt: 1758258524776 },
  timestamp: 1758258284896
}
2025-09-19T10:34:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:44: 📋 Message rules loaded: 8 types
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258284776, processId: 4848 },
  timestamp: 1758258284896
}
2025-09-19T10:34:44: ℹ️ [10:34:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:45: [INFO] WhatsApp client initialized
2025-09-19T10:34:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:47: 📝 Loaded 12 template types
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258287761,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15240,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:47: ⏰ 4-minute startup delay active
2025-09-19T10:34:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:47: [INFO] Using PQueue for job processing
2025-09-19T10:34:47: [INFO] Memory management setup completed
2025-09-19T10:34:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:47: [INFO] Checking process locks...
2025-09-19T10:34:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:47: [INFO] Process locks acquired successfully
2025-09-19T10:34:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:47: [INFO] Logs directory created
2025-09-19T10:34:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:47: [10:34:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:47: [10:34:47 am] ✅ Google Sheets API initialized
2025-09-19T10:34:47: [INFO] Google Sheets helper initialized
2025-09-19T10:34:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:47: 🗑️ Deleted old log file: bot-2025-09-19T05-04-13-349Z.log
2025-09-19T10:34:47: 📝 Enhanced Logger initialized
2025-09-19T10:34:47: 📁 Loaded statistics from file
2025-09-19T10:34:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:47: 🧹 Removed stale process lock
2025-09-19T10:34:47: 🔒 Process lock acquired (PID: 15240)
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15240
}
2025-09-19T10:34:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258287761, processId: 15240 },
  timestamp: 1758258287907
}
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258287761, willExpireAt: 1758258527761 },
  timestamp: 1758258287907
}
2025-09-19T10:34:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:47: 📋 Message rules loaded: 8 types
2025-09-19T10:34:47: ℹ️ [10:34:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:48: [INFO] WhatsApp client initialized
2025-09-19T10:34:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:50: 📝 Loaded 12 template types
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258290808,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9756,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:50: ⏰ 4-minute startup delay active
2025-09-19T10:34:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:50: [INFO] Using PQueue for job processing
2025-09-19T10:34:50: [INFO] Memory management setup completed
2025-09-19T10:34:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:50: [INFO] Checking process locks...
2025-09-19T10:34:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:50: [INFO] Process locks acquired successfully
2025-09-19T10:34:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:50: [INFO] Logs directory created
2025-09-19T10:34:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:50: [10:34:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:50: [10:34:50 am] ✅ Google Sheets API initialized
2025-09-19T10:34:50: [INFO] Google Sheets helper initialized
2025-09-19T10:34:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:50: 🗑️ Deleted old log file: bot-2025-09-19T05-04-16-465Z.log
2025-09-19T10:34:50: 📝 Enhanced Logger initialized
2025-09-19T10:34:50: 📁 Loaded statistics from file
2025-09-19T10:34:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:50: 🧹 Removed stale process lock
2025-09-19T10:34:50: 🔒 Process lock acquired (PID: 9756)
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9756
}
2025-09-19T10:34:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258290808, processId: 9756 },
  timestamp: 1758258290955
}
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258290808, willExpireAt: 1758258530808 },
  timestamp: 1758258290955
}
2025-09-19T10:34:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:50: 📋 Message rules loaded: 8 types
2025-09-19T10:34:50: ℹ️ [10:34:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 151,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:52: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:52: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:52: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:52: [INFO] WhatsApp client initialized
2025-09-19T10:34:54: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:54: 📝 Loaded 12 template types
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258294344,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 6840,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:54: ⏰ 4-minute startup delay active
2025-09-19T10:34:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:54: [INFO] Using PQueue for job processing
2025-09-19T10:34:54: [INFO] Memory management setup completed
2025-09-19T10:34:54: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:54: [INFO] Checking process locks...
2025-09-19T10:34:54: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:54: [INFO] Process locks acquired successfully
2025-09-19T10:34:54: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:54: [INFO] Logs directory created
2025-09-19T10:34:54: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:54: [10:34:54 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:54: [10:34:54 am] ✅ Google Sheets API initialized
2025-09-19T10:34:54: [INFO] Google Sheets helper initialized
2025-09-19T10:34:54: 🗑️ Deleted old log file: bot-2025-09-19T05-04-19-814Z.log
2025-09-19T10:34:54: 📝 Enhanced Logger initialized
2025-09-19T10:34:54: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:54: 📁 Loaded statistics from file
2025-09-19T10:34:54: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:54: 🧹 Removed stale process lock
2025-09-19T10:34:54: 🔒 Process lock acquired (PID: 6840)
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 6840
}
2025-09-19T10:34:54: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:54: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258294344, processId: 6840 },
  timestamp: 1758258294464
}
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258294344, willExpireAt: 1758258534344 },
  timestamp: 1758258294465
}
2025-09-19T10:34:54: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:54: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:54: 📋 Message rules loaded: 8 types
2025-09-19T10:34:54: ℹ️ [10:34:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:55: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:55: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:55: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:55: [INFO] WhatsApp client initialized
2025-09-19T10:34:57: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:34:57: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:34:57: 📝 Loaded 12 template types
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258297318,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8988,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:34:57: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:34:57: ⏰ 4-minute startup delay active
2025-09-19T10:34:57: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:34:57: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:34:57: [INFO] Using PQueue for job processing
2025-09-19T10:34:57: [INFO] Memory management setup completed
2025-09-19T10:34:57: [INFO] Starting WhatsApp Bot...
2025-09-19T10:34:57: [INFO] Checking process locks...
2025-09-19T10:34:57: 📁 Loaded 0 sent messages from file
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:34:57: [INFO] Process locks acquired successfully
2025-09-19T10:34:57: 📁 Loaded 0 customer histories from file
2025-09-19T10:34:57: [INFO] Logs directory created
2025-09-19T10:34:57: [INFO] Initializing Google Sheets helper...
2025-09-19T10:34:57: [10:34:57 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:34:57: [10:34:57 am] ✅ Google Sheets API initialized
2025-09-19T10:34:57: [INFO] Google Sheets helper initialized
2025-09-19T10:34:57: 📁 Loaded 0 message hashes from file
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:34:57: 🗑️ Deleted old log file: bot-2025-09-19T05-04-23-575Z.log
2025-09-19T10:34:57: 📝 Enhanced Logger initialized
2025-09-19T10:34:57: 📁 Loaded statistics from file
2025-09-19T10:34:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:34:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:34:57: 🧹 Removed stale process lock
2025-09-19T10:34:57: 🔒 Process lock acquired (PID: 8988)
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8988
}
2025-09-19T10:34:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:34:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258297318, processId: 8988 },
  timestamp: 1758258297454
}
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258297318, willExpireAt: 1758258537318 },
  timestamp: 1758258297454
}
2025-09-19T10:34:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:34:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:34:57: 📋 Message rules loaded: 8 types
2025-09-19T10:34:57: ℹ️ [10:34:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:34:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:34:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:34:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:34:58: [INFO] WhatsApp client initialized
2025-09-19T10:35:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:00: 📝 Loaded 12 template types
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258300264,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10788,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:00: ⏰ 4-minute startup delay active
2025-09-19T10:35:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:00: [INFO] Using PQueue for job processing
2025-09-19T10:35:00: [INFO] Memory management setup completed
2025-09-19T10:35:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:00: [INFO] Checking process locks...
2025-09-19T10:35:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:00: [INFO] Process locks acquired successfully
2025-09-19T10:35:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:00: [INFO] Logs directory created
2025-09-19T10:35:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:00: [10:35:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:00: [10:35:00 am] ✅ Google Sheets API initialized
2025-09-19T10:35:00: [INFO] Google Sheets helper initialized
2025-09-19T10:35:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:00: 🗑️ Deleted old log file: bot-2025-09-19T05-04-26-635Z.log
2025-09-19T10:35:00: 📝 Enhanced Logger initialized
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:00: 📁 Loaded statistics from file
2025-09-19T10:35:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:00: 🧹 Removed stale process lock
2025-09-19T10:35:00: 🔒 Process lock acquired (PID: 10788)
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10788
}
2025-09-19T10:35:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258300264, processId: 10788 },
  timestamp: 1758258300382
}
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258300264, willExpireAt: 1758258540264 },
  timestamp: 1758258300382
}
2025-09-19T10:35:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:00: 📋 Message rules loaded: 8 types
2025-09-19T10:35:00: ℹ️ [10:35:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:01: [INFO] WhatsApp client initialized
2025-09-19T10:35:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:03: 📝 Loaded 12 template types
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258303348,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16628,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:03: ⏰ 4-minute startup delay active
2025-09-19T10:35:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:03: [INFO] Using PQueue for job processing
2025-09-19T10:35:03: [INFO] Memory management setup completed
2025-09-19T10:35:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:03: [INFO] Checking process locks...
2025-09-19T10:35:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:03: [INFO] Process locks acquired successfully
2025-09-19T10:35:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:03: [INFO] Logs directory created
2025-09-19T10:35:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:03: [10:35:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:03: [10:35:03 am] ✅ Google Sheets API initialized
2025-09-19T10:35:03: [INFO] Google Sheets helper initialized
2025-09-19T10:35:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:03: 🗑️ Deleted old log file: bot-2025-09-19T05-04-30-132Z.log
2025-09-19T10:35:03: 📝 Enhanced Logger initialized
2025-09-19T10:35:03: 📁 Loaded statistics from file
2025-09-19T10:35:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:03: 🧹 Removed stale process lock
2025-09-19T10:35:03: 🔒 Process lock acquired (PID: 16628)
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16628
}
2025-09-19T10:35:03: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:03: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258303348, processId: 16628 },
  timestamp: 1758258303466
}
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258303348, willExpireAt: 1758258543348 },
  timestamp: 1758258303467
}
2025-09-19T10:35:03: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:03: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:03: 📋 Message rules loaded: 8 types
2025-09-19T10:35:03: ℹ️ [10:35:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:06: 📝 Loaded 12 template types
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258306570,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8868,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:06: ⏰ 4-minute startup delay active
2025-09-19T10:35:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:06: [INFO] Using PQueue for job processing
2025-09-19T10:35:06: [INFO] Memory management setup completed
2025-09-19T10:35:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:06: [INFO] Checking process locks...
2025-09-19T10:35:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:06: [INFO] Process locks acquired successfully
2025-09-19T10:35:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:06: [INFO] Logs directory created
2025-09-19T10:35:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:06: [10:35:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:06: [10:35:06 am] ✅ Google Sheets API initialized
2025-09-19T10:35:06: [INFO] Google Sheets helper initialized
2025-09-19T10:35:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:06: 🗑️ Deleted old log file: bot-2025-09-19T05-04-33-083Z.log
2025-09-19T10:35:06: 📝 Enhanced Logger initialized
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:06: 📁 Loaded statistics from file
2025-09-19T10:35:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:06: 🧹 Removed stale process lock
2025-09-19T10:35:06: 🔒 Process lock acquired (PID: 8868)
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8868
}
2025-09-19T10:35:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258306570, willExpireAt: 1758258546570 },
  timestamp: 1758258306695
}
2025-09-19T10:35:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:06: 📋 Message rules loaded: 8 types
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258306570, processId: 8868 },
  timestamp: 1758258306694
}
2025-09-19T10:35:06: ℹ️ [10:35:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:07: [INFO] WhatsApp client initialized
2025-09-19T10:35:09: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:09: 📝 Loaded 12 template types
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258309590,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5784,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:09: ⏰ 4-minute startup delay active
2025-09-19T10:35:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:09: [INFO] Using PQueue for job processing
2025-09-19T10:35:09: [INFO] Memory management setup completed
2025-09-19T10:35:09: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:09: [INFO] Checking process locks...
2025-09-19T10:35:09: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:09: [INFO] Process locks acquired successfully
2025-09-19T10:35:09: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:09: [INFO] Logs directory created
2025-09-19T10:35:09: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:09: [10:35:09 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:09: [10:35:09 am] ✅ Google Sheets API initialized
2025-09-19T10:35:09: [INFO] Google Sheets helper initialized
2025-09-19T10:35:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:09: 🗑️ Deleted old log file: bot-2025-09-19T05-04-36-060Z.log
2025-09-19T10:35:09: 📝 Enhanced Logger initialized
2025-09-19T10:35:09: 📁 Loaded statistics from file
2025-09-19T10:35:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:09: 🧹 Removed stale process lock
2025-09-19T10:35:09: 🔒 Process lock acquired (PID: 5784)
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5784
}
2025-09-19T10:35:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258309590, processId: 5784 },
  timestamp: 1758258309723
}
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258309590, willExpireAt: 1758258549590 },
  timestamp: 1758258309723
}
2025-09-19T10:35:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:09: 📋 Message rules loaded: 8 types
2025-09-19T10:35:09: ℹ️ [10:35:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 136,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:10: [INFO] WhatsApp client initialized
2025-09-19T10:35:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:12: 📝 Loaded 12 template types
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258312528,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10328,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:12: ⏰ 4-minute startup delay active
2025-09-19T10:35:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:12: [INFO] Using PQueue for job processing
2025-09-19T10:35:12: [INFO] Memory management setup completed
2025-09-19T10:35:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:12: [INFO] Checking process locks...
2025-09-19T10:35:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:12: [INFO] Process locks acquired successfully
2025-09-19T10:35:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:12: [INFO] Logs directory created
2025-09-19T10:35:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:12: [10:35:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:12: [10:35:12 am] ✅ Google Sheets API initialized
2025-09-19T10:35:12: [INFO] Google Sheets helper initialized
2025-09-19T10:35:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:12: 🗑️ Deleted old log file: bot-2025-09-19T05-04-39-063Z.log
2025-09-19T10:35:12: 📝 Enhanced Logger initialized
2025-09-19T10:35:12: 📁 Loaded statistics from file
2025-09-19T10:35:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:12: 🧹 Removed stale process lock
2025-09-19T10:35:12: 🔒 Process lock acquired (PID: 10328)
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10328
}
2025-09-19T10:35:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258312528, processId: 10328 },
  timestamp: 1758258312662
}
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258312528, willExpireAt: 1758258552528 },
  timestamp: 1758258312663
}
2025-09-19T10:35:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:12: 📋 Message rules loaded: 8 types
2025-09-19T10:35:12: ℹ️ [10:35:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:13: [INFO] WhatsApp client initialized
2025-09-19T10:35:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:15: 📝 Loaded 12 template types
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258315624,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17504,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:15: ⏰ 4-minute startup delay active
2025-09-19T10:35:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:15: [INFO] Using PQueue for job processing
2025-09-19T10:35:15: [INFO] Memory management setup completed
2025-09-19T10:35:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:15: [INFO] Checking process locks...
2025-09-19T10:35:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:15: [INFO] Process locks acquired successfully
2025-09-19T10:35:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:15: [INFO] Logs directory created
2025-09-19T10:35:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:15: [10:35:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:15: [10:35:15 am] ✅ Google Sheets API initialized
2025-09-19T10:35:15: [INFO] Google Sheets helper initialized
2025-09-19T10:35:15: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:15: 🗑️ Deleted old log file: bot-2025-09-19T05-04-41-891Z.log
2025-09-19T10:35:15: 📝 Enhanced Logger initialized
2025-09-19T10:35:15: 📁 Loaded statistics from file
2025-09-19T10:35:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:15: 🧹 Removed stale process lock
2025-09-19T10:35:15: 🔒 Process lock acquired (PID: 17504)
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17504
}
2025-09-19T10:35:15: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258315624, processId: 17504 },
  timestamp: 1758258315739
}
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258315624, willExpireAt: 1758258555624 },
  timestamp: 1758258315739
}
2025-09-19T10:35:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:15: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:15: 📋 Message rules loaded: 8 types
2025-09-19T10:35:15: ℹ️ [10:35:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:16: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:16: [INFO] WhatsApp client initialized
2025-09-19T10:35:18: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:18: 📝 Loaded 12 template types
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258318634,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4652,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:18: ⏰ 4-minute startup delay active
2025-09-19T10:35:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:18: [INFO] Using PQueue for job processing
2025-09-19T10:35:18: [INFO] Memory management setup completed
2025-09-19T10:35:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:18: [INFO] Checking process locks...
2025-09-19T10:35:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:18: [INFO] Process locks acquired successfully
2025-09-19T10:35:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:18: [INFO] Logs directory created
2025-09-19T10:35:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:18: [10:35:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:18: [10:35:18 am] ✅ Google Sheets API initialized
2025-09-19T10:35:18: [INFO] Google Sheets helper initialized
2025-09-19T10:35:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:18: 🗑️ Deleted old log file: bot-2025-09-19T05-04-44-810Z.log
2025-09-19T10:35:18: 📝 Enhanced Logger initialized
2025-09-19T10:35:18: 📁 Loaded statistics from file
2025-09-19T10:35:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:18: 🧹 Removed stale process lock
2025-09-19T10:35:18: 🔒 Process lock acquired (PID: 4652)
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4652
}
2025-09-19T10:35:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258318634, processId: 4652 },
  timestamp: 1758258318743
}
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258318634, willExpireAt: 1758258558634 },
  timestamp: 1758258318744
}
2025-09-19T10:35:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:18: 📋 Message rules loaded: 8 types
2025-09-19T10:35:18: ℹ️ [10:35:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:19: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:19: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:19: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:19: [INFO] WhatsApp client initialized
2025-09-19T10:35:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:21: 📝 Loaded 12 template types
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258321693,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14788,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:21: ⏰ 4-minute startup delay active
2025-09-19T10:35:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:21: [INFO] Using PQueue for job processing
2025-09-19T10:35:21: [INFO] Memory management setup completed
2025-09-19T10:35:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:21: [INFO] Checking process locks...
2025-09-19T10:35:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:21: [INFO] Process locks acquired successfully
2025-09-19T10:35:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:21: [INFO] Logs directory created
2025-09-19T10:35:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:21: [10:35:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:21: [10:35:21 am] ✅ Google Sheets API initialized
2025-09-19T10:35:21: [INFO] Google Sheets helper initialized
2025-09-19T10:35:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:21: 🗑️ Deleted old log file: bot-2025-09-19T05-04-47-799Z.log
2025-09-19T10:35:21: 📝 Enhanced Logger initialized
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:21: 📁 Loaded statistics from file
2025-09-19T10:35:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:21: 🧹 Removed stale process lock
2025-09-19T10:35:21: 🔒 Process lock acquired (PID: 14788)
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14788
}
2025-09-19T10:35:21: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258321693, willExpireAt: 1758258561693 },
  timestamp: 1758258321828
}
2025-09-19T10:35:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:21: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:21: 📋 Message rules loaded: 8 types
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258321693, processId: 14788 },
  timestamp: 1758258321827
}
2025-09-19T10:35:21: ℹ️ [10:35:21 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:22: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:22: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:22: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:22: [INFO] WhatsApp client initialized
2025-09-19T10:35:24: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:24: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:24: 📝 Loaded 12 template types
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258324561,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16656,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:24: ⏰ 4-minute startup delay active
2025-09-19T10:35:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:24: [INFO] Using PQueue for job processing
2025-09-19T10:35:24: [INFO] Memory management setup completed
2025-09-19T10:35:24: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:24: [INFO] Checking process locks...
2025-09-19T10:35:24: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:24: [INFO] Process locks acquired successfully
2025-09-19T10:35:24: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:24: [INFO] Logs directory created
2025-09-19T10:35:24: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:24: [10:35:24 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:24: [10:35:24 am] ✅ Google Sheets API initialized
2025-09-19T10:35:24: [INFO] Google Sheets helper initialized
2025-09-19T10:35:24: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:24: 🗑️ Deleted old log file: bot-2025-09-19T05-04-50-849Z.log
2025-09-19T10:35:24: 📝 Enhanced Logger initialized
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:24: 📁 Loaded statistics from file
2025-09-19T10:35:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:24: 🧹 Removed stale process lock
2025-09-19T10:35:24: 🔒 Process lock acquired (PID: 16656)
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16656
}
2025-09-19T10:35:24: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258324561, processId: 16656 },
  timestamp: 1758258324679
}
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258324561, willExpireAt: 1758258564561 },
  timestamp: 1758258324680
}
2025-09-19T10:35:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:24: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:24: 📋 Message rules loaded: 8 types
2025-09-19T10:35:24: ℹ️ [10:35:24 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:25: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:25: [INFO] WhatsApp client initialized
2025-09-19T10:35:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:27: 📝 Loaded 12 template types
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258327501,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18032,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:27: ⏰ 4-minute startup delay active
2025-09-19T10:35:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:27: [INFO] Using PQueue for job processing
2025-09-19T10:35:27: [INFO] Memory management setup completed
2025-09-19T10:35:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:27: [INFO] Checking process locks...
2025-09-19T10:35:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:27: [INFO] Process locks acquired successfully
2025-09-19T10:35:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:27: [INFO] Logs directory created
2025-09-19T10:35:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:27: [10:35:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:27: [10:35:27 am] ✅ Google Sheets API initialized
2025-09-19T10:35:27: [INFO] Google Sheets helper initialized
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:27: 🗑️ Deleted old log file: bot-2025-09-19T05-04-54-377Z.log
2025-09-19T10:35:27: 📝 Enhanced Logger initialized
2025-09-19T10:35:27: 📁 Loaded statistics from file
2025-09-19T10:35:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:27: 🧹 Removed stale process lock
2025-09-19T10:35:27: 🔒 Process lock acquired (PID: 18032)
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18032
}
2025-09-19T10:35:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258327501, processId: 18032 },
  timestamp: 1758258327617
}
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258327501, willExpireAt: 1758258567501 },
  timestamp: 1758258327618
}
2025-09-19T10:35:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:27: 📋 Message rules loaded: 8 types
2025-09-19T10:35:27: ℹ️ [10:35:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:28: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:28: [INFO] WhatsApp client initialized
2025-09-19T10:35:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:30: 📝 Loaded 12 template types
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258330377,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16948,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:30: ⏰ 4-minute startup delay active
2025-09-19T10:35:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:30: [INFO] Using PQueue for job processing
2025-09-19T10:35:30: [INFO] Memory management setup completed
2025-09-19T10:35:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:30: [INFO] Checking process locks...
2025-09-19T10:35:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:30: [INFO] Process locks acquired successfully
2025-09-19T10:35:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:30: [INFO] Logs directory created
2025-09-19T10:35:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:30: [10:35:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:30: [10:35:30 am] ✅ Google Sheets API initialized
2025-09-19T10:35:30: [INFO] Google Sheets helper initialized
2025-09-19T10:35:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:30: 🗑️ Deleted old log file: bot-2025-09-19T05-04-57-356Z.log
2025-09-19T10:35:30: 📝 Enhanced Logger initialized
2025-09-19T10:35:30: 📁 Loaded statistics from file
2025-09-19T10:35:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:30: 🧹 Removed stale process lock
2025-09-19T10:35:30: 🔒 Process lock acquired (PID: 16948)
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16948
}
2025-09-19T10:35:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258330377, processId: 16948 },
  timestamp: 1758258330505
}
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258330377, willExpireAt: 1758258570377 },
  timestamp: 1758258330505
}
2025-09-19T10:35:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:30: 📋 Message rules loaded: 8 types
2025-09-19T10:35:30: ℹ️ [10:35:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:31: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:31: [INFO] WhatsApp client initialized
2025-09-19T10:35:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:33: 📝 Loaded 12 template types
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258333262,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13864,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:33: ⏰ 4-minute startup delay active
2025-09-19T10:35:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:33: [INFO] Using PQueue for job processing
2025-09-19T10:35:33: [INFO] Memory management setup completed
2025-09-19T10:35:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:33: [INFO] Checking process locks...
2025-09-19T10:35:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:33: [INFO] Process locks acquired successfully
2025-09-19T10:35:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:33: [INFO] Logs directory created
2025-09-19T10:35:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:33: [10:35:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:33: [10:35:33 am] ✅ Google Sheets API initialized
2025-09-19T10:35:33: [INFO] Google Sheets helper initialized
2025-09-19T10:35:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:33: 🗑️ Deleted old log file: bot-2025-09-19T05-05-00-297Z.log
2025-09-19T10:35:33: 📝 Enhanced Logger initialized
2025-09-19T10:35:33: 📁 Loaded statistics from file
2025-09-19T10:35:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:33: 🧹 Removed stale process lock
2025-09-19T10:35:33: 🔒 Process lock acquired (PID: 13864)
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13864
}
2025-09-19T10:35:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258333262, willExpireAt: 1758258573262 },
  timestamp: 1758258333413
}
2025-09-19T10:35:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:33: 📋 Message rules loaded: 8 types
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258333262, processId: 13864 },
  timestamp: 1758258333413
}
2025-09-19T10:35:33: ℹ️ [10:35:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 156,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:34: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:34: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:34: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:34: [INFO] WhatsApp client initialized
2025-09-19T10:35:36: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:36: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:36: 📝 Loaded 12 template types
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258336278,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3456,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:36: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:36: ⏰ 4-minute startup delay active
2025-09-19T10:35:36: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:36: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:36: [INFO] Using PQueue for job processing
2025-09-19T10:35:36: [INFO] Memory management setup completed
2025-09-19T10:35:36: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:36: [INFO] Checking process locks...
2025-09-19T10:35:36: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:36: [INFO] Process locks acquired successfully
2025-09-19T10:35:36: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:36: [INFO] Logs directory created
2025-09-19T10:35:36: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:36: [10:35:36 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:36: [10:35:36 am] ✅ Google Sheets API initialized
2025-09-19T10:35:36: [INFO] Google Sheets helper initialized
2025-09-19T10:35:36: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:36: 🗑️ Deleted old log file: bot-2025-09-19T05-05-03-379Z.log
2025-09-19T10:35:36: 📝 Enhanced Logger initialized
2025-09-19T10:35:36: 📁 Loaded statistics from file
2025-09-19T10:35:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:36: 🧹 Removed stale process lock
2025-09-19T10:35:36: 🔒 Process lock acquired (PID: 3456)
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3456
}
2025-09-19T10:35:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258336278, willExpireAt: 1758258576278 },
  timestamp: 1758258336403
}
2025-09-19T10:35:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:36: 📋 Message rules loaded: 8 types
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258336278, processId: 3456 },
  timestamp: 1758258336403
}
2025-09-19T10:35:36: ℹ️ [10:35:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:35:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:35:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:35:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:35:37: [INFO] WhatsApp client initialized
2025-09-19T10:35:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:35:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:35:39: 📝 Loaded 12 template types
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258339763,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8412,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:35:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:35:39: ⏰ 4-minute startup delay active
2025-09-19T10:35:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:35:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:35:39: [INFO] Using PQueue for job processing
2025-09-19T10:35:39: [INFO] Memory management setup completed
2025-09-19T10:35:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:35:39: [INFO] Checking process locks...
2025-09-19T10:35:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:35:39: [INFO] Process locks acquired successfully
2025-09-19T10:35:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:35:39: [INFO] Logs directory created
2025-09-19T10:35:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:35:39: [10:35:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:35:39: [10:35:39 am] ✅ Google Sheets API initialized
2025-09-19T10:35:39: [INFO] Google Sheets helper initialized
2025-09-19T10:35:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:35:39: 🗑️ Deleted old log file: bot-2025-09-19T05-05-06-604Z.log
2025-09-19T10:35:39: 📝 Enhanced Logger initialized
2025-09-19T10:35:39: 📁 Loaded statistics from file
2025-09-19T10:35:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:35:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:35:39: 🧹 Removed stale process lock
2025-09-19T10:35:39: 🔒 Process lock acquired (PID: 8412)
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8412
}
2025-09-19T10:35:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:35:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258339763, processId: 8412 },
  timestamp: 1758258339875
}
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258339763, willExpireAt: 1758258579763 },
  timestamp: 1758258339875
}
2025-09-19T10:35:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:35:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:35:39: 📋 Message rules loaded: 8 types
2025-09-19T10:35:39: ℹ️ [10:35:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 114,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:06: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:06: [INFO] WhatsApp client initialized
2025-09-19T10:36:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:08: 📝 Loaded 12 template types
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258368594,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12220,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:08: ⏰ 4-minute startup delay active
2025-09-19T10:36:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:08: [INFO] Using PQueue for job processing
2025-09-19T10:36:08: [INFO] Memory management setup completed
2025-09-19T10:36:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:08: [INFO] Checking process locks...
2025-09-19T10:36:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:08: [INFO] Process locks acquired successfully
2025-09-19T10:36:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:08: [INFO] Logs directory created
2025-09-19T10:36:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:08: [10:36:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:08: [10:36:08 am] ✅ Google Sheets API initialized
2025-09-19T10:36:08: [INFO] Google Sheets helper initialized
2025-09-19T10:36:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:08: 📁 Loaded statistics from file
2025-09-19T10:36:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:08: 🗑️ Deleted old log file: bot-2025-09-19T05-05-09-625Z.log
2025-09-19T10:36:08: 📝 Enhanced Logger initialized
2025-09-19T10:36:08: 🧹 Removed stale process lock
2025-09-19T10:36:08: 🔒 Process lock acquired (PID: 12220)
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12220
}
2025-09-19T10:36:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258368594, processId: 12220 },
  timestamp: 1758258368711
}
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258368594, willExpireAt: 1758258608594 },
  timestamp: 1758258368711
}
2025-09-19T10:36:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:08: 📋 Message rules loaded: 8 types
2025-09-19T10:36:08: ℹ️ [10:36:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:09: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:09: [INFO] WhatsApp client initialized
2025-09-19T10:36:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:11: 📝 Loaded 12 template types
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258371195,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13272,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:11: ⏰ 4-minute startup delay active
2025-09-19T10:36:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:11: [INFO] Using PQueue for job processing
2025-09-19T10:36:11: [INFO] Memory management setup completed
2025-09-19T10:36:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:11: [INFO] Checking process locks...
2025-09-19T10:36:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:11: [INFO] Process locks acquired successfully
2025-09-19T10:36:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:11: [INFO] Logs directory created
2025-09-19T10:36:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:11: [10:36:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:11: [10:36:11 am] ✅ Google Sheets API initialized
2025-09-19T10:36:11: [INFO] Google Sheets helper initialized
2025-09-19T10:36:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:11: 🗑️ Deleted old log file: bot-2025-09-19T05-05-12-567Z.log
2025-09-19T10:36:11: 📝 Enhanced Logger initialized
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:11: 📁 Loaded statistics from file
2025-09-19T10:36:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:11: 🧹 Removed stale process lock
2025-09-19T10:36:11: 🔒 Process lock acquired (PID: 13272)
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13272
}
2025-09-19T10:36:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258371195, processId: 13272 },
  timestamp: 1758258371293
}
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258371195, willExpireAt: 1758258611195 },
  timestamp: 1758258371294
}
2025-09-19T10:36:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:11: 📋 Message rules loaded: 8 types
2025-09-19T10:36:11: ℹ️ [10:36:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 101,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:11: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:11: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:11: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:11: [INFO] WhatsApp client initialized
2025-09-19T10:36:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:13: 📝 Loaded 12 template types
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258373865,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2080,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:13: ⏰ 4-minute startup delay active
2025-09-19T10:36:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:13: [INFO] Using PQueue for job processing
2025-09-19T10:36:13: [INFO] Memory management setup completed
2025-09-19T10:36:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:13: [INFO] Checking process locks...
2025-09-19T10:36:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:13: [INFO] Process locks acquired successfully
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:13: [INFO] Logs directory created
2025-09-19T10:36:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:13: [10:36:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:13: [10:36:13 am] ✅ Google Sheets API initialized
2025-09-19T10:36:13: [INFO] Google Sheets helper initialized
2025-09-19T10:36:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:13: 🗑️ Deleted old log file: bot-2025-09-19T05-05-15-655Z.log
2025-09-19T10:36:13: 📝 Enhanced Logger initialized
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:13: 📁 Loaded statistics from file
2025-09-19T10:36:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:13: 🧹 Removed stale process lock
2025-09-19T10:36:13: 🔒 Process lock acquired (PID: 2080)
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2080
}
2025-09-19T10:36:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258373865, processId: 2080 },
  timestamp: 1758258373964
}
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258373865, willExpireAt: 1758258613865 },
  timestamp: 1758258373965
}
2025-09-19T10:36:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:13: 📋 Message rules loaded: 8 types
2025-09-19T10:36:13: ℹ️ [10:36:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:14: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:14: [INFO] WhatsApp client initialized
2025-09-19T10:36:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:16: 📝 Loaded 12 template types
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258376755,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2196,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:16: ⏰ 4-minute startup delay active
2025-09-19T10:36:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:16: [INFO] Using PQueue for job processing
2025-09-19T10:36:16: [INFO] Memory management setup completed
2025-09-19T10:36:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:16: [INFO] Checking process locks...
2025-09-19T10:36:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:16: [INFO] Process locks acquired successfully
2025-09-19T10:36:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:16: [INFO] Logs directory created
2025-09-19T10:36:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:16: [10:36:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:16: [10:36:16 am] ✅ Google Sheets API initialized
2025-09-19T10:36:16: [INFO] Google Sheets helper initialized
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:16: 🗑️ Deleted old log file: bot-2025-09-19T05-05-18-664Z.log
2025-09-19T10:36:16: 📝 Enhanced Logger initialized
2025-09-19T10:36:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:16: 📁 Loaded statistics from file
2025-09-19T10:36:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:16: 🧹 Removed stale process lock
2025-09-19T10:36:16: 🔒 Process lock acquired (PID: 2196)
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2196
}
2025-09-19T10:36:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258376755, processId: 2196 },
  timestamp: 1758258376870
}
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258376755, willExpireAt: 1758258616755 },
  timestamp: 1758258376870
}
2025-09-19T10:36:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:16: 📋 Message rules loaded: 8 types
2025-09-19T10:36:16: ℹ️ [10:36:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 118,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:17: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:17: [INFO] WhatsApp client initialized
2025-09-19T10:36:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:19: 📝 Loaded 12 template types
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258379477,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12156,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:19: ⏰ 4-minute startup delay active
2025-09-19T10:36:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:19: [INFO] Using PQueue for job processing
2025-09-19T10:36:19: [INFO] Memory management setup completed
2025-09-19T10:36:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:19: [INFO] Checking process locks...
2025-09-19T10:36:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:19: [INFO] Process locks acquired successfully
2025-09-19T10:36:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:19: [INFO] Logs directory created
2025-09-19T10:36:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:19: [10:36:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:19: [10:36:19 am] ✅ Google Sheets API initialized
2025-09-19T10:36:19: [INFO] Google Sheets helper initialized
2025-09-19T10:36:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:19: 🗑️ Deleted old log file: bot-2025-09-19T05-05-21-729Z.log
2025-09-19T10:36:19: 📝 Enhanced Logger initialized
2025-09-19T10:36:19: 📁 Loaded statistics from file
2025-09-19T10:36:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:19: 🧹 Removed stale process lock
2025-09-19T10:36:19: 🔒 Process lock acquired (PID: 12156)
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12156
}
2025-09-19T10:36:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258379477, willExpireAt: 1758258619477 },
  timestamp: 1758258379587
}
2025-09-19T10:36:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:19: 📋 Message rules loaded: 8 types
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258379477, processId: 12156 },
  timestamp: 1758258379587
}
2025-09-19T10:36:19: ℹ️ [10:36:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 113,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:20: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:20: [INFO] WhatsApp client initialized
2025-09-19T10:36:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:22: 📝 Loaded 12 template types
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258382257,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18132,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:22: ⏰ 4-minute startup delay active
2025-09-19T10:36:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:22: [INFO] Using PQueue for job processing
2025-09-19T10:36:22: [INFO] Memory management setup completed
2025-09-19T10:36:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:22: [INFO] Checking process locks...
2025-09-19T10:36:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:22: [INFO] Process locks acquired successfully
2025-09-19T10:36:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:22: [INFO] Logs directory created
2025-09-19T10:36:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:22: [10:36:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:22: [10:36:22 am] ✅ Google Sheets API initialized
2025-09-19T10:36:22: [INFO] Google Sheets helper initialized
2025-09-19T10:36:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:22: 🗑️ Deleted old log file: bot-2025-09-19T05-05-24-594Z.log
2025-09-19T10:36:22: 📝 Enhanced Logger initialized
2025-09-19T10:36:22: 📁 Loaded statistics from file
2025-09-19T10:36:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:22: 🧹 Removed stale process lock
2025-09-19T10:36:22: 🔒 Process lock acquired (PID: 18132)
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18132
}
2025-09-19T10:36:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258382257, willExpireAt: 1758258622257 },
  timestamp: 1758258382370
}
2025-09-19T10:36:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:22: 📋 Message rules loaded: 8 types
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258382257, processId: 18132 },
  timestamp: 1758258382370
}
2025-09-19T10:36:22: ℹ️ [10:36:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:22: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:22: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:22: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:23: [INFO] WhatsApp client initialized
2025-09-19T10:36:24: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:24: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:24: 📝 Loaded 12 template types
2025-09-19T10:36:24: ℹ️ [10:36:24 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258384920,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15484,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:24: ⏰ 4-minute startup delay active
2025-09-19T10:36:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:24: [INFO] Using PQueue for job processing
2025-09-19T10:36:24: [INFO] Memory management setup completed
2025-09-19T10:36:24: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:24: [INFO] Checking process locks...
2025-09-19T10:36:24: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:24: ℹ️ [10:36:24 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:24: [INFO] Process locks acquired successfully
2025-09-19T10:36:24: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:24: [INFO] Logs directory created
2025-09-19T10:36:24: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:24: [10:36:24 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:24: [10:36:24 am] ✅ Google Sheets API initialized
2025-09-19T10:36:24: [INFO] Google Sheets helper initialized
2025-09-19T10:36:24: ℹ️ [10:36:24 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:25: 🗑️ Deleted old log file: bot-2025-09-19T05-05-27-533Z.log
2025-09-19T10:36:25: 📝 Enhanced Logger initialized
2025-09-19T10:36:25: 📁 Loaded statistics from file
2025-09-19T10:36:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:25: 🧹 Removed stale process lock
2025-09-19T10:36:25: 🔒 Process lock acquired (PID: 15484)
2025-09-19T10:36:25: ℹ️ [10:36:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15484
}
2025-09-19T10:36:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:25: ℹ️ [10:36:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258384920, willExpireAt: 1758258624920 },
  timestamp: 1758258385040
}
2025-09-19T10:36:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:25: 📋 Message rules loaded: 8 types
2025-09-19T10:36:25: ℹ️ [10:36:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258384920, processId: 15484 },
  timestamp: 1758258385039
}
2025-09-19T10:36:25: ℹ️ [10:36:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:25: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:25: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:25: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:25: [INFO] WhatsApp client initialized
2025-09-19T10:36:27: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:27: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:27: 📝 Loaded 12 template types
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258387669,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9532,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:27: ⏰ 4-minute startup delay active
2025-09-19T10:36:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:27: [INFO] Using PQueue for job processing
2025-09-19T10:36:27: [INFO] Memory management setup completed
2025-09-19T10:36:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:27: [INFO] Checking process locks...
2025-09-19T10:36:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:27: [INFO] Process locks acquired successfully
2025-09-19T10:36:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:27: [INFO] Logs directory created
2025-09-19T10:36:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:27: [10:36:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:27: [10:36:27 am] ✅ Google Sheets API initialized
2025-09-19T10:36:27: [INFO] Google Sheets helper initialized
2025-09-19T10:36:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:27: 🗑️ Deleted old log file: bot-2025-09-19T05-05-30-414Z.log
2025-09-19T10:36:27: 📝 Enhanced Logger initialized
2025-09-19T10:36:27: 📁 Loaded statistics from file
2025-09-19T10:36:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:27: 🧹 Removed stale process lock
2025-09-19T10:36:27: 🔒 Process lock acquired (PID: 9532)
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9532
}
2025-09-19T10:36:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258387669, processId: 9532 },
  timestamp: 1758258387814
}
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258387669, willExpireAt: 1758258627669 },
  timestamp: 1758258387815
}
2025-09-19T10:36:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:27: 📋 Message rules loaded: 8 types
2025-09-19T10:36:27: ℹ️ [10:36:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:28: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:28: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:28: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:28: [INFO] WhatsApp client initialized
2025-09-19T10:36:30: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:30: 📝 Loaded 12 template types
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258390531,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5292,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:30: ⏰ 4-minute startup delay active
2025-09-19T10:36:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:30: [INFO] Using PQueue for job processing
2025-09-19T10:36:30: [INFO] Memory management setup completed
2025-09-19T10:36:30: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:30: [INFO] Checking process locks...
2025-09-19T10:36:30: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:30: [INFO] Process locks acquired successfully
2025-09-19T10:36:30: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:30: [INFO] Logs directory created
2025-09-19T10:36:30: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:30: [10:36:30 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:30: [10:36:30 am] ✅ Google Sheets API initialized
2025-09-19T10:36:30: [INFO] Google Sheets helper initialized
2025-09-19T10:36:30: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:30: 🗑️ Deleted old log file: bot-2025-09-19T05-05-33-303Z.log
2025-09-19T10:36:30: 📝 Enhanced Logger initialized
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:30: 📁 Loaded statistics from file
2025-09-19T10:36:30: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:30: 🧹 Removed stale process lock
2025-09-19T10:36:30: 🔒 Process lock acquired (PID: 5292)
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5292
}
2025-09-19T10:36:30: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:30: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258390531, processId: 5292 },
  timestamp: 1758258390670
}
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258390531, willExpireAt: 1758258630531 },
  timestamp: 1758258390670
}
2025-09-19T10:36:30: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:30: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:30: 📋 Message rules loaded: 8 types
2025-09-19T10:36:30: ℹ️ [10:36:30 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 142,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:31: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:31: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:31: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:31: [INFO] WhatsApp client initialized
2025-09-19T10:36:33: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:33: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:33: 📝 Loaded 12 template types
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258393257,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12212,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:33: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:33: ⏰ 4-minute startup delay active
2025-09-19T10:36:33: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:33: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:33: [INFO] Using PQueue for job processing
2025-09-19T10:36:33: [INFO] Memory management setup completed
2025-09-19T10:36:33: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:33: [INFO] Checking process locks...
2025-09-19T10:36:33: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:33: [INFO] Process locks acquired successfully
2025-09-19T10:36:33: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:33: [INFO] Logs directory created
2025-09-19T10:36:33: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:33: [10:36:33 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:33: [10:36:33 am] ✅ Google Sheets API initialized
2025-09-19T10:36:33: [INFO] Google Sheets helper initialized
2025-09-19T10:36:33: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:33: 🗑️ Deleted old log file: bot-2025-09-19T05-05-36-312Z.log
2025-09-19T10:36:33: 📝 Enhanced Logger initialized
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:33: 📁 Loaded statistics from file
2025-09-19T10:36:33: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:33: 🧹 Removed stale process lock
2025-09-19T10:36:33: 🔒 Process lock acquired (PID: 12212)
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12212
}
2025-09-19T10:36:33: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:33: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258393257, processId: 12212 },
  timestamp: 1758258393380
}
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258393257, willExpireAt: 1758258633257 },
  timestamp: 1758258393380
}
2025-09-19T10:36:33: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:33: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:33: 📋 Message rules loaded: 8 types
2025-09-19T10:36:33: ℹ️ [10:36:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:34: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:34: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:34: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:34: [INFO] WhatsApp client initialized
2025-09-19T10:36:36: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:36: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:36: 📝 Loaded 12 template types
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258396121,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15812,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:36: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:36: ⏰ 4-minute startup delay active
2025-09-19T10:36:36: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:36: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:36: [INFO] Using PQueue for job processing
2025-09-19T10:36:36: [INFO] Memory management setup completed
2025-09-19T10:36:36: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:36: [INFO] Checking process locks...
2025-09-19T10:36:36: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:36: [INFO] Process locks acquired successfully
2025-09-19T10:36:36: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:36: [INFO] Logs directory created
2025-09-19T10:36:36: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:36: [10:36:36 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:36: [10:36:36 am] ✅ Google Sheets API initialized
2025-09-19T10:36:36: [INFO] Google Sheets helper initialized
2025-09-19T10:36:36: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:36: 🗑️ Deleted old log file: bot-2025-09-19T05-05-39-799Z.log
2025-09-19T10:36:36: 📝 Enhanced Logger initialized
2025-09-19T10:36:36: 📁 Loaded statistics from file
2025-09-19T10:36:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:36: 🧹 Removed stale process lock
2025-09-19T10:36:36: 🔒 Process lock acquired (PID: 15812)
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15812
}
2025-09-19T10:36:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258396121, willExpireAt: 1758258636121 },
  timestamp: 1758258396240
}
2025-09-19T10:36:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:36: 📋 Message rules loaded: 8 types
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258396121, processId: 15812 },
  timestamp: 1758258396237
}
2025-09-19T10:36:36: ℹ️ [10:36:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:36: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:36: [INFO] WhatsApp client initialized
2025-09-19T10:36:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:38: 📝 Loaded 12 template types
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258398831,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8892,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:38: ⏰ 4-minute startup delay active
2025-09-19T10:36:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:38: [INFO] Using PQueue for job processing
2025-09-19T10:36:38: [INFO] Memory management setup completed
2025-09-19T10:36:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:38: [INFO] Checking process locks...
2025-09-19T10:36:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:38: [INFO] Process locks acquired successfully
2025-09-19T10:36:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:38: [INFO] Logs directory created
2025-09-19T10:36:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:38: [10:36:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:38: [10:36:38 am] ✅ Google Sheets API initialized
2025-09-19T10:36:38: [INFO] Google Sheets helper initialized
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:38: 🗑️ Deleted old log file: bot-2025-09-19T05-06-08-630Z.log
2025-09-19T10:36:38: 📝 Enhanced Logger initialized
2025-09-19T10:36:38: 📁 Loaded statistics from file
2025-09-19T10:36:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:38: 🧹 Removed stale process lock
2025-09-19T10:36:38: 🔒 Process lock acquired (PID: 8892)
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8892
}
2025-09-19T10:36:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258398831, processId: 8892 },
  timestamp: 1758258398983
}
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258398831, willExpireAt: 1758258638831 },
  timestamp: 1758258398983
}
2025-09-19T10:36:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:38: 📋 Message rules loaded: 8 types
2025-09-19T10:36:38: ℹ️ [10:36:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 156,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:39: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:39: [INFO] WhatsApp client initialized
2025-09-19T10:36:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:41: 📝 Loaded 12 template types
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258401566,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8604,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:41: ⏰ 4-minute startup delay active
2025-09-19T10:36:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:41: [INFO] Using PQueue for job processing
2025-09-19T10:36:41: [INFO] Memory management setup completed
2025-09-19T10:36:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:41: [INFO] Checking process locks...
2025-09-19T10:36:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:41: [INFO] Process locks acquired successfully
2025-09-19T10:36:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:41: [INFO] Logs directory created
2025-09-19T10:36:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:41: [10:36:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:41: [10:36:41 am] ✅ Google Sheets API initialized
2025-09-19T10:36:41: [INFO] Google Sheets helper initialized
2025-09-19T10:36:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:41: 🗑️ Deleted old log file: bot-2025-09-19T05-06-11-225Z.log
2025-09-19T10:36:41: 📝 Enhanced Logger initialized
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:41: 📁 Loaded statistics from file
2025-09-19T10:36:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:41: 🧹 Removed stale process lock
2025-09-19T10:36:41: 🔒 Process lock acquired (PID: 8604)
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8604
}
2025-09-19T10:36:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258401566, willExpireAt: 1758258641566 },
  timestamp: 1758258401684
}
2025-09-19T10:36:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:41: 📋 Message rules loaded: 8 types
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258401566, processId: 8604 },
  timestamp: 1758258401684
}
2025-09-19T10:36:41: ℹ️ [10:36:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:42: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:42: [INFO] WhatsApp client initialized
2025-09-19T10:36:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:44: 📝 Loaded 12 template types
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258404389,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16416,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:44: ⏰ 4-minute startup delay active
2025-09-19T10:36:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:44: [INFO] Using PQueue for job processing
2025-09-19T10:36:44: [INFO] Memory management setup completed
2025-09-19T10:36:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:44: [INFO] Checking process locks...
2025-09-19T10:36:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:44: [INFO] Process locks acquired successfully
2025-09-19T10:36:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:44: [INFO] Logs directory created
2025-09-19T10:36:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:44: [10:36:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:44: [10:36:44 am] ✅ Google Sheets API initialized
2025-09-19T10:36:44: [INFO] Google Sheets helper initialized
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:44: 🗑️ Deleted old log file: bot-2025-09-19T05-06-13-893Z.log
2025-09-19T10:36:44: 📝 Enhanced Logger initialized
2025-09-19T10:36:44: 📁 Loaded statistics from file
2025-09-19T10:36:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:44: 🧹 Removed stale process lock
2025-09-19T10:36:44: 🔒 Process lock acquired (PID: 16416)
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16416
}
2025-09-19T10:36:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258404389, processId: 16416 },
  timestamp: 1758258404541
}
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258404389, willExpireAt: 1758258644389 },
  timestamp: 1758258404542
}
2025-09-19T10:36:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:44: 📋 Message rules loaded: 8 types
2025-09-19T10:36:44: ℹ️ [10:36:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 156,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:45: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:45: [INFO] WhatsApp client initialized
2025-09-19T10:36:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:47: 📝 Loaded 12 template types
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258407184,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17812,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:47: ⏰ 4-minute startup delay active
2025-09-19T10:36:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:47: [INFO] Using PQueue for job processing
2025-09-19T10:36:47: [INFO] Memory management setup completed
2025-09-19T10:36:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:47: [INFO] Checking process locks...
2025-09-19T10:36:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:47: [INFO] Process locks acquired successfully
2025-09-19T10:36:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:47: [INFO] Logs directory created
2025-09-19T10:36:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:47: [10:36:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:47: [10:36:47 am] ✅ Google Sheets API initialized
2025-09-19T10:36:47: [INFO] Google Sheets helper initialized
2025-09-19T10:36:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:47: 🗑️ Deleted old log file: bot-2025-09-19T05-06-16-791Z.log
2025-09-19T10:36:47: 📝 Enhanced Logger initialized
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:47: 📁 Loaded statistics from file
2025-09-19T10:36:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:47: 🧹 Removed stale process lock
2025-09-19T10:36:47: 🔒 Process lock acquired (PID: 17812)
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17812
}
2025-09-19T10:36:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258407184, processId: 17812 },
  timestamp: 1758258407330
}
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258407184, willExpireAt: 1758258647184 },
  timestamp: 1758258407330
}
2025-09-19T10:36:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:47: 📋 Message rules loaded: 8 types
2025-09-19T10:36:47: ℹ️ [10:36:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 149,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:47: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:47: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:47: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:48: [INFO] WhatsApp client initialized
2025-09-19T10:36:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:50: 📝 Loaded 12 template types
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258410056,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5108,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:50: ⏰ 4-minute startup delay active
2025-09-19T10:36:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:50: [INFO] Using PQueue for job processing
2025-09-19T10:36:50: [INFO] Memory management setup completed
2025-09-19T10:36:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:50: [INFO] Checking process locks...
2025-09-19T10:36:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:50: [INFO] Process locks acquired successfully
2025-09-19T10:36:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:50: [INFO] Logs directory created
2025-09-19T10:36:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:50: [10:36:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:50: [10:36:50 am] ✅ Google Sheets API initialized
2025-09-19T10:36:50: [INFO] Google Sheets helper initialized
2025-09-19T10:36:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:50: 🗑️ Deleted old log file: bot-2025-09-19T05-06-19-508Z.log
2025-09-19T10:36:50: 📝 Enhanced Logger initialized
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:50: 📁 Loaded statistics from file
2025-09-19T10:36:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:50: 🧹 Removed stale process lock
2025-09-19T10:36:50: 🔒 Process lock acquired (PID: 5108)
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5108
}
2025-09-19T10:36:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258410056, processId: 5108 },
  timestamp: 1758258410182
}
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258410056, willExpireAt: 1758258650056 },
  timestamp: 1758258410183
}
2025-09-19T10:36:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:50: 📋 Message rules loaded: 8 types
2025-09-19T10:36:50: ℹ️ [10:36:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:50: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:50: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:50: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:50: [INFO] WhatsApp client initialized
2025-09-19T10:36:52: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:52: 📝 Loaded 12 template types
2025-09-19T10:36:52: ℹ️ [10:36:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258412893,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8376,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:52: ⏰ 4-minute startup delay active
2025-09-19T10:36:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:52: [INFO] Using PQueue for job processing
2025-09-19T10:36:52: [INFO] Memory management setup completed
2025-09-19T10:36:52: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:52: [INFO] Checking process locks...
2025-09-19T10:36:52: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:52: ℹ️ [10:36:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:52: [INFO] Process locks acquired successfully
2025-09-19T10:36:52: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:52: [INFO] Logs directory created
2025-09-19T10:36:52: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:52: [10:36:52 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:52: [10:36:52 am] ✅ Google Sheets API initialized
2025-09-19T10:36:52: [INFO] Google Sheets helper initialized
2025-09-19T10:36:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:53: ℹ️ [10:36:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:53: 🗑️ Deleted old log file: bot-2025-09-19T05-06-22-288Z.log
2025-09-19T10:36:53: 📝 Enhanced Logger initialized
2025-09-19T10:36:53: 📁 Loaded statistics from file
2025-09-19T10:36:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:53: 🧹 Removed stale process lock
2025-09-19T10:36:53: 🔒 Process lock acquired (PID: 8376)
2025-09-19T10:36:53: ℹ️ [10:36:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8376
}
2025-09-19T10:36:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:53: ℹ️ [10:36:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258412893, processId: 8376 },
  timestamp: 1758258413023
}
2025-09-19T10:36:53: ℹ️ [10:36:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258412893, willExpireAt: 1758258652893 },
  timestamp: 1758258413024
}
2025-09-19T10:36:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:53: 📋 Message rules loaded: 8 types
2025-09-19T10:36:53: ℹ️ [10:36:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:53: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:53: [INFO] WhatsApp client initialized
2025-09-19T10:36:55: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:55: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:55: 📝 Loaded 12 template types
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258415690,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5248,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:55: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:55: ⏰ 4-minute startup delay active
2025-09-19T10:36:55: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:55: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:55: [INFO] Using PQueue for job processing
2025-09-19T10:36:55: [INFO] Memory management setup completed
2025-09-19T10:36:55: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:55: [INFO] Checking process locks...
2025-09-19T10:36:55: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:55: [INFO] Process locks acquired successfully
2025-09-19T10:36:55: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:55: [INFO] Logs directory created
2025-09-19T10:36:55: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:55: [10:36:55 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:55: [10:36:55 am] ✅ Google Sheets API initialized
2025-09-19T10:36:55: [INFO] Google Sheets helper initialized
2025-09-19T10:36:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:55: 🗑️ Deleted old log file: bot-2025-09-19T05-06-24-954Z.log
2025-09-19T10:36:55: 📝 Enhanced Logger initialized
2025-09-19T10:36:55: 📁 Loaded statistics from file
2025-09-19T10:36:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:55: 🧹 Removed stale process lock
2025-09-19T10:36:55: 🔒 Process lock acquired (PID: 5248)
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5248
}
2025-09-19T10:36:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258415690, processId: 5248 },
  timestamp: 1758258415806
}
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258415690, willExpireAt: 1758258655690 },
  timestamp: 1758258415806
}
2025-09-19T10:36:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:55: 📋 Message rules loaded: 8 types
2025-09-19T10:36:55: ℹ️ [10:36:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:56: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:56: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:56: [INFO] WhatsApp client initialized
2025-09-19T10:36:58: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:36:58: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:36:58: 📝 Loaded 12 template types
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258418417,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17836,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:36:58: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:36:58: ⏰ 4-minute startup delay active
2025-09-19T10:36:58: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:36:58: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:36:58: [INFO] Using PQueue for job processing
2025-09-19T10:36:58: [INFO] Memory management setup completed
2025-09-19T10:36:58: [INFO] Starting WhatsApp Bot...
2025-09-19T10:36:58: [INFO] Checking process locks...
2025-09-19T10:36:58: 📁 Loaded 0 sent messages from file
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:36:58: [INFO] Process locks acquired successfully
2025-09-19T10:36:58: 📁 Loaded 0 customer histories from file
2025-09-19T10:36:58: [INFO] Logs directory created
2025-09-19T10:36:58: [INFO] Initializing Google Sheets helper...
2025-09-19T10:36:58: [10:36:58 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:36:58: [10:36:58 am] ✅ Google Sheets API initialized
2025-09-19T10:36:58: [INFO] Google Sheets helper initialized
2025-09-19T10:36:58: 📁 Loaded 0 message hashes from file
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:36:58: 🗑️ Deleted old log file: bot-2025-09-19T05-06-27-705Z.log
2025-09-19T10:36:58: 📝 Enhanced Logger initialized
2025-09-19T10:36:58: 📁 Loaded statistics from file
2025-09-19T10:36:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:36:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:36:58: 🧹 Removed stale process lock
2025-09-19T10:36:58: 🔒 Process lock acquired (PID: 17836)
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17836
}
2025-09-19T10:36:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:36:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258418417, processId: 17836 },
  timestamp: 1758258418534
}
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258418417, willExpireAt: 1758258658417 },
  timestamp: 1758258418534
}
2025-09-19T10:36:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:36:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:36:58: 📋 Message rules loaded: 8 types
2025-09-19T10:36:58: ℹ️ [10:36:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:36:59: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:36:59: [INFO] Initializing WhatsApp client...
2025-09-19T10:36:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:36:59: [INFO] WhatsApp client initialized
2025-09-19T10:37:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:01: 📝 Loaded 12 template types
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258421326,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11032,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:01: ⏰ 4-minute startup delay active
2025-09-19T10:37:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:01: [INFO] Using PQueue for job processing
2025-09-19T10:37:01: [INFO] Memory management setup completed
2025-09-19T10:37:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:01: [INFO] Checking process locks...
2025-09-19T10:37:01: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:01: [INFO] Process locks acquired successfully
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:01: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:01: [INFO] Logs directory created
2025-09-19T10:37:01: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:01: [10:37:01 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:01: [10:37:01 am] ✅ Google Sheets API initialized
2025-09-19T10:37:01: [INFO] Google Sheets helper initialized
2025-09-19T10:37:01: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:01: 🗑️ Deleted old log file: bot-2025-09-19T05-06-30-568Z.log
2025-09-19T10:37:01: 📝 Enhanced Logger initialized
2025-09-19T10:37:01: 📁 Loaded statistics from file
2025-09-19T10:37:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:01: 🧹 Removed stale process lock
2025-09-19T10:37:01: 🔒 Process lock acquired (PID: 11032)
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11032
}
2025-09-19T10:37:01: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258421326, processId: 11032 },
  timestamp: 1758258421455
}
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258421326, willExpireAt: 1758258661326 },
  timestamp: 1758258421456
}
2025-09-19T10:37:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:01: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:01: 📋 Message rules loaded: 8 types
2025-09-19T10:37:01: ℹ️ [10:37:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:02: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:02: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:02: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:02: [INFO] WhatsApp client initialized
2025-09-19T10:37:04: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:04: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:04: 📝 Loaded 12 template types
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258424034,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3452,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:04: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:04: ⏰ 4-minute startup delay active
2025-09-19T10:37:04: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:04: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:04: [INFO] Using PQueue for job processing
2025-09-19T10:37:04: [INFO] Memory management setup completed
2025-09-19T10:37:04: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:04: [INFO] Checking process locks...
2025-09-19T10:37:04: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:04: [INFO] Process locks acquired successfully
2025-09-19T10:37:04: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:04: [INFO] Logs directory created
2025-09-19T10:37:04: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:04: [10:37:04 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:04: [10:37:04 am] ✅ Google Sheets API initialized
2025-09-19T10:37:04: [INFO] Google Sheets helper initialized
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:04: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:04: 🗑️ Deleted old log file: bot-2025-09-19T05-06-33-290Z.log
2025-09-19T10:37:04: 📝 Enhanced Logger initialized
2025-09-19T10:37:04: 📁 Loaded statistics from file
2025-09-19T10:37:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:04: 🧹 Removed stale process lock
2025-09-19T10:37:04: 🔒 Process lock acquired (PID: 3452)
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3452
}
2025-09-19T10:37:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258424034, processId: 3452 },
  timestamp: 1758258424177
}
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258424034, willExpireAt: 1758258664034 },
  timestamp: 1758258424177
}
2025-09-19T10:37:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:04: 📋 Message rules loaded: 8 types
2025-09-19T10:37:04: ℹ️ [10:37:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 147,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:04: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:04: [INFO] WhatsApp client initialized
2025-09-19T10:37:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:06: 📝 Loaded 12 template types
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258426808,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13576,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:06: ⏰ 4-minute startup delay active
2025-09-19T10:37:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:06: [INFO] Using PQueue for job processing
2025-09-19T10:37:06: [INFO] Memory management setup completed
2025-09-19T10:37:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:06: [INFO] Checking process locks...
2025-09-19T10:37:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:06: [INFO] Process locks acquired successfully
2025-09-19T10:37:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:06: [INFO] Logs directory created
2025-09-19T10:37:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:06: [10:37:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:06: [10:37:06 am] ✅ Google Sheets API initialized
2025-09-19T10:37:06: [INFO] Google Sheets helper initialized
2025-09-19T10:37:06: 🗑️ Deleted old log file: bot-2025-09-19T05-06-36-153Z.log
2025-09-19T10:37:06: 📝 Enhanced Logger initialized
2025-09-19T10:37:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:06: 📁 Loaded statistics from file
2025-09-19T10:37:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:06: 🧹 Removed stale process lock
2025-09-19T10:37:06: 🔒 Process lock acquired (PID: 13576)
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13576
}
2025-09-19T10:37:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258426808, processId: 13576 },
  timestamp: 1758258426939
}
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258426808, willExpireAt: 1758258666808 },
  timestamp: 1758258426939
}
2025-09-19T10:37:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:06: 📋 Message rules loaded: 8 types
2025-09-19T10:37:06: ℹ️ [10:37:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:07: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:07: [INFO] WhatsApp client initialized
2025-09-19T10:37:09: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:09: 📝 Loaded 12 template types
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258429470,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16260,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:09: ⏰ 4-minute startup delay active
2025-09-19T10:37:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:09: [INFO] Using PQueue for job processing
2025-09-19T10:37:09: [INFO] Memory management setup completed
2025-09-19T10:37:09: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:09: [INFO] Checking process locks...
2025-09-19T10:37:09: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:09: [INFO] Process locks acquired successfully
2025-09-19T10:37:09: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:09: [INFO] Logs directory created
2025-09-19T10:37:09: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:09: [10:37:09 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:09: [10:37:09 am] ✅ Google Sheets API initialized
2025-09-19T10:37:09: [INFO] Google Sheets helper initialized
2025-09-19T10:37:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:09: 🗑️ Deleted old log file: bot-2025-09-19T05-06-38-874Z.log
2025-09-19T10:37:09: 📝 Enhanced Logger initialized
2025-09-19T10:37:09: 📁 Loaded statistics from file
2025-09-19T10:37:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:09: 🧹 Removed stale process lock
2025-09-19T10:37:09: 🔒 Process lock acquired (PID: 16260)
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16260
}
2025-09-19T10:37:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258429470, processId: 16260 },
  timestamp: 1758258429593
}
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258429470, willExpireAt: 1758258669470 },
  timestamp: 1758258429593
}
2025-09-19T10:37:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:09: 📋 Message rules loaded: 8 types
2025-09-19T10:37:09: ℹ️ [10:37:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:10: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:10: [INFO] WhatsApp client initialized
2025-09-19T10:37:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:12: 📝 Loaded 12 template types
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258432225,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:12: ⏰ 4-minute startup delay active
2025-09-19T10:37:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:12: [INFO] Using PQueue for job processing
2025-09-19T10:37:12: [INFO] Memory management setup completed
2025-09-19T10:37:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:12: [INFO] Checking process locks...
2025-09-19T10:37:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:12: [INFO] Process locks acquired successfully
2025-09-19T10:37:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:12: [INFO] Logs directory created
2025-09-19T10:37:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:12: [10:37:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:12: [10:37:12 am] ✅ Google Sheets API initialized
2025-09-19T10:37:12: [INFO] Google Sheets helper initialized
2025-09-19T10:37:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:12: 🗑️ Deleted old log file: bot-2025-09-19T05-06-41-598Z.log
2025-09-19T10:37:12: 📝 Enhanced Logger initialized
2025-09-19T10:37:12: 📁 Loaded statistics from file
2025-09-19T10:37:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:12: 🧹 Removed stale process lock
2025-09-19T10:37:12: 🔒 Process lock acquired (PID: 4712)
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4712
}
2025-09-19T10:37:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258432225, processId: 4712 },
  timestamp: 1758258432348
}
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258432225, willExpireAt: 1758258672225 },
  timestamp: 1758258432348
}
2025-09-19T10:37:12: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:12: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:12: 📋 Message rules loaded: 8 types
2025-09-19T10:37:12: ℹ️ [10:37:12 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:12: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:13: [INFO] WhatsApp client initialized
2025-09-19T10:37:14: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:14: 📝 Loaded 12 template types
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258435002,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12092,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:15: ⏰ 4-minute startup delay active
2025-09-19T10:37:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:15: [INFO] Using PQueue for job processing
2025-09-19T10:37:15: [INFO] Memory management setup completed
2025-09-19T10:37:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:15: [INFO] Checking process locks...
2025-09-19T10:37:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:15: [INFO] Process locks acquired successfully
2025-09-19T10:37:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:15: [INFO] Logs directory created
2025-09-19T10:37:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:15: [10:37:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:15: [10:37:15 am] ✅ Google Sheets API initialized
2025-09-19T10:37:15: [INFO] Google Sheets helper initialized
2025-09-19T10:37:15: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:15: 🗑️ Deleted old log file: bot-2025-09-19T05-06-44-428Z.log
2025-09-19T10:37:15: 📝 Enhanced Logger initialized
2025-09-19T10:37:15: 📁 Loaded statistics from file
2025-09-19T10:37:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:15: 🧹 Removed stale process lock
2025-09-19T10:37:15: 🔒 Process lock acquired (PID: 12092)
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12092
}
2025-09-19T10:37:15: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258435002, willExpireAt: 1758258675002 },
  timestamp: 1758258435155
}
2025-09-19T10:37:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:15: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:15: 📋 Message rules loaded: 8 types
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258435002, processId: 12092 },
  timestamp: 1758258435155
}
2025-09-19T10:37:15: ℹ️ [10:37:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 155,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:15: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:15: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:15: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:15: [INFO] WhatsApp client initialized
2025-09-19T10:37:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:17: 📝 Loaded 12 template types
2025-09-19T10:37:18: ℹ️ [10:37:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258437977,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18060,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:18: ⏰ 4-minute startup delay active
2025-09-19T10:37:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:18: [INFO] Using PQueue for job processing
2025-09-19T10:37:18: [INFO] Memory management setup completed
2025-09-19T10:37:18: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:18: [INFO] Checking process locks...
2025-09-19T10:37:18: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:18: ℹ️ [10:37:18 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:18: [INFO] Process locks acquired successfully
2025-09-19T10:37:18: [INFO] Logs directory created
2025-09-19T10:37:18: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:18: [10:37:18 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:18: [10:37:18 am] ✅ Google Sheets API initialized
2025-09-19T10:37:18: [INFO] Google Sheets helper initialized
2025-09-19T10:37:18: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:18: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:18: ℹ️ [10:37:18 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:18: 🗑️ Deleted old log file: bot-2025-09-19T05-06-47-224Z.log
2025-09-19T10:37:18: 📝 Enhanced Logger initialized
2025-09-19T10:37:18: 📁 Loaded statistics from file
2025-09-19T10:37:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:18: 🧹 Removed stale process lock
2025-09-19T10:37:18: 🔒 Process lock acquired (PID: 18060)
2025-09-19T10:37:18: ℹ️ [10:37:18 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18060
}
2025-09-19T10:37:18: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:18: ℹ️ [10:37:18 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258437977, processId: 18060 },
  timestamp: 1758258438129
}
2025-09-19T10:37:18: ℹ️ [10:37:18 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258437977, willExpireAt: 1758258677977 },
  timestamp: 1758258438130
}
2025-09-19T10:37:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:18: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:18: 📋 Message rules loaded: 8 types
2025-09-19T10:37:18: ℹ️ [10:37:18 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 158,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:18: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:18: [INFO] WhatsApp client initialized
2025-09-19T10:37:21: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:21: 📝 Loaded 12 template types
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258441144,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14544,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:21: ⏰ 4-minute startup delay active
2025-09-19T10:37:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:21: [INFO] Using PQueue for job processing
2025-09-19T10:37:21: [INFO] Memory management setup completed
2025-09-19T10:37:21: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:21: [INFO] Checking process locks...
2025-09-19T10:37:21: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:21: [INFO] Process locks acquired successfully
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:21: [INFO] Logs directory created
2025-09-19T10:37:21: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:21: [10:37:21 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:21: [10:37:21 am] ✅ Google Sheets API initialized
2025-09-19T10:37:21: [INFO] Google Sheets helper initialized
2025-09-19T10:37:21: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:21: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:21: 🗑️ Deleted old log file: bot-2025-09-19T05-06-50-093Z.log
2025-09-19T10:37:21: 📝 Enhanced Logger initialized
2025-09-19T10:37:21: 📁 Loaded statistics from file
2025-09-19T10:37:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:21: 🧹 Removed stale process lock
2025-09-19T10:37:21: 🔒 Process lock acquired (PID: 14544)
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14544
}
2025-09-19T10:37:21: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258441144, processId: 14544 },
  timestamp: 1758258441371
}
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258441144, willExpireAt: 1758258681144 },
  timestamp: 1758258441371
}
2025-09-19T10:37:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:21: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:21: 📋 Message rules loaded: 8 types
2025-09-19T10:37:21: ℹ️ [10:37:21 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 230,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:21: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:22: [INFO] WhatsApp client initialized
2025-09-19T10:37:24: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:24: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:24: 📝 Loaded 12 template types
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258444143,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5964,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:24: ⏰ 4-minute startup delay active
2025-09-19T10:37:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:24: [INFO] Using PQueue for job processing
2025-09-19T10:37:24: [INFO] Memory management setup completed
2025-09-19T10:37:24: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:24: [INFO] Checking process locks...
2025-09-19T10:37:24: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:24: [INFO] Process locks acquired successfully
2025-09-19T10:37:24: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:24: [INFO] Logs directory created
2025-09-19T10:37:24: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:24: [10:37:24 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:24: [10:37:24 am] ✅ Google Sheets API initialized
2025-09-19T10:37:24: [INFO] Google Sheets helper initialized
2025-09-19T10:37:24: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:24: 🗑️ Deleted old log file: bot-2025-09-19T05-06-52-926Z.log
2025-09-19T10:37:24: 📝 Enhanced Logger initialized
2025-09-19T10:37:24: 📁 Loaded statistics from file
2025-09-19T10:37:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:24: 🧹 Removed stale process lock
2025-09-19T10:37:24: 🔒 Process lock acquired (PID: 5964)
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5964
}
2025-09-19T10:37:24: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258444143, processId: 5964 },
  timestamp: 1758258444286
}
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258444143, willExpireAt: 1758258684143 },
  timestamp: 1758258444286
}
2025-09-19T10:37:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:24: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:24: 📋 Message rules loaded: 8 types
2025-09-19T10:37:24: ℹ️ [10:37:24 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 146,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:24: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:24: [INFO] WhatsApp client initialized
2025-09-19T10:37:26: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:26: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:26: 📝 Loaded 12 template types
2025-09-19T10:37:27: ℹ️ [10:37:26 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258446992,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:27: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:27: ⏰ 4-minute startup delay active
2025-09-19T10:37:27: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:27: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:27: [INFO] Using PQueue for job processing
2025-09-19T10:37:27: [INFO] Memory management setup completed
2025-09-19T10:37:27: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:27: [INFO] Checking process locks...
2025-09-19T10:37:27: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:27: ℹ️ [10:37:27 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:27: [INFO] Process locks acquired successfully
2025-09-19T10:37:27: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:27: [INFO] Logs directory created
2025-09-19T10:37:27: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:27: [10:37:27 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:27: [10:37:27 am] ✅ Google Sheets API initialized
2025-09-19T10:37:27: [INFO] Google Sheets helper initialized
2025-09-19T10:37:27: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:27: ℹ️ [10:37:27 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:27: 🗑️ Deleted old log file: bot-2025-09-19T05-06-55-725Z.log
2025-09-19T10:37:27: 📝 Enhanced Logger initialized
2025-09-19T10:37:27: 📁 Loaded statistics from file
2025-09-19T10:37:27: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:27: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:27: 🧹 Removed stale process lock
2025-09-19T10:37:27: 🔒 Process lock acquired (PID: 4712)
2025-09-19T10:37:27: ℹ️ [10:37:27 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4712
}
2025-09-19T10:37:27: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:27: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:27: ℹ️ [10:37:27 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258446992, willExpireAt: 1758258686992 },
  timestamp: 1758258447122
}
2025-09-19T10:37:27: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:27: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:27: 📋 Message rules loaded: 8 types
2025-09-19T10:37:27: ℹ️ [10:37:27 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258446992, processId: 4712 },
  timestamp: 1758258447122
}
2025-09-19T10:37:27: ℹ️ [10:37:27 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:27: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:27: [INFO] WhatsApp client initialized
2025-09-19T10:37:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:29: 📝 Loaded 12 template types
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258449793,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7752,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:29: ⏰ 4-minute startup delay active
2025-09-19T10:37:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:29: [INFO] Using PQueue for job processing
2025-09-19T10:37:29: [INFO] Memory management setup completed
2025-09-19T10:37:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:29: [INFO] Checking process locks...
2025-09-19T10:37:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:29: [INFO] Process locks acquired successfully
2025-09-19T10:37:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:29: [INFO] Logs directory created
2025-09-19T10:37:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:29: [10:37:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:29: [10:37:29 am] ✅ Google Sheets API initialized
2025-09-19T10:37:29: [INFO] Google Sheets helper initialized
2025-09-19T10:37:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:29: 🗑️ Deleted old log file: bot-2025-09-19T05-06-58-449Z.log
2025-09-19T10:37:29: 📝 Enhanced Logger initialized
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:29: 📁 Loaded statistics from file
2025-09-19T10:37:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:29: 🧹 Removed stale process lock
2025-09-19T10:37:29: 🔒 Process lock acquired (PID: 7752)
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7752
}
2025-09-19T10:37:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258449793, processId: 7752 },
  timestamp: 1758258449927
}
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258449793, willExpireAt: 1758258689793 },
  timestamp: 1758258449928
}
2025-09-19T10:37:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:29: 📋 Message rules loaded: 8 types
2025-09-19T10:37:29: ℹ️ [10:37:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 143,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:30: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:30: [INFO] WhatsApp client initialized
2025-09-19T10:37:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:32: 📝 Loaded 12 template types
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258452587,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4308,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:32: ⏰ 4-minute startup delay active
2025-09-19T10:37:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:32: [INFO] Using PQueue for job processing
2025-09-19T10:37:32: [INFO] Memory management setup completed
2025-09-19T10:37:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:32: [INFO] Checking process locks...
2025-09-19T10:37:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:32: [INFO] Process locks acquired successfully
2025-09-19T10:37:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:32: [INFO] Logs directory created
2025-09-19T10:37:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:32: [10:37:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:32: [10:37:32 am] ✅ Google Sheets API initialized
2025-09-19T10:37:32: [INFO] Google Sheets helper initialized
2025-09-19T10:37:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:32: 🗑️ Deleted old log file: bot-2025-09-19T05-07-01-360Z.log
2025-09-19T10:37:32: 📝 Enhanced Logger initialized
2025-09-19T10:37:32: 📁 Loaded statistics from file
2025-09-19T10:37:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:32: 🧹 Removed stale process lock
2025-09-19T10:37:32: 🔒 Process lock acquired (PID: 4308)
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4308
}
2025-09-19T10:37:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258452587, processId: 4308 },
  timestamp: 1758258452702
}
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258452587, willExpireAt: 1758258692587 },
  timestamp: 1758258452702
}
2025-09-19T10:37:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:32: 📋 Message rules loaded: 8 types
2025-09-19T10:37:32: ℹ️ [10:37:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 118,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:33: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:33: [INFO] WhatsApp client initialized
2025-09-19T10:37:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:35: 📝 Loaded 12 template types
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258455287,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10020,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:35: ⏰ 4-minute startup delay active
2025-09-19T10:37:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:35: [INFO] Using PQueue for job processing
2025-09-19T10:37:35: [INFO] Memory management setup completed
2025-09-19T10:37:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:35: [INFO] Checking process locks...
2025-09-19T10:37:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:35: [INFO] Process locks acquired successfully
2025-09-19T10:37:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:35: [INFO] Logs directory created
2025-09-19T10:37:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:35: [10:37:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:35: [10:37:35 am] ✅ Google Sheets API initialized
2025-09-19T10:37:35: [INFO] Google Sheets helper initialized
2025-09-19T10:37:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:35: 🗑️ Deleted old log file: bot-2025-09-19T05-07-04-074Z.log
2025-09-19T10:37:35: 📝 Enhanced Logger initialized
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:35: 📁 Loaded statistics from file
2025-09-19T10:37:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:35: 🧹 Removed stale process lock
2025-09-19T10:37:35: 🔒 Process lock acquired (PID: 10020)
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10020
}
2025-09-19T10:37:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258455287, processId: 10020 },
  timestamp: 1758258455413
}
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258455287, willExpireAt: 1758258695287 },
  timestamp: 1758258455414
}
2025-09-19T10:37:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:35: 📋 Message rules loaded: 8 types
2025-09-19T10:37:35: ℹ️ [10:37:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 129,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:36: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:36: [INFO] WhatsApp client initialized
2025-09-19T10:37:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:38: 📝 Loaded 12 template types
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258458077,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1248,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:38: ⏰ 4-minute startup delay active
2025-09-19T10:37:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:38: [INFO] Using PQueue for job processing
2025-09-19T10:37:38: [INFO] Memory management setup completed
2025-09-19T10:37:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:38: [INFO] Checking process locks...
2025-09-19T10:37:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:38: [INFO] Process locks acquired successfully
2025-09-19T10:37:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:38: [INFO] Logs directory created
2025-09-19T10:37:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:38: [10:37:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:38: [10:37:38 am] ✅ Google Sheets API initialized
2025-09-19T10:37:38: [INFO] Google Sheets helper initialized
2025-09-19T10:37:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:38: 🗑️ Deleted old log file: bot-2025-09-19T05-07-06-842Z.log
2025-09-19T10:37:38: 📝 Enhanced Logger initialized
2025-09-19T10:37:38: 📁 Loaded statistics from file
2025-09-19T10:37:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:38: 🧹 Removed stale process lock
2025-09-19T10:37:38: 🔒 Process lock acquired (PID: 1248)
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1248
}
2025-09-19T10:37:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258458077, processId: 1248 },
  timestamp: 1758258458205
}
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258458077, willExpireAt: 1758258698077 },
  timestamp: 1758258458206
}
2025-09-19T10:37:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:38: 📋 Message rules loaded: 8 types
2025-09-19T10:37:38: ℹ️ [10:37:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 135,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:38: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:38: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:38: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:38: [INFO] WhatsApp client initialized
2025-09-19T10:37:40: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:40: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:40: 📝 Loaded 12 template types
2025-09-19T10:37:40: ℹ️ [10:37:40 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258460826,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2532,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:40: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:40: ⏰ 4-minute startup delay active
2025-09-19T10:37:40: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:40: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:40: [INFO] Using PQueue for job processing
2025-09-19T10:37:40: [INFO] Memory management setup completed
2025-09-19T10:37:40: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:40: [INFO] Checking process locks...
2025-09-19T10:37:40: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:40: ℹ️ [10:37:40 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:40: [INFO] Process locks acquired successfully
2025-09-19T10:37:40: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:40: [INFO] Logs directory created
2025-09-19T10:37:40: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:40: [10:37:40 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:40: [10:37:40 am] ✅ Google Sheets API initialized
2025-09-19T10:37:40: [INFO] Google Sheets helper initialized
2025-09-19T10:37:40: ℹ️ [10:37:40 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:40: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:40: 🗑️ Deleted old log file: bot-2025-09-19T05-07-09-505Z.log
2025-09-19T10:37:40: 📝 Enhanced Logger initialized
2025-09-19T10:37:41: 📁 Loaded statistics from file
2025-09-19T10:37:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:41: 🧹 Removed stale process lock
2025-09-19T10:37:41: 🔒 Process lock acquired (PID: 2532)
2025-09-19T10:37:41: ℹ️ [10:37:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2532
}
2025-09-19T10:37:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:41: ℹ️ [10:37:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258460826, processId: 2532 },
  timestamp: 1758258461009
}
2025-09-19T10:37:41: ℹ️ [10:37:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258460826, willExpireAt: 1758258700826 },
  timestamp: 1758258461009
}
2025-09-19T10:37:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:41: 📋 Message rules loaded: 8 types
2025-09-19T10:37:41: ℹ️ [10:37:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 186,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:41: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:41: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:41: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:41: [INFO] WhatsApp client initialized
2025-09-19T10:37:43: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:43: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:43: 📝 Loaded 12 template types
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258463611,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17856,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:43: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:43: ⏰ 4-minute startup delay active
2025-09-19T10:37:43: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:43: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:43: [INFO] Using PQueue for job processing
2025-09-19T10:37:43: [INFO] Memory management setup completed
2025-09-19T10:37:43: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:43: [INFO] Checking process locks...
2025-09-19T10:37:43: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:43: [INFO] Process locks acquired successfully
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:43: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:43: [INFO] Logs directory created
2025-09-19T10:37:43: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:43: [10:37:43 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:43: [10:37:43 am] ✅ Google Sheets API initialized
2025-09-19T10:37:43: [INFO] Google Sheets helper initialized
2025-09-19T10:37:43: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:43: 🗑️ Deleted old log file: bot-2025-09-19T05-07-12-260Z.log
2025-09-19T10:37:43: 📝 Enhanced Logger initialized
2025-09-19T10:37:43: 📁 Loaded statistics from file
2025-09-19T10:37:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:43: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:43: 🧹 Removed stale process lock
2025-09-19T10:37:43: 🔒 Process lock acquired (PID: 17856)
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17856
}
2025-09-19T10:37:43: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:43: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258463611, processId: 17856 },
  timestamp: 1758258463753
}
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258463611, willExpireAt: 1758258703611 },
  timestamp: 1758258463753
}
2025-09-19T10:37:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:43: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:43: 📋 Message rules loaded: 8 types
2025-09-19T10:37:43: ℹ️ [10:37:43 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 145,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:37:44: [INFO] Sheets health after init {
  status: 'error',
  error: 'request to https://www.googleapis.com/oauth2/v4/token failed, reason: getaddrinfo ENOTFOUND www.googleapis.com'
}
2025-09-19T10:37:44: [INFO] Initializing WhatsApp client...
2025-09-19T10:37:44: 🔄 Initializing WhatsApp client...
2025-09-19T10:37:44: [INFO] WhatsApp client initialized
2025-09-19T10:37:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:37:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:37:47: 📝 Loaded 12 template types
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258467017,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14788,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:37:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:37:47: ⏰ 4-minute startup delay active
2025-09-19T10:37:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:37:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:37:47: [INFO] Using PQueue for job processing
2025-09-19T10:37:47: [INFO] Memory management setup completed
2025-09-19T10:37:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:37:47: [INFO] Checking process locks...
2025-09-19T10:37:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:37:47: [INFO] Process locks acquired successfully
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:37:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:37:47: [INFO] Logs directory created
2025-09-19T10:37:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:37:47: [10:37:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:37:47: [10:37:47 am] ✅ Google Sheets API initialized
2025-09-19T10:37:47: [INFO] Google Sheets helper initialized
2025-09-19T10:37:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:37:47: 🗑️ Deleted old log file: bot-2025-09-19T05-07-15-043Z.log
2025-09-19T10:37:47: 📝 Enhanced Logger initialized
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:37:47: 📁 Loaded statistics from file
2025-09-19T10:37:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:37:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:37:47: 🧹 Removed stale process lock
2025-09-19T10:37:47: 🔒 Process lock acquired (PID: 14788)
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14788
}
2025-09-19T10:37:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:37:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258467017, willExpireAt: 1758258707017 },
  timestamp: 1758258467181
}
2025-09-19T10:37:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:37:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:37:47: 📋 Message rules loaded: 8 types
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258467017, processId: 14788 },
  timestamp: 1758258467180
}
2025-09-19T10:37:47: ℹ️ [10:37:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 167,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:17: 💾 Data synced to files successfully
2025-09-19T10:38:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:17: [INFO] WhatsApp client initialized
2025-09-19T10:38:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:19: 📝 Loaded 12 template types
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258499430,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3880,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:19: ⏰ 4-minute startup delay active
2025-09-19T10:38:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:19: [INFO] Using PQueue for job processing
2025-09-19T10:38:19: [INFO] Memory management setup completed
2025-09-19T10:38:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:19: [INFO] Checking process locks...
2025-09-19T10:38:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:19: [INFO] Process locks acquired successfully
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:19: [INFO] Logs directory created
2025-09-19T10:38:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:19: [10:38:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:19: [10:38:19 am] ✅ Google Sheets API initialized
2025-09-19T10:38:19: [INFO] Google Sheets helper initialized
2025-09-19T10:38:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:19: 🗑️ Deleted old log file: bot-2025-09-19T05-07-18-014Z.log
2025-09-19T10:38:19: 📝 Enhanced Logger initialized
2025-09-19T10:38:19: 📁 Loaded statistics from file
2025-09-19T10:38:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:19: 🧹 Removed stale process lock
2025-09-19T10:38:19: 🔒 Process lock acquired (PID: 3880)
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3880
}
2025-09-19T10:38:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258499430, processId: 3880 },
  timestamp: 1758258499562
}
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258499430, willExpireAt: 1758258739430 },
  timestamp: 1758258499562
}
2025-09-19T10:38:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:19: 📋 Message rules loaded: 8 types
2025-09-19T10:38:19: ℹ️ [10:38:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:20: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:20: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:20: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:20: [INFO] WhatsApp client initialized
2025-09-19T10:38:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:22: 📝 Loaded 12 template types
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258502284,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17600,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:22: ⏰ 4-minute startup delay active
2025-09-19T10:38:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:22: [INFO] Using PQueue for job processing
2025-09-19T10:38:22: [INFO] Memory management setup completed
2025-09-19T10:38:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:22: [INFO] Checking process locks...
2025-09-19T10:38:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:22: [INFO] Process locks acquired successfully
2025-09-19T10:38:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:22: [INFO] Logs directory created
2025-09-19T10:38:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:22: [10:38:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:22: [10:38:22 am] ✅ Google Sheets API initialized
2025-09-19T10:38:22: [INFO] Google Sheets helper initialized
2025-09-19T10:38:22: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:22: 🗑️ Deleted old log file: bot-2025-09-19T05-07-21-204Z.log
2025-09-19T10:38:22: 📝 Enhanced Logger initialized
2025-09-19T10:38:22: 📁 Loaded statistics from file
2025-09-19T10:38:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:22: 🧹 Removed stale process lock
2025-09-19T10:38:22: 🔒 Process lock acquired (PID: 17600)
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17600
}
2025-09-19T10:38:22: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258502284, processId: 17600 },
  timestamp: 1758258502381
}
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258502284, willExpireAt: 1758258742284 },
  timestamp: 1758258502382
}
2025-09-19T10:38:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:22: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:22: 📋 Message rules loaded: 8 types
2025-09-19T10:38:22: ℹ️ [10:38:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 100,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:23: [INFO] WhatsApp client initialized
2025-09-19T10:38:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:25: 📝 Loaded 12 template types
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258505392,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11064,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:25: ⏰ 4-minute startup delay active
2025-09-19T10:38:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:25: [INFO] Using PQueue for job processing
2025-09-19T10:38:25: [INFO] Memory management setup completed
2025-09-19T10:38:25: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:25: [INFO] Checking process locks...
2025-09-19T10:38:25: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:25: [INFO] Process locks acquired successfully
2025-09-19T10:38:25: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:25: [INFO] Logs directory created
2025-09-19T10:38:25: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:25: [10:38:25 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:25: [10:38:25 am] ✅ Google Sheets API initialized
2025-09-19T10:38:25: [INFO] Google Sheets helper initialized
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:25: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:25: 🗑️ Deleted old log file: bot-2025-09-19T05-07-24-185Z.log
2025-09-19T10:38:25: 📝 Enhanced Logger initialized
2025-09-19T10:38:25: 📁 Loaded statistics from file
2025-09-19T10:38:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:25: 🧹 Removed stale process lock
2025-09-19T10:38:25: 🔒 Process lock acquired (PID: 11064)
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11064
}
2025-09-19T10:38:25: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258505392, willExpireAt: 1758258745392 },
  timestamp: 1758258505504
}
2025-09-19T10:38:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:25: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:25: 📋 Message rules loaded: 8 types
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258505392, processId: 11064 },
  timestamp: 1758258505504
}
2025-09-19T10:38:25: ℹ️ [10:38:25 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 114,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:26: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:26: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:26: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:26: [INFO] WhatsApp client initialized
2025-09-19T10:38:28: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:28: 📝 Loaded 12 template types
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258508184,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16948,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:28: ⏰ 4-minute startup delay active
2025-09-19T10:38:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:28: [INFO] Using PQueue for job processing
2025-09-19T10:38:28: [INFO] Memory management setup completed
2025-09-19T10:38:28: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:28: [INFO] Checking process locks...
2025-09-19T10:38:28: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:28: [INFO] Process locks acquired successfully
2025-09-19T10:38:28: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:28: [INFO] Logs directory created
2025-09-19T10:38:28: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:28: [10:38:28 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:28: [10:38:28 am] ✅ Google Sheets API initialized
2025-09-19T10:38:28: [INFO] Google Sheets helper initialized
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:28: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:28: 🗑️ Deleted old log file: bot-2025-09-19T05-07-27-031Z.log
2025-09-19T10:38:28: 📝 Enhanced Logger initialized
2025-09-19T10:38:28: 📁 Loaded statistics from file
2025-09-19T10:38:28: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:28: 🧹 Removed stale process lock
2025-09-19T10:38:28: 🔒 Process lock acquired (PID: 16948)
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16948
}
2025-09-19T10:38:28: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:28: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258508184, processId: 16948 },
  timestamp: 1758258508294
}
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258508184, willExpireAt: 1758258748184 },
  timestamp: 1758258508294
}
2025-09-19T10:38:28: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:28: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:28: 📋 Message rules loaded: 8 types
2025-09-19T10:38:28: ℹ️ [10:38:28 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 112,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:29: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:29: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:29: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:29: [INFO] WhatsApp client initialized
2025-09-19T10:38:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:31: 📝 Loaded 12 template types
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258511498,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10668,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:31: ⏰ 4-minute startup delay active
2025-09-19T10:38:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:31: [INFO] Using PQueue for job processing
2025-09-19T10:38:31: [INFO] Memory management setup completed
2025-09-19T10:38:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:31: [INFO] Checking process locks...
2025-09-19T10:38:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:31: [INFO] Process locks acquired successfully
2025-09-19T10:38:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:31: [INFO] Logs directory created
2025-09-19T10:38:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:31: [10:38:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:31: [10:38:31 am] ✅ Google Sheets API initialized
2025-09-19T10:38:31: [INFO] Google Sheets helper initialized
2025-09-19T10:38:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:31: 🗑️ Deleted old log file: bot-2025-09-19T05-07-29-826Z.log
2025-09-19T10:38:31: 📝 Enhanced Logger initialized
2025-09-19T10:38:31: 📁 Loaded statistics from file
2025-09-19T10:38:31: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:31: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:31: 🧹 Removed stale process lock
2025-09-19T10:38:31: 🔒 Process lock acquired (PID: 10668)
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10668
}
2025-09-19T10:38:31: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:31: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258511498, willExpireAt: 1758258751498 },
  timestamp: 1758258511600
}
2025-09-19T10:38:31: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:31: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:31: 📋 Message rules loaded: 8 types
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258511498, processId: 10668 },
  timestamp: 1758258511600
}
2025-09-19T10:38:31: ℹ️ [10:38:31 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:33: [INFO] WhatsApp client initialized
2025-09-19T10:38:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:35: 📝 Loaded 12 template types
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258515229,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3220,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:35: ⏰ 4-minute startup delay active
2025-09-19T10:38:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:35: [INFO] Using PQueue for job processing
2025-09-19T10:38:35: [INFO] Memory management setup completed
2025-09-19T10:38:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:35: [INFO] Checking process locks...
2025-09-19T10:38:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:35: [INFO] Process locks acquired successfully
2025-09-19T10:38:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:35: [INFO] Logs directory created
2025-09-19T10:38:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:35: [10:38:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:35: [10:38:35 am] ✅ Google Sheets API initialized
2025-09-19T10:38:35: [INFO] Google Sheets helper initialized
2025-09-19T10:38:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:35: 🗑️ Deleted old log file: bot-2025-09-19T05-07-32-621Z.log
2025-09-19T10:38:35: 📝 Enhanced Logger initialized
2025-09-19T10:38:35: 📁 Loaded statistics from file
2025-09-19T10:38:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:35: 🧹 Removed stale process lock
2025-09-19T10:38:35: 🔒 Process lock acquired (PID: 3220)
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3220
}
2025-09-19T10:38:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258515229, processId: 3220 },
  timestamp: 1758258515335
}
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258515229, willExpireAt: 1758258755229 },
  timestamp: 1758258515335
}
2025-09-19T10:38:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:35: 📋 Message rules loaded: 8 types
2025-09-19T10:38:35: ℹ️ [10:38:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 108,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:36: [INFO] WhatsApp client initialized
2025-09-19T10:38:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:38: 📝 Loaded 12 template types
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258518540,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16380,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:38: ⏰ 4-minute startup delay active
2025-09-19T10:38:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:38: [INFO] Using PQueue for job processing
2025-09-19T10:38:38: [INFO] Memory management setup completed
2025-09-19T10:38:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:38: [INFO] Checking process locks...
2025-09-19T10:38:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:38: [INFO] Process locks acquired successfully
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:38: [INFO] Logs directory created
2025-09-19T10:38:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:38: [10:38:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:38: [10:38:38 am] ✅ Google Sheets API initialized
2025-09-19T10:38:38: [INFO] Google Sheets helper initialized
2025-09-19T10:38:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:38: 🗑️ Deleted old log file: bot-2025-09-19T05-07-35-324Z.log
2025-09-19T10:38:38: 📝 Enhanced Logger initialized
2025-09-19T10:38:38: 📁 Loaded statistics from file
2025-09-19T10:38:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:38: 🧹 Removed stale process lock
2025-09-19T10:38:38: 🔒 Process lock acquired (PID: 16380)
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16380
}
2025-09-19T10:38:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258518540, processId: 16380 },
  timestamp: 1758258518647
}
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258518540, willExpireAt: 1758258758540 },
  timestamp: 1758258518647
}
2025-09-19T10:38:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:38: 📋 Message rules loaded: 8 types
2025-09-19T10:38:38: ℹ️ [10:38:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:39: [INFO] WhatsApp client initialized
2025-09-19T10:38:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:41: 📝 Loaded 12 template types
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258521383,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8196,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:41: ⏰ 4-minute startup delay active
2025-09-19T10:38:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:41: [INFO] Using PQueue for job processing
2025-09-19T10:38:41: [INFO] Memory management setup completed
2025-09-19T10:38:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:41: [INFO] Checking process locks...
2025-09-19T10:38:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:41: [INFO] Process locks acquired successfully
2025-09-19T10:38:41: [INFO] Logs directory created
2025-09-19T10:38:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:41: [10:38:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:41: [10:38:41 am] ✅ Google Sheets API initialized
2025-09-19T10:38:41: [INFO] Google Sheets helper initialized
2025-09-19T10:38:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:41: 🗑️ Deleted old log file: bot-2025-09-19T05-07-38-108Z.log
2025-09-19T10:38:41: 📝 Enhanced Logger initialized
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:41: 📁 Loaded statistics from file
2025-09-19T10:38:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:41: 🧹 Removed stale process lock
2025-09-19T10:38:41: 🔒 Process lock acquired (PID: 8196)
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8196
}
2025-09-19T10:38:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258521383, processId: 8196 },
  timestamp: 1758258521474
}
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258521383, willExpireAt: 1758258761383 },
  timestamp: 1758258521474
}
2025-09-19T10:38:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:41: 📋 Message rules loaded: 8 types
2025-09-19T10:38:41: ℹ️ [10:38:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 96,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:42: [INFO] WhatsApp client initialized
2025-09-19T10:38:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:44: 📝 Loaded 12 template types
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258524193,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8608,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:44: ⏰ 4-minute startup delay active
2025-09-19T10:38:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:44: [INFO] Using PQueue for job processing
2025-09-19T10:38:44: [INFO] Memory management setup completed
2025-09-19T10:38:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:44: [INFO] Checking process locks...
2025-09-19T10:38:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:44: [INFO] Process locks acquired successfully
2025-09-19T10:38:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:44: [INFO] Logs directory created
2025-09-19T10:38:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:44: [10:38:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:44: [10:38:44 am] ✅ Google Sheets API initialized
2025-09-19T10:38:44: [INFO] Google Sheets helper initialized
2025-09-19T10:38:44: 🗑️ Deleted old log file: bot-2025-09-19T05-07-40-866Z.log
2025-09-19T10:38:44: 📝 Enhanced Logger initialized
2025-09-19T10:38:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:44: 📁 Loaded statistics from file
2025-09-19T10:38:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:44: 🧹 Removed stale process lock
2025-09-19T10:38:44: 🔒 Process lock acquired (PID: 8608)
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8608
}
2025-09-19T10:38:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258524193, willExpireAt: 1758258764193 },
  timestamp: 1758258524287
}
2025-09-19T10:38:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:44: 📋 Message rules loaded: 8 types
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258524193, processId: 8608 },
  timestamp: 1758258524287
}
2025-09-19T10:38:44: ℹ️ [10:38:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 96,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:45: [INFO] WhatsApp client initialized
2025-09-19T10:38:47: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:47: 📝 Loaded 12 template types
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258527535,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16408,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:47: ⏰ 4-minute startup delay active
2025-09-19T10:38:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:47: [INFO] Using PQueue for job processing
2025-09-19T10:38:47: [INFO] Memory management setup completed
2025-09-19T10:38:47: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:47: [INFO] Checking process locks...
2025-09-19T10:38:47: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:47: [INFO] Process locks acquired successfully
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:47: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:47: [INFO] Logs directory created
2025-09-19T10:38:47: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:47: [10:38:47 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:47: [10:38:47 am] ✅ Google Sheets API initialized
2025-09-19T10:38:47: [INFO] Google Sheets helper initialized
2025-09-19T10:38:47: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:47: 🗑️ Deleted old log file: bot-2025-09-19T05-07-43-647Z.log
2025-09-19T10:38:47: 📝 Enhanced Logger initialized
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:47: 📁 Loaded statistics from file
2025-09-19T10:38:47: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:47: 🧹 Removed stale process lock
2025-09-19T10:38:47: 🔒 Process lock acquired (PID: 16408)
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16408
}
2025-09-19T10:38:47: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:47: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258527535, processId: 16408 },
  timestamp: 1758258527647
}
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258527535, willExpireAt: 1758258767535 },
  timestamp: 1758258527647
}
2025-09-19T10:38:47: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:47: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:47: 📋 Message rules loaded: 8 types
2025-09-19T10:38:47: ℹ️ [10:38:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 115,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:48: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:48: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:48: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:48: [INFO] WhatsApp client initialized
2025-09-19T10:38:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:50: 📝 Loaded 12 template types
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258530515,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 372,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:50: ⏰ 4-minute startup delay active
2025-09-19T10:38:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:50: [INFO] Using PQueue for job processing
2025-09-19T10:38:50: [INFO] Memory management setup completed
2025-09-19T10:38:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:50: [INFO] Checking process locks...
2025-09-19T10:38:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:50: [INFO] Process locks acquired successfully
2025-09-19T10:38:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:50: [INFO] Logs directory created
2025-09-19T10:38:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:50: [10:38:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:50: [10:38:50 am] ✅ Google Sheets API initialized
2025-09-19T10:38:50: [INFO] Google Sheets helper initialized
2025-09-19T10:38:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:50: 🗑️ Deleted old log file: bot-2025-09-19T05-07-47-054Z.log
2025-09-19T10:38:50: 📝 Enhanced Logger initialized
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:50: 📁 Loaded statistics from file
2025-09-19T10:38:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:50: 🧹 Removed stale process lock
2025-09-19T10:38:50: 🔒 Process lock acquired (PID: 372)
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 372
}
2025-09-19T10:38:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258530515, processId: 372 },
  timestamp: 1758258530616
}
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258530515, willExpireAt: 1758258770515 },
  timestamp: 1758258530616
}
2025-09-19T10:38:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:50: 📋 Message rules loaded: 8 types
2025-09-19T10:38:50: ℹ️ [10:38:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 103,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:51: [INFO] WhatsApp client initialized
2025-09-19T10:38:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:53: 📝 Loaded 12 template types
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258533837,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16616,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:53: ⏰ 4-minute startup delay active
2025-09-19T10:38:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:53: [INFO] Using PQueue for job processing
2025-09-19T10:38:53: [INFO] Memory management setup completed
2025-09-19T10:38:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:53: [INFO] Checking process locks...
2025-09-19T10:38:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:53: [INFO] Process locks acquired successfully
2025-09-19T10:38:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:53: [INFO] Logs directory created
2025-09-19T10:38:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:53: [10:38:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:53: [10:38:53 am] ✅ Google Sheets API initialized
2025-09-19T10:38:53: [INFO] Google Sheets helper initialized
2025-09-19T10:38:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:53: 🗑️ Deleted old log file: bot-2025-09-19T05-08-19-456Z.log
2025-09-19T10:38:53: 📝 Enhanced Logger initialized
2025-09-19T10:38:53: 📁 Loaded statistics from file
2025-09-19T10:38:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:53: 🧹 Removed stale process lock
2025-09-19T10:38:53: 🔒 Process lock acquired (PID: 16616)
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16616
}
2025-09-19T10:38:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258533837, willExpireAt: 1758258773837 },
  timestamp: 1758258533968
}
2025-09-19T10:38:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:53: 📋 Message rules loaded: 8 types
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258533837, processId: 16616 },
  timestamp: 1758258533968
}
2025-09-19T10:38:53: ℹ️ [10:38:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 133,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:54: [INFO] WhatsApp client initialized
2025-09-19T10:38:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:38:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:38:56: 📝 Loaded 12 template types
2025-09-19T10:38:56: ℹ️ [10:38:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258536877,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9208,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:38:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:38:56: ⏰ 4-minute startup delay active
2025-09-19T10:38:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:38:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:38:56: [INFO] Using PQueue for job processing
2025-09-19T10:38:56: [INFO] Memory management setup completed
2025-09-19T10:38:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:38:56: [INFO] Checking process locks...
2025-09-19T10:38:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:38:56: [INFO] Process locks acquired successfully
2025-09-19T10:38:56: ℹ️ [10:38:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:38:56: [INFO] Logs directory created
2025-09-19T10:38:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:38:56: [10:38:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:38:56: [10:38:56 am] ✅ Google Sheets API initialized
2025-09-19T10:38:56: [INFO] Google Sheets helper initialized
2025-09-19T10:38:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:38:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:38:56: ℹ️ [10:38:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:38:56: 📁 Loaded statistics from file
2025-09-19T10:38:56: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:38:56: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:38:56: 🗑️ Deleted old log file: bot-2025-09-19T05-08-22-311Z.log
2025-09-19T10:38:56: 📝 Enhanced Logger initialized
2025-09-19T10:38:56: 🧹 Removed stale process lock
2025-09-19T10:38:56: 🔒 Process lock acquired (PID: 9208)
2025-09-19T10:38:57: ℹ️ [10:38:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9208
}
2025-09-19T10:38:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:38:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:38:57: ℹ️ [10:38:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258536877, processId: 9208 },
  timestamp: 1758258537001
}
2025-09-19T10:38:57: ℹ️ [10:38:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258536877, willExpireAt: 1758258776877 },
  timestamp: 1758258537001
}
2025-09-19T10:38:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:38:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:38:57: 📋 Message rules loaded: 8 types
2025-09-19T10:38:57: ℹ️ [10:38:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 127,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:38:58: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:38:58: [INFO] Initializing WhatsApp client...
2025-09-19T10:38:58: 🔄 Initializing WhatsApp client...
2025-09-19T10:38:58: [INFO] WhatsApp client initialized
2025-09-19T10:39:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:00: 📝 Loaded 12 template types
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258540079,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12700,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:00: ⏰ 4-minute startup delay active
2025-09-19T10:39:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:00: [INFO] Using PQueue for job processing
2025-09-19T10:39:00: [INFO] Memory management setup completed
2025-09-19T10:39:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:00: [INFO] Checking process locks...
2025-09-19T10:39:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:00: [INFO] Process locks acquired successfully
2025-09-19T10:39:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:00: [INFO] Logs directory created
2025-09-19T10:39:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:00: [10:39:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:00: [10:39:00 am] ✅ Google Sheets API initialized
2025-09-19T10:39:00: [INFO] Google Sheets helper initialized
2025-09-19T10:39:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:00: 🗑️ Deleted old log file: bot-2025-09-19T05-08-25-421Z.log
2025-09-19T10:39:00: 📝 Enhanced Logger initialized
2025-09-19T10:39:00: 📁 Loaded statistics from file
2025-09-19T10:39:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:00: 🧹 Removed stale process lock
2025-09-19T10:39:00: 🔒 Process lock acquired (PID: 12700)
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12700
}
2025-09-19T10:39:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258540079, willExpireAt: 1758258780079 },
  timestamp: 1758258540196
}
2025-09-19T10:39:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:00: 📋 Message rules loaded: 8 types
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258540079, processId: 12700 },
  timestamp: 1758258540195
}
2025-09-19T10:39:00: ℹ️ [10:39:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 119,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:01: [INFO] WhatsApp client initialized
2025-09-19T10:39:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:03: 📝 Loaded 12 template types
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258543241,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9376,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:03: ⏰ 4-minute startup delay active
2025-09-19T10:39:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:03: [INFO] Using PQueue for job processing
2025-09-19T10:39:03: [INFO] Memory management setup completed
2025-09-19T10:39:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:03: [INFO] Checking process locks...
2025-09-19T10:39:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:03: [INFO] Process locks acquired successfully
2025-09-19T10:39:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:03: [INFO] Logs directory created
2025-09-19T10:39:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:03: [10:39:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:03: [10:39:03 am] ✅ Google Sheets API initialized
2025-09-19T10:39:03: [INFO] Google Sheets helper initialized
2025-09-19T10:39:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:03: 🗑️ Deleted old log file: bot-2025-09-19T05-08-28-212Z.log
2025-09-19T10:39:03: 📝 Enhanced Logger initialized
2025-09-19T10:39:03: 📁 Loaded statistics from file
2025-09-19T10:39:03: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:03: 🧹 Removed stale process lock
2025-09-19T10:39:03: 🔒 Process lock acquired (PID: 9376)
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9376
}
2025-09-19T10:39:03: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:03: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258543241, processId: 9376 },
  timestamp: 1758258543367
}
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258543241, willExpireAt: 1758258783241 },
  timestamp: 1758258543368
}
2025-09-19T10:39:03: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:03: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:03: 📋 Message rules loaded: 8 types
2025-09-19T10:39:03: ℹ️ [10:39:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:06: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:06: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:06: 📝 Loaded 12 template types
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258546414,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4656,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:06: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:06: ⏰ 4-minute startup delay active
2025-09-19T10:39:06: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:06: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:06: [INFO] Using PQueue for job processing
2025-09-19T10:39:06: [INFO] Memory management setup completed
2025-09-19T10:39:06: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:06: [INFO] Checking process locks...
2025-09-19T10:39:06: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:06: [INFO] Process locks acquired successfully
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:06: [INFO] Logs directory created
2025-09-19T10:39:06: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:06: [10:39:06 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:06: [10:39:06 am] ✅ Google Sheets API initialized
2025-09-19T10:39:06: [INFO] Google Sheets helper initialized
2025-09-19T10:39:06: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:06: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:06: 🗑️ Deleted old log file: bot-2025-09-19T05-08-31-527Z.log
2025-09-19T10:39:06: 📝 Enhanced Logger initialized
2025-09-19T10:39:06: 📁 Loaded statistics from file
2025-09-19T10:39:06: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:06: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:06: 🧹 Removed stale process lock
2025-09-19T10:39:06: 🔒 Process lock acquired (PID: 4656)
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4656
}
2025-09-19T10:39:06: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:06: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258546414, processId: 4656 },
  timestamp: 1758258546528
}
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258546414, willExpireAt: 1758258786414 },
  timestamp: 1758258546529
}
2025-09-19T10:39:06: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:06: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:06: 📋 Message rules loaded: 8 types
2025-09-19T10:39:06: ℹ️ [10:39:06 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:07: [INFO] WhatsApp client initialized
2025-09-19T10:39:09: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:09: 📝 Loaded 12 template types
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258549442,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18264,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:09: ⏰ 4-minute startup delay active
2025-09-19T10:39:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:09: [INFO] Using PQueue for job processing
2025-09-19T10:39:09: [INFO] Memory management setup completed
2025-09-19T10:39:09: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:09: [INFO] Checking process locks...
2025-09-19T10:39:09: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:09: [INFO] Process locks acquired successfully
2025-09-19T10:39:09: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:09: [INFO] Logs directory created
2025-09-19T10:39:09: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:09: [10:39:09 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:09: [10:39:09 am] ✅ Google Sheets API initialized
2025-09-19T10:39:09: [INFO] Google Sheets helper initialized
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:09: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:09: 🗑️ Deleted old log file: bot-2025-09-19T05-08-35-257Z.log
2025-09-19T10:39:09: 📝 Enhanced Logger initialized
2025-09-19T10:39:09: 📁 Loaded statistics from file
2025-09-19T10:39:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:09: 🧹 Removed stale process lock
2025-09-19T10:39:09: 🔒 Process lock acquired (PID: 18264)
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18264
}
2025-09-19T10:39:09: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258549442, processId: 18264 },
  timestamp: 1758258549603
}
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258549442, willExpireAt: 1758258789442 },
  timestamp: 1758258549604
}
2025-09-19T10:39:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:09: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:09: 📋 Message rules loaded: 8 types
2025-09-19T10:39:09: ℹ️ [10:39:09 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 165,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:10: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:10: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:10: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:10: [INFO] WhatsApp client initialized
2025-09-19T10:39:13: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:13: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:13: 📝 Loaded 12 template types
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258553100,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7868,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:13: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:13: ⏰ 4-minute startup delay active
2025-09-19T10:39:13: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:13: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:13: [INFO] Using PQueue for job processing
2025-09-19T10:39:13: [INFO] Memory management setup completed
2025-09-19T10:39:13: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:13: [INFO] Checking process locks...
2025-09-19T10:39:13: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:13: [INFO] Process locks acquired successfully
2025-09-19T10:39:13: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:13: [INFO] Logs directory created
2025-09-19T10:39:13: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:13: [10:39:13 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:13: [10:39:13 am] ✅ Google Sheets API initialized
2025-09-19T10:39:13: [INFO] Google Sheets helper initialized
2025-09-19T10:39:13: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:13: 🗑️ Deleted old log file: bot-2025-09-19T05-08-38-571Z.log
2025-09-19T10:39:13: 📝 Enhanced Logger initialized
2025-09-19T10:39:13: 📁 Loaded statistics from file
2025-09-19T10:39:13: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:13: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:13: 🧹 Removed stale process lock
2025-09-19T10:39:13: 🔒 Process lock acquired (PID: 7868)
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7868
}
2025-09-19T10:39:13: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:13: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258553100, processId: 7868 },
  timestamp: 1758258553217
}
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258553100, willExpireAt: 1758258793100 },
  timestamp: 1758258553217
}
2025-09-19T10:39:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:13: 📋 Message rules loaded: 8 types
2025-09-19T10:39:13: ℹ️ [10:39:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:14: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:14: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:14: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:14: [INFO] WhatsApp client initialized
2025-09-19T10:39:16: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:16: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:16: 📝 Loaded 12 template types
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258556349,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 5472,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:16: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:16: ⏰ 4-minute startup delay active
2025-09-19T10:39:16: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:16: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:16: [INFO] Using PQueue for job processing
2025-09-19T10:39:16: [INFO] Memory management setup completed
2025-09-19T10:39:16: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:16: [INFO] Checking process locks...
2025-09-19T10:39:16: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:16: [INFO] Process locks acquired successfully
2025-09-19T10:39:16: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:16: [INFO] Logs directory created
2025-09-19T10:39:16: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:16: [10:39:16 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:16: [10:39:16 am] ✅ Google Sheets API initialized
2025-09-19T10:39:16: [INFO] Google Sheets helper initialized
2025-09-19T10:39:16: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:16: 🗑️ Deleted old log file: bot-2025-09-19T05-08-41-407Z.log
2025-09-19T10:39:16: 📝 Enhanced Logger initialized
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:16: 📁 Loaded statistics from file
2025-09-19T10:39:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:16: 🧹 Removed stale process lock
2025-09-19T10:39:16: 🔒 Process lock acquired (PID: 5472)
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 5472
}
2025-09-19T10:39:16: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258556349, processId: 5472 },
  timestamp: 1758258556484
}
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258556349, willExpireAt: 1758258796349 },
  timestamp: 1758258556484
}
2025-09-19T10:39:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:16: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:16: 📋 Message rules loaded: 8 types
2025-09-19T10:39:16: ℹ️ [10:39:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:17: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:17: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:17: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:17: [INFO] WhatsApp client initialized
2025-09-19T10:39:19: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:19: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:19: 📝 Loaded 12 template types
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258559701,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10024,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:19: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:19: ⏰ 4-minute startup delay active
2025-09-19T10:39:19: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:19: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:19: [INFO] Using PQueue for job processing
2025-09-19T10:39:19: [INFO] Memory management setup completed
2025-09-19T10:39:19: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:19: [INFO] Checking process locks...
2025-09-19T10:39:19: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:19: [INFO] Process locks acquired successfully
2025-09-19T10:39:19: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:19: [INFO] Logs directory created
2025-09-19T10:39:19: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:19: [10:39:19 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:19: [10:39:19 am] ✅ Google Sheets API initialized
2025-09-19T10:39:19: [INFO] Google Sheets helper initialized
2025-09-19T10:39:19: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:19: 🗑️ Deleted old log file: bot-2025-09-19T05-08-44-217Z.log
2025-09-19T10:39:19: 📝 Enhanced Logger initialized
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:19: 📁 Loaded statistics from file
2025-09-19T10:39:19: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:19: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:19: 🧹 Removed stale process lock
2025-09-19T10:39:19: 🔒 Process lock acquired (PID: 10024)
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10024
}
2025-09-19T10:39:19: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:19: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258559701, processId: 10024 },
  timestamp: 1758258559800
}
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258559701, willExpireAt: 1758258799701 },
  timestamp: 1758258559800
}
2025-09-19T10:39:19: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:19: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:19: 📋 Message rules loaded: 8 types
2025-09-19T10:39:19: ℹ️ [10:39:19 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 102,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:21: [INFO] WhatsApp client initialized
2025-09-19T10:39:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:23: 📝 Loaded 12 template types
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258563065,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16524,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:23: ⏰ 4-minute startup delay active
2025-09-19T10:39:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:23: [INFO] Using PQueue for job processing
2025-09-19T10:39:23: [INFO] Memory management setup completed
2025-09-19T10:39:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:23: [INFO] Checking process locks...
2025-09-19T10:39:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:23: [INFO] Process locks acquired successfully
2025-09-19T10:39:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:23: [INFO] Logs directory created
2025-09-19T10:39:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:23: [10:39:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:23: [10:39:23 am] ✅ Google Sheets API initialized
2025-09-19T10:39:23: [INFO] Google Sheets helper initialized
2025-09-19T10:39:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:23: 🗑️ Deleted old log file: bot-2025-09-19T05-08-47-566Z.log
2025-09-19T10:39:23: 📝 Enhanced Logger initialized
2025-09-19T10:39:23: 📁 Loaded statistics from file
2025-09-19T10:39:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:23: 🧹 Removed stale process lock
2025-09-19T10:39:23: 🔒 Process lock acquired (PID: 16524)
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16524
}
2025-09-19T10:39:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258563065, processId: 16524 },
  timestamp: 1758258563185
}
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258563065, willExpireAt: 1758258803065 },
  timestamp: 1758258563185
}
2025-09-19T10:39:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:23: 📋 Message rules loaded: 8 types
2025-09-19T10:39:23: ℹ️ [10:39:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:24: [INFO] WhatsApp client initialized
2025-09-19T10:39:25: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:25: 📝 Loaded 12 template types
2025-09-19T10:39:26: ℹ️ [10:39:25 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258565983,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12456,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:26: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:26: ⏰ 4-minute startup delay active
2025-09-19T10:39:26: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:26: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:26: [INFO] Using PQueue for job processing
2025-09-19T10:39:26: [INFO] Memory management setup completed
2025-09-19T10:39:26: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:26: [INFO] Checking process locks...
2025-09-19T10:39:26: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:26: ℹ️ [10:39:26 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:26: [INFO] Process locks acquired successfully
2025-09-19T10:39:26: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:26: [INFO] Logs directory created
2025-09-19T10:39:26: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:26: [10:39:26 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:26: [10:39:26 am] ✅ Google Sheets API initialized
2025-09-19T10:39:26: [INFO] Google Sheets helper initialized
2025-09-19T10:39:26: ℹ️ [10:39:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:26: 🗑️ Deleted old log file: bot-2025-09-19T05-08-50-541Z.log
2025-09-19T10:39:26: 📝 Enhanced Logger initialized
2025-09-19T10:39:26: 📁 Loaded statistics from file
2025-09-19T10:39:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:26: 🧹 Removed stale process lock
2025-09-19T10:39:26: 🔒 Process lock acquired (PID: 12456)
2025-09-19T10:39:26: ℹ️ [10:39:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12456
}
2025-09-19T10:39:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:26: ℹ️ [10:39:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258565983, willExpireAt: 1758258805983 },
  timestamp: 1758258566098
}
2025-09-19T10:39:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:26: 📋 Message rules loaded: 8 types
2025-09-19T10:39:26: ℹ️ [10:39:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258565983, processId: 12456 },
  timestamp: 1758258566098
}
2025-09-19T10:39:26: ℹ️ [10:39:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 117,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:27: [INFO] WhatsApp client initialized
2025-09-19T10:39:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:29: 📝 Loaded 12 template types
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258569236,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8808,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:29: ⏰ 4-minute startup delay active
2025-09-19T10:39:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:29: [INFO] Using PQueue for job processing
2025-09-19T10:39:29: [INFO] Memory management setup completed
2025-09-19T10:39:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:29: [INFO] Checking process locks...
2025-09-19T10:39:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:29: [INFO] Process locks acquired successfully
2025-09-19T10:39:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:29: [INFO] Logs directory created
2025-09-19T10:39:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:29: [10:39:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:29: [10:39:29 am] ✅ Google Sheets API initialized
2025-09-19T10:39:29: [INFO] Google Sheets helper initialized
2025-09-19T10:39:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:29: 🗑️ Deleted old log file: bot-2025-09-19T05-08-53-871Z.log
2025-09-19T10:39:29: 📝 Enhanced Logger initialized
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:29: 📁 Loaded statistics from file
2025-09-19T10:39:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:29: 🧹 Removed stale process lock
2025-09-19T10:39:29: 🔒 Process lock acquired (PID: 8808)
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8808
}
2025-09-19T10:39:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258569236, willExpireAt: 1758258809236 },
  timestamp: 1758258569382
}
2025-09-19T10:39:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:29: 📋 Message rules loaded: 8 types
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258569236, processId: 8808 },
  timestamp: 1758258569382
}
2025-09-19T10:39:29: ℹ️ [10:39:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:30: [INFO] WhatsApp client initialized
2025-09-19T10:39:32: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:32: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:32: 📝 Loaded 12 template types
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258572491,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 2276,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:32: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:32: ⏰ 4-minute startup delay active
2025-09-19T10:39:32: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:32: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:32: [INFO] Using PQueue for job processing
2025-09-19T10:39:32: [INFO] Memory management setup completed
2025-09-19T10:39:32: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:32: [INFO] Checking process locks...
2025-09-19T10:39:32: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:32: [INFO] Process locks acquired successfully
2025-09-19T10:39:32: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:32: [INFO] Logs directory created
2025-09-19T10:39:32: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:32: [10:39:32 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:32: [10:39:32 am] ✅ Google Sheets API initialized
2025-09-19T10:39:32: [INFO] Google Sheets helper initialized
2025-09-19T10:39:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:32: 🗑️ Deleted old log file: bot-2025-09-19T05-08-56-916Z.log
2025-09-19T10:39:32: 📝 Enhanced Logger initialized
2025-09-19T10:39:32: 📁 Loaded statistics from file
2025-09-19T10:39:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:32: 🧹 Removed stale process lock
2025-09-19T10:39:32: 🔒 Process lock acquired (PID: 2276)
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 2276
}
2025-09-19T10:39:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258572491, processId: 2276 },
  timestamp: 1758258572610
}
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258572491, willExpireAt: 1758258812491 },
  timestamp: 1758258572610
}
2025-09-19T10:39:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:32: 📋 Message rules loaded: 8 types
2025-09-19T10:39:32: ℹ️ [10:39:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:33: [INFO] WhatsApp client initialized
2025-09-19T10:39:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:35: 📝 Loaded 12 template types
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258575595,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15156,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:35: ⏰ 4-minute startup delay active
2025-09-19T10:39:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:35: [INFO] Using PQueue for job processing
2025-09-19T10:39:35: [INFO] Memory management setup completed
2025-09-19T10:39:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:35: [INFO] Checking process locks...
2025-09-19T10:39:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:35: [INFO] Process locks acquired successfully
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:35: [INFO] Logs directory created
2025-09-19T10:39:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:35: [10:39:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:35: [10:39:35 am] ✅ Google Sheets API initialized
2025-09-19T10:39:35: [INFO] Google Sheets helper initialized
2025-09-19T10:39:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:35: 🗑️ Deleted old log file: bot-2025-09-19T05-09-00-113Z.log
2025-09-19T10:39:35: 📝 Enhanced Logger initialized
2025-09-19T10:39:35: 📁 Loaded statistics from file
2025-09-19T10:39:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:35: 🧹 Removed stale process lock
2025-09-19T10:39:35: 🔒 Process lock acquired (PID: 15156)
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15156
}
2025-09-19T10:39:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258575595, processId: 15156 },
  timestamp: 1758258575730
}
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258575595, willExpireAt: 1758258815595 },
  timestamp: 1758258575730
}
2025-09-19T10:39:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:35: 📋 Message rules loaded: 8 types
2025-09-19T10:39:35: ℹ️ [10:39:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:37: [INFO] WhatsApp client initialized
2025-09-19T10:39:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:39: 📝 Loaded 12 template types
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258579010,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10856,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:39: ⏰ 4-minute startup delay active
2025-09-19T10:39:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:39: [INFO] Using PQueue for job processing
2025-09-19T10:39:39: [INFO] Memory management setup completed
2025-09-19T10:39:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:39: [INFO] Checking process locks...
2025-09-19T10:39:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:39: [INFO] Process locks acquired successfully
2025-09-19T10:39:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:39: [INFO] Logs directory created
2025-09-19T10:39:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:39: [10:39:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:39: [10:39:39 am] ✅ Google Sheets API initialized
2025-09-19T10:39:39: [INFO] Google Sheets helper initialized
2025-09-19T10:39:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:39: 🗑️ Deleted old log file: bot-2025-09-19T05-09-03-280Z.log
2025-09-19T10:39:39: 📝 Enhanced Logger initialized
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:39: 📁 Loaded statistics from file
2025-09-19T10:39:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:39: 🧹 Removed stale process lock
2025-09-19T10:39:39: 🔒 Process lock acquired (PID: 10856)
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10856
}
2025-09-19T10:39:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258579010, processId: 10856 },
  timestamp: 1758258579117
}
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258579010, willExpireAt: 1758258819010 },
  timestamp: 1758258579118
}
2025-09-19T10:39:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:39: 📋 Message rules loaded: 8 types
2025-09-19T10:39:39: ℹ️ [10:39:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:40: [INFO] WhatsApp client initialized
2025-09-19T10:39:42: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:42: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:42: 📝 Loaded 12 template types
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258582078,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18260,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:42: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:42: ⏰ 4-minute startup delay active
2025-09-19T10:39:42: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:42: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:42: [INFO] Using PQueue for job processing
2025-09-19T10:39:42: [INFO] Memory management setup completed
2025-09-19T10:39:42: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:42: [INFO] Checking process locks...
2025-09-19T10:39:42: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:42: [INFO] Process locks acquired successfully
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:42: [INFO] Logs directory created
2025-09-19T10:39:42: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:42: [10:39:42 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:42: [10:39:42 am] ✅ Google Sheets API initialized
2025-09-19T10:39:42: [INFO] Google Sheets helper initialized
2025-09-19T10:39:42: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:42: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:42: 🗑️ Deleted old log file: bot-2025-09-19T05-09-06-446Z.log
2025-09-19T10:39:42: 📝 Enhanced Logger initialized
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:42: 📁 Loaded statistics from file
2025-09-19T10:39:42: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:42: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:42: 🧹 Removed stale process lock
2025-09-19T10:39:42: 🔒 Process lock acquired (PID: 18260)
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18260
}
2025-09-19T10:39:42: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:42: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258582078, processId: 18260 },
  timestamp: 1758258582216
}
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258582078, willExpireAt: 1758258822078 },
  timestamp: 1758258582216
}
2025-09-19T10:39:42: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:42: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:42: 📋 Message rules loaded: 8 types
2025-09-19T10:39:42: ℹ️ [10:39:42 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 140,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:43: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:43: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:43: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:43: [INFO] WhatsApp client initialized
2025-09-19T10:39:45: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:45: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:45: 📝 Loaded 12 template types
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258585244,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:45: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:45: ⏰ 4-minute startup delay active
2025-09-19T10:39:45: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:45: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:45: [INFO] Using PQueue for job processing
2025-09-19T10:39:45: [INFO] Memory management setup completed
2025-09-19T10:39:45: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:45: [INFO] Checking process locks...
2025-09-19T10:39:45: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:45: [INFO] Process locks acquired successfully
2025-09-19T10:39:45: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:45: [INFO] Logs directory created
2025-09-19T10:39:45: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:45: [10:39:45 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:45: [10:39:45 am] ✅ Google Sheets API initialized
2025-09-19T10:39:45: [INFO] Google Sheets helper initialized
2025-09-19T10:39:45: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:45: 🗑️ Deleted old log file: bot-2025-09-19T05-09-09-485Z.log
2025-09-19T10:39:45: 📝 Enhanced Logger initialized
2025-09-19T10:39:45: 📁 Loaded statistics from file
2025-09-19T10:39:45: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:45: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:45: 🧹 Removed stale process lock
2025-09-19T10:39:45: 🔒 Process lock acquired (PID: 14000)
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14000
}
2025-09-19T10:39:45: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:45: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258585244, processId: 14000 },
  timestamp: 1758258585380
}
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258585244, willExpireAt: 1758258825244 },
  timestamp: 1758258585380
}
2025-09-19T10:39:45: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:45: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:45: 📋 Message rules loaded: 8 types
2025-09-19T10:39:45: ℹ️ [10:39:45 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 139,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:46: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:46: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:46: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:46: [INFO] WhatsApp client initialized
2025-09-19T10:39:48: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:48: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:48: 📝 Loaded 12 template types
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258588660,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9848,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:48: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:48: ⏰ 4-minute startup delay active
2025-09-19T10:39:48: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:48: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:48: [INFO] Using PQueue for job processing
2025-09-19T10:39:48: [INFO] Memory management setup completed
2025-09-19T10:39:48: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:48: [INFO] Checking process locks...
2025-09-19T10:39:48: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:48: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:48: [INFO] Process locks acquired successfully
2025-09-19T10:39:48: [INFO] Logs directory created
2025-09-19T10:39:48: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:48: [10:39:48 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:48: [10:39:48 am] ✅ Google Sheets API initialized
2025-09-19T10:39:48: [INFO] Google Sheets helper initialized
2025-09-19T10:39:48: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:48: 🗑️ Deleted old log file: bot-2025-09-19T05-09-13-132Z.log
2025-09-19T10:39:48: 📝 Enhanced Logger initialized
2025-09-19T10:39:48: 📁 Loaded statistics from file
2025-09-19T10:39:48: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:48: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:48: 🧹 Removed stale process lock
2025-09-19T10:39:48: 🔒 Process lock acquired (PID: 9848)
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9848
}
2025-09-19T10:39:48: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:48: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258588660, willExpireAt: 1758258828660 },
  timestamp: 1758258588790
}
2025-09-19T10:39:48: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:48: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:48: 📋 Message rules loaded: 8 types
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258588660, processId: 9848 },
  timestamp: 1758258588789
}
2025-09-19T10:39:48: ℹ️ [10:39:48 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:49: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:49: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:49: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:49: [INFO] WhatsApp client initialized
2025-09-19T10:39:51: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:51: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:51: 📝 Loaded 12 template types
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258591763,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18368,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:51: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:51: ⏰ 4-minute startup delay active
2025-09-19T10:39:51: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:51: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:51: [INFO] Using PQueue for job processing
2025-09-19T10:39:51: [INFO] Memory management setup completed
2025-09-19T10:39:51: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:51: [INFO] Checking process locks...
2025-09-19T10:39:51: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:51: [INFO] Process locks acquired successfully
2025-09-19T10:39:51: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:51: [INFO] Logs directory created
2025-09-19T10:39:51: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:51: [10:39:51 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:51: [10:39:51 am] ✅ Google Sheets API initialized
2025-09-19T10:39:51: [INFO] Google Sheets helper initialized
2025-09-19T10:39:51: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:51: 🗑️ Deleted old log file: bot-2025-09-19T05-09-16-387Z.log
2025-09-19T10:39:51: 📝 Enhanced Logger initialized
2025-09-19T10:39:51: 📁 Loaded statistics from file
2025-09-19T10:39:51: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:51: 🧹 Removed stale process lock
2025-09-19T10:39:51: 🔒 Process lock acquired (PID: 18368)
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18368
}
2025-09-19T10:39:51: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:51: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258591763, processId: 18368 },
  timestamp: 1758258591884
}
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258591763, willExpireAt: 1758258831763 },
  timestamp: 1758258591885
}
2025-09-19T10:39:51: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:51: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:51: 📋 Message rules loaded: 8 types
2025-09-19T10:39:51: ℹ️ [10:39:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 125,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:53: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:53: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:53: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:53: [INFO] WhatsApp client initialized
2025-09-19T10:39:55: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:55: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:55: 📝 Loaded 12 template types
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258595283,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4804,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:55: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:55: ⏰ 4-minute startup delay active
2025-09-19T10:39:55: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:55: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:55: [INFO] Using PQueue for job processing
2025-09-19T10:39:55: [INFO] Memory management setup completed
2025-09-19T10:39:55: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:55: [INFO] Checking process locks...
2025-09-19T10:39:55: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:55: [INFO] Process locks acquired successfully
2025-09-19T10:39:55: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:55: [INFO] Logs directory created
2025-09-19T10:39:55: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:55: [10:39:55 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:55: [10:39:55 am] ✅ Google Sheets API initialized
2025-09-19T10:39:55: [INFO] Google Sheets helper initialized
2025-09-19T10:39:55: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:55: 🗑️ Deleted old log file: bot-2025-09-19T05-09-19-728Z.log
2025-09-19T10:39:55: 📝 Enhanced Logger initialized
2025-09-19T10:39:55: 📁 Loaded statistics from file
2025-09-19T10:39:55: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:55: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:55: 🧹 Removed stale process lock
2025-09-19T10:39:55: 🔒 Process lock acquired (PID: 4804)
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4804
}
2025-09-19T10:39:55: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:55: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258595283, processId: 4804 },
  timestamp: 1758258595407
}
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258595283, willExpireAt: 1758258835283 },
  timestamp: 1758258595407
}
2025-09-19T10:39:55: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:55: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:55: 📋 Message rules loaded: 8 types
2025-09-19T10:39:55: ℹ️ [10:39:55 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 126,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:56: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:56: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:56: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:56: [INFO] WhatsApp client initialized
2025-09-19T10:39:58: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:39:58: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:39:58: 📝 Loaded 12 template types
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258598752,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10140,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:39:58: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:39:58: ⏰ 4-minute startup delay active
2025-09-19T10:39:58: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:39:58: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:39:58: [INFO] Using PQueue for job processing
2025-09-19T10:39:58: [INFO] Memory management setup completed
2025-09-19T10:39:58: [INFO] Starting WhatsApp Bot...
2025-09-19T10:39:58: [INFO] Checking process locks...
2025-09-19T10:39:58: 📁 Loaded 0 sent messages from file
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:39:58: [INFO] Process locks acquired successfully
2025-09-19T10:39:58: 📁 Loaded 0 customer histories from file
2025-09-19T10:39:58: [INFO] Logs directory created
2025-09-19T10:39:58: [INFO] Initializing Google Sheets helper...
2025-09-19T10:39:58: [10:39:58 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:39:58: [10:39:58 am] ✅ Google Sheets API initialized
2025-09-19T10:39:58: [INFO] Google Sheets helper initialized
2025-09-19T10:39:58: 📁 Loaded 0 message hashes from file
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:39:58: 🗑️ Deleted old log file: bot-2025-09-19T05-09-23-096Z.log
2025-09-19T10:39:58: 📝 Enhanced Logger initialized
2025-09-19T10:39:58: 📁 Loaded statistics from file
2025-09-19T10:39:58: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:39:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:39:58: 🧹 Removed stale process lock
2025-09-19T10:39:58: 🔒 Process lock acquired (PID: 10140)
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10140
}
2025-09-19T10:39:58: ⏰ Starting 240 second startup grace period...
2025-09-19T10:39:58: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258598752, willExpireAt: 1758258838752 },
  timestamp: 1758258598883
}
2025-09-19T10:39:58: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:39:58: ⏰ Startup grace period: 240 seconds
2025-09-19T10:39:58: 📋 Message rules loaded: 8 types
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258598752, processId: 10140 },
  timestamp: 1758258598883
}
2025-09-19T10:39:58: ℹ️ [10:39:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 134,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:39:59: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:39:59: [INFO] Initializing WhatsApp client...
2025-09-19T10:39:59: 🔄 Initializing WhatsApp client...
2025-09-19T10:39:59: [INFO] WhatsApp client initialized
2025-09-19T10:40:01: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:01: 📝 Loaded 12 template types
2025-09-19T10:40:01: ℹ️ [10:40:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258601961,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14544,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:01: ⏰ 4-minute startup delay active
2025-09-19T10:40:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:01: [INFO] Using PQueue for job processing
2025-09-19T10:40:01: [INFO] Memory management setup completed
2025-09-19T10:40:01: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:01: [INFO] Checking process locks...
2025-09-19T10:40:02: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:02: ℹ️ [10:40:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:02: [INFO] Process locks acquired successfully
2025-09-19T10:40:02: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:02: [INFO] Logs directory created
2025-09-19T10:40:02: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:02: [10:40:02 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:02: [10:40:02 am] ✅ Google Sheets API initialized
2025-09-19T10:40:02: [INFO] Google Sheets helper initialized
2025-09-19T10:40:02: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:02: ℹ️ [10:40:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:02: 🗑️ Deleted old log file: bot-2025-09-19T05-09-26-015Z.log
2025-09-19T10:40:02: 📝 Enhanced Logger initialized
2025-09-19T10:40:02: 📁 Loaded statistics from file
2025-09-19T10:40:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:02: 🧹 Removed stale process lock
2025-09-19T10:40:02: 🔒 Process lock acquired (PID: 14544)
2025-09-19T10:40:02: ℹ️ [10:40:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14544
}
2025-09-19T10:40:02: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:02: ℹ️ [10:40:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258601961, processId: 14544 },
  timestamp: 1758258602086
}
2025-09-19T10:40:02: ℹ️ [10:40:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258601961, willExpireAt: 1758258841961 },
  timestamp: 1758258602087
}
2025-09-19T10:40:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:02: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:02: 📋 Message rules loaded: 8 types
2025-09-19T10:40:02: ℹ️ [10:40:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:03: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:03: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:03: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:03: [INFO] WhatsApp client initialized
2025-09-19T10:40:05: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:05: 📝 Loaded 12 template types
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258605102,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16956,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:05: ⏰ 4-minute startup delay active
2025-09-19T10:40:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:05: [INFO] Using PQueue for job processing
2025-09-19T10:40:05: [INFO] Memory management setup completed
2025-09-19T10:40:05: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:05: [INFO] Checking process locks...
2025-09-19T10:40:05: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:05: [INFO] Process locks acquired successfully
2025-09-19T10:40:05: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:05: [INFO] Logs directory created
2025-09-19T10:40:05: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:05: [10:40:05 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:05: [10:40:05 am] ✅ Google Sheets API initialized
2025-09-19T10:40:05: [INFO] Google Sheets helper initialized
2025-09-19T10:40:05: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:05: 🗑️ Deleted old log file: bot-2025-09-19T05-09-29-283Z.log
2025-09-19T10:40:05: 📝 Enhanced Logger initialized
2025-09-19T10:40:05: 📁 Loaded statistics from file
2025-09-19T10:40:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:05: 🧹 Removed stale process lock
2025-09-19T10:40:05: 🔒 Process lock acquired (PID: 16956)
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16956
}
2025-09-19T10:40:05: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258605102, processId: 16956 },
  timestamp: 1758258605230
}
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258605102, willExpireAt: 1758258845102 },
  timestamp: 1758258605231
}
2025-09-19T10:40:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:05: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:05: 📋 Message rules loaded: 8 types
2025-09-19T10:40:05: ℹ️ [10:40:05 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:06: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:06: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:06: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:06: [INFO] WhatsApp client initialized
2025-09-19T10:40:08: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:08: 📝 Loaded 12 template types
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258608459,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10404,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:08: ⏰ 4-minute startup delay active
2025-09-19T10:40:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:08: [INFO] Using PQueue for job processing
2025-09-19T10:40:08: [INFO] Memory management setup completed
2025-09-19T10:40:08: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:08: [INFO] Checking process locks...
2025-09-19T10:40:08: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:08: [INFO] Process locks acquired successfully
2025-09-19T10:40:08: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:08: [INFO] Logs directory created
2025-09-19T10:40:08: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:08: [10:40:08 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:08: [10:40:08 am] ✅ Google Sheets API initialized
2025-09-19T10:40:08: [INFO] Google Sheets helper initialized
2025-09-19T10:40:08: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:08: 📁 Loaded statistics from file
2025-09-19T10:40:08: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:08: 🗑️ Deleted old log file: bot-2025-09-19T05-09-32-524Z.log
2025-09-19T10:40:08: 📝 Enhanced Logger initialized
2025-09-19T10:40:08: 🧹 Removed stale process lock
2025-09-19T10:40:08: 🔒 Process lock acquired (PID: 10404)
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10404
}
2025-09-19T10:40:08: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:08: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258608459, processId: 10404 },
  timestamp: 1758258608585
}
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258608459, willExpireAt: 1758258848459 },
  timestamp: 1758258608585
}
2025-09-19T10:40:08: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:08: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:08: 📋 Message rules loaded: 8 types
2025-09-19T10:40:08: ℹ️ [10:40:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 130,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:09: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:09: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:09: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:09: [INFO] WhatsApp client initialized
2025-09-19T10:40:11: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:11: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:11: 📝 Loaded 12 template types
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258611408,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18300,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:11: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:11: ⏰ 4-minute startup delay active
2025-09-19T10:40:11: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:11: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:11: [INFO] Using PQueue for job processing
2025-09-19T10:40:11: [INFO] Memory management setup completed
2025-09-19T10:40:11: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:11: [INFO] Checking process locks...
2025-09-19T10:40:11: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:11: [INFO] Process locks acquired successfully
2025-09-19T10:40:11: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:11: [INFO] Logs directory created
2025-09-19T10:40:11: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:11: [10:40:11 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:11: [10:40:11 am] ✅ Google Sheets API initialized
2025-09-19T10:40:11: [INFO] Google Sheets helper initialized
2025-09-19T10:40:11: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:11: 🗑️ Deleted old log file: bot-2025-09-19T05-09-35-634Z.log
2025-09-19T10:40:11: 📝 Enhanced Logger initialized
2025-09-19T10:40:11: 📁 Loaded statistics from file
2025-09-19T10:40:11: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:11: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:11: 🧹 Removed stale process lock
2025-09-19T10:40:11: 🔒 Process lock acquired (PID: 18300)
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18300
}
2025-09-19T10:40:11: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:11: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258611408, processId: 18300 },
  timestamp: 1758258611527
}
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258611408, willExpireAt: 1758258851408 },
  timestamp: 1758258611528
}
2025-09-19T10:40:11: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:11: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:11: 📋 Message rules loaded: 8 types
2025-09-19T10:40:11: ℹ️ [10:40:11 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:12: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:12: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:12: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:12: [INFO] WhatsApp client initialized
2025-09-19T10:40:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:15: 📝 Loaded 12 template types
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258615072,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10788,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:15: ⏰ 4-minute startup delay active
2025-09-19T10:40:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:15: [INFO] Using PQueue for job processing
2025-09-19T10:40:15: [INFO] Memory management setup completed
2025-09-19T10:40:15: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:15: [INFO] Checking process locks...
2025-09-19T10:40:15: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:15: [INFO] Process locks acquired successfully
2025-09-19T10:40:15: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:15: [INFO] Logs directory created
2025-09-19T10:40:15: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:15: [10:40:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:15: [10:40:15 am] ✅ Google Sheets API initialized
2025-09-19T10:40:15: [INFO] Google Sheets helper initialized
2025-09-19T10:40:15: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:15: 🗑️ Deleted old log file: bot-2025-09-19T05-09-39-039Z.log
2025-09-19T10:40:15: 📝 Enhanced Logger initialized
2025-09-19T10:40:15: 📁 Loaded statistics from file
2025-09-19T10:40:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:15: 🧹 Removed stale process lock
2025-09-19T10:40:15: 🔒 Process lock acquired (PID: 10788)
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10788
}
2025-09-19T10:40:15: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258615072, processId: 10788 },
  timestamp: 1758258615192
}
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258615072, willExpireAt: 1758258855072 },
  timestamp: 1758258615192
}
2025-09-19T10:40:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:15: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:15: 📋 Message rules loaded: 8 types
2025-09-19T10:40:15: ℹ️ [10:40:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:16: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:16: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:16: [INFO] WhatsApp client initialized
2025-09-19T10:40:17: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:17: 📝 Loaded 12 template types
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258617717,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18248,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:17: ⏰ 4-minute startup delay active
2025-09-19T10:40:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:17: [INFO] Using PQueue for job processing
2025-09-19T10:40:17: [INFO] Memory management setup completed
2025-09-19T10:40:17: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:17: [INFO] Checking process locks...
2025-09-19T10:40:17: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:17: [INFO] Process locks acquired successfully
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:17: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:17: [INFO] Logs directory created
2025-09-19T10:40:17: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:17: [10:40:17 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:17: [10:40:17 am] ✅ Google Sheets API initialized
2025-09-19T10:40:17: [INFO] Google Sheets helper initialized
2025-09-19T10:40:17: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:17: 🗑️ Deleted old log file: bot-2025-09-19T05-09-42-119Z.log
2025-09-19T10:40:17: 📝 Enhanced Logger initialized
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:17: 📁 Loaded statistics from file
2025-09-19T10:40:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:17: 🧹 Removed stale process lock
2025-09-19T10:40:17: 🔒 Process lock acquired (PID: 18248)
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18248
}
2025-09-19T10:40:17: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258617717, processId: 18248 },
  timestamp: 1758258617812
}
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258617717, willExpireAt: 1758258857717 },
  timestamp: 1758258617812
}
2025-09-19T10:40:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:17: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:17: 📋 Message rules loaded: 8 types
2025-09-19T10:40:17: ℹ️ [10:40:17 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 97,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:18: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:18: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:18: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:18: [INFO] WhatsApp client initialized
2025-09-19T10:40:20: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:20: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:20: 📝 Loaded 12 template types
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258620404,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14516,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:20: ⏰ 4-minute startup delay active
2025-09-19T10:40:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:20: [INFO] Using PQueue for job processing
2025-09-19T10:40:20: [INFO] Memory management setup completed
2025-09-19T10:40:20: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:20: [INFO] Checking process locks...
2025-09-19T10:40:20: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:20: [INFO] Process locks acquired successfully
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:20: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:20: [INFO] Logs directory created
2025-09-19T10:40:20: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:20: [10:40:20 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:20: [10:40:20 am] ✅ Google Sheets API initialized
2025-09-19T10:40:20: [INFO] Google Sheets helper initialized
2025-09-19T10:40:20: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:20: 🗑️ Deleted old log file: bot-2025-09-19T05-09-45-280Z.log
2025-09-19T10:40:20: 📝 Enhanced Logger initialized
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:20: 📁 Loaded statistics from file
2025-09-19T10:40:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:20: 🧹 Removed stale process lock
2025-09-19T10:40:20: 🔒 Process lock acquired (PID: 14516)
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14516
}
2025-09-19T10:40:20: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258620404, processId: 14516 },
  timestamp: 1758258620525
}
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258620404, willExpireAt: 1758258860404 },
  timestamp: 1758258620525
}
2025-09-19T10:40:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:20: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:20: 📋 Message rules loaded: 8 types
2025-09-19T10:40:20: ℹ️ [10:40:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:21: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:21: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:21: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:21: [INFO] WhatsApp client initialized
2025-09-19T10:40:23: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:23: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:23: 📝 Loaded 12 template types
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258623204,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4424,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:23: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:23: ⏰ 4-minute startup delay active
2025-09-19T10:40:23: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:23: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:23: [INFO] Using PQueue for job processing
2025-09-19T10:40:23: [INFO] Memory management setup completed
2025-09-19T10:40:23: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:23: [INFO] Checking process locks...
2025-09-19T10:40:23: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:23: [INFO] Process locks acquired successfully
2025-09-19T10:40:23: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:23: [INFO] Logs directory created
2025-09-19T10:40:23: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:23: [10:40:23 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:23: [10:40:23 am] ✅ Google Sheets API initialized
2025-09-19T10:40:23: [INFO] Google Sheets helper initialized
2025-09-19T10:40:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:23: 🗑️ Deleted old log file: bot-2025-09-19T05-09-48-699Z.log
2025-09-19T10:40:23: 📝 Enhanced Logger initialized
2025-09-19T10:40:23: 📁 Loaded statistics from file
2025-09-19T10:40:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:23: 🧹 Removed stale process lock
2025-09-19T10:40:23: 🔒 Process lock acquired (PID: 4424)
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4424
}
2025-09-19T10:40:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258623204, processId: 4424 },
  timestamp: 1758258623324
}
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258623204, willExpireAt: 1758258863204 },
  timestamp: 1758258623324
}
2025-09-19T10:40:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:23: 📋 Message rules loaded: 8 types
2025-09-19T10:40:23: ℹ️ [10:40:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 123,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:24: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:24: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:24: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:24: [INFO] WhatsApp client initialized
2025-09-19T10:40:26: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:26: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:26: 📝 Loaded 12 template types
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258626200,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18004,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:26: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:26: ⏰ 4-minute startup delay active
2025-09-19T10:40:26: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:26: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:26: [INFO] Using PQueue for job processing
2025-09-19T10:40:26: [INFO] Memory management setup completed
2025-09-19T10:40:26: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:26: [INFO] Checking process locks...
2025-09-19T10:40:26: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:26: [INFO] Process locks acquired successfully
2025-09-19T10:40:26: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:26: [INFO] Logs directory created
2025-09-19T10:40:26: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:26: [10:40:26 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:26: [10:40:26 am] ✅ Google Sheets API initialized
2025-09-19T10:40:26: [INFO] Google Sheets helper initialized
2025-09-19T10:40:26: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:26: 🗑️ Deleted old log file: bot-2025-09-19T05-09-51-799Z.log
2025-09-19T10:40:26: 📝 Enhanced Logger initialized
2025-09-19T10:40:26: 📁 Loaded statistics from file
2025-09-19T10:40:26: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:26: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:26: 🧹 Removed stale process lock
2025-09-19T10:40:26: 🔒 Process lock acquired (PID: 18004)
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18004
}
2025-09-19T10:40:26: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:26: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258626200, processId: 18004 },
  timestamp: 1758258626298
}
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258626200, willExpireAt: 1758258866200 },
  timestamp: 1758258626298
}
2025-09-19T10:40:26: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:26: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:26: 📋 Message rules loaded: 8 types
2025-09-19T10:40:26: ℹ️ [10:40:26 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 100,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:27: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:27: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:27: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:27: [INFO] WhatsApp client initialized
2025-09-19T10:40:29: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:29: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:29: 📝 Loaded 12 template types
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258629158,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16868,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:29: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:29: ⏰ 4-minute startup delay active
2025-09-19T10:40:29: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:29: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:29: [INFO] Using PQueue for job processing
2025-09-19T10:40:29: [INFO] Memory management setup completed
2025-09-19T10:40:29: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:29: [INFO] Checking process locks...
2025-09-19T10:40:29: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:29: [INFO] Process locks acquired successfully
2025-09-19T10:40:29: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:29: [INFO] Logs directory created
2025-09-19T10:40:29: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:29: [10:40:29 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:29: [10:40:29 am] ✅ Google Sheets API initialized
2025-09-19T10:40:29: [INFO] Google Sheets helper initialized
2025-09-19T10:40:29: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:29: 🗑️ Deleted old log file: bot-2025-09-19T05-09-55-318Z.log
2025-09-19T10:40:29: 📝 Enhanced Logger initialized
2025-09-19T10:40:29: 📁 Loaded statistics from file
2025-09-19T10:40:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:29: 🧹 Removed stale process lock
2025-09-19T10:40:29: 🔒 Process lock acquired (PID: 16868)
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16868
}
2025-09-19T10:40:29: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258629158, willExpireAt: 1758258869158 },
  timestamp: 1758258629278
}
2025-09-19T10:40:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:29: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:29: 📋 Message rules loaded: 8 types
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258629158, processId: 16868 },
  timestamp: 1758258629278
}
2025-09-19T10:40:29: ℹ️ [10:40:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 122,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:30: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:30: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:30: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:30: [INFO] WhatsApp client initialized
2025-09-19T10:40:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:31: 📝 Loaded 12 template types
2025-09-19T10:40:31: ℹ️ [10:40:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258631877,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14788,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:31: ⏰ 4-minute startup delay active
2025-09-19T10:40:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:31: [INFO] Using PQueue for job processing
2025-09-19T10:40:31: [INFO] Memory management setup completed
2025-09-19T10:40:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:31: [INFO] Checking process locks...
2025-09-19T10:40:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:31: ℹ️ [10:40:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:31: [INFO] Process locks acquired successfully
2025-09-19T10:40:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:31: [INFO] Logs directory created
2025-09-19T10:40:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:31: [10:40:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:31: [10:40:31 am] ✅ Google Sheets API initialized
2025-09-19T10:40:31: [INFO] Google Sheets helper initialized
2025-09-19T10:40:32: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:32: ℹ️ [10:40:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:32: 📁 Loaded statistics from file
2025-09-19T10:40:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:32: 🗑️ Deleted old log file: bot-2025-09-19T05-09-58-789Z.log
2025-09-19T10:40:32: 📝 Enhanced Logger initialized
2025-09-19T10:40:32: 🧹 Removed stale process lock
2025-09-19T10:40:32: 🔒 Process lock acquired (PID: 14788)
2025-09-19T10:40:32: ℹ️ [10:40:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14788
}
2025-09-19T10:40:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:32: ℹ️ [10:40:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258631877, processId: 14788 },
  timestamp: 1758258632046
}
2025-09-19T10:40:32: ℹ️ [10:40:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258631877, willExpireAt: 1758258871877 },
  timestamp: 1758258632047
}
2025-09-19T10:40:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:32: 📋 Message rules loaded: 8 types
2025-09-19T10:40:32: ℹ️ [10:40:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 172,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:32: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:32: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:32: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:32: [INFO] WhatsApp client initialized
2025-09-19T10:40:35: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:35: 📝 Loaded 12 template types
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258635095,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4416,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:35: ⏰ 4-minute startup delay active
2025-09-19T10:40:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:35: [INFO] Using PQueue for job processing
2025-09-19T10:40:35: [INFO] Memory management setup completed
2025-09-19T10:40:35: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:35: [INFO] Checking process locks...
2025-09-19T10:40:35: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:35: [INFO] Process locks acquired successfully
2025-09-19T10:40:35: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:35: [INFO] Logs directory created
2025-09-19T10:40:35: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:35: [10:40:35 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:35: [10:40:35 am] ✅ Google Sheets API initialized
2025-09-19T10:40:35: [INFO] Google Sheets helper initialized
2025-09-19T10:40:35: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:35: 🗑️ Deleted old log file: bot-2025-09-19T05-10-02-000Z.log
2025-09-19T10:40:35: 📝 Enhanced Logger initialized
2025-09-19T10:40:35: 📁 Loaded statistics from file
2025-09-19T10:40:35: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:35: 🧹 Removed stale process lock
2025-09-19T10:40:35: 🔒 Process lock acquired (PID: 4416)
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4416
}
2025-09-19T10:40:35: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:35: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258635095, processId: 4416 },
  timestamp: 1758258635197
}
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258635095, willExpireAt: 1758258875095 },
  timestamp: 1758258635197
}
2025-09-19T10:40:35: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:35: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:35: 📋 Message rules loaded: 8 types
2025-09-19T10:40:35: ℹ️ [10:40:35 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 104,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:36: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:36: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:36: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:36: [INFO] WhatsApp client initialized
2025-09-19T10:40:38: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:38: 📝 Loaded 12 template types
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258638211,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:38: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:38: ⏰ 4-minute startup delay active
2025-09-19T10:40:38: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:38: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:38: [INFO] Using PQueue for job processing
2025-09-19T10:40:38: [INFO] Memory management setup completed
2025-09-19T10:40:38: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:38: [INFO] Checking process locks...
2025-09-19T10:40:38: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:38: [INFO] Process locks acquired successfully
2025-09-19T10:40:38: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:38: [INFO] Logs directory created
2025-09-19T10:40:38: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:38: [10:40:38 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:38: [10:40:38 am] ✅ Google Sheets API initialized
2025-09-19T10:40:38: [INFO] Google Sheets helper initialized
2025-09-19T10:40:38: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:38: 🗑️ Deleted old log file: bot-2025-09-19T05-10-05-136Z.log
2025-09-19T10:40:38: 📝 Enhanced Logger initialized
2025-09-19T10:40:38: 📁 Loaded statistics from file
2025-09-19T10:40:38: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:38: 🧹 Removed stale process lock
2025-09-19T10:40:38: 🔒 Process lock acquired (PID: 15712)
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15712
}
2025-09-19T10:40:38: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:38: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258638211, willExpireAt: 1758258878211 },
  timestamp: 1758258638337
}
2025-09-19T10:40:38: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:38: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:38: 📋 Message rules loaded: 8 types
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258638211, processId: 15712 },
  timestamp: 1758258638336
}
2025-09-19T10:40:38: ℹ️ [10:40:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 127,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:39: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:39: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:39: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:39: [INFO] WhatsApp client initialized
2025-09-19T10:40:41: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:41: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:41: 📝 Loaded 12 template types
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258641424,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17856,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:41: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:41: ⏰ 4-minute startup delay active
2025-09-19T10:40:41: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:41: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:41: [INFO] Using PQueue for job processing
2025-09-19T10:40:41: [INFO] Memory management setup completed
2025-09-19T10:40:41: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:41: [INFO] Checking process locks...
2025-09-19T10:40:41: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:41: [INFO] Process locks acquired successfully
2025-09-19T10:40:41: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:41: [INFO] Logs directory created
2025-09-19T10:40:41: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:41: [10:40:41 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:41: [10:40:41 am] ✅ Google Sheets API initialized
2025-09-19T10:40:41: [INFO] Google Sheets helper initialized
2025-09-19T10:40:41: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:41: 🗑️ Deleted old log file: bot-2025-09-19T05-10-08-502Z.log
2025-09-19T10:40:41: 📝 Enhanced Logger initialized
2025-09-19T10:40:41: 📁 Loaded statistics from file
2025-09-19T10:40:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:41: 🧹 Removed stale process lock
2025-09-19T10:40:41: 🔒 Process lock acquired (PID: 17856)
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17856
}
2025-09-19T10:40:41: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258641424, processId: 17856 },
  timestamp: 1758258641542
}
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258641424, willExpireAt: 1758258881424 },
  timestamp: 1758258641542
}
2025-09-19T10:40:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:41: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:41: 📋 Message rules loaded: 8 types
2025-09-19T10:40:41: ℹ️ [10:40:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:42: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:42: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:42: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:42: [INFO] WhatsApp client initialized
2025-09-19T10:40:44: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:44: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:44: 📝 Loaded 12 template types
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258644574,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17860,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:44: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:44: ⏰ 4-minute startup delay active
2025-09-19T10:40:44: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:44: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:44: [INFO] Using PQueue for job processing
2025-09-19T10:40:44: [INFO] Memory management setup completed
2025-09-19T10:40:44: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:44: [INFO] Checking process locks...
2025-09-19T10:40:44: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:44: [INFO] Process locks acquired successfully
2025-09-19T10:40:44: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:44: [INFO] Logs directory created
2025-09-19T10:40:44: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:44: [10:40:44 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:44: [10:40:44 am] ✅ Google Sheets API initialized
2025-09-19T10:40:44: [INFO] Google Sheets helper initialized
2025-09-19T10:40:44: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:44: 🗑️ Deleted old log file: bot-2025-09-19T05-10-11-439Z.log
2025-09-19T10:40:44: 📝 Enhanced Logger initialized
2025-09-19T10:40:44: 📁 Loaded statistics from file
2025-09-19T10:40:44: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:44: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:44: 🧹 Removed stale process lock
2025-09-19T10:40:44: 🔒 Process lock acquired (PID: 17860)
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17860
}
2025-09-19T10:40:44: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:44: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258644574, willExpireAt: 1758258884574 },
  timestamp: 1758258644702
}
2025-09-19T10:40:44: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:44: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:44: 📋 Message rules loaded: 8 types
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258644574, processId: 17860 },
  timestamp: 1758258644702
}
2025-09-19T10:40:44: ℹ️ [10:40:44 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 131,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:45: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:45: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:45: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:45: [INFO] WhatsApp client initialized
2025-09-19T10:40:50: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:50: 📝 Loaded 12 template types
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258650269,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15736,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:50: ⏰ 4-minute startup delay active
2025-09-19T10:40:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:50: [INFO] Using PQueue for job processing
2025-09-19T10:40:50: [INFO] Memory management setup completed
2025-09-19T10:40:50: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:50: [INFO] Checking process locks...
2025-09-19T10:40:50: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:50: [INFO] Process locks acquired successfully
2025-09-19T10:40:50: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:50: [INFO] Logs directory created
2025-09-19T10:40:50: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:50: [10:40:50 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:50: [10:40:50 am] ✅ Google Sheets API initialized
2025-09-19T10:40:50: [INFO] Google Sheets helper initialized
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:50: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:50: 🗑️ Deleted old log file: bot-2025-09-19T05-10-15-110Z.log
2025-09-19T10:40:50: 📝 Enhanced Logger initialized
2025-09-19T10:40:50: 🧹 Removed stale process lock
2025-09-19T10:40:50: 📁 Loaded statistics from file
2025-09-19T10:40:50: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:50: 🔒 Process lock acquired (PID: 15736)
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15736
}
2025-09-19T10:40:50: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:50: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258650269, processId: 15736 },
  timestamp: 1758258650516
}
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258650269, willExpireAt: 1758258890269 },
  timestamp: 1758258650517
}
2025-09-19T10:40:50: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:50: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:50: 📋 Message rules loaded: 8 types
2025-09-19T10:40:50: ℹ️ [10:40:50 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 253,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:51: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:51: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:51: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:51: [INFO] WhatsApp client initialized
2025-09-19T10:40:53: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:53: 📝 Loaded 12 template types
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258653339,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16016,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:53: ⏰ 4-minute startup delay active
2025-09-19T10:40:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:53: [INFO] Using PQueue for job processing
2025-09-19T10:40:53: [INFO] Memory management setup completed
2025-09-19T10:40:53: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:53: [INFO] Checking process locks...
2025-09-19T10:40:53: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:53: [INFO] Process locks acquired successfully
2025-09-19T10:40:53: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:53: [INFO] Logs directory created
2025-09-19T10:40:53: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:53: [10:40:53 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:53: [10:40:53 am] ✅ Google Sheets API initialized
2025-09-19T10:40:53: [INFO] Google Sheets helper initialized
2025-09-19T10:40:53: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:53: 🗑️ Deleted old log file: bot-2025-09-19T05-10-17-742Z.log
2025-09-19T10:40:53: 📝 Enhanced Logger initialized
2025-09-19T10:40:53: 📁 Loaded statistics from file
2025-09-19T10:40:53: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:53: 🧹 Removed stale process lock
2025-09-19T10:40:53: 🔒 Process lock acquired (PID: 16016)
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16016
}
2025-09-19T10:40:53: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:53: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258653339, processId: 16016 },
  timestamp: 1758258653549
}
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258653339, willExpireAt: 1758258893339 },
  timestamp: 1758258653549
}
2025-09-19T10:40:53: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:53: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:53: 📋 Message rules loaded: 8 types
2025-09-19T10:40:53: ℹ️ [10:40:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 215,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:54: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:54: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:54: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:54: [INFO] WhatsApp client initialized
2025-09-19T10:40:56: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:40:56: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:40:56: 📝 Loaded 12 template types
2025-09-19T10:40:56: ℹ️ [10:40:56 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258656901,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10012,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:40:56: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:40:56: ⏰ 4-minute startup delay active
2025-09-19T10:40:56: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:40:56: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:40:56: [INFO] Using PQueue for job processing
2025-09-19T10:40:56: [INFO] Memory management setup completed
2025-09-19T10:40:56: [INFO] Starting WhatsApp Bot...
2025-09-19T10:40:56: [INFO] Checking process locks...
2025-09-19T10:40:56: 📁 Loaded 0 sent messages from file
2025-09-19T10:40:56: ℹ️ [10:40:56 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:40:56: [INFO] Process locks acquired successfully
2025-09-19T10:40:56: 📁 Loaded 0 customer histories from file
2025-09-19T10:40:56: [INFO] Logs directory created
2025-09-19T10:40:56: [INFO] Initializing Google Sheets helper...
2025-09-19T10:40:56: [10:40:56 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:40:56: [10:40:56 am] ✅ Google Sheets API initialized
2025-09-19T10:40:56: [INFO] Google Sheets helper initialized
2025-09-19T10:40:56: 📁 Loaded 0 message hashes from file
2025-09-19T10:40:56: ℹ️ [10:40:56 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:40:57: 🗑️ Deleted old log file: bot-2025-09-19T05-10-20-437Z.log
2025-09-19T10:40:57: 📝 Enhanced Logger initialized
2025-09-19T10:40:57: 📁 Loaded statistics from file
2025-09-19T10:40:57: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:40:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:40:57: 🧹 Removed stale process lock
2025-09-19T10:40:57: 🔒 Process lock acquired (PID: 10012)
2025-09-19T10:40:57: ℹ️ [10:40:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10012
}
2025-09-19T10:40:57: ⏰ Starting 240 second startup grace period...
2025-09-19T10:40:57: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:40:57: ℹ️ [10:40:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258656901, processId: 10012 },
  timestamp: 1758258657060
}
2025-09-19T10:40:57: ℹ️ [10:40:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258656901, willExpireAt: 1758258896901 },
  timestamp: 1758258657060
}
2025-09-19T10:40:57: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:40:57: ⏰ Startup grace period: 240 seconds
2025-09-19T10:40:57: 📋 Message rules loaded: 8 types
2025-09-19T10:40:57: ℹ️ [10:40:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 162,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:40:57: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:40:57: [INFO] Initializing WhatsApp client...
2025-09-19T10:40:57: 🔄 Initializing WhatsApp client...
2025-09-19T10:40:57: [INFO] WhatsApp client initialized
2025-09-19T10:41:00: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:00: 📝 Loaded 12 template types
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258660430,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13976,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:00: ⏰ 4-minute startup delay active
2025-09-19T10:41:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:00: [INFO] Using PQueue for job processing
2025-09-19T10:41:00: [INFO] Memory management setup completed
2025-09-19T10:41:00: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:00: [INFO] Checking process locks...
2025-09-19T10:41:00: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:00: [INFO] Process locks acquired successfully
2025-09-19T10:41:00: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:00: [INFO] Logs directory created
2025-09-19T10:41:00: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:00: [10:41:00 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:00: [10:41:00 am] ✅ Google Sheets API initialized
2025-09-19T10:41:00: [INFO] Google Sheets helper initialized
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:00: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:00: 🗑️ Deleted old log file: bot-2025-09-19T05-10-23-238Z.log
2025-09-19T10:41:00: 📝 Enhanced Logger initialized
2025-09-19T10:41:00: 📁 Loaded statistics from file
2025-09-19T10:41:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:00: 🧹 Removed stale process lock
2025-09-19T10:41:00: 🔒 Process lock acquired (PID: 13976)
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13976
}
2025-09-19T10:41:00: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258660430, processId: 13976 },
  timestamp: 1758258660597
}
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258660430, willExpireAt: 1758258900430 },
  timestamp: 1758258660597
}
2025-09-19T10:41:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:00: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:00: 📋 Message rules loaded: 8 types
2025-09-19T10:41:00: ℹ️ [10:41:00 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 170,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:01: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:01: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:01: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:01: [INFO] WhatsApp client initialized
2025-09-19T10:41:03: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:03: 📝 Loaded 12 template types
2025-09-19T10:41:03: ℹ️ [10:41:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258663842,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14776,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:03: ⏰ 4-minute startup delay active
2025-09-19T10:41:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:03: [INFO] Using PQueue for job processing
2025-09-19T10:41:03: [INFO] Memory management setup completed
2025-09-19T10:41:03: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:03: [INFO] Checking process locks...
2025-09-19T10:41:03: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:03: ℹ️ [10:41:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:03: [INFO] Process locks acquired successfully
2025-09-19T10:41:03: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:03: [INFO] Logs directory created
2025-09-19T10:41:03: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:03: [10:41:03 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:03: [10:41:03 am] ✅ Google Sheets API initialized
2025-09-19T10:41:03: [INFO] Google Sheets helper initialized
2025-09-19T10:41:03: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:03: 🗑️ Deleted old log file: bot-2025-09-19T05-10-26-229Z.log
2025-09-19T10:41:03: 📝 Enhanced Logger initialized
2025-09-19T10:41:04: ℹ️ [10:41:04 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:04: 📁 Loaded statistics from file
2025-09-19T10:41:04: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:04: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:04: 🧹 Removed stale process lock
2025-09-19T10:41:04: 🔒 Process lock acquired (PID: 14776)
2025-09-19T10:41:04: ℹ️ [10:41:04 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14776
}
2025-09-19T10:41:04: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:04: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:04: ℹ️ [10:41:04 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258663842, processId: 14776 },
  timestamp: 1758258664054
}
2025-09-19T10:41:04: ℹ️ [10:41:04 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258663842, willExpireAt: 1758258903842 },
  timestamp: 1758258664055
}
2025-09-19T10:41:04: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:04: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:04: 📋 Message rules loaded: 8 types
2025-09-19T10:41:04: ℹ️ [10:41:04 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 221,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:04: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:04: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:04: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:04: [INFO] WhatsApp client initialized
2025-09-19T10:41:07: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:07: 📝 Loaded 12 template types
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258667014,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1824,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:07: ⏰ 4-minute startup delay active
2025-09-19T10:41:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:07: [INFO] Using PQueue for job processing
2025-09-19T10:41:07: [INFO] Memory management setup completed
2025-09-19T10:41:07: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:07: [INFO] Checking process locks...
2025-09-19T10:41:07: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:07: [INFO] Process locks acquired successfully
2025-09-19T10:41:07: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:07: [INFO] Logs directory created
2025-09-19T10:41:07: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:07: [10:41:07 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:07: [10:41:07 am] ✅ Google Sheets API initialized
2025-09-19T10:41:07: [INFO] Google Sheets helper initialized
2025-09-19T10:41:07: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:07: 🗑️ Deleted old log file: bot-2025-09-19T05-10-29-190Z.log
2025-09-19T10:41:07: 📝 Enhanced Logger initialized
2025-09-19T10:41:07: 📁 Loaded statistics from file
2025-09-19T10:41:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:07: 🧹 Removed stale process lock
2025-09-19T10:41:07: 🔒 Process lock acquired (PID: 1824)
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1824
}
2025-09-19T10:41:07: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258667014, processId: 1824 },
  timestamp: 1758258667140
}
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258667014, willExpireAt: 1758258907014 },
  timestamp: 1758258667140
}
2025-09-19T10:41:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:07: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:07: 📋 Message rules loaded: 8 types
2025-09-19T10:41:07: ℹ️ [10:41:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:07: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:07: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:07: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:07: [INFO] WhatsApp client initialized
2025-09-19T10:41:12: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:12: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:12: 📝 Loaded 12 template types
2025-09-19T10:41:12: ℹ️ [10:41:12 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258672485,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8608,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:12: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:12: ⏰ 4-minute startup delay active
2025-09-19T10:41:12: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:12: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:12: [INFO] Using PQueue for job processing
2025-09-19T10:41:12: [INFO] Memory management setup completed
2025-09-19T10:41:12: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:12: [INFO] Checking process locks...
2025-09-19T10:41:12: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:12: ℹ️ [10:41:12 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:12: [INFO] Process locks acquired successfully
2025-09-19T10:41:12: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:12: [INFO] Logs directory created
2025-09-19T10:41:12: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:12: [10:41:12 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:12: [10:41:12 am] ✅ Google Sheets API initialized
2025-09-19T10:41:12: [INFO] Google Sheets helper initialized
2025-09-19T10:41:12: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:12: 🗑️ Deleted old log file: bot-2025-09-19T05-10-31-921Z.log
2025-09-19T10:41:12: 📝 Enhanced Logger initialized
2025-09-19T10:41:12: ℹ️ [10:41:12 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:12: 📁 Loaded statistics from file
2025-09-19T10:41:12: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:12: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:12: 🧹 Removed stale process lock
2025-09-19T10:41:12: 🔒 Process lock acquired (PID: 8608)
2025-09-19T10:41:12: ℹ️ [10:41:12 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8608
}
2025-09-19T10:41:12: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:12: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:13: ℹ️ [10:41:13 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258672485, processId: 8608 },
  timestamp: 1758258672998
}
2025-09-19T10:41:13: ℹ️ [10:41:13 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258672485, willExpireAt: 1758258912485 },
  timestamp: 1758258672998
}
2025-09-19T10:41:13: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:13: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:13: 📋 Message rules loaded: 8 types
2025-09-19T10:41:13: ℹ️ [10:41:13 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 519,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:13: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:13: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:13: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:13: [INFO] WhatsApp client initialized
2025-09-19T10:41:22: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:22: 📝 Loaded 12 template types
2025-09-19T10:41:22: ℹ️ [10:41:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258682308,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15992,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:22: ⏰ 4-minute startup delay active
2025-09-19T10:41:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:22: [INFO] Using PQueue for job processing
2025-09-19T10:41:22: [INFO] Memory management setup completed
2025-09-19T10:41:22: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:22: [INFO] Checking process locks...
2025-09-19T10:41:22: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:22: ℹ️ [10:41:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:22: [INFO] Process locks acquired successfully
2025-09-19T10:41:22: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:22: [INFO] Logs directory created
2025-09-19T10:41:22: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:22: [10:41:22 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:22: [10:41:22 am] ✅ Google Sheets API initialized
2025-09-19T10:41:22: [INFO] Google Sheets helper initialized
2025-09-19T10:41:23: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:23: 🗑️ Deleted old log file: bot-2025-09-19T05-10-35-122Z.log
2025-09-19T10:41:23: 📝 Enhanced Logger initialized
2025-09-19T10:41:23: ℹ️ [10:41:23 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:23: 📁 Loaded statistics from file
2025-09-19T10:41:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:23: 🧹 Removed stale process lock
2025-09-19T10:41:23: 🔒 Process lock acquired (PID: 15992)
2025-09-19T10:41:23: ℹ️ [10:41:23 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15992
}
2025-09-19T10:41:23: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:23: ℹ️ [10:41:23 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258682308, processId: 15992 },
  timestamp: 1758258683057
}
2025-09-19T10:41:23: ℹ️ [10:41:23 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258682308, willExpireAt: 1758258922308 },
  timestamp: 1758258683058
}
2025-09-19T10:41:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:23: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:23: 📋 Message rules loaded: 8 types
2025-09-19T10:41:23: ℹ️ [10:41:23 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 761,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:23: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:23: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:23: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:24: [INFO] WhatsApp client initialized
2025-09-19T10:41:31: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:31: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:31: 📝 Loaded 12 template types
2025-09-19T10:41:31: ℹ️ [10:41:31 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258691651,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9376,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:31: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:31: ⏰ 4-minute startup delay active
2025-09-19T10:41:31: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:31: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:31: [INFO] Using PQueue for job processing
2025-09-19T10:41:31: [INFO] Memory management setup completed
2025-09-19T10:41:31: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:31: [INFO] Checking process locks...
2025-09-19T10:41:31: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:31: ℹ️ [10:41:31 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:31: [INFO] Process locks acquired successfully
2025-09-19T10:41:31: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:31: [INFO] Logs directory created
2025-09-19T10:41:31: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:31: [10:41:31 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:31: [10:41:31 am] ✅ Google Sheets API initialized
2025-09-19T10:41:31: [INFO] Google Sheets helper initialized
2025-09-19T10:41:31: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:31: 🗑️ Deleted old log file: bot-2025-09-19T05-10-38-248Z.log
2025-09-19T10:41:31: 📝 Enhanced Logger initialized
2025-09-19T10:41:32: ℹ️ [10:41:32 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:32: 📁 Loaded statistics from file
2025-09-19T10:41:32: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:32: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:32: 🧹 Removed stale process lock
2025-09-19T10:41:32: 🔒 Process lock acquired (PID: 9376)
2025-09-19T10:41:32: ℹ️ [10:41:32 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9376
}
2025-09-19T10:41:32: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:32: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:32: ℹ️ [10:41:32 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258691651, processId: 9376 },
  timestamp: 1758258692206
}
2025-09-19T10:41:32: ℹ️ [10:41:32 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258691651, willExpireAt: 1758258931651 },
  timestamp: 1758258692207
}
2025-09-19T10:41:32: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:32: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:32: 📋 Message rules loaded: 8 types
2025-09-19T10:41:32: ℹ️ [10:41:32 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 561,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:33: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:33: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:33: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:33: [INFO] WhatsApp client initialized
2025-09-19T10:41:36: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:36: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:36: 📝 Loaded 12 template types
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258696333,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 4540,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:36: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:36: ⏰ 4-minute startup delay active
2025-09-19T10:41:36: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:36: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:36: [INFO] Using PQueue for job processing
2025-09-19T10:41:36: [INFO] Memory management setup completed
2025-09-19T10:41:36: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:36: [INFO] Checking process locks...
2025-09-19T10:41:36: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:36: [INFO] Process locks acquired successfully
2025-09-19T10:41:36: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:36: [INFO] Logs directory created
2025-09-19T10:41:36: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:36: [10:41:36 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:36: [10:41:36 am] ✅ Google Sheets API initialized
2025-09-19T10:41:36: [INFO] Google Sheets helper initialized
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:36: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:36: 🗑️ Deleted old log file: bot-2025-09-19T05-10-41-457Z.log
2025-09-19T10:41:36: 📝 Enhanced Logger initialized
2025-09-19T10:41:36: 📁 Loaded statistics from file
2025-09-19T10:41:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:36: 🧹 Removed stale process lock
2025-09-19T10:41:36: 🔒 Process lock acquired (PID: 4540)
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 4540
}
2025-09-19T10:41:36: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258696333, processId: 4540 },
  timestamp: 1758258696601
}
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258696333, willExpireAt: 1758258936333 },
  timestamp: 1758258696601
}
2025-09-19T10:41:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:36: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:36: 📋 Message rules loaded: 8 types
2025-09-19T10:41:36: ℹ️ [10:41:36 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 275,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:37: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:37: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:37: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:37: [INFO] WhatsApp client initialized
2025-09-19T10:41:39: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:39: 📝 Loaded 12 template types
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258699567,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 15196,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:39: ⏰ 4-minute startup delay active
2025-09-19T10:41:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:39: [INFO] Using PQueue for job processing
2025-09-19T10:41:39: [INFO] Memory management setup completed
2025-09-19T10:41:39: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:39: [INFO] Checking process locks...
2025-09-19T10:41:39: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:39: [INFO] Process locks acquired successfully
2025-09-19T10:41:39: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:39: [INFO] Logs directory created
2025-09-19T10:41:39: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:39: [10:41:39 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:39: [10:41:39 am] ✅ Google Sheets API initialized
2025-09-19T10:41:39: [INFO] Google Sheets helper initialized
2025-09-19T10:41:39: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:39: 🗑️ Deleted old log file: bot-2025-09-19T05-10-44-611Z.log
2025-09-19T10:41:39: 📝 Enhanced Logger initialized
2025-09-19T10:41:39: 📁 Loaded statistics from file
2025-09-19T10:41:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:39: 🧹 Removed stale process lock
2025-09-19T10:41:39: 🔒 Process lock acquired (PID: 15196)
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 15196
}
2025-09-19T10:41:39: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258699567, willExpireAt: 1758258939567 },
  timestamp: 1758258699719
}
2025-09-19T10:41:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:39: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:39: 📋 Message rules loaded: 8 types
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258699567, processId: 15196 },
  timestamp: 1758258699718
}
2025-09-19T10:41:39: ℹ️ [10:41:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 154,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:40: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:40: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:40: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:40: [INFO] WhatsApp client initialized
2025-09-19T10:41:43: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T10:41:43: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T10:41:43: 📝 Loaded 12 template types
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758258703128,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10828,
  nodeVersion: 'v22.19.0'
}
2025-09-19T10:41:43: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T10:41:43: ⏰ 4-minute startup delay active
2025-09-19T10:41:43: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T10:41:43: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T10:41:43: [INFO] Using PQueue for job processing
2025-09-19T10:41:43: [INFO] Memory management setup completed
2025-09-19T10:41:43: [INFO] Starting WhatsApp Bot...
2025-09-19T10:41:43: [INFO] Checking process locks...
2025-09-19T10:41:43: 📁 Loaded 0 sent messages from file
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T10:41:43: [INFO] Process locks acquired successfully
2025-09-19T10:41:43: 📁 Loaded 0 customer histories from file
2025-09-19T10:41:43: [INFO] Logs directory created
2025-09-19T10:41:43: [INFO] Initializing Google Sheets helper...
2025-09-19T10:41:43: [10:41:43 am] 🔑 Initializing Google Sheets API...
2025-09-19T10:41:43: [10:41:43 am] ✅ Google Sheets API initialized
2025-09-19T10:41:43: [INFO] Google Sheets helper initialized
2025-09-19T10:41:43: 📁 Loaded 0 message hashes from file
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T10:41:43: 🗑️ Deleted old log file: bot-2025-09-19T05-10-50-338Z.log
2025-09-19T10:41:43: 📝 Enhanced Logger initialized
2025-09-19T10:41:43: 📁 Loaded statistics from file
2025-09-19T10:41:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T10:41:43: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T10:41:43: 🧹 Removed stale process lock
2025-09-19T10:41:43: 🔒 Process lock acquired (PID: 10828)
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10828
}
2025-09-19T10:41:43: ⏰ Starting 240 second startup grace period...
2025-09-19T10:41:43: 🚫 All message sending is BLOCKED during grace period
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258703128, willExpireAt: 1758258943128 },
  timestamp: 1758258703274
}
2025-09-19T10:41:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T10:41:43: ⏰ Startup grace period: 240 seconds
2025-09-19T10:41:43: 📋 Message rules loaded: 8 types
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758258703128, processId: 10828 },
  timestamp: 1758258703274
}
2025-09-19T10:41:43: ℹ️ [10:41:43 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 148,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T10:41:44: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T10:41:44: [INFO] Initializing WhatsApp client...
2025-09-19T10:41:44: 🔄 Initializing WhatsApp client...
2025-09-19T10:41:44: [INFO] WhatsApp client initialized
2025-09-19T11:51:15: [INFO] Effective Google Sheets IDs {
  GOOGLE_SHEET_ID: '128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y',
  FABRIC_SHEET_ID: '1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o',
  COMBINED_SHEET_ID: '199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg',
  WORKER_SHEET_ID: '1msVf01VuWsk1mhSMVrvypq_7ubSVjDKlr8aG-6bqE7Q',
  GOOGLE_SHEET_NAME: 'Orders',
  WORKER_SHEET_NAME: 'Payment_Daily_Entry'
}
2025-09-19T11:51:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T11:51:15: 📝 Loaded 12 template types
2025-09-19T11:51:15: 🔧 WhatsApp Authentication Configuration:
2025-09-19T11:51:15:    Auth Mode: both
2025-09-19T11:51:15:    QR Enabled: true
2025-09-19T11:51:15:    Phone Enabled: true
2025-09-19T11:51:15:    Session Persistence: true
2025-09-19T11:51:15:    Max Reconnect Attempts: 10
2025-09-19T11:51:15:    Default Phone: None
2025-09-19T11:51:15: 🔒 Session validation enabled (check every 300s)
2025-09-19T11:51:15: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758262875604,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1532,
  nodeVersion: 'v22.19.0'
}
2025-09-19T11:51:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T11:51:15: ⏰ 4-minute startup delay active
2025-09-19T11:51:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T11:51:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T11:51:15: [INFO] Using PQueue for job processing
2025-09-19T11:51:15: [INFO] Memory management setup completed
2025-09-19T11:51:15: [INFO] Starting WhatsApp Bot...
2025-09-19T11:51:15: [INFO] Checking process locks...
2025-09-19T11:51:15: 📁 Loaded 0 sent messages from file
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T11:51:15: 📁 Loaded 0 customer histories from file
2025-09-19T11:51:15: [INFO] Process locks acquired successfully
2025-09-19T11:51:15: [INFO] Logs directory created
2025-09-19T11:51:15: [INFO] Initializing Google Sheets helper...
2025-09-19T11:51:15: [11:51:15 am] 🔑 Initializing Google Sheets API...
2025-09-19T11:51:15: [11:51:15 am] ✅ Google Sheets API initialized
2025-09-19T11:51:15: [INFO] Google Sheets helper initialized
2025-09-19T11:51:15: 🗑️ Deleted old log file: bot-2025-09-19T05-45-51-260Z.log
2025-09-19T11:51:15: 📝 Enhanced Logger initialized
2025-09-19T11:51:15: 📁 Loaded 0 message hashes from file
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T11:51:15: 📁 Loaded statistics from file
2025-09-19T11:51:15: ✅ Duplicate Prevention Manager initialized
2025-09-19T11:51:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T11:51:15: 🧹 Removed stale process lock
2025-09-19T11:51:15: 🔒 Process lock acquired (PID: 1532)
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1532
}
2025-09-19T11:51:15: ⏰ Starting 240 second startup grace period...
2025-09-19T11:51:15: 🚫 All message sending is BLOCKED during grace period
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758262875604, processId: 1532 },
  timestamp: 1758262875675
}
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758262875604, willExpireAt: 1758263115604 },
  timestamp: 1758262875675
}
2025-09-19T11:51:15: 🛡️ Enhanced Safety Manager initialized
2025-09-19T11:51:15: ⏰ Startup grace period: 240 seconds
2025-09-19T11:51:15: 📋 Message rules loaded: 8 types
2025-09-19T11:51:15: ℹ️ [11:51:15 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 72,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T11:51:16: [INFO] Sheets health after init { status: 'healthy' }
2025-09-19T11:51:16: [INFO] Initializing WhatsApp client...
2025-09-19T11:51:16: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758262875604,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1532,
  nodeVersion: 'v22.19.0'
}
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T11:51:16: 🧹 Removed stale process lock
2025-09-19T11:51:16: 🔒 Process lock acquired (PID: 1532)
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1532
}
2025-09-19T11:51:16: ⏰ Starting 240 second startup grace period...
2025-09-19T11:51:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758262875604, processId: 1532 },
  timestamp: 1758262876763
}
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758262875604, willExpireAt: 1758263115604 },
  timestamp: 1758262876763
}
2025-09-19T11:51:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T11:51:16: ⏰ Startup grace period: 240 seconds
2025-09-19T11:51:16: 📋 Message rules loaded: 8 types
2025-09-19T11:51:16: ℹ️ [11:51:16 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 1162,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T11:51:16: ✅ Safety Manager initialized
2025-09-19T11:51:16: 📁 Loaded 0 sent messages from file
2025-09-19T11:51:16: 📁 Loaded 0 customer histories from file
2025-09-19T11:51:16: 📁 Loaded 0 message hashes from file
2025-09-19T11:51:16: 📁 Loaded statistics from file
2025-09-19T11:51:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T11:51:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T11:51:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T11:51:16: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T11:51:16: [INFO] WhatsApp client initialized
2025-09-19T11:51:16: [INFO] Starting Express server...
2025-09-19T11:51:16: [INFO] Express server started
2025-09-19T11:51:16: [INFO] WhatsApp Sheet Bot server running on http://localhost:3001
2025-09-19T11:51:16: [INFO] QR Code available at: http://localhost:3001/qr
2025-09-19T11:51:23: [INFO] Dashboard accessed {
  hasQRCode: false,
  hasQRDataURL: false,
  qrCodeType: 'object',
  qrCodeLength: 0,
  connectionStatus: {
    connected: false,
    connectionAttempts: 0,
    maxAttempts: 60,
    state: 'disconnected'
  }
}
2025-09-19T11:51:26: [INFO] Dashboard accessed {
  hasQRCode: false,
  hasQRDataURL: false,
  qrCodeType: 'object',
  qrCodeLength: 0,
  connectionStatus: {
    connected: false,
    connectionAttempts: 0,
    maxAttempts: 60,
    state: 'disconnected'
  }
}
2025-09-19T11:51:26: [INFO] Dashboard accessed {
  hasQRCode: false,
  hasQRDataURL: false,
  qrCodeType: 'object',
  qrCodeLength: 0,
  connectionStatus: {
    connected: false,
    connectionAttempts: 0,
    maxAttempts: 60,
    state: 'disconnected'
  }
}
2025-09-19T18:33:09: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T18:33:09: 📝 Loaded 12 template types
2025-09-19T18:33:09: 🔧 WhatsApp Authentication Configuration:
2025-09-19T18:33:09:    Auth Mode: both
2025-09-19T18:33:09:    QR Enabled: true
2025-09-19T18:33:09:    Phone Enabled: true
2025-09-19T18:33:09:    Session Persistence: true
2025-09-19T18:33:09:    Max Reconnect Attempts: 10
2025-09-19T18:33:09:    Default Phone: None
2025-09-19T18:33:09: 🔒 Session validation enabled (check every 300s)
2025-09-19T18:33:09: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:33:09: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T18:33:09: ⏰ 4-minute startup delay active
2025-09-19T18:33:09: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T18:33:09: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T18:33:09: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:33:09: 📁 Loaded 0 sent messages from file
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:33:09: 📁 Loaded 0 customer histories from file
2025-09-19T18:33:09: 📁 Loaded 0 message hashes from file
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:33:09: 📁 Loaded statistics from file
2025-09-19T18:33:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:33:09: 🗑️ Deleted old log file: bot-2025-09-19T07-05-09-358Z.log
2025-09-19T18:33:09: 📝 Enhanced Logger initialized
2025-09-19T18:33:09: 🧹 Removed stale process lock
2025-09-19T18:33:09: 🧹 Removed stale process lock
2025-09-19T18:33:09: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:33:09: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:33:09: ⏰ Starting 240 second startup grace period...
2025-09-19T18:33:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:33:09: ⏰ Starting 240 second startup grace period...
2025-09-19T18:33:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758286989405
}
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758286989406
}
2025-09-19T18:33:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:33:09: ⏰ Startup grace period: 240 seconds
2025-09-19T18:33:09: 📋 Message rules loaded: 8 types
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758286989408
}
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758286989408
}
2025-09-19T18:33:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:33:09: ⏰ Startup grace period: 240 seconds
2025-09-19T18:33:09: 📋 Message rules loaded: 8 types
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 171,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:33:09: ℹ️ [6:33:09 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 174,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:33:09: ✅ Safety Manager initialized
2025-09-19T18:33:09: 📁 Loaded 0 sent messages from file
2025-09-19T18:33:09: 📁 Loaded 0 customer histories from file
2025-09-19T18:33:09: 📁 Loaded 0 message hashes from file
2025-09-19T18:33:09: 📁 Loaded statistics from file
2025-09-19T18:33:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:33:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:09: 🔄 Starting WhatsApp connection...
2025-09-19T18:33:09: 🔄 Initializing WhatsApp client...
2025-09-19T18:33:09: ✅ WhatsApp connection started
2025-09-19T18:33:09: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:33:09: ⚠️ Google Sheets integration disabled (no service account key)
2025-09-19T18:33:09: ✅ WhatsApp QR Bot initialized successfully
2025-09-19T18:33:09: 📞 Attempting to request pairing code...
2025-09-19T18:33:09: 💡 To use phone authentication:
2025-09-19T18:33:09:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:33:09:    2. Select "Phone Number Authentication"
2025-09-19T18:33:09:    3. Enter your phone number
2025-09-19T18:33:09:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:33:09: 🔄 Connecting to WhatsApp...
2025-09-19T18:33:09: 🚀 WhatsApp QR Bot running on http://localhost:3001
2025-09-19T18:33:09: 📱 Open the dashboard to scan QR code and connect WhatsApp
2025-09-19T18:33:15: 🔌 Connection closed. Reason: undefined
2025-09-19T18:33:15: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T18:33:16: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:33:16: 🧹 Removed stale process lock
2025-09-19T18:33:16: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:33:16: ⏰ Starting 240 second startup grace period...
2025-09-19T18:33:16: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758286996520
}
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758286996521
}
2025-09-19T18:33:16: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:33:16: ⏰ Startup grace period: 240 seconds
2025-09-19T18:33:16: 📋 Message rules loaded: 8 types
2025-09-19T18:33:16: ℹ️ [6:33:16 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 7283,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:33:16: ✅ Safety Manager initialized
2025-09-19T18:33:16: 📁 Loaded 0 sent messages from file
2025-09-19T18:33:16: 📁 Loaded 0 customer histories from file
2025-09-19T18:33:16: 📁 Loaded 0 message hashes from file
2025-09-19T18:33:16: 📁 Loaded statistics from file
2025-09-19T18:33:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:16: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:33:16: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:16: 🔄 Starting WhatsApp connection...
2025-09-19T18:33:16: 🔄 Initializing WhatsApp client...
2025-09-19T18:33:16: ✅ WhatsApp connection started
2025-09-19T18:33:16: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:33:16: 📞 Attempting to request pairing code...
2025-09-19T18:33:16: 💡 To use phone authentication:
2025-09-19T18:33:16:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:33:16:    2. Select "Phone Number Authentication"
2025-09-19T18:33:16:    3. Enter your phone number
2025-09-19T18:33:16:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:33:16: 🔄 Connecting to WhatsApp...
2025-09-19T18:33:18: 🔌 Connection closed. Reason: undefined
2025-09-19T18:33:18: 🔄 Reconnecting in 2s... (Attempt 2/10)
2025-09-19T18:33:20: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:33:20: 🧹 Removed stale process lock
2025-09-19T18:33:20: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:33:20: ⏰ Starting 240 second startup grace period...
2025-09-19T18:33:20: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287000275
}
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287000276
}
2025-09-19T18:33:20: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:33:20: ⏰ Startup grace period: 240 seconds
2025-09-19T18:33:20: 📋 Message rules loaded: 8 types
2025-09-19T18:33:20: ℹ️ [6:33:20 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 11039,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:33:20: ✅ Safety Manager initialized
2025-09-19T18:33:20: 📁 Loaded 0 sent messages from file
2025-09-19T18:33:20: 📁 Loaded 0 customer histories from file
2025-09-19T18:33:20: 📁 Loaded 0 message hashes from file
2025-09-19T18:33:20: 📁 Loaded statistics from file
2025-09-19T18:33:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:33:20: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:20: 🔄 Starting WhatsApp connection...
2025-09-19T18:33:20: 🔄 Initializing WhatsApp client...
2025-09-19T18:33:20: ✅ WhatsApp connection started
2025-09-19T18:33:20: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:33:20: 📞 Attempting to request pairing code...
2025-09-19T18:33:20: 💡 To use phone authentication:
2025-09-19T18:33:20:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:33:20:    2. Select "Phone Number Authentication"
2025-09-19T18:33:20:    3. Enter your phone number
2025-09-19T18:33:20:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:33:20: 🔄 Connecting to WhatsApp...
2025-09-19T18:33:25: 🔌 Connection closed. Reason: undefined
2025-09-19T18:33:25: 🔄 Reconnecting in 4s... (Attempt 3/10)
2025-09-19T18:33:29: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:33:29: 🧹 Removed stale process lock
2025-09-19T18:33:29: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:33:29: ⏰ Starting 240 second startup grace period...
2025-09-19T18:33:29: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287009697
}
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287009697
}
2025-09-19T18:33:29: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:33:29: ⏰ Startup grace period: 240 seconds
2025-09-19T18:33:29: 📋 Message rules loaded: 8 types
2025-09-19T18:33:29: ℹ️ [6:33:29 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 20460,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:33:29: ✅ Safety Manager initialized
2025-09-19T18:33:29: 📁 Loaded 0 sent messages from file
2025-09-19T18:33:29: 📁 Loaded 0 customer histories from file
2025-09-19T18:33:29: 📁 Loaded 0 message hashes from file
2025-09-19T18:33:29: 📁 Loaded statistics from file
2025-09-19T18:33:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:33:29: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:29: 🔄 Starting WhatsApp connection...
2025-09-19T18:33:29: 🔄 Initializing WhatsApp client...
2025-09-19T18:33:29: ✅ WhatsApp connection started
2025-09-19T18:33:29: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:33:29: 📞 Attempting to request pairing code...
2025-09-19T18:33:29: 💡 To use phone authentication:
2025-09-19T18:33:29:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:33:29:    2. Select "Phone Number Authentication"
2025-09-19T18:33:29:    3. Enter your phone number
2025-09-19T18:33:29:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:33:29: 🔄 Connecting to WhatsApp...
2025-09-19T18:33:33: 🔌 Connection closed. Reason: undefined
2025-09-19T18:33:33: 🔄 Reconnecting in 8s... (Attempt 4/10)
2025-09-19T18:33:39: 💾 Data synced to files successfully
2025-09-19T18:33:41: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:33:41: 🧹 Removed stale process lock
2025-09-19T18:33:41: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:33:41: ⏰ Starting 240 second startup grace period...
2025-09-19T18:33:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287021164
}
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287021165
}
2025-09-19T18:33:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:33:41: ⏰ Startup grace period: 240 seconds
2025-09-19T18:33:41: 📋 Message rules loaded: 8 types
2025-09-19T18:33:41: ℹ️ [6:33:41 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 31928,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:33:41: ✅ Safety Manager initialized
2025-09-19T18:33:41: 📁 Loaded 0 sent messages from file
2025-09-19T18:33:41: 📁 Loaded 0 customer histories from file
2025-09-19T18:33:41: 📁 Loaded 0 message hashes from file
2025-09-19T18:33:41: 📁 Loaded statistics from file
2025-09-19T18:33:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:33:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:33:41: 🔄 Starting WhatsApp connection...
2025-09-19T18:33:41: 🔄 Initializing WhatsApp client...
2025-09-19T18:33:41: ✅ WhatsApp connection started
2025-09-19T18:33:41: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:33:41: 📞 Attempting to request pairing code...
2025-09-19T18:33:41: 💡 To use phone authentication:
2025-09-19T18:33:41:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:33:41:    2. Select "Phone Number Authentication"
2025-09-19T18:33:41:    3. Enter your phone number
2025-09-19T18:33:41:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:33:41: 🔄 Connecting to WhatsApp...
2025-09-19T18:33:46: 🔌 Connection closed. Reason: undefined
2025-09-19T18:33:46: 🔄 Reconnecting in 16s... (Attempt 5/10)
2025-09-19T18:34:02: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:34:02: 🧹 Removed stale process lock
2025-09-19T18:34:02: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:34:02: ⏰ Starting 240 second startup grace period...
2025-09-19T18:34:02: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287042742
}
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287042742
}
2025-09-19T18:34:02: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:34:02: ⏰ Startup grace period: 240 seconds
2025-09-19T18:34:02: 📋 Message rules loaded: 8 types
2025-09-19T18:34:02: ℹ️ [6:34:02 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 53505,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:34:02: ✅ Safety Manager initialized
2025-09-19T18:34:02: 📁 Loaded 0 sent messages from file
2025-09-19T18:34:02: 📁 Loaded 0 customer histories from file
2025-09-19T18:34:02: 📁 Loaded 0 message hashes from file
2025-09-19T18:34:02: 📁 Loaded statistics from file
2025-09-19T18:34:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:34:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:34:02: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:34:02: 🔄 Starting WhatsApp connection...
2025-09-19T18:34:02: 🔄 Initializing WhatsApp client...
2025-09-19T18:34:02: ✅ WhatsApp connection started
2025-09-19T18:34:02: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:34:02: 📞 Attempting to request pairing code...
2025-09-19T18:34:02: 💡 To use phone authentication:
2025-09-19T18:34:02:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:34:02:    2. Select "Phone Number Authentication"
2025-09-19T18:34:02:    3. Enter your phone number
2025-09-19T18:34:02:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:34:02: 🔄 Connecting to WhatsApp...
2025-09-19T18:34:06: 🔌 Connection closed. Reason: undefined
2025-09-19T18:34:06: 🔄 Reconnecting in 30s... (Attempt 6/10)
2025-09-19T18:34:09: 💾 Data synced to files successfully
2025-09-19T18:34:36: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:34:36: 🧹 Removed stale process lock
2025-09-19T18:34:36: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:34:36: ⏰ Starting 240 second startup grace period...
2025-09-19T18:34:36: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287076453
}
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287076453
}
2025-09-19T18:34:36: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:34:36: ⏰ Startup grace period: 240 seconds
2025-09-19T18:34:36: 📋 Message rules loaded: 8 types
2025-09-19T18:34:36: ℹ️ [6:34:36 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 87216,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:34:36: ✅ Safety Manager initialized
2025-09-19T18:34:36: 📁 Loaded 0 sent messages from file
2025-09-19T18:34:36: 📁 Loaded 0 customer histories from file
2025-09-19T18:34:36: 📁 Loaded 0 message hashes from file
2025-09-19T18:34:36: 📁 Loaded statistics from file
2025-09-19T18:34:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:34:36: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:34:36: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:34:36: 🔄 Starting WhatsApp connection...
2025-09-19T18:34:36: 🔄 Initializing WhatsApp client...
2025-09-19T18:34:36: ✅ WhatsApp connection started
2025-09-19T18:34:36: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:34:36: 📞 Attempting to request pairing code...
2025-09-19T18:34:36: 💡 To use phone authentication:
2025-09-19T18:34:36:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:34:36:    2. Select "Phone Number Authentication"
2025-09-19T18:34:36:    3. Enter your phone number
2025-09-19T18:34:36:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:34:36: 🔄 Connecting to WhatsApp...
2025-09-19T18:34:39: 💾 Data synced to files successfully
2025-09-19T18:34:39: 🔌 Connection closed. Reason: undefined
2025-09-19T18:34:39: 🔄 Reconnecting in 30s... (Attempt 7/10)
2025-09-19T18:35:09: 💾 Data synced to files successfully
2025-09-19T18:35:09: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:35:09: 🧹 Removed stale process lock
2025-09-19T18:35:09: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:35:09: ⏰ Starting 240 second startup grace period...
2025-09-19T18:35:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287109725
}
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287109726
}
2025-09-19T18:35:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:35:09: ⏰ Startup grace period: 240 seconds
2025-09-19T18:35:09: 📋 Message rules loaded: 8 types
2025-09-19T18:35:09: ℹ️ [6:35:09 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 120493,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:35:09: ✅ Safety Manager initialized
2025-09-19T18:35:09: 📁 Loaded 0 sent messages from file
2025-09-19T18:35:09: 📁 Loaded 0 customer histories from file
2025-09-19T18:35:09: 📁 Loaded 0 message hashes from file
2025-09-19T18:35:09: 📁 Loaded statistics from file
2025-09-19T18:35:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:35:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:35:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:35:09: 🔄 Starting WhatsApp connection...
2025-09-19T18:35:09: 🔄 Initializing WhatsApp client...
2025-09-19T18:35:09: ✅ WhatsApp connection started
2025-09-19T18:35:09: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:35:09: 📞 Attempting to request pairing code...
2025-09-19T18:35:09: 💡 To use phone authentication:
2025-09-19T18:35:09:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:35:09:    2. Select "Phone Number Authentication"
2025-09-19T18:35:09:    3. Enter your phone number
2025-09-19T18:35:09:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:35:09: 🔄 Connecting to WhatsApp...
2025-09-19T18:35:11: 🔌 Connection closed. Reason: undefined
2025-09-19T18:35:11: 🔄 Reconnecting in 30s... (Attempt 8/10)
2025-09-19T18:35:39: 💾 Data synced to files successfully
2025-09-19T18:35:41: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758286989240,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18000,
  nodeVersion: 'v22.19.0'
}
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T18:35:41: 🧹 Removed stale process lock
2025-09-19T18:35:41: 🔒 Process lock acquired (PID: 18000)
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18000
}
2025-09-19T18:35:41: ⏰ Starting 240 second startup grace period...
2025-09-19T18:35:41: 🚫 All message sending is BLOCKED during grace period
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, processId: 18000 },
  timestamp: 1758287141784
}
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758286989240, willExpireAt: 1758287229240 },
  timestamp: 1758287141784
}
2025-09-19T18:35:41: 🛡️ Enhanced Safety Manager initialized
2025-09-19T18:35:41: ⏰ Startup grace period: 240 seconds
2025-09-19T18:35:41: 📋 Message rules loaded: 8 types
2025-09-19T18:35:41: ℹ️ [6:35:41 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 152547,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T18:35:41: ✅ Safety Manager initialized
2025-09-19T18:35:41: 📁 Loaded 0 sent messages from file
2025-09-19T18:35:41: 📁 Loaded 0 customer histories from file
2025-09-19T18:35:41: 📁 Loaded 0 message hashes from file
2025-09-19T18:35:41: 📁 Loaded statistics from file
2025-09-19T18:35:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:35:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T18:35:41: ✅ Duplicate Prevention Manager initialized
2025-09-19T18:35:41: 🔄 Starting WhatsApp connection...
2025-09-19T18:35:41: 🔄 Initializing WhatsApp client...
2025-09-19T18:35:41: ✅ WhatsApp connection started
2025-09-19T18:35:41: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T18:35:41: 📞 Attempting to request pairing code...
2025-09-19T18:35:41: 💡 To use phone authentication:
2025-09-19T18:35:41:    1. Use the dashboard at http://localhost:3001
2025-09-19T18:35:41:    2. Select "Phone Number Authentication"
2025-09-19T18:35:41:    3. Enter your phone number
2025-09-19T18:35:41:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T18:35:41: 🔄 Connecting to WhatsApp...
2025-09-19T18:35:46: 🔌 Connection closed. Reason: undefined
2025-09-19T18:35:46: 🔄 Reconnecting in 30s... (Attempt 9/10)
2025-09-19T21:59:38: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T21:59:38: 📝 Loaded 12 template types
2025-09-19T21:59:38: 📝 Enhanced Logger initialized
2025-09-19T21:59:38: 🔧 WhatsApp Authentication Configuration:
2025-09-19T21:59:38:    Auth Mode: both
2025-09-19T21:59:38:    QR Enabled: true
2025-09-19T21:59:38:    Phone Enabled: true
2025-09-19T21:59:38:    Session Persistence: true
2025-09-19T21:59:38:    Max Reconnect Attempts: 10
2025-09-19T21:59:38:    Default Phone: None
2025-09-19T21:59:38: 🔒 Session validation enabled (check every 300s)
2025-09-19T21:59:38: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T21:59:38: 🔧 Developer Configuration initialized
2025-09-19T21:59:38: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T21:59:39: ℹ️ [9:59:38 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T21:59:39: 🔧 Developer Configuration initialized
2025-09-19T21:59:39: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T21:59:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T21:59:39: ⏰ 4-minute startup delay active
2025-09-19T21:59:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T21:59:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T21:59:39: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T21:59:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T21:59:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T21:59:39: 📝 Enhanced Logger initialized
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T21:59:39: 🧹 Removed stale process lock
2025-09-19T21:59:39: 🔒 Process lock acquired (PID: 7712)
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T21:59:39: ⏰ Starting 240 second startup grace period...
2025-09-19T21:59:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T21:59:39: 🔒 Process lock acquired (PID: 7712)
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299379093
}
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299379094
}
2025-09-19T21:59:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T21:59:39: ⏰ Startup grace period: 240 seconds
2025-09-19T21:59:39: 📋 Message rules loaded: 8 types
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T21:59:39: ⏰ Starting 240 second startup grace period...
2025-09-19T21:59:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 141,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299379104
}
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299379105
}
2025-09-19T21:59:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T21:59:39: ⏰ Startup grace period: 240 seconds
2025-09-19T21:59:39: 📋 Message rules loaded: 8 types
2025-09-19T21:59:39: ℹ️ [9:59:39 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 150,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T21:59:39: ✅ Safety Manager initialized
2025-09-19T21:59:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T21:59:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T21:59:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T21:59:39: 🔄 Starting WhatsApp connection...
2025-09-19T21:59:39: 🔄 Initializing WhatsApp client...
2025-09-19T21:59:39: ✅ WhatsApp connection started
2025-09-19T21:59:39: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T21:59:39: 📞 Attempting to request pairing code...
2025-09-19T21:59:39: 💡 To use phone authentication:
2025-09-19T21:59:39:    1. Use the dashboard at http://localhost:3001
2025-09-19T21:59:39:    2. Select "Phone Number Authentication"
2025-09-19T21:59:39:    3. Enter your phone number
2025-09-19T21:59:39:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T21:59:39: 🔄 Connecting to WhatsApp...
2025-09-19T21:59:40: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T21:59:40: [47m[30m ▄▄▄▄▄▄▄ ▄▄▄▄ ▄▄        ▄▄▄▄  ▄▄ ▄ ▄   ▄   ▄▄ ▄▄▄▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▀██▄ ▄▀▀▄▀▄ ▄  ▄▀█ ▀▄█▀▀▀ █▄▀ ███▄███▀▀▄█▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄   █▀██▀▄  ▀██ ▀▀█ ▄▄▄▄██ ▀▀▄▄█▀ ▄▀▀▀▀▀█▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█▀█ ▄▀█ ▄▀█ █ █ ▄ █ ▄ █▀▄ █ ▄▀█ ▄▀▄ █▀▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄ █ ▄█▄█  ▄▄▀██ ▄ ▄█▄▄▄█▄█▀▄▄███    ▀ ▄▄▀▄▄ ▄  ▄ ▄▄▄ [0m
[47m[30m ▀█▀ ▄▄▄█▀▀ ▄█▀▄▄█▄▄█▀▄ █▄█▄▄ █ ██▀██▀█▀▄ ▀▀▀█ █▀█▀███ ▀▄▄  █▄ [0m
[47m[30m ▄▄▄█ ▄▄███ ▀ ▀▄ ▀▄▀▀  █▄  ▄█▀▄▀▄█▀▀▀█▄█ ▄█▄ ▄ ▀▀▄▀▄▄█▀▀ █▀▀ ▄ [0m
[47m[30m  ▀▀▄▀▀▄▄▀▄█▄█▀ ▀▄█ ███▀█▄█▀██ ▄▄ █▄█  ▀ █▄▀ ▄█▄▄█ █▀▄▀▀▄██▀▄█ [0m
[47m[30m   ██ ▄▄ ▄▄██▀▀ ▄▄▀▄▄█▄▄▄█ ▄▀▀██▀█▄▀ ▄▀ ▀ ▀▀▀▄█▄▀▄█▀ █▄ ███▀▄▀ [0m
[47m[30m ▄▀ ▀█▄▄██▄▀▀█ ▄▀██▄▀▄▀█▄▀██ █▀▄ ▄▀█ ▀▀▄██ ▀▄▀ ▀▀▄  ▄█▄██ ▄▀▄▄ [0m
[47m[30m ▄▀▀ ▄▀▄  ▄▄▀█  ▀█▀  ▀▄ █▄▄▀█ ▄▀█▀█▄▄█▄▀ █ ▀▄  ▄▄▄▄▄█  █ ▀█▄█▀ [0m
[47m[30m ███ █ ▄█  ▄ ▄▀▄█▄▀▄▄█▀▀ ▀█▀ ▀█ █▄▀▀▀▄▀█▀ █▀▄█ █▄▄█▀█▀█▀▄▄ ▄ █ [0m
[47m[30m  ▀ █▀█▄▄▄  ▀  ▄█▄▀▀ ▄▄▀▀███ █▄▄ ▀▀▄ ██▄▀██▄ █▄▀ ▄ █▀▀▄▄▀█ ▀█  [0m
[47m[30m ▄▀ ▀▄▀▄▀▄  █ ▄▀█▀▄▄█ ▀█▄█▄ ▄▄█ ▀█▄▄▀█▀█ █▀▀▀▄█▄▄▄ ▀▄ █▀▄█▀███ [0m
[47m[30m ▀ ▄▄▄▄▄██▄█ ██ █▀▄█▀▄▄▀ ▀▄█████▄▄▀█▀▄ ▀█  ▄▄▄▄ █▄▄█▀█▄▄██▄█▄█ [0m
[47m[30m ▄█▀▄█ ▄ █ ▀▀ █ ▄▀▄▄ ███▄██▀ █ ▄ ██▀▀▄█  ▄ ▀█▀ ▀    ▀█ ▄ █▄█▀▄ [0m
[47m[30m ▀▄▀██▄▄▄█▀▀ ▄▀█▄▀█▀██ ▄▄█▄▀██▄▄▄█▀ ▄█▄▀ ▄██▀ ▀▀▀▄█▀ █▄▄▄██ █▀ [0m
[47m[30m ▄▀█ ▄▀▄▀▄   ▀▀▄▄▀███ █▀▀█▀ █  █▀▄████▀▀▄█▄▀▀▄█▀█▄▀█▄▀ ██▀▀▀█▄ [0m
[47m[30m █▀▀█ ▀▄ ▄█▀▀█ ▀   █▀▀▄▀█  ▄ ▀ ▄▀ ▄▄▀██  ▄█▀▀█▄▀▀▄▄██  ▀▀ ███▀ [0m
[47m[30m █ ▀▀▄█▄  ▄▄█▄▄▄█▄  █ ▄ ██ █▄▀  ▄▀█▄ ▀▄▀▄█▄▀▀▀▀ █ ▄▀  █▄▀█▄▄▄  [0m
[47m[30m ▄▀█▀ ▄▄▄█▄█ █ ▀▀▀▄█▀▀▀▀▄█▄  █ ███▄▄█▄▄█ ▀  ▀▄▄█ ▄▄▄█▄▄ ▄▀▀█▄█ [0m
[47m[30m ▄▀█ ▄ ▄▄ █▄▀▀▀▀█▄███ ▀█▄ ▄▄█▄▀  ▀███▄  █  ▀▄█▀▀██▀ █  ▄▄ █▀▀█ [0m
[47m[30m █▄ ▄ █▄ █ ▀█▀ █ ██▀▄▄▄▄█▄█▀█▄▀█▄██▀▀▄██▀██▀▀   ▄▄ █▄▀██▀▄▀▄██ [0m
[47m[30m █ ██▄ ▄███▀▄▄▀ ███▄ █ ▄▀█▀▄  ▄▄ ██ ▄█▀▀▄███▄█▀▀ ██▀ ▀▀▄▄██ █▄ [0m
[47m[30m ▄ █▀ █▄▄▀▀▀███▄▀▄█▀█▀▄▄▀█▄▄▀▄▄██ ▄▀▄▄▀▄▀██▄ █▀▀▀█ ▄█▄▄▀▄▄█▀▄▄ [0m
[47m[30m   ▄▄█▄▄▀ █   █▀▀█ ▄ ▄▄▀▀█ ▄▄███ ▀▀ ▀█▄██ ▀█▀▀█  ▄▄█▀▄██ ▀▀ ▄█ [0m
[47m[30m ███▄▀ ▄█ ▄▀▀▀▀ ▀ ▀█▀█▄ █ ▀█ ▄▄▄▄██  ████ ▀ ▄▄ █▀▄▀ ▄▄██▄▄ █▀  [0m
[47m[30m ▄▄▄▄▄▄▄ █▄██  █ ▄ █▀ ▄█▄█▄███ ▄ █▀▀█ █ ▀ ▄█ █ ▀▀▄█ ▄█ ▄ █▀▀▀▄ [0m
[47m[30m █ ▄▄▄ █ █  ▄▄  ▄█▀▄ ▄▄▀  ▄▀██▄▄▄█▄▀▄█▀▄███▀▄ ▀▄▄▄▀███▄▄▄█▀▄▀  [0m
[47m[30m █ ███ █ ▀▀ █▄▀  ▄█▀██▄▄▀▀▀▄█ ██▀█▀███▄▀▀▄ ▀ ██▀█▄███ ▀███ █▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█▄▄  ▄ █▀▄█▄▀▀██▄█▄ ▀██ ▀▄▄▀▄▄▄ ▀▀▄▄  ▄▄▀█▀ ▀█ ██▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T21:59:40: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:00:09: 💾 Data synced to files successfully
2025-09-19T22:00:39: 💾 Data synced to files successfully
2025-09-19T22:00:40: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:00:40: [47m[30m ▄▄▄▄▄▄▄   ▄▄ ▄▄  ▄   ▄▄     ▄ ▄▄   ▄ ▄  ▄▄▄ ▄▄  ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄█  ▄ ▀█▄▀▀██▄▄█▀ ▄▀█▄█▄  ▄█▄▄▀▄▀█▄ ▄▄█▀▄ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▄▀▄█▀▀▄ █  ▄▄█▄▀▀ ▀█▄▄▄▄▄▀█▀▄▀▄ ▄▄▀▄  ██▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀█ █▀█ ▄▀█▀█ ▄▀█ █▀█ ▄ █ █▀█ ▄ ▄▀▄▀▄▀▄ ▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▄██ ▄██▀  ▀██▀█ █ ██▄▄▄█▄ ▄█▄▀▀▀ ▄▀▀▀███▀▀█▄ ▄▄▄▄▄   [0m
[47m[30m ▀█▄▀█▀▄█▀▀  █▀▀█▄▀▄█▄▄ ▀▄▄ █▀▄▄█ ▄▄▀ ▀  ██▀▄▄▄ ▀▄█ ▄▄█▀▀ ▀▀▀▄ [0m
[47m[30m  █ ▄█▄▄▀▀▄█▄▄█ █▄▀▀▀▄▀ ▀ ▄ ▄▄▀▀ ▀█▄▄▄█ ▀ ▄▀▀▀   ▄▀▀█ ▄▀▄▀ ▄▀▀ [0m
[47m[30m ▀▀ █▄█▄▀ █▀▄█▄▀█▀█ ▄▀▄██▀   █ ▄▀▀ ▄█▄█ ▄▀▀▀▀▄▄ █ ▀   ▀▀█ ▄██▄ [0m
[47m[30m ▀█▄▄█▄▄ ▀█▄▀ ▀█▀██▄█▄██▄  ▀█▄▀█▀ █ ▄▄▀█ ▀█▀▀▀▄██▄█▄█▄  █ ▄ ██ [0m
[47m[30m  ██▀█▀▄▀▀▀ ▀▄  █ ▄ ▀▀  ▀ ▀▀ ▄▄▄█   █▀█ ▄ █▀ █▀▄▄▄▄▄ ▄▀█▀▄█▄▀▄ [0m
[47m[30m  ▄ █ ▀▄ █▄▀█ █ █▀▄▀ ▄   ▀▀ ▄▄▄▀  ▄ ▄█▀ ▀▀ ▀▀▀▀ ▄▄▀█▄  ██ ▄ █▀ [0m
[47m[30m ██▄▄▄▄▄█▄  ████▀▀█▀  █▄▄ ▀ ▀▀▀ █▀  █▄▀  ▀▀▀▄ ▀▄ ▄█▄▄ ▀▀▄▀█ ▄█ [0m
[47m[30m  █  ▄ ▄▄▀▀ ▄▀█▀█▀  █▀▀▄▄▄█ ▀ ▀▄ ▀ ▀██▀    ▄▄▀█▄█▄▄▀ ████▀█▄   [0m
[47m[30m ▄▄▀  ▀▄  █▄█ ▄█▄█▀  ▀  ▄██▄█ █▀▄▄█ ▀█▄▄▀▀▀▀▄█▄ ▄▄█ █▄ ▀▀▄ ▀██ [0m
[47m[30m ▀ ▀▄██▄█▄ ▀▄█▄ ▄ ▄ ▀▀ ▄▄▀█ ▄▄▄█▄█▀▀ ▄▀▀▀▀▀▀▄▀ ▀█▄█  ▄▄██▄█▄ █ [0m
[47m[30m  ▀███ ▄ █▀▄▄  ██▄ ▄▄▀▄ ▀█ ▄▀█ ▄ █▄ ███▄  ▀██▀   ██▄ █ ▄ ██ ██ [0m
[47m[30m ▀  ▄█▄▄▄█ █  ▄▄█▀█▀▄▄▀ ▄█▀ ▄█▄▄▄█▄ ▄▄█▄  ▄█▄▀▀ ▄█▀ ▀█▄▄▄█▄▄▄█ [0m
[47m[30m ▄  ▀ █▄ ▄▀▀ ▄▀▀▄█▀█  ▄ ██▀█▄▀▀▄▀▀▀▄▀█▀  ▀██▄▄▄▄ ██ █ ██▀▄  ▄▄ [0m
[47m[30m ▄ █▄▀█▄█ ▄▄▄█▄██ ██▀▄█▄ ▄▄ ▀▄▄▄█▄█▀▄█▀▄▀▀ ▀█▀█▄▄▄ ▀▄██ ▀▀▄ █▀ [0m
[47m[30m ▄▄▀█▀█▄█▀█▄▀ ▀██▄▄   ▀▄▀▀█▄▄ ▀▀▀ ▄  ▀▀ █▀▄▀▄  ▄█ ▀ ▀▄█▄▀▄█ ▄  [0m
[47m[30m ▀██▄██▄▄  █▀▀ ▄▀▀█▀█▄▀█▀█▄█  ▄██ ██▀▄▄ ▀ ▄ ▀▀█▄▄▄▄▀█▀  ▄█▄  █ [0m
[47m[30m ▄▄▄▄▄█▄ ▄▀▀▄█▀ █ ▄████▄▀   ██▄ ▄█▄  ▄▄▄▄██▀ ▀ ▄ ██▄ ▀█▄ ▄▀█▄█ [0m
[47m[30m █▀ █▄▄▄█   ▄ █▄▀ █▀▀██▀█▄█ ▀ ▀██ ▄█▀▄ ▄ ▀█▀▄▀▀▄▄▄█▄▄▀██▄█  ██ [0m
[47m[30m █ ▀▄█▄▄▀█ ▀ ▄▄█▄▄▀█  █ ██▄▀▀▀ ▄█ ▄▀ █▀▄█▄▀█▄   ▄██▄█ █▄▄ ▄▀▀▄ [0m
[47m[30m ▄▄  █ ▄██   █▀█ ▀ █▀██▀▄█▄▀ ▀▀█▀▄█████  ▀▄█▄▀█▄▀▄ ▀▄▀▀▀  ▄▄▀▄ [0m
[47m[30m  ▀███▄▄█ █▄   ▀ ▀▀███▄▄▀████▀▀▀▄  ▄▄▀█ ▀▄████ ▄▀ ▀▄  █▄█  ▄█▄ [0m
[47m[30m ███▄▀ ▄▀ █ █▀▀█ ▀██▀ █▀▀ ▀ ▀█▄█▄▄▀▀██▀▀▀ ▀▀▄▀▄ ▀▄▄▀███▄▄█▀▄▄▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█ █▄▄▀█▀███ █ ██ ▀▄█ ▄ █▄▄▄█▀▄▄▀▀█▀▄▄▄█▄▀ ██ ▄ █ ▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄█▄█▀▀▄▀▄█ ██▀▀▀ ▄█▄▄▄███▄█▄█▄▀█▀▀▀  ▄▄▄▄▄█▄▄▄█   ▀ [0m
[47m[30m █ ███ █ █ ▀▀ ██▀▄██▄ █▀██▀▀▄▀▀█▀  ▄▀█▄▄ █▄▀  ▄ ▀▄█ ▄▀▄▄▄  ▄ █ [0m
[47m[30m █▄▄▄▄▄█ ▄██  ▄ ▀▀█ ▄▀▄▀▄█▀  ▀▄█▀▀▀▄▀▄█ █▀█▀█ ███▄ █▄▄▀▀█ ▄▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:00:40: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:01:00: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:01:00: [47m[30m ▄▄▄▄▄▄▄   ▄▄▄▄▄▄▄▄▄  ▄ ▄▄   ▄ ▄▄   ▄ ▄  ▄▄▄ ▄▄  ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄▄▄ ▀ ▀▄██ ▄▄ ▄▀▀ ▀███▄  ▄█▄▄▀▄▀█▄ ▄▄█▀▄ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▀ ▄█▄ ▄ ▀█ ▄  ▄▀█ ▀██▄▄▄▄▀█▀▄▀▄ ▄▄▀▄  ██▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀▄ █▀▄ ▄▀▄▀█▀█▀█▀▄▀█ ▄ █ █▀█ ▄ ▄▀▄▀▄▀▄ ▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀█▀█ ▀██▀▀ ▀████ ▄▀██▄▄▄█▀▄██ ▀▀ ▄▀▄▀ ▀▀▄█▀█▄ ▄▄▄▄▄   [0m
[47m[30m ▀█▄▀▄█▄▀▀▀  █▀▀█▄▀▄█▄█▀▀▄▄ █▀███ ▄ █ ▄▄█▄██▄ ▄▄ ██▄▄▄ ▀▄█▀▀▀▄ [0m
[47m[30m ▄  ▄  ▄▀▀▄█ ▄█ █▄▀▀█ ▀ █ ▄ ▄▄█▀ ▀▄ ▀▄█▀▀ ▄█▄▀▀▀▄█▀▄█ ▄▀█▀ ▄█  [0m
[47m[30m █  █▄ ▄▀ █▀▄ ▄▀  █ ▀█▄█▀█   █ ▄▀▀ ▄▄▄▄▄   ▀▀▀▄▄▄█▀▄  ▀▀▄▀▄█▀▄ [0m
[47m[30m ▀▀▄ ▄▀▄ ▀█▄█▀▀█▄▀█▄▀ ██▀█ ▀  ▀█▀ █ ▄▄▀█ ▀█▀▀▀▄██▄█▄▀▄  █ ▄    [0m
[47m[30m  ██▀██▄▀▀█▄▀▀▄▄ █   █▄ █▀▀▀▄▄▄▄▀▀  █▀█ ▄ █▀ █▀▄▄▄▄▄▀▄▀█▀▄█▄▀▄ [0m
[47m[30m ▄█▄▄ ▀▄▀██▀█  ██▀█ ▀▀▄▄█▀▀ ▄ ▄▀▄▀▄ ▄█▀ ▀▀ ▀▀▀▀ ▄▄▀█▄▀ ██ ▄ █▀ [0m
[47m[30m ▄█ ▄▄▄▄ █ ▄▄▀▄█  ▀█▀ ▄█▄▄▀▄ ▀▀ █   █▄▀  ▀▀▀▄ ▀▄ ▄█▄  ▀▀▄▀▄ ▄█ [0m
[47m[30m  █▄▀▄ ▄▄ ▀▄█▀▀ ▄▀ ▀█ ▄██▄▀ ▀ ▀▄ ▀ ▀██▀    ▄▄▀█▄█▄▄▀▀▄▄▀█▀     [0m
[47m[30m ▄▄▀▀ ▀▄█▄▀▀█ ▄█▄█   ▀▄█▄█▀▀█  █▄▄█ ▀█▄▄▀▀▀▀▄█▄ ▄▄█ █▄█▀▀▄ ▀██ [0m
[47m[30m ▀  ██▄▄████▄█▀▄▄ ▀ ▀▀▄▀▄▀▄▀▄▄██▄█▀ ▄▄▀▄▄▀ ▄▀▀ ▀█▄▀▄ ▄█▄▄██▄ █ [0m
[47m[30m ▄▀███ ▄ █▀█▄  ██▄ █▄▀█▀▀█ ▄▀█ ▄ █▀▄██▄▄ ▀▀██ ▄▄█▄▀  █ ▄ ██ ▄▄ [0m
[47m[30m █▀ ▄█▄▄▄█ █ ▄▄▄█▀█▀▄ ▀ ▄█▀ ▄█▄▄▄█▄ ▄██▄▀▀█ ▀▀▄▀▄▄▄█▀█▄▄▄█▄▄██ [0m
[47m[30m ▄  ▀█▀▄  ▀▀█▀▀▀ ▄▀█▄▀▄ ██▀█▄▀ ▄▀▀▄ █▄█▄  ████▀▄███ █ █▄█   ▄▄ [0m
[47m[30m  ▄▀ ▀█▄▄ ▄▄▄▀▄█ ███  █▄ ▄▄ ▀▄▄██▄█▀▄█▀▄▀▀ ▀█▀█▄▄▄ ▀▄█▄▀▄▀▄ █▄ [0m
[47m[30m  ▀█ ▄█▄█▀▀ ▀▀█▀▀█▄▄▄▀█ ███▄██ ▀▀ ▄  ▀▀ █▀▄▀▄  ▄█ ▀ ▀ █▄█ █ ▄  [0m
[47m[30m  ▀█▀▄▀▄▄ ▀█ ▀▀▄▄█ ▀█▀▄  █▄█▄▀▄██ ██▀▄▄ ▀ ▄ ▀▀█▄▄▄▄▀▄▀  ▄▄▄  █ [0m
[47m[30m █▄ ▄▄▄▄ ▄ ██▄▄█▀ ▄▀▀█▀ ▀ ▄ ██▄ ▄█▄  ▄▄▄▄██▀ ▀ ▄ ██▄▄▄█▄ ▄██▄█ [0m
[47m[30m █▀ █▄▄▄▀ ▄▄▄ ▀  ▀▄█▀▄ ▄█▄█▀█ ▀█▄▄▄█▀▄ ▄ ▀█▀▄▀▀▄▄▄█▄▄▄██▄█▄ ██ [0m
[47m[30m █ ▄ █▄▄▀▄█  ▄ ▀▄▄█▄  ▄▄██ ▄▀▀ ▄▀▄▄▀ █▀▄█▄▀█▄   ▄██▄▄▀█▄▄ ▄▀▀▄ [0m
[47m[30m ▄▄ ▀█ ▄▀▄██ █▀  ▀▀▀▀█▄█▄██  ▀▀█▀ ▄ ▄▄█▄  ███  ▄▀▄ ▄▄▀▀▀  ▄▄▀▄ [0m
[47m[30m  ▀███▄▄ ▄▄▄  ▀▀ ▀ ███▄▄▀█▄██▀▀▀█ ▄ ▀▀▀    ▀██▄ ▄▄█▄  ▄██  ▄▄▄ [0m
[47m[30m ███▄▀ ▄█ █ ▀▀▀█▄▀███▄█▀▀▄▀ ▀█▄█▄▄█▄▄█ ▀ ▀   ▀  ██▄▀██▄█▄█▀▄▄▄ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█ █ ▄▀████▀██ █▀ ▀▄█ ▄ █▄ ▄ █ ▄█▄▀ ▄█▄  █ ██ ▄ █ ▄▀▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄▀██▀▀█▀▄▀▀███▀▀ ▄█▄▄▄███▄█▄█▄▀█▀▀▀  ▄▄▄▄▄█▄▄▄█  ▄█ [0m
[47m[30m █ ███ █ █ ▀▄ █▀█▀▀█▀█▀▀▄▀▀▀▄▀██▀  ▄▀█▄▄ █▄▀  ▄ ▀▄█ ▄▀▀▀█▀▄▀ █ [0m
[47m[30m █▄▄▄▄▄█ ▄ ▄▀▄█▀█▄▄▄ ▀▄▀▄█▀   ▀▀▀▀▀▄▀▄█ █▀█▀█ ███▄ █▄▄█▀ ▀▀▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:01:00: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:01:09: 💾 Data synced to files successfully
2025-09-19T22:01:20: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:01:20: [47m[30m ▄▄▄▄▄▄▄ ▄ ▄▄▄▄▄ ▄    ▄▄▄    ▄ ▄▄   ▄ ▄  ▄▄▄ ▄▄  ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▀ ██ ▄▀▄█▄▀▀▄██ ▀▄▄▄▀█▀ ▀█ ▄▀  ▀█▄▀▄█▀▀ ▀▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▀   ▀▄▀  █▄  ▀▀ ██ ██▄▄▄▄ ▀▀█▄█    ▀ ▄ ▀▀▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄ ▄ ▄▀█▀█ █ █ █▀▄▀▄ █ ▄ █▀▄▀▄▀▄▀█▀█ ▄ █ █▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄ ▄▄▄▀▄█▄█   █▄██▄▀ ▄█▀  █▄▄▄█▀▄▄ █▀██▀▄ ▀█▀▄ ▄    ▄  ▄ ▄▄ [0m
[47m[30m ██ █▄▀▄██▄▀▄▀▀▄▀▄█ █ ▀▀█ ▄▄▀▀ ▄█▄▄ ▀▀▀ ▄▄█▀▀   ▀ █▄ ▄▀▀█ █▀█  [0m
[47m[30m █  █  ▄ ▀█▄ █▄  ▀▀ ▄  ▀▀▀█ ██  ▀▀▄█▄█▀▀  ██▄▀██▄█▀▄▄▀▄ ▄ ▀█▀▀ [0m
[47m[30m ▀▄▀ ▀▄▄█▀ █ ▄  █▀▄█▀▀▀▀▀▄▄▀█▀▀▀█ █▄█ ▀██ █▄█▄█ ▀▀▀██▄ ▄▀▀▀▀▄▀ [0m
[47m[30m ▀   ▄█▄ █▀▄█▄▀▀▀ ▀  █▀█▀▄ █▄ █▀▀▄▀   ▀▀▄▀▀█▀█ █▀ █ █ ▄▄█▄  ▀█ [0m
[47m[30m  ▀▀▀▀ ▄ ▀ █ ▄█ ▄█▄██▀▀█▄  ▀██▄██ ▀▀█ ▄ █▀█ ▀█ █▄██▄██▀▄ ▄▄█▀█ [0m
[47m[30m ▀▀ ▀▄ ▄▀ ▄   ▀▄ █▀  ▀ ▄▄▄█▀▀▄█▄▀▄▀▄█ █▀▄█▀▄█ ▄▄█▀█▄▄ ▀ ▀▀▀▄▄▄ [0m
[47m[30m ▀▄▀ ▄ ▄ ▄▀ ▀▄█▄██▀▀█ █▄███▄█ █▄▀█▄ ▀ ▀▄▄▀██▄▄█▄▄ █ ▄▄██▄█▀  ▀ [0m
[47m[30m ▀▄▄▄█ ▄███▄▄▀█ ▄  ▄█  ▄▄▄   ▀▀█▀ ▀ █▄  ▀▀ ██▀▄████▀▀▄▀ ▄▀ █ ▀ [0m
[47m[30m ▀ ▀█▄ ▄  ▀█▄█ ▀▀▀▄ ▄ ▀██ ▄  ▄▄▀ █ ▄   █▄█ ▄ ▄▀▄█▀▀▀  ▄▄████▄  [0m
[47m[30m █ █ ██▄██▄▀ ▀▀▀  ▄▄▀█ ▀ █▄█ ▄██▄█    █ █  ▄▄▄ █ ▀ █▄▄▄▄▄▄▀▄▄▀ [0m
[47m[30m █ █▄█ ▄ █ ▄▄▀▀█▄█ ▄█▀█ ▀▄ █ █ ▄ █▀██▀▄▄▀ ▀▄ ▄█▀█▄█▄▀█ ▄ █▄▀▄█ [0m
[47m[30m ▄▀▀▀█▄▄▄██▀▀▀ █▄▀▄▄ █▄▄█ █▀▀█▄▄▄█ ▀▄▀▄▄▄▄ ▄▄ ▄█▄ █▀▄█▄▄▄█▀ ▀▄ [0m
[47m[30m ▀█▄█ ▀▄▄██▀█▄▀█▄▀█▀▀█  ▀▀▀▀ ▀ ▄▀█▄ ▄   ▀▄▀▀  ▄▄█ ▀ ▀   ▀ ▄    [0m
[47m[30m  █▀▀█▀▄▄▀██▄▄██▀▀█▄▀▀▄█▄▀█  █▀█▄▄▄ ▄▄ ▄    ▄▀▄█▄█▀▀█▄█  ▄█▀█▀ [0m
[47m[30m ▀ █▀█ ▄▀   ▀▀▀ █▀▀█ ▀  ▄▄▀█▀▀ ██▀▀▄▀▄█▀ ██▄ ▀█ ▄██▀▄ ▄▀▀█ ▄██ [0m
[47m[30m  █ ▀▀▀▄▄▄  █ █ ▀██▀██▀█▄▀▄▀▄█ ▀█▄▀██ ▄▄█  ▄▀█▀▄  ▄█▀▀▄▄▄▀▄ ▄▀ [0m
[47m[30m █▄███ ▄▀▄▄█▀  ▀ █▄▀  ▄ ▀▀█▄▄ ▄▀▀██▀ ██▄█▄█ ▀▀▀█ ▄▄▄▄ ██▀▄▀▀▄▄ [0m
[47m[30m  █▄▄▀▄▄▀██▀▄█▀▀▄█▀ ██▀▀▄▀█ ▄▄   █▀▀ ▀▄███▄▄  ▄ █▀▀█▀ ▄  ▄▀ ▄  [0m
[47m[30m ▀ ▀ █ ▄▀ █ ▄ ██ ▄█  ▄▀▀▀▀▀▀█▀▄ █▄ ▀▄▀▀ ▀▄█▀▄▄▄  ▀█ ▀ ▀ ▄▄ ▀█  [0m
[47m[30m ██▀ ▄ ▄█    ▄▄ ▀ ▀▄ ███▄▄  ▀ ▀▄▄▄▄▄ █▀██ ▀ █ ▀ ▀█  █ ▀▄▀ ██▀█ [0m
[47m[30m ▀▀▄▄██▄▀█▀▀▀██ ██  ▀▄▀▀   ▄ █ ▄▀▀▀  ▀██▄▄▄ ▄▄▀ ▄▀ ██▄▄▀▀▀█  ▀ [0m
[47m[30m ███▄▀ ▄ ▄▀ ██▀▀ ▀▀▀█▄▀▀▀ ▀▄███▄▄▄▄▄█ █▀█▀  ▄█▀█ ▀▀ ▀█▄█▄██▄   [0m
[47m[30m ▄▄▄▄▄▄▄ █▄▀▀██▀ ▄█▄ █▄▀█ ▀▀██ ▄ █▀▀ █▄▄█▀▀▄ █▀▀▀▄ ▄▄█ ▄ █▀█▄█ [0m
[47m[30m █ ▄▄▄ █ ▀▄  ▄▀  ▀ ▀▀▄ ▀███▀▀█▄▄▄█ ▀█  ▄▀█▄▄█ █▄█▀ █▀█▄▄▄██▄█  [0m
[47m[30m █ ███ █ █ ██ ███▄███ █▀██▀█ ▀██▀▄▄▄█▀▄ ▄█ █ ▄  █ █▄ ▀ ████▀▄▀ [0m
[47m[30m █▄▄▄▄▄█ ▄▄ ▄█▄█▀  ▄█▄█ ▄▄   ▀▀▄ ▀ █▀█▄ ▄ █ ▄ ▄▄██▀███▀ █ ██▄▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:01:20: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:01:39: 💾 Data synced to files successfully
2025-09-19T22:01:40: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:01:40: [47m[30m ▄▄▄▄▄▄▄  ▄ ▄▄       ▄▄  ▄   ▄ ▄▄   ▄ ▄  ▄▄▄ ▄▄  ▄  ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄██▀  ▀█▀▄ ▄██  ▄█▀█▄▄▄  ▄█▄▄▀▄▀█▄ ▄▄█▀▄ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▀▀▄█  ▄ █▄ ▄ █▄▀▄▄▀█▄▄▄▄▄▀█▀▄▀▄ ▄▄▀▄  ██▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █ █▀▄ ▄▀█▀█▀▄▀█ ▄▀█ ▄ █ █▀█ ▄ ▄▀▄▀▄▀▄ ▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▀▀█ ▄██▀▀█▀█▀██ ▀ ██▄▄▄█ ▄▄▄▄  ▀ ▄▄ █▄█▄▄ █▄ ▄▄▄▄▄   [0m
[47m[30m ▀▀▄▀▄▄▄ ▀▀▀ █▀ █▄ ▄█▄▄ ▀▄▄▀█▀ ▄█ ▀▄▄ ▀ █▄███ ▄▄ ▀█ ▄▄▀██▀▀▀▀▄ [0m
[47m[30m ▀█ ▄ █▄▀▀▄█▄ █ ▀ ▀▀▀ ▀ ▀▄▄ ▄▄ ▀ ▀▀ ▄▄ █▄▀█▄█▀█▄█▄  █ ▄▀█▀ ▄ ▀ [0m
[47m[30m ▄█ █▀▄▄▀ █▀▀▄▄▀  █ ▀▄▄█▀▀   █ ▄▀▀▄▄ █▀ ▀▀▀▀▀ ▀▄▄▄█▄  ▀▀ █▄█▄█ [0m
[47m[30m ▀▄▄▄█ ▄ ▀█▄ ▄▀████▄ ▀██▀▀ ▀█ ▀█▀ █ ▄▄▀█ ▀█▀▀▀▄██▄█▄▀▄  █ ▄ █  [0m
[47m[30m ▄ █ ▄ ▄▀▀▀▄▄█ ▄ ▄  ▀▄ ▄  ▀▀▄ ▄▄▀▀  █▀█ ▄ █▀ █▀▄▄▄▄▄█▄▀█▀▄█▄▀▄ [0m
[47m[30m  █▄▄ ▀▄▀▀ ▀█▀██ ▄▀▀▄▄   ▀▀   ▄▀▄ ▄ ▄█▀ ▀▀ ▀▀▀▀ ▄▄▀██  ██ ▄ █▀ [0m
[47m[30m █▄▄ ▄▄▄▀▀▀█▄▄▄ ▀▀▀ ▄ ▀▀███ ▀▀▀ ▀▀  █▄▀  ▀▀▀▄ ▀▄ ▄█▄▄ ▀▀▄▀▀█▄█ [0m
[47m[30m  ██▀▄ ▄ ▄▄ █ ▀▀▄▀▀█▄ ████▄▀▀ ▀▄█▀ ▀██▀    ▄▄▀█▄█▄▄▀ █▄██▀▄    [0m
[47m[30m ▄▄▀█ ▀▄▀▄▄ █  █▄█ ▄ ▀▄█▄████ ▀▄▄▄█ ▀█▄▄▀▀▀▀▄█▄ ▄▄█ █▄█▀▀▄ ▀██ [0m
[47m[30m ▀ ▀███▄███▄▄█  ▄ █▄▀▀█▀▄▀▀▀▄▄██▄█ ▄▄█ ▀▄▀ ▀█▀ ▄▀▄▀▄ ▄█████▄ █ [0m
[47m[30m  ▀███ ▄ █▀█▄  ██▄▀▄▄▀▄▀▀█ █▀█ ▄ █▄▄▀ ▄▄▀█▄▀▄   ▀██  █ ▄ ██ ▀▄ [0m
[47m[30m ██ ▄█▄▄▄█ █ ▄▄▄███▀  ▀ ▄█▀ ▄█▄▄▄█▀ ██ █ ▀▀▄▄▀ ▄▄▄▄▄▀█▄▄▄█▄▄▀█ [0m
[47m[30m ▀▀ ▀▄█▄▄▀▀▀▄█▀▀▀█▀███▄ ██▀█▄▀▄▀▀▀  ▀█▀   ▀▀ ▀ ▄ ▄▀▄█ ▄▄▄    ▄ [0m
[47m[30m ▀▄█  █▄▄▀▄▄▄█▄█▄ █████▄  ▄ ▀▄█▄█▄█▀▄█▀▄▀▀ ▀█▀█▄▄▄ ▀▄█▄▀▄▄▄ ▀█ [0m
[47m[30m █ ▀▄ █▄█▀▀ ▀▀▀█▀ ▄ ██▀▄ ▀█▄▄  ▀▀ ▄  ▀▀ █▀▄▀▄  ▄█ ▀ ▀▄█▄█▄█ ▄  [0m
[47m[30m ▄██▄██▄▄  █  █▄ ▀▀▀▄ ▀▄▀▄▄███▄██ ██▀▄▄ ▀ ▄ ▀▀█▄▄▄▄▀█▀  ██ ▄ █ [0m
[47m[30m ▄▄▀ ▄█▄ ▄ ▀▄▀█▀██  █ █▀▀  ▄▄ ▄ ▄█▄  ▄▄▄▄██▀ ▀ ▄ ██▄  █▄ ▄▄▀▄█ [0m
[47m[30m █▀█▀██▄█▄ ██▀▄▄  █  █▄██▄▄ █▀▀█▄ ▄█▀▄ ▄ ▀█▀▄▀▀▄▄▄█▄████▄█▄ ██ [0m
[47m[30m █ █▀█▄▄ ▄█▀ ▄▄█▄▄▄█   ▀██▄▄▀▀ ▄▄▄▄▀ █▀▄█▄▀█▄   ▄██▄  █▄▄ ▄▀▀▄ [0m
[47m[30m ▄▄▀ █ ▄ ▀▄  ██▀ ▀▄ ▀█ █▄██▀ ▀▀█▀▄▀█▄██ ▀ ▄█▀▀▀ █▄▄▀▄▀██  ▄▄▀▄ [0m
[47m[30m  ▀███▄▄▄ ▄▄     ▀ ▄██▄▄▀████▀███▀▄▄▄▄▀ ▀▀▄▀▄ █▄  ▀   █▄█  ▄▀▄ [0m
[47m[30m ███▄▀ ▄█ █ █▀▀█▄████▄█▀▀ ▀ ▀█▄▄▄▄  ▄▄▀▄ ▀▀ █ █▄▄▄▀▄██▄█▄█▀▄█  [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█  █▄▀ ▀██ ▄█ █▀ ▀▄█ ▄ █▄▄▄▄▄▄▄▀█▀▀█▀▄▄█▀ ██ ▄ █ ▄█▄ [0m
[47m[30m █ ▄▄▄ █ █▀▄▀▄█▀▀█▀▄▄▀██▀▀▀ ▄█▄▄▄███▄█▄█▄▀█▀▀▀  ▄▄▄▄▄█▄▄▄█  █  [0m
[47m[30m █ ███ █ █▄▀▀█▀█▄ ▀▀▀ ███▀▀▀▄▀██▀  ▄▀█▄▄ █▄▀  ▄ ▀▄█ ▄▀  █ ██ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▄ ▀▄▄  ▀▀█▄▄██▄█▀ ▀ █▀▀▀▀▄▀▄█ █▀█▀█ ███▄ █▄▄▀█▀▀▄ ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:01:40: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:02:00: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:02:00: [47m[30m ▄▄▄▄▄▄▄ ▄▄ ▄▄ ▄▄▄▄▄  ▄ ▄▄▄▄▄▄▄  ▄▄ ▄  ▄▄▄▄▄▄    ▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █  ▄▀█▄  ▄█▄▀ █▀ ▄█▄  ▀  █▀▀ ▀ █ ██▀ ▀██▀█ ▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █  █▄▄▀ ▀▀ ▄ ▄▄█ ▀▄█▄██▄▄  ▄  █ ▀███ ▄▀▄▄██▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ ▄ █▀█▀▄▀▄ ▄ ▄▀█ █ █ ▄ █▀█▀█▀█▀▄▀▄ █ ▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄   ▄ ▄▄██▀▄▀  ▀ ▄██▀█ ▄▀ ▄▀█▄▄▄██████▄█ ▀▄ ▄▄▀█▄█ ▀█▄▄▄▄▄  ▄ [0m
[47m[30m █ █ ▀▄▄ ▄▀█▄▀▀▀▄ █ ▄█▄▄█ ▄▀▄█▀▄▄▀  ▄█ ██▀█▀ █▀▄  ▄▀█ ▄██  ██  [0m
[47m[30m  █▄ █ ▄██ ▄▀█▀▄▀█  █ █▀ ▀ ▄ █▄ ▄███▄▄▀▄▄▀▄▀██▄███▄▀▀▀█ ▀█▄█   [0m
[47m[30m █▄▀▄▀▀▄ ▀▄█▄ █  ▄▀▄▀██▀▀▄▀▀▀▀▄   ▀ ▀▀▄█▀▄▀█▀██ ▄▄ ▀▀▄██▀██▀ ▀ [0m
[47m[30m  ▄ ▄▀▀▄▄█▀██▄█▀▄▄▄█▄▄▀▄██▄███ ▄█▄▀▀███▀▄ ▄ ██ ▄▄█▀ ▀▀▀▀▀▄ ▀▀  [0m
[47m[30m ██▀▀██▄  ▄ ▀▀▀▀ █ ▄▄█▀  ▄  ▄   █▀▀▄▀█▄▀█▄▀█▀▄    ██▀ █▀ █▄ █  [0m
[47m[30m   ▄ ▀ ▄▀▄▄▄ ██▄▀  ▀  ▄▄▀▄█▄ ▀█ ▀  ▀█▄█▄█ ▀ ███▀███▀▀▀▀▄▀▄ ▀▄  [0m
[47m[30m ▀▄██  ▄█▄██▀█▀██▄ █ ▀▄█▀▀ █▀▄█▄█ ▀▄▀  ▀▀████▀  ▄ ▄█▀▄███ ▀█ ▀ [0m
[47m[30m ▀▀▀▄█▀▄▀█▀▄█  ▀ ▀▀█ ██ ██ ▄█▀ █▀█▄ ▄▄█▄▄▀▀█ █▀█▄█ ██▄▀▄▀███▀▀ [0m
[47m[30m  █▄█▄█▄▄▄▄▀▀▄▀▄█▀▄▄▀ ▀  ▀▄▀▄▄ ▄██▄▄█▀██ ████▄█▄  ▄▀▄ ▀▀ █▀█▀▀ [0m
[47m[30m  ▄█▀▄█▄▄█▀ █▄█▄ ▀▀▀███▀█ ▀█ █▄▄▄█ ▀███ █  ▄▀█ █ █▄▄▄█▄███▀█▀▄ [0m
[47m[30m  ▄▄▄█ ▄ █ ▀ ▄ ▄▄ ▄▀█ █▄█▀▀█ █ ▄ █  ▄ ▄██▄ █ ▄█ ▀▀▀█▀█ ▄ █▄▄▀▀ [0m
[47m[30m ██▄ █▄▄▄█▄▄▀█  █ ▄ ▄▄█▀█▄█▄ █▄▄▄█▀ ███    ▄ ▄█▀███▀██▄▄▄█ █▄▄ [0m
[47m[30m █▀▀ ██▄██ █▀   █▀█▀█ █▄▀▀ ▄██▄▀  ▄ ▄▀ ▀█▄▀▀▀ █ █ ▄█▄▄▀  ▀▀▄█  [0m
[47m[30m ▄█▀▄▄▄▄▀█ █▄▀ ▀▄▀▄▄█ ▀█▀█ ▄██▄▄▀ ▀ █▄█ █ ▀ ▀█▀███▄█ ▄█ ▄▀ ▀▀▄ [0m
[47m[30m  ▄▀ ▀ ▄▄  ▄▀█▄ ▄█▄  ▀▄▄█▀▄███▄█ ▀█▄▄█ ▀▄█ ██▀▀ ▀▄ ▀  ▀ ▄▀▄▄ ▄ [0m
[47m[30m ▄████ ▄ ▄▀█▄▀▀█▄▄ ▄▄▄▄▀▀▄ ▀█▄█▄▀▄▀▄ █ ▄█▀█▀██▀███ █▀ ▀▀   █▀▄ [0m
[47m[30m  ▄▄▄▀▀▄▀█ ▀▄▀█   ▀ █▄▄▄█▄█▀▄█ ▄▀▄█▄▄ ███▀▀█▀ ▀ ▄▀▄█▀ ▀ ▀█▄█ ▀ [0m
[47m[30m ▄█▄██▄▄▀▄▀█▄▀█ █ █▄█▀▀ ▄█▀▄   ▄▀  ▄ █▄ ▄ ▄  █████▀  ▄▄▄ ▀▄█▄▄ [0m
[47m[30m ▀▀█ ▀ ▄▀▀▄▀▄ ▀▄█ █▀▀▀▄ ▀▀▄█ █▄ ▄▄██▄▀ █▄ █▀█▀▀▄ ▀▄█▀▄▀ █▀███  [0m
[47m[30m █ ██▄▀▄▀▀▀▄▀▄▀█▄ ▄██▀▀▄█▄▀▄▄  ▄ ▄▀▀ ██▄▄▀   █ ███▀▀  ▄▄▄▄ █ █ [0m
[47m[30m   ▄▄█▄▄█▀▄▀▄▄  ▀██▀▄▄█▀█▀██▄█▀█▄ █ ▀ ▄█  ██▀▀█▄▀▀██▀▄  ▄▀▀  ▀ [0m
[47m[30m ███▄▀ ▄▄ ▀▀  █▀▄▄▄▄█ ▀ ▄▀█▄█▄██▄▄▄▄ █▀▀█ ▀▄ ▄▄▄ █ ▄▀▄█▄▄███ ▀ [0m
[47m[30m ▄▄▄▄▄▄▄ █▄▄█▄█  █▀▀▀ ▄▄█▀▀ ██ ▄ █▄ ▄█ ▀ ███▄ ▀▄▄█ ▀▄█ ▄ █▀ ▀  [0m
[47m[30m █ ▄▄▄ █ ▄██ █▀█▄  █ ▀▀▄▄▀█▄ █▄▄▄█▀▄█▄ ▀  ▄ ██▄▀██   █▄▄▄█▄▀██ [0m
[47m[30m █ ███ █  █▀  ▄ ██▀█▀ ▄█▀▀  ██▀▀ ▀▀ █▀██▀▀ █▀▀█▄█ ▄▀███▀█▀▀▀▄▀ [0m
[47m[30m █▄▄▄▄▄█ ▄▄█▀▀█▄   ▄▄  ▀▄▄█▄█  ▄████ █▀▄▀ ▄ ▀▄▀▄▄█▄▀ █▄▄ █▄▀█▄ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:02:00: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:02:09: 💾 Data synced to files successfully
2025-09-19T22:02:20: 🔌 Connection closed. Reason: undefined
2025-09-19T22:02:20: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T22:02:21: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:02:21: 🧹 Removed stale process lock
2025-09-19T22:02:21: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:02:21: ⏰ Starting 240 second startup grace period...
2025-09-19T22:02:21: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299541734
}
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299541734
}
2025-09-19T22:02:21: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:02:21: ⏰ Startup grace period: 240 seconds
2025-09-19T22:02:21: 📋 Message rules loaded: 8 types
2025-09-19T22:02:21: ℹ️ [10:02:21 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 162781,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:02:21: ✅ Safety Manager initialized
2025-09-19T22:02:21: 📁 Loaded 0 sent messages from file
2025-09-19T22:02:21: 📁 Loaded 0 customer histories from file
2025-09-19T22:02:21: 📁 Loaded 0 message hashes from file
2025-09-19T22:02:21: 📁 Loaded statistics from file
2025-09-19T22:02:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:02:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:02:21: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:02:21: 🔄 Starting WhatsApp connection...
2025-09-19T22:02:21: 🔄 Initializing WhatsApp client...
2025-09-19T22:02:21: ✅ WhatsApp connection started
2025-09-19T22:02:21: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:02:21: 🔄 Connecting to WhatsApp...
2025-09-19T22:02:23: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:02:23: [47m[30m ▄▄▄▄▄▄▄ ▄▄▄▄▄▄▄ ▄  ▄▄▄▄ ▄▄▄  ▄▄ ▄  ▄   ▄▄▄▄ ▄▄▄ ▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █▄▀█▄ █▀  ▄▄▄▄█▀██▄ ▀▀▄▀▀ █▀ ▀█▄█  ▄  ▀▀▄▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄███  ▀▄█▄█▀ █▀ █▀█ ██▄▄██▄ ▄▄▄▄██▄ ▄  ▄▄▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▄▀▄ █ ▄ ▄ █▀█▀▄▀█ █ ▄ █ ▄▀▄ ▄▀▄▀█ █ █ ▄ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄▄ █ █▀▄█▀▀ ▀▄▀  ▀ █▄▄▄█▄ ▄▄▀  ▄ ▄▀▄█▄ ▀▀ ██▄  ▄ ▄▄▄ [0m
[47m[30m █▀▀▄█ ▄  ▄█▄▀▀  ███   ▄▀▄ ▀██▀▀ ▄ █▀▀▀█▄█▀▀█▀▀██▀█▀▄▄▄▄▄▄▄ ▄  [0m
[47m[30m ▄▀▄█▄█▄████ █ ▀ ▀▄   ▄▀█▀▄▀▀██▀▄    ██▀▀█▄  ▄▄▄▀█▄ █▄█▄ ▄▄▀ ▄ [0m
[47m[30m  █▀██▄▄▄▀ █▀ ▄▄   ▀█ ██▄█▀▄██▀▄██▄ ▄▄█▀▀▄▀▄▄ ▄██▄█   ▀▄▄█▄█▀▀ [0m
[47m[30m  ▀▀▄█ ▄▄  ▀▄ █▀ █ ▄▀▀█▄ █ ▀▄▄█ ▀▀ ▄ ▄▄ ▄▀ ▄▄█  ▄ ▀▄█ ▄  ▀█▀ ▀ [0m
[47m[30m ███▀▄ ▄█▄ ▀  █▀ █▄▀██▀█▄█▄▄▀▄ ▀ ▀▄█ ▀█▄ ▄▄▀█▀██ ▀▄█ ▄▄▄█ ▄▀▄▄ [0m
[47m[30m ▄█▀▀▀ ▄█ █▄▄▄█▄█▀▀█ ▄▀▄█▀▄▀▀▄  ▀█▀█      ▀ ▀ ▄▀▄▀  ▀▄▀▀█▀█▄█  [0m
[47m[30m  ▀▀▀ ▀▄█ ▄▄ ▄███▄ ▄ █▀▀▀██▀ ▀█ █▄▄▀   █ █▄▀▄▀▄ ▄▀▀ ▀▀▄██ ▀█ ▄ [0m
[47m[30m  ▀▀▄▄▀▄ ██   █ ▀█ ▀▄▀ ▄▀▄▀▄ █▄▄ █▄██  █ █▀▄▄▀█▄█▄ █▄▄█▀▄▄█▀█▀ [0m
[47m[30m  █ █▄▀▄ ▄▀▀▀▀██  ▄▄███ ▄██▄▄ ▄█▀█▄▄ ▀▄██▀ █▀ ▄▀ ▀▄▄  ▀█▄█▀▄ ▄ [0m
[47m[30m █ ▀ ▄█▄▄▄█  ▀██ ▄▄▀▀  █▄█▀▀ ███▄▄██  ██ █▄▀ ▄   ▄▀██▄▄▄██▄    [0m
[47m[30m  ████ ▄ █ █ █▄ █ ▀ █▄▄▀▀█ ▄██ ▄ ██▀█▀█ ▄ ▄█▀ ▀█ ▀█  █ ▄ █▀▄▀  [0m
[47m[30m   ▀▀█▄▄▄███▄ ▀▀▀█▄▀▀  █ ▄▄▄██▄▄▄█▀█▄▄▀ ███▄▄ ▄▀█▄█▀▀█▄▄▄█▄ █▀ [0m
[47m[30m █   █ ▄▄  █▀▄▀▀▀▄█▄ █▄▀▄   █ ▀ ▀▄█ ▄ ▀█▄▄▄▀ ▀▄▄█ ▄█ ▀▀▀ ▀█ ▄█ [0m
[47m[30m  ▄▄█▄▀▄▄▄ ▀▄▄▄ █  ▄ ▀█ ▄▄█ ▀▄ ▀ ▄ ▄██ █ ▀█▄▄█▄ █  █ ▄█ █ ▄▄██ [0m
[47m[30m ▄  ▄▀▀▄▄ ▄█ ▀ █▀   █ ▀█ ▀▀▄█▄▄█▄ █▀▄▄█▄ █▀▄▄██ ▀▀█▄▀  █ █▄▄ ▄ [0m
[47m[30m ▄▀ ▄█ ▄▀█▄▀▀▀ █▀ █▄▀▀ ▄▄▄▄ ▀▀ ▄▄▄▄ ▄██▄ ▀▀▄▄  ▄▄ ██ █   ▄ █▄█ [0m
[47m[30m ▀█▀█▄▄▄ ▄█ ▄▀▄▄▄██ ▀██▄▄ ▄ █▄▀▄▄▀▄▄ ▀█▀▀▀█▀▄ ██▄▀█   ▄▄▄█▀██▄ [0m
[47m[30m ▄▀ ███▄▀▄▄█▀█▀▄▄▀ ▄▄█ █▀▄ ▀██▀▀  █▀ ▀█ ▄█▀▀█▄██ █▀ ▄█  █  ▀▀▀ [0m
[47m[30m ██▄   ▄██  ▀██ ▀█▄▀▄▀▀ ▄ ▄▄  ▄█▀▀█  ▄  ▀▄▄▄▀▀█ ▀▀ ▄   ▀  █▄ █ [0m
[47m[30m ▄▄██▄▄▄ █▄█▀█▀▀ ▄▀▀▀ ▀██ ▄█▀▄▄█▀  ▀█▄▄▀ █▀█▄ ▄▄▀▀██ ▄███▀█▀▄▀ [0m
[47m[30m   ████▄▄█▀█▀██ ▄▀█ █ ▀  ▀▀ ▄ ██▀▀  ▄▄ ▀▄▀▄▀▀▄▄ █▀▄████▄▄▀█ ▄▄ [0m
[47m[30m ███▄▀ ▄▀▄█▄▀████▄    █ ▄ ▀▀█▄▄▄▄███▀█▀   ▄▄█▄█ ▄▄██ ▄▄██▄▄██▀ [0m
[47m[30m ▄▄▄▄▄▄▄ ██ ▄▀█ █▀ ▄█  ▀▀▀  ▄█ ▄ ██▄▄▄▄█ █▄█▀▀█▄█▄████ ▄ █▀ █▄ [0m
[47m[30m █ ▄▄▄ █ █▄▄▄█ ▄▀█▄█▄▄▀▄  █▄██▄▄▄█ █▄▄█▄▄▀▀▄█▀█  ▄█  █▄▄▄██▄ █ [0m
[47m[30m █ ███ █ ▀▀▄▄ ▄ ▀ ███ ▄▄ █ █▄▄ ▀▀█▄▀▀█▀  ▄█ ▀▀▄▄▀ ▀▄  ▀▀▄█▄▀▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄▄█▀ ▀ ▄█▄  █▄█▀▄█▄ ██▄ ▀▄▄███▀ ▀▄ ▄▄▀▀▀▀█▀█▀▀▀▄█▄▀▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:02:23: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:02:39: 💾 Data synced to files successfully
2025-09-19T22:03:09: 💾 Data synced to files successfully
2025-09-19T22:03:23: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:03:23: [47m[30m ▄▄▄▄▄▄▄  ▄  ▄   ▄  ▄▄ ▄▄▄   ▄▄▄▄   ▄▄▄ ▄▄▄▄▄▄      ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄ ██▀▄▀ ▀ ▄▄▄▀▀▄▀▄▀█▄█▄ ▄█▀█   ▄    ▀█▀▀ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▄ ▄ ▀█  █ █▄ █ ▄▄▄▄█▄█▄▄▄▀██▄ ▄▄▄▄█   ████▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █▀▄ █ ▄ ▄▀█ █ ▄ █▀▄▀█ ▄ █ █▀█▀█▀█▀█▀▄ █ █ █ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▄█ ▄██   ▄ ▄ ▀ ▄█▀▄█▄▄▄█▀▄█▄▀█ ▀█ ▄▀▄▄▄█ ▄▀█ ▄▄▄▄▄   [0m
[47m[30m ▀ ▄▀█▀▄▀▄▀█▄█ ▄ ▄   ▀█▀█▀▀███▄▀▄ ▄ █ █  ▄▀▀ █▀▄▄▄█ ▄▄███ ▀ ▀▄ [0m
[47m[30m ▀▄▄▄  ▄ ▄▄█ █▀▀█▄█▄▄▀ █▀▄█▀ ▄▄▀ ▄ ▄▀▄█ ▀ ██ ▀▄▄██▀▄ █ ▄▄ ▄  █ [0m
[47m[30m ▀ ▀▀▀█▄▄█▄▀▀▀█▀▀█▀█▄▀▄ ▀▀▀ ▀▄▀▄▄    ▀▄▄▄▀██▀▀▄▄  ▀▄▄▄▀█▀▀▀▄▄▄ [0m
[47m[30m  ▀█▀▄█▄▄ █ ▄▀▀▄█ ▄▄ ▄▄▀▄█▄▀█▄▀▀▄▄ ▀▄▄  ▄▀▀██ ▄ ▄▄ ▀▄▄ ▄▄ ▄ ▀▀ [0m
[47m[30m ██▀  ▀▄▀▀█▄██▀█▀▀█ ▄█▀▀   ▀▀▄▄██    ██ ▀▀▀█▀▄▄ █▀▀▄  ██▄ █▄▀▄ [0m
[47m[30m █▀▀█▀▀▄▀█▀▀█ █ █▀ ▄▄▀  █▀▀ ▀ ▄▀ ▀ ▄█▄▀▄▀▀▄▄▄▀▀▀▄█▀ ▄▄▀▄█▀▄ █▀ [0m
[47m[30m   █▄█ ▄█▀█▀ ▄▀▄ ▄ ██▀█ ▄▄▀▄▀▀▀ ▀▀▄▄ ▀▀▄███▀█▀  █▀▀▄  ▄▀▄  █▄█ [0m
[47m[30m ▄▀▀█  ▄▀ █▀ ▄  ▄ ██▀▄▄▀█▄█ ▀ ▀▄█  ▀▄█ ▄   ▄▀▀█▄▄█ █▀▄▄█▄ ▀▄▀▀ [0m
[47m[30m █▀▀ ▄ ▄ ▀▄ ▄▀▀▄    ▄▀▀▀▄█▄ ▀ ▀▀▄▄█ ▄█▀ ▄▄▀██▄▄▄ ▀▀ ▄▄██▀▀ ▀█▄ [0m
[47m[30m  █ ▄█▄▄█▄█▀█▀█▄█▄  ▄▀▄▀ ██ ▄▄██▄█▀  ▄▀ ▀  ▄█ █▀█▄▄ ▄▄█████▄   [0m
[47m[30m ▄ █▄█ ▄ ████▀█▄ ▀▄ █▄██▀██ ██ ▄ █▄▄▀▀▄▄ ▀█▀▀█▄ ██▀▄▀█ ▄ █▀ ▀▄ [0m
[47m[30m  █  █▄▄▄█ ▀ ▄▀▀█ ███▀▄ █▀▀  █▄▄▄█  ▄█▄▄ ▀ ▄▄ ▀ ██▀▄██▄▄▄█▄▄ ▄ [0m
[47m[30m  ▀  ▄▀▄▄▄▄▀██▄ █▄  ▀█▀▄███▀▄▀▄▄▀██▄ ▀▀▄ ▀▄▀▀▀▄ ▄▄▀▄ █▄█  █▄▄█ [0m
[47m[30m  ▀▄ ▀ ▄█▀ █▄█▀███ ▄█▀▀▀ ▀▄ ▄▄███▄█▀▀▄ █▄▀▄ ▄ ██▄█▀ ███▄ █▄▄ ▀ [0m
[47m[30m  ▀▄ ▄▀▄▀▀█▀ ██████████ ▀▀▄▄▄███▀ ▄ ▀ ▀   ▀█ ▄  ▀▀▀   ▄▄▀▄█ ▄  [0m
[47m[30m  ▀█▄▀ ▄ ▄▄▄ ▄██████▄█▄▀▀█▄█▀ ▀▄▀ █▀▄▄ ▀▀▀▄█▄ ▄ ▄███▄▀▄█ ▀   █ [0m
[47m[30m ▄  █▄▄▄▀   ▄  █▄▄▄▄▄▀▀ ▀   ███ ▄█▄  █▀▄▀▀▀▀ ▄  ▄▄ ▄▀▄▄▄▀▄ ▄▄█ [0m
[47m[30m  ████▄▄▀▀▄█ █ ▀▀▄▀▀▄▄  █▄█▀▄▀▀█ ▄▄█▀▄▄█ ▀ ▄▄   ▄▄████▀▄▄█▄▄ ▀ [0m
[47m[30m █   ▀▀▄█▄  ▄▄█▄ ██▄ ▄█▀▀█  ▀▀ ▄ ▄▄▀█▄▀  ▀▄▀█ ▄▄▄▄▀  █▄██ ▄▀▄█ [0m
[47m[30m  ██▀ ▄▄▄  █▀▀ ▀ ██▄ █▀▀███▀ █▀█▀▄▀▄▄▄ ▀  ▀█▄▀██▄▄▀ ▄  █ ▄ ▄▄█ [0m
[47m[30m ▀ ██▄█▄█ █▄█▀ ▄  ▄▀▀██ ▀█▄█▄ ▀█▄  ▄▀▄▀▄▄ ▀▀ ▄▄▄█ ▀ ▄▀█▄█▄▀▀▄▄ [0m
[47m[30m ███▄▀ ▄ ▀██ █▀▀▄  ▀▄█ █▀▄▀ ▀███▄▄▀███▀█ ▀ ▀▀▀▀ ▀▄ ▄██▄▄▄▄▀▄▀█ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀█▄▄ ██▀ ▄  ▄▀▄██▄█▄█ ▄ █▄▄  ▀ ▀ ▄▀ ▄▄▄▀█▀ ▄█ ▄ █▄ ▄▄ [0m
[47m[30m █ ▄▄▄ █ █▄█▄▀ ▀█▄▀▄▀█▄▄█▀█ ▄█▄▄▄█ █ ▄█▀ ▀▀▀▄ ▀▄█▄█▀▀█▄▄▄█ ▄ ▀ [0m
[47m[30m █ ███ █ ███▄▀▄ █▄█▀▀ ▄▄ ▀▀▀▄▀█▀▀ ▄ ███ ▀ ▀▀▄▀▀▄▄▀▀ ▀ ▄▄█ ▀▀ █ [0m
[47m[30m █▄▄▄▄▄█ ▄█ ▄▀ ▄▀▀██ ▀▀ ██▀   ▄▀▄ ▄ █▄██ ▀▄▄▀▀███▄▄█▄ █▀█▄ ▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:03:23: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:03:35: {"level":50,"time":1758299615592,"pid":7712,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{"code":"515"}},"msg":"stream errored out"}
2025-09-19T22:03:35: 🔌 Connection closed. Reason: undefined
2025-09-19T22:03:35: 🔄 Reconnecting in 2s... (Attempt 2/10)
2025-09-19T22:03:37: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:03:37: 🧹 Removed stale process lock
2025-09-19T22:03:37: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:03:37: ⏰ Starting 240 second startup grace period...
2025-09-19T22:03:37: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299617648
}
2025-09-19T22:03:37: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:03:37: ⏰ Startup grace period: 240 seconds
2025-09-19T22:03:37: 📋 Message rules loaded: 8 types
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299617647
}
2025-09-19T22:03:37: ℹ️ [10:03:37 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 238691,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:03:37: ✅ Safety Manager initialized
2025-09-19T22:03:37: 📁 Loaded 0 sent messages from file
2025-09-19T22:03:37: 📁 Loaded 0 customer histories from file
2025-09-19T22:03:37: 📁 Loaded 0 message hashes from file
2025-09-19T22:03:37: 📁 Loaded statistics from file
2025-09-19T22:03:37: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:03:37: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:03:37: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:03:37: 🔄 Starting WhatsApp connection...
2025-09-19T22:03:37: 🔄 Initializing WhatsApp client...
2025-09-19T22:03:37: ✅ WhatsApp connection started
2025-09-19T22:03:37: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:03:37: 🔄 Connecting to WhatsApp...
2025-09-19T22:03:39: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:03:39: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:03:39: ℹ️ [10:03:39 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 7712 },
  timestamp: 1758299619105
}
2025-09-19T22:03:39: ℹ️ [10:03:39 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 7712 },
  timestamp: 1758299619112
}
2025-09-19T22:03:39: 💾 Data synced to files successfully
2025-09-19T22:03:39: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:03:39: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:03:40: {"level":40,"time":1758299620016,"pid":7712,"hostname":"SAURABH","msg":"no name present, ignoring presence update request..."}
2025-09-19T22:03:40: ✅ WhatsApp connected successfully!
2025-09-19T22:03:40: 📱 Session established successfully
2025-09-19T22:03:40: 🔒 Session will be monitored for stability
2025-09-19T22:03:59: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:04:01: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:04:09: 💾 Data synced to files successfully
2025-09-19T22:04:39: 💾 Data synced to files successfully
2025-09-19T22:05:09: 💾 Data synced to files successfully
2025-09-19T22:05:16: {"level":50,"time":1758299716906,"pid":7712,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{"code":"401"},"content":[{"tag":"conflict","attrs":{"type":"device_removed"}}]},"msg":"stream errored out"}
2025-09-19T22:05:16: 🔌 Connection closed. Reason: undefined
2025-09-19T22:05:16: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T22:05:17: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:05:17: 🧹 Removed stale process lock
2025-09-19T22:05:17: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:05:17: ⏰ Starting 240 second startup grace period...
2025-09-19T22:05:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299717955
}
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299717955
}
2025-09-19T22:05:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:05:17: ⏰ Startup grace period: 240 seconds
2025-09-19T22:05:17: 📋 Message rules loaded: 8 types
2025-09-19T22:05:17: ℹ️ [10:05:17 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 339002,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:05:17: ✅ Safety Manager initialized
2025-09-19T22:05:17: 📁 Loaded 0 sent messages from file
2025-09-19T22:05:17: 📁 Loaded 0 customer histories from file
2025-09-19T22:05:17: 📁 Loaded 0 message hashes from file
2025-09-19T22:05:17: 📁 Loaded statistics from file
2025-09-19T22:05:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:05:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:17: 🔄 Starting WhatsApp connection...
2025-09-19T22:05:17: 🔄 Initializing WhatsApp client...
2025-09-19T22:05:17: ✅ WhatsApp connection started
2025-09-19T22:05:17: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:05:17: 📞 Attempting to request pairing code...
2025-09-19T22:05:17: 💡 To use phone authentication:
2025-09-19T22:05:17:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:05:17:    2. Select "Phone Number Authentication"
2025-09-19T22:05:17:    3. Enter your phone number
2025-09-19T22:05:17:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:05:17: 🔄 Connecting to WhatsApp...
2025-09-19T22:05:21: 🔌 Connection closed. Reason: undefined
2025-09-19T22:05:21: 🔄 Reconnecting in 2s... (Attempt 2/10)
2025-09-19T22:05:23: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:05:23: 🧹 Removed stale process lock
2025-09-19T22:05:23: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:05:23: ⏰ Starting 240 second startup grace period...
2025-09-19T22:05:23: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299723850
}
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299723851
}
2025-09-19T22:05:23: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:05:23: ⏰ Startup grace period: 240 seconds
2025-09-19T22:05:23: 📋 Message rules loaded: 8 types
2025-09-19T22:05:23: ℹ️ [10:05:23 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 344895,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:05:23: ✅ Safety Manager initialized
2025-09-19T22:05:23: 📁 Loaded 0 sent messages from file
2025-09-19T22:05:23: 📁 Loaded 0 customer histories from file
2025-09-19T22:05:23: 📁 Loaded 0 message hashes from file
2025-09-19T22:05:23: 📁 Loaded statistics from file
2025-09-19T22:05:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:23: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:05:23: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:23: 🔄 Starting WhatsApp connection...
2025-09-19T22:05:23: 🔄 Initializing WhatsApp client...
2025-09-19T22:05:23: ✅ WhatsApp connection started
2025-09-19T22:05:23: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:05:23: 📞 Attempting to request pairing code...
2025-09-19T22:05:23: 💡 To use phone authentication:
2025-09-19T22:05:23:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:05:23:    2. Select "Phone Number Authentication"
2025-09-19T22:05:23:    3. Enter your phone number
2025-09-19T22:05:23:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:05:23: 🔄 Connecting to WhatsApp...
2025-09-19T22:05:30: 🔌 Connection closed. Reason: undefined
2025-09-19T22:05:30: 🔄 Reconnecting in 4s... (Attempt 3/10)
2025-09-19T22:05:34: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:05:34: 🧹 Removed stale process lock
2025-09-19T22:05:34: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:05:34: ⏰ Starting 240 second startup grace period...
2025-09-19T22:05:34: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299734096
}
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299734096
}
2025-09-19T22:05:34: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:05:34: ⏰ Startup grace period: 240 seconds
2025-09-19T22:05:34: 📋 Message rules loaded: 8 types
2025-09-19T22:05:34: ℹ️ [10:05:34 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 355142,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:05:34: ✅ Safety Manager initialized
2025-09-19T22:05:34: 📁 Loaded 0 sent messages from file
2025-09-19T22:05:34: 📁 Loaded 0 customer histories from file
2025-09-19T22:05:34: 📁 Loaded 0 message hashes from file
2025-09-19T22:05:34: 📁 Loaded statistics from file
2025-09-19T22:05:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:34: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:05:34: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:34: 🔄 Starting WhatsApp connection...
2025-09-19T22:05:34: 🔄 Initializing WhatsApp client...
2025-09-19T22:05:34: ✅ WhatsApp connection started
2025-09-19T22:05:34: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:05:34: 📞 Attempting to request pairing code...
2025-09-19T22:05:34: 💡 To use phone authentication:
2025-09-19T22:05:34:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:05:34:    2. Select "Phone Number Authentication"
2025-09-19T22:05:34:    3. Enter your phone number
2025-09-19T22:05:34:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:05:34: 🔄 Connecting to WhatsApp...
2025-09-19T22:05:38: 🔌 Connection closed. Reason: undefined
2025-09-19T22:05:38: 🔄 Reconnecting in 8s... (Attempt 4/10)
2025-09-19T22:05:39: 💾 Data synced to files successfully
2025-09-19T22:05:46: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:05:46: 🧹 Removed stale process lock
2025-09-19T22:05:46: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:05:46: ⏰ Starting 240 second startup grace period...
2025-09-19T22:05:46: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299746390
}
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299746391
}
2025-09-19T22:05:46: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:05:46: ⏰ Startup grace period: 240 seconds
2025-09-19T22:05:46: 📋 Message rules loaded: 8 types
2025-09-19T22:05:46: ℹ️ [10:05:46 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 367438,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:05:46: ✅ Safety Manager initialized
2025-09-19T22:05:46: 📁 Loaded 0 sent messages from file
2025-09-19T22:05:46: 📁 Loaded 0 customer histories from file
2025-09-19T22:05:46: 📁 Loaded 0 message hashes from file
2025-09-19T22:05:46: 📁 Loaded statistics from file
2025-09-19T22:05:46: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:46: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:05:46: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:05:46: 🔄 Starting WhatsApp connection...
2025-09-19T22:05:46: 🔄 Initializing WhatsApp client...
2025-09-19T22:05:46: ✅ WhatsApp connection started
2025-09-19T22:05:46: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:05:46: 📞 Attempting to request pairing code...
2025-09-19T22:05:46: 💡 To use phone authentication:
2025-09-19T22:05:46:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:05:46:    2. Select "Phone Number Authentication"
2025-09-19T22:05:46:    3. Enter your phone number
2025-09-19T22:05:46:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:05:46: 🔄 Connecting to WhatsApp...
2025-09-19T22:05:49: 🔌 Connection closed. Reason: undefined
2025-09-19T22:05:49: 🔄 Reconnecting in 16s... (Attempt 5/10)
2025-09-19T22:06:05: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299378960,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7712,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:06:05: 🧹 Removed stale process lock
2025-09-19T22:06:05: 🔒 Process lock acquired (PID: 7712)
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7712
}
2025-09-19T22:06:05: ⏰ Starting 240 second startup grace period...
2025-09-19T22:06:05: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, willExpireAt: 1758299618960 },
  timestamp: 1758299765947
}
2025-09-19T22:06:05: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:06:05: ⏰ Startup grace period: 240 seconds
2025-09-19T22:06:05: 📋 Message rules loaded: 8 types
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299378960, processId: 7712 },
  timestamp: 1758299765947
}
2025-09-19T22:06:05: ℹ️ [10:06:05 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 386989,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:06:05: ✅ Safety Manager initialized
2025-09-19T22:06:05: 📁 Loaded 0 sent messages from file
2025-09-19T22:06:05: 📁 Loaded 0 customer histories from file
2025-09-19T22:06:05: 📁 Loaded 0 message hashes from file
2025-09-19T22:06:05: 📁 Loaded statistics from file
2025-09-19T22:06:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:06:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:06:05: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:06:05: 🔄 Starting WhatsApp connection...
2025-09-19T22:06:05: 🔄 Initializing WhatsApp client...
2025-09-19T22:06:05: ✅ WhatsApp connection started
2025-09-19T22:06:05: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:06:05: 📞 Attempting to request pairing code...
2025-09-19T22:06:05: 💡 To use phone authentication:
2025-09-19T22:06:05:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:06:05:    2. Select "Phone Number Authentication"
2025-09-19T22:06:05:    3. Enter your phone number
2025-09-19T22:06:05:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:06:05: 🔄 Connecting to WhatsApp...
2025-09-19T22:06:09: 💾 Data synced to files successfully
2025-09-19T22:06:09: 🔌 Connection closed. Reason: undefined
2025-09-19T22:06:09: 🔄 Reconnecting in 30s... (Attempt 6/10)
2025-09-19T22:06:21: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:06:21: ℹ️ [10:06:21 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 7712 },
  timestamp: 1758299781745
}
2025-09-19T22:06:21: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:08:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:08:10: 📝 Loaded 12 template types
2025-09-19T22:08:10: 📝 Enhanced Logger initialized
2025-09-19T22:08:10: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:08:10:    Auth Mode: both
2025-09-19T22:08:10:    QR Enabled: true
2025-09-19T22:08:10:    Phone Enabled: true
2025-09-19T22:08:10:    Session Persistence: true
2025-09-19T22:08:10:    Max Reconnect Attempts: 10
2025-09-19T22:08:10:    Default Phone: None
2025-09-19T22:08:10: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:08:10: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:08:10: 🔧 Developer Configuration initialized
2025-09-19T22:08:10: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299890279,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10896,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:08:10: 🔧 Developer Configuration initialized
2025-09-19T22:08:10: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:08:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:08:10: ⏰ 4-minute startup delay active
2025-09-19T22:08:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:08:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:08:10: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299890279,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10896,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:08:10: 📝 Enhanced Logger initialized
2025-09-19T22:08:10: 📁 Loaded 0 sent messages from file
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:08:10: 📁 Loaded 0 customer histories from file
2025-09-19T22:08:10: 📁 Loaded 0 message hashes from file
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:08:10: 📁 Loaded statistics from file
2025-09-19T22:08:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:08:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:08:10: 🧹 Removed stale process lock
2025-09-19T22:08:10: 🔒 Process lock acquired (PID: 10896)
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10896
}
2025-09-19T22:08:10: ⏰ Starting 240 second startup grace period...
2025-09-19T22:08:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:08:10: 🔒 Process lock acquired (PID: 10896)
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299890279, processId: 10896 },
  timestamp: 1758299890382
}
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299890279, willExpireAt: 1758300130279 },
  timestamp: 1758299890383
}
2025-09-19T22:08:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:08:10: ⏰ Startup grace period: 240 seconds
2025-09-19T22:08:10: 📋 Message rules loaded: 8 types
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10896
}
2025-09-19T22:08:10: ⏰ Starting 240 second startup grace period...
2025-09-19T22:08:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 111,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:08:10: ✅ Safety Manager initialized
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299890279, processId: 10896 },
  timestamp: 1758299890393
}
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299890279, willExpireAt: 1758300130279 },
  timestamp: 1758299890393
}
2025-09-19T22:08:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:08:10: ⏰ Startup grace period: 240 seconds
2025-09-19T22:08:10: 📋 Message rules loaded: 8 types
2025-09-19T22:08:10: 📁 Loaded 0 sent messages from file
2025-09-19T22:08:10: ℹ️ [10:08:10 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 121,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:08:10: 📁 Loaded 0 customer histories from file
2025-09-19T22:08:10: 📁 Loaded 0 message hashes from file
2025-09-19T22:08:10: 📁 Loaded statistics from file
2025-09-19T22:08:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:08:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:08:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:08:10: 🔄 Starting WhatsApp connection...
2025-09-19T22:08:10: 🔄 Initializing WhatsApp client...
2025-09-19T22:08:10: ✅ WhatsApp connection started
2025-09-19T22:08:10: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:08:10: 📞 Attempting to request pairing code...
2025-09-19T22:08:10: 💡 To use phone authentication:
2025-09-19T22:08:10:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:08:10:    2. Select "Phone Number Authentication"
2025-09-19T22:08:10:    3. Enter your phone number
2025-09-19T22:08:10:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:08:10: 🔄 Connecting to WhatsApp...
2025-09-19T22:08:12: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:08:12: [47m[30m ▄▄▄▄▄▄▄  ▄▄ ▄▄    ▄ ▄ ▄ ▄   ▄  ▄    ▄▄ ▄▄▄▄    ▄ ▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄▄▀▄ ▄ ▄██▀▄▄▀ ▄▄█▄▀█▄█▄ █▀▄▀▄▄   █▀███ █▀▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █ █▀██▀█▄██ █ ▀█▀█ ▀▄▄▄▄▄▄▀▀█▀▀  ▄▄█ ▀▀▀█▀█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ ▄ ▄ ▄ █▀█▀▄ ▄ ▄ █▀█ ▄ █ █ ▄▀█ ▄▀▄▀█▀▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀██▀▄   ▀▀▄▀▀ █ ██ ▄█▄▄▄██▄▄█▀ ▀ ▀█▄ ▀ ▄▄█ █▀ ▄▄▄▄▄   [0m
[47m[30m ▀▀▄ ▀ ▄ █▄▄ ▄▀█ ▄ ▄ ▄▀ ▄▄ █▀  ▀▄ ▄▄ ▄▀  ██▀▀▄▄  ▀▀▄  █▀▀██▄▀▄ [0m
[47m[30m ▀ █ ▀ ▄█ █████▄ ▀  ▄█ ██▀   ▄▀█▄▀▀▄▀▄▄ ▄▀▄▀█▀▀█▄██▄ ▄▀█▄ ▄▄▀▀ [0m
[47m[30m █▀██▄█▄  ▀██▄▄ ▄█    ▀█▄▄██ ▄▀██▀▄ ▄█▀▄▀▀▀█▀▄  █▀█▄ ▄▀█▄ ▀▀▄▄ [0m
[47m[30m █▀██▄█▄ █▄█ ▄▄█ ▄  ▄█▀ █ █  ▄▀█▄ ▀ ▄▄▄ █▀▄ ▄▀█▄▄█ █  █▀▄▀▄▄█  [0m
[47m[30m ▀█▄▄▄▀▄▀ ██▀▄▀█▀█  ▄▀ ▀▄▄ ▀█▀█▄▀▀▄ ▀▀█▄▄▄▀▀▀▀▄ ▄██▄  ▀█ ██▄▀▄ [0m
[47m[30m   ▀ █▄▄ ▀  ▀█▀ ▄  ▄▄▄ █ ▄▀   ▄▀▀▄▀▄▀▄▄█▄▀▄▄▄▀█▀▀▄ ▀█▀▀██▀▄ █▀ [0m
[47m[30m ▄▄▄  ▀▄▀  ▄█▄▄██▄█▄ ▄ ▀█▀▀ ▀▀▀ █▀  █▄▀▄▀▀▀█▄█  ▀▀█▄ ▄▀▀▀█▄▀█▄ [0m
[47m[30m ▄▀█▀  ▄▀▀█▄▄▀███ █▄▀ ▀ █▄█ ▀ ▀▄▄▀ ▀▀▄▀ ▀▀▀▀▄ ▄▄██▄▄▄█▀▄█ ▄▄▀  [0m
[47m[30m █ ▀█▄ ▄▄█▄▄▀  █ █▀▀▀ ▄▄▄█▀▄█ ▀▄▄▄█ ██▀▄▀  ▀▄▄▄▄█ ▀▄█ ▀█ █ ▀▀▄ [0m
[47m[30m ██▀▄▄▄▄▄▄▀ ▄▀▄█ ▄█ █ ▄█ █▄  ▄██▄██▀▄▄▄ █▀ ▀█▀ ██▄█ ▀█▄█▄▄█▄█  [0m
[47m[30m ▄ ███ ▄ █▄▀ █ ▄▀▄ ▄  ▀ ▀█▀ ▀█ ▄ █ ▄ ▄█ █▀▀█▄▀▀▄▄ █ ▀█ ▄ ██▄██ [0m
[47m[30m ▀▀▀██▄▄▄██▄▀▀▄██▀█ ▀▄▄██▀  ▀█▄▄▄██▀█▄█▀  ▄ ▀▀██▄▄█ ▀█▄▄▄█▄▄ ▀ [0m
[47m[30m ▄ █▀██▄▄█▄▀█ ▀██▄ ███▀ ███▀▄▄▄▄▀▀▄ ▀█▀ ▀▀█▀▀▀ ▄▄ ▄▄ ▄▄▄▀▄▀▄ ▄ [0m
[47m[30m █ █▀█▀▄▀▀▄▄ ▀ ▄▄▄▀ ▄▀▄▄ ▀█ ▀ ▀▄█ █▀█▄█▄▀▀██▀▀▄█▄█▀▄█▀▀ ▄█▄▄▀  [0m
[47m[30m █▄▄ ▀ ▄▀▄ █▄ ▄▄█▀  ▀▄█▄▀█████▀ █▀▄ ▀▄▀▄▄ █▀▀▄▄▄█ ▀ █▀█▄█ █ ▄  [0m
[47m[30m ▀█ ▄ ▀▄█  ▄▄█▄ ▄ ▄▄ █▀█▀█▄█  ▄▄▀▄ ▄▀▄▄ ▀▀ ▄▄ ▀▀▄██ ▄█▀ ▀▄   █ [0m
[47m[30m  ▀▀  █▄ ▀▀ ▄▄▄▀▄▄ █  ██▀  ▄█▀█ ▄▀▄ ███ █ ██▀█  ▀ ▀   █▄█▄▀▄▄▄ [0m
[47m[30m ▀█▄  ▀▄▀▄▀▄▄     ▀▀ ▄ ▄█ ▄ █▀▀█▀ ▄█▀▄▄ ▀ ▄ ▄    ▄█▄▄▄▄  ▄  █▀ [0m
[47m[30m █▀ █▄▄▄▄▄▀▄▄▀▀▄█ ▀▄▀  ▀▄█▄ ▀▀ ▄▄█▄▀▀█▀ █▄██▄▄▀▄█▀█▄▄▀█▄▄ ▄▀▄▄ [0m
[47m[30m  ▄▄▄█▀▄▄▀   ▄▀ ▀▀▀ ▄  ▀█ ▄▀ █▀██▄█▀██▄ ▀   █  ▄▄▄▄ █▀▄ ▄▄▄    [0m
[47m[30m   ▄▄▄█▄▀  ▄▄▀ ▀▄█▀ ▄ ▄█▀███▄▀█▀█▀▄▄█▀▀▄█▀█▀ █▀▄▀▀▀ ▀▀▀▄▀▄▀▄▀▄ [0m
[47m[30m ███▄▀ ▄▀█▄▄▄▄▀  █▀█▄▄▄█▀▄▀ ▀█▄█▄▄▀ ███▀ ▀▀▀▄▀▀ ▄▄█ ▄▄█▄██▄▄▄  [0m
[47m[30m ▄▄▄▄▄▄▄ ▀▄▄▄▄▄ ▀ ▄█▄▀  ▀▀ ███ ▄ █   ▀▀   ▀▀▀ ▄  ▀▀▄▀█ ▄ █ █▄█ [0m
[47m[30m █ ▄▄▄ █ █ ▀██ ▄█▄▄▀█▀ █ ▀▄▀▄█▄▄▄█▀ ▄██ ▀▀▄██ █▄▄▄ ▀▄█▄▄▄█  █▀ [0m
[47m[30m █ ███ █ ███ ▄▀ █▀ ▄▄█▄▀▀▀ ▀ ▀██▀   █▄█▄▄▄▀▀▀▄▄▄  ▀ ▄▀███▀   █ [0m
[47m[30m █▄▄▄▄▄█ ▄▄▄█ ██▄▀▄ ▄ █ ██▀ ▀ █▀▄ ▄▄▀▄█▄▄▀▄▄▄  ▄ ▄▀▄█  ▀   ▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:08:12: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:08:40: 💾 Data synced to files successfully
2025-09-19T22:08:43: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:08:43: 📝 Loaded 12 template types
2025-09-19T22:08:43: 📝 Enhanced Logger initialized
2025-09-19T22:08:43: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:08:43:    Auth Mode: both
2025-09-19T22:08:43:    QR Enabled: true
2025-09-19T22:08:43:    Phone Enabled: true
2025-09-19T22:08:43:    Session Persistence: true
2025-09-19T22:08:43:    Max Reconnect Attempts: 10
2025-09-19T22:08:43:    Default Phone: None
2025-09-19T22:08:43: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:08:43: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:08:43: 🔧 Developer Configuration initialized
2025-09-19T22:08:43: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299923871,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17744,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:08:43: 🔧 Developer Configuration initialized
2025-09-19T22:08:43: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:08:43: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:08:43: ⏰ 4-minute startup delay active
2025-09-19T22:08:43: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:08:43: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:08:43: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299923871,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 17744,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:08:43: 📝 Enhanced Logger initialized
2025-09-19T22:08:43: 📁 Loaded 0 sent messages from file
2025-09-19T22:08:43: 📁 Loaded 0 customer histories from file
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:08:43: 📁 Loaded 0 message hashes from file
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:08:43: 📁 Loaded statistics from file
2025-09-19T22:08:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:08:43: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:08:43: 🧹 Removed stale process lock
2025-09-19T22:08:43: 🧹 Removed stale process lock
2025-09-19T22:08:43: 🔒 Process lock acquired (PID: 17744)
2025-09-19T22:08:43: 🔒 Process lock acquired (PID: 17744)
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17744
}
2025-09-19T22:08:43: ⏰ Starting 240 second startup grace period...
2025-09-19T22:08:43: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 17744
}
2025-09-19T22:08:43: ⏰ Starting 240 second startup grace period...
2025-09-19T22:08:43: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299923871, processId: 17744 },
  timestamp: 1758299923919
}
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299923871, willExpireAt: 1758300163871 },
  timestamp: 1758299923919
}
2025-09-19T22:08:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:08:43: ⏰ Startup grace period: 240 seconds
2025-09-19T22:08:43: 📋 Message rules loaded: 8 types
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299923871, processId: 17744 },
  timestamp: 1758299923921
}
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299923871, willExpireAt: 1758300163871 },
  timestamp: 1758299923921
}
2025-09-19T22:08:43: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:08:43: ⏰ Startup grace period: 240 seconds
2025-09-19T22:08:43: 📋 Message rules loaded: 8 types
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 51,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:08:43: ℹ️ [10:08:43 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 53,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:08:43: ✅ Safety Manager initialized
2025-09-19T22:08:43: 📁 Loaded 0 sent messages from file
2025-09-19T22:08:43: 📁 Loaded 0 customer histories from file
2025-09-19T22:08:43: 📁 Loaded 0 message hashes from file
2025-09-19T22:08:43: 📁 Loaded statistics from file
2025-09-19T22:08:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:08:43: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:08:43: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:08:43: 🔄 Starting WhatsApp connection...
2025-09-19T22:08:43: 🔄 Initializing WhatsApp client...
2025-09-19T22:08:44: ✅ WhatsApp connection started
2025-09-19T22:08:44: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:08:44: 📞 Attempting to request pairing code...
2025-09-19T22:08:44: 💡 To use phone authentication:
2025-09-19T22:08:44:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:08:44:    2. Select "Phone Number Authentication"
2025-09-19T22:08:44:    3. Enter your phone number
2025-09-19T22:08:44:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:08:44: 🔄 Connecting to WhatsApp...
2025-09-19T22:08:45: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:08:45: [47m[30m ▄▄▄▄▄▄▄ ▄   ▄▄ ▄▄▄      ▄ ▄▄▄▄ ▄▄▄  ▄   ▄▄▄ ▄   ▄▄ ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ▄▀  ▄▀▄▄▀██▄█▄ ▀██▄▄▀▄▄ █▀▄█▀█ █ █▄▄  ▄▄▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ ▄  █▄▄█ ▀▄ ▄ █▀██ █▀██▄█▄▄▀ ██▀▀ █▀▄▄▀▀ ▄▄█▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█ ▄▀█ █ █▀█ █▀█ █ █ ▄ █ █ █▀▄▀█ █ ▄ █ █▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄  ▄▄▄▄▄▄▄████▄ ▄ █▄█▀█ ▄▄███▄▄▄█▄▄ ▄  ▄▀▄█▀▀▄ ▀ ▀   ▄  ▄ ▄▄▄ [0m
[47m[30m   ▀▀ ▀▄  █▄█ ▀ █    █▄▀ ▄█▄▄█▀██ ▀▀█▀▄▀██ ▀▀▀█▀████▄ ▀▄▄█▀▀█  [0m
[47m[30m  ▄▄▀██▄▀▄▄▄▄▄▄▄█▄ ▀█▄ █    ▀█▀▀  ▀▄▀▄ ▄ ▄ █▀█ █▄▄ ▄██ █▀█▄█▀█ [0m
[47m[30m ▀▄ ██ ▄█ ▀▄ ▄▀  ▄▀█▄  ██▀  █▀█▄▄▄  ▄█   █  █▀   █   █▀▄█  █▄▄ [0m
[47m[30m █ ▄▀██▄  ▀██▀█▀ █▀ ▄██▀███▀▀ █▀█▀▀ ▀ ██▀▀▀▄▄█▀ █ ▀▄  ███▀█▄█▀ [0m
[47m[30m ███ ▀█▄  ▄▄ ▀▄ ▄█ █▄██▀██ ▀▀█▄█▀ ▀▄▀▀▀▄▀█▀ ▀▄▄▄▄▀ ▀█▄█ █▄▄▀▄▄ [0m
[47m[30m ▀▄▀▄█ ▄▀  ▄█ ▄▄█▀▀ █▄ ▀▀▄▀▄▄ ▄  ▀▄█▀   ██▄▄██ ▄▄▀▄ ▀▀██ ██▄█  [0m
[47m[30m ▄ ▀▀▄▀▄▄▀█  ▄█▀▀█ ▄▄▀ ▄▀█▄▀▄▀ █▀ ▀  ██▄▀▀█▄▀█▀ ██  ▄█▄▀▄▀ ▀▄  [0m
[47m[30m ██ ▄█▀▄▀ █▄▀█ ▄▄█▄▀▄▄█▀██▄██ ▀█ ▀█ ▄█ ██ ▀██▄▄█▄▄▀▄█▀█▄▀ ▄▀ ▀ [0m
[47m[30m ▀▀▀▀ █▄▄▀▄█▄▄▀▄▄▀▄▄  ██▀  ▀█▀▀▀▄▀██▀▀▄ ▀ ▀ ▄▀▀█▀█▄▄▀▄█▀ █▄▄█▀ [0m
[47m[30m ▄▄ █▄▄▄▄▄  ▀  ▀ ██▄█ ▄▀▀▄█▀█▄▄███▀ ▄▄ █ █▄▀▄█▀█  ▄██▄█▄█▄█▄█▀ [0m
[47m[30m ▄▄ ▀█ ▄ █▀▄▀█ ██ █▀  ▄▄▄▄▀▄ █ ▄ █ █ ▀█▄▀█▄█▀▄▀▀ ██ ▀█ ▄ █ ▄   [0m
[47m[30m  ▀▀▀█▄▄▄█  ▄█▀█▄█ ▄█ █▄▀▄██▀█▄▄▄█▀▄ ▄▀▀ ▄▄█ ▀▄▄█▄▀ ██▄▄▄█▀█▄█ [0m
[47m[30m ▀ ▀▀▀▀▄▄▄▄█▄ ▄▄▀ ▀▄▀ ▄▀ ▄▀▄▄█ ▄ ██ ▄█▄▄ ▀██▀▀█ ▄▀██▄▀█▀▄█  ▄  [0m
[47m[30m ▀▀▄ ▀█▄█▄▀██▀█▀ ▀ █▄▀█▄▀▀█ ▄▄▄█ █ █▄ █▄ ▄▄▄  ▀▄ █▀█ ▄▄▄█ ▀▄ ▀ [0m
[47m[30m ▀▀▀▄▀▀▄▄ █  ▄▄█▀ ▄█▄  ▀▄▄█ ▀▀   ▄▀▄▀▀  █ ▀▄ ▀▀▄██▀ ▄ ▄▀ ▀▄▄▀█ [0m
[47m[30m ▄▀█▀█▄▄▀▀ ▀█▄▄█▀ ▀▀ █▀█ █▀█ ▀▀▀ ▄  █▄ ▄██▀▄██▀  ▄█▄▄▄  █ ██▄█ [0m
[47m[30m  █▄█ █▄█ ▀▀▄  ▀ ▀█ ██▀█▀██▄▀ █▄▄█ ▄▄▀█▀▀█▄▄▀ ▄▀▄█▄█▄█▄▀ ▄ ▄ ▀ [0m
[47m[30m  █ █  ▄▄▄▀▀▄▄▄ ▄▀▄ ▀▄█▀ ██▀▀▀▀▀▀  ▄  ▀▀█ ██ █▀▄█▀▀▀▄█    ▀▄ ▀ [0m
[47m[30m   ██▄▄▄ ██▀▄ ▄▄▀▀█▄██ █▀▄▄▀▄█▀ ▀  ▀▀▀█▄█▀ ▄▄▀█▀▄█ ▄▄▄██▄▄▀▀ █ [0m
[47m[30m   ▀ ▀█▄▀▀▄ ▀▄▀▄   ▄▄█▄▀▄▄  ▄█▀ ▄█▀███ ▄  ▄  ▀▄▄▄█ █ ▄▄▄▀▄▀▄ ▀ [0m
[47m[30m ▀ ▄▄█▄▄ ███▄ ▄▄█ █ █ ▄▀███▀▀▄ █▄ ▄ ██ ██ █▀▄██ ▀█▄█▄▄█▄▀▀█▄ ▄ [0m
[47m[30m ███▄▀ ▄ ██  █▄█ █ █ █▀▄█▄▀█ █▄▄█▄  ▄▄▄▄   ██▄ ▀ ▄▀▄▄▄▄▄▄▄█ ██ [0m
[47m[30m ▄▄▄▄▄▄▄ █   █▀ ███ █ █▀ ▄ ▄██ ▄ █  █▀ █▄▄▄█▄ █ █▀█▀██ ▄ █ ▄▄  [0m
[47m[30m █ ▄▄▄ █ █▀█▀     █ ▄▀█▄▄ ▄▀▀█▄▄▄█▀▄ ▄▀▀█▀ ▄▄▀█▄█▀▀▀▀█▄▄▄█▄█▀█ [0m
[47m[30m █ ███ █ ▀███  █▄▄ ▀▄▀▀▀█ ▄ ▄█▄▀▄  ▀▀▀ █▀▀█ ▀▀ ▄ ▀▄ ▄▄▀█▀▀▄█▄█ [0m
[47m[30m █▄▄▄▄▄█ ▄▀█▄ ▀█▄█▄▀▄▄  ██ ▀▀▀▀▄▄▄▀▄██ ▄▄▀▀█  ▀▄▀  ███▀█▀ █▀▀█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:08:45: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:09:10: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:09:10: 📝 Loaded 12 template types
2025-09-19T22:09:10: 📝 Enhanced Logger initialized
2025-09-19T22:09:10: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:09:10:    Auth Mode: both
2025-09-19T22:09:10:    QR Enabled: true
2025-09-19T22:09:10:    Phone Enabled: true
2025-09-19T22:09:10:    Session Persistence: true
2025-09-19T22:09:10:    Max Reconnect Attempts: 10
2025-09-19T22:09:10:    Default Phone: None
2025-09-19T22:09:10: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:09:10: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:09:10: 🔧 Developer Configuration initialized
2025-09-19T22:09:10: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299950756,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14948,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:09:10: 🔧 Developer Configuration initialized
2025-09-19T22:09:10: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:09:10: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:09:10: ⏰ 4-minute startup delay active
2025-09-19T22:09:10: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:09:10: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:09:10: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299950756,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14948,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:09:10: 📝 Enhanced Logger initialized
2025-09-19T22:09:10: 📁 Loaded 0 sent messages from file
2025-09-19T22:09:10: 📁 Loaded 0 customer histories from file
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:09:10: 📁 Loaded 0 message hashes from file
2025-09-19T22:09:10: 📁 Loaded statistics from file
2025-09-19T22:09:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:09:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:09:10: 🧹 Removed stale process lock
2025-09-19T22:09:10: 🧹 Removed stale process lock
2025-09-19T22:09:10: 🔒 Process lock acquired (PID: 14948)
2025-09-19T22:09:10: 🔒 Process lock acquired (PID: 14948)
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14948
}
2025-09-19T22:09:10: ⏰ Starting 240 second startup grace period...
2025-09-19T22:09:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14948
}
2025-09-19T22:09:10: ⏰ Starting 240 second startup grace period...
2025-09-19T22:09:10: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299950756, processId: 14948 },
  timestamp: 1758299950802
}
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299950756, willExpireAt: 1758300190756 },
  timestamp: 1758299950802
}
2025-09-19T22:09:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:09:10: ⏰ Startup grace period: 240 seconds
2025-09-19T22:09:10: 📋 Message rules loaded: 8 types
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299950756, willExpireAt: 1758300190756 },
  timestamp: 1758299950804
}
2025-09-19T22:09:10: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:09:10: ⏰ Startup grace period: 240 seconds
2025-09-19T22:09:10: 📋 Message rules loaded: 8 types
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 49,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:09:10: ✅ Safety Manager initialized
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299950756, processId: 14948 },
  timestamp: 1758299950804
}
2025-09-19T22:09:10: ℹ️ [10:09:10 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 52,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:09:10: 📁 Loaded 0 sent messages from file
2025-09-19T22:09:10: 📁 Loaded 0 customer histories from file
2025-09-19T22:09:10: 📁 Loaded 0 message hashes from file
2025-09-19T22:09:10: 📁 Loaded statistics from file
2025-09-19T22:09:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:09:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:09:10: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:09:10: 🔄 Starting WhatsApp connection...
2025-09-19T22:09:10: 🔄 Initializing WhatsApp client...
2025-09-19T22:09:10: ✅ WhatsApp connection started
2025-09-19T22:09:10: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:09:10: 📞 Attempting to request pairing code...
2025-09-19T22:09:10: 💡 To use phone authentication:
2025-09-19T22:09:10:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:09:10:    2. Select "Phone Number Authentication"
2025-09-19T22:09:10:    3. Enter your phone number
2025-09-19T22:09:10:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:09:10: 🔄 Connecting to WhatsApp...
2025-09-19T22:09:11: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:09:12: [47m[30m ▄▄▄▄▄▄▄   ▄▄ ▄▄  ▄▄▄▄▄ ▄▄   ▄ ▄▄     ▄ ▄▄▄▄        ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄ ▀▀█▄▀▀▀█▄▄███▀▄█ ▀█▄▄▄ ▀▀██▄▄▄███▀▄█▄▄█ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █▄ ▀▄██▄▄█ █ ███ ▄▄ █▄█▄▄█ █▀▄▀▀ ▀▄█ ▀ ████▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ ▄▀▄ ▄ ▄▀█▀▄▀▄ ▄▀▄▀█ ▄ █ █▀▄ █ █▀▄▀█▀▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀ █ ██▀▀█ ██▀█ ▀▄ ▀▀█▄▄▄█ █▄██ ▀ ██▄ █▀▄█▄▄▄█ ▄▄▄▄▄   [0m
[47m[30m  ▀██▀▄▄▄▄▄ ▀█▄█▄▄█▀█▀ █▀██▀█   ▄ ▀▄▀ ▀▄▀ ▀▀██  █▀▀ ▄▄▀▀▀ ▀ ▀▄ [0m
[47m[30m  ▄ ▄█▀▄  ▄ ▄▀  ▀▀  ▄▀▀▀▄▄█▀  ▄▀▄█▄▄ ▄█ ▀▀▀▄▀▀▀ ▄▄ ▀▀ ▀▀█   ██ [0m
[47m[30m ██▄ █▄▄█ ██  ▄▀▀▀█▀█  ▀▀▄▄▀ ▄█▄▄▀▄ ▄██▄▀▀▀▀██  ▄▄▀▄ ▄▀█ ▄█▀▄█ [0m
[47m[30m ▄▀▀▄  ▄ █▀██▄ ▀██ ▀▄▀ █ ▄█ ▄▄▀█ ▀ ▄▀▄██▀ ▀█▄▀▄▄█▄ ▄▄▀▄██▀ ▄ ▄ [0m
[47m[30m ▄ █▀██▄▀▀▄█▀ ▀   ▀▄ ▄  █▀▀ ▀ ▄▄▄ ▄▄▀▄▀▄  ▀▀▄▄▀▄▀▀▀ ▄ █▀  █▄▀▄ [0m
[47m[30m  █▀▄▀▄▄▄ ▄██▄█▀█▀▀ ▀▄ ▄ ▀▀   ▄▀▀▄▀██▄▄▀▀▀  █ ▄▀█▄▄ ██ ▄▄▀▄ █▀ [0m
[47m[30m ▀ ▀ ▀▄▄▀▀▄ ▄█▄ ▀█ ▀▀▀▄█ █▀ ▀▀▀ ▀▀ ▄ ▀█   ▀▀▀▀▄▄▀█▄▄▄ █▀█▀█▄▀▄ [0m
[47m[30m █▄█ ▀█▄████▀▄█████▀  ▄█▄██ ▀ ▀▄▀█ ▀▄▄▄▄▀ ▀▀▄▀  ▀▄▄▀██ ▄▄▀   ▀ [0m
[47m[30m  ███▀ ▄▀ ▄▄█ █▀▀▀▄▀ ▄  ▄█ ▀▀▄ ▀▄▄█ ███▄▀ ▄▀ ▀▄ █▀▄▄ ▄██▄▀ ▀▀▄ [0m
[47m[30m ▄▄█ ██▄█▄▀▀▀▀█▄  ▀ █▀▄▀ ██▀ ▄▄█▄██▄ ▄▀▀ ▀▄▀ ▀▀ ▄█ █ ▄█▄█▄█▄   [0m
[47m[30m  ▀█▀█ ▄ █▄█ ▄ █ ▄▀   █▀██ ▄ █ ▄ █▄  ██ █▄ ▀ █▄▄▀ █▄▄█ ▄ █ ▄▄█ [0m
[47m[30m  ▄███▄▄▄██▄ ▀ ▀▄█▀▄▄ ▀▄▀▀▀▀▀█▄▄▄█ ▄▄▄ ▀▄▀▄▄ ▀▀▄▄█▄███▄▄▄█  ▄█ [0m
[47m[30m  ██▀▄▄▄▄  ▀▄▀ ▀█ ▀   ▄█▀▀█▀▄▀▀ ▀█▄ █ █   ▀▀▄ ▀▄█ ▀▄   █▀▄▀ ▄▄ [0m
[47m[30m  █ ▄██▄▀▄ █  ▀▄▀▄█▀▀▀▄█▄▀█ ▄  █▀  ▄▄█ ▀▀▀▀█▄ ▄ ███▀▄▄▀ █ ▀▄ ▄ [0m
[47m[30m ▀█▄▀ ▀▄▄█ ▄██▀▄▄▀ ▀▄▄▀▀▄▀█████ ▄█▄▄ ▀█ ▄▄▀██    ▄▀▄▄██▄▀▄█ ▄  [0m
[47m[30m ▀▀ ▀▄▀▄▀ ▄▄▄█ ▀▀  █▀▄ █▀█▄█▀▄██▀ ▀ █▄ ▄▀ █▄▄ ▀███  ▄▄ █▄▀ ▄ █ [0m
[47m[30m   ▄▄  ▄▄█ ▀▀█ ▄▀▄▄█▄▄▀█▀  ▄▄▀▄▀██▀▄ ▄▀▄████▀▄▄▄▄▄█ ▀▄ ██▄▀ ▀▄ [0m
[47m[30m ▀  █▄▄▄▄▄█  ▄ ▄▀▄▀▄█ ▄▄▀▄█ ▀ ▀██ ▄█▄██ ▀▀███▀ ▀▄█▀ ▄█▀▄ ▀▀▄▄█ [0m
[47m[30m ▄ ▄▀▄▀▄    █▀ ▀██▀█  ▀ █▀▀▀▀▀ ▄▀█▄▀█▄█▄▀ ███▀▄▄█ █ ▄█▄▄▀▄▄▀█▄ [0m
[47m[30m █▄▀▄ ▀▄█▄█▄▀█ █▀ ▄▀▄▄▄▀▀█▄▀ █▀██▄ ██▄▄▄▀▀█ █ ██▄▄ ▄▄▀▀▀ ▄▀▄▄  [0m
[47m[30m   ▄█▄▄▄█▀▀ ▄▀█▀▄▀   ▀▀▄▀███▄ ▀█▄ ▄▄ █▄▄  ▄▀▄▀▄ █▄▄▄▀▄▀██ █▄█▄ [0m
[47m[30m ███▄▀ ▄█▀▀█   ▄ ▀█▄ █▄▄▀▄▀ ▀█▄█▄▄ ▀▄▄ █ ▀▄█▄ ▀ ▄██████▄▄█  ▄█ [0m
[47m[30m ▄▄▄▄▄▄▄ ▀ ██▄█ ▄▀ ▀ ▀▄███▄▀ █ ▄ █▄▄█▄█▄▀ ▀▀ ▀▀▄▄▄▀ ▀█ ▄ ██ ▄▄ [0m
[47m[30m █ ▄▄▄ █ █ ▀▄█▀▀█▀▄▀▄▀███▀█ ▄█▄▄▄█▄▀▄▄█   ▄▀▄ █ ▄▄▄ ▄█▄▄▄█▄▄▀▀ [0m
[47m[30m █ ███ █ █▄ ▀ ▄▀ ██ ▄▄▄█▄▀▀   █▀▀ ▄  ▀█ █▄▀▀█  ▄▄▄▀▄▀  ██ ▄▄ █ [0m
[47m[30m █▄▄▄▄▄█ ▄▀▀█▄▀▀█▄▄ ▄▄█ ▄█▀   █▀▄ █ █▄▀█▀▀██▀▀▄▄█▄ █▄█▄▀▀▀ ▄▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:09:12: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:09:40: 💾 Data synced to files successfully
2025-09-19T22:10:10: 💾 Data synced to files successfully
2025-09-19T22:10:12: 📱 QR Code received. Please scan with WhatsApp:
2025-09-19T22:10:12: [47m[30m ▄▄▄▄▄▄▄  ▄▄▄ ▄ ▄  ▄▄ ▄▄ ▄   ▄ ▄▄     ▄ ▄▄▄▄        ▄▄ ▄▄▄▄▄▄▄ [0m
[47m[30m █ ▄▄▄ █ ▄  ▀▄█  █▄ ▄█▄█▀▀█▄▀██▄▄ ▀▀██▄▄▄███▀▄█▄▄█ ▄██ █ ▄▄▄ █ [0m
[47m[30m █ ███ █ █ ▄▀▄ ▄▄▄ ██  ██ ▄▄ █▄█▄▄█ █▀▄▀▀ ▀▄█ ▀ ████▄▀ █ ███ █ [0m
[47m[30m █▄▄▄▄▄█ █ █▀▄ ▄ ▄ █▀▄ █ ▄▀█▀█ ▄ █ █▀▄ █ █▀▄▀█▀▄ ▄▀█ ▄ █▄▄▄▄▄█ [0m
[47m[30m ▄ ▄▄▄▄▄ ▀▀  ██ ▀██▀█▀▀▄▀▄█ ▀█▄▄▄█ ▄██▄▀▀▀▄▄▄ ▀ ██ ▀▄█ ▄▄▄▄▄   [0m
[47m[30m  ███▄▄▄▄ ▄▀▀███▄▄▄ █▀ ▄▀█▄ █ ██▄ ▄▄▀█ ▄██▀▀  █▄ ▀▄▄▄▄▄▀█▀▀ ▀▄ [0m
[47m[30m ▀▀ ▄██▄  ▄ ▄▀  ▀▀   ▀▀▀ ▄█▀  █▀▄█▀▄▄▄▄ ▀▀▀▄▀▀██▀▄ ▄▀ ▀▀█   ▀  [0m
[47m[30m ▀▄▄ ▄▄▄█ ██ █▄▀  █▀▀▀ ▀█▀▄▀▄▄█▄▄▀▄ ▀▀█▄ ▀█▀ █▄▄▀ ▀▄ ▄▀██ █▀▄█ [0m
[47m[30m ▀▄▀▄█▄▄ █▀█   ▀█  ▀▀▀ █▄██  ▄▀█ ▀ ▄▀▄██▀ ▀█▄▀▄▄█▄ ▄▄▀▄██▀ ▄▄█ [0m
[47m[30m   ▄ █▀▄▀▀ █ ▀▀  ▄█ ▄▀▄▄ ▄▀ █ ▄▄█ ▄▄▀▄▀▄  ▀▀▄▄▀▄▀▀▀ ▄▄█▀  █▄▀▄ [0m
[47m[30m  ▄▀█▀▄▄  █ ▄▀▀ ▄█▄▀▀▀▀  █▀   ▄▀▀▄▀██▄▄▀▀▀  █ ▄▀█▄▄ ▄▄ ▄▄▀▄ █▀ [0m
[47m[30m ▀▀█▀▀▄▄ ▀██▀▄▄  █ ▄██ ▄▀▀▀▄ ▀▀ ▄▀ ▄ ▀█   ▀▀▀▀▄▄▀█▄▄ ▄█▀█▀  ▀▄ [0m
[47m[30m █▄▄ ▀█▄█▀ ▄ █▄█▄▄██▀ ▄████ ▀ ▀▄ ▀ ▀▄▄▄▄▀ ▀▀▄▀  ▀▄▄▀▄▄██▄▀▄▄ ▀ [0m
[47m[30m  █▀▀▀ ▄▀▀███  ▀▀▀▄▀ ▄ ▄▄█ █▀▄▄ ▄▄█ ███▄▀ ▄▀ ▀▄ █▀▄▄ ▄▀▀▄▀ ▀▀▄ [0m
[47m[30m ▄▄█▀▄█▄▄▄██▀▀ ▄  ▀▀█▀ ▀ █▄▀ ▄▄█▄█████▄█▀▀▀██  █▄█   ▄▄████▄   [0m
[47m[30m ▄▀█▀█ ▄ ███ ▄▀▄ ▄▀   █▀██▀█ █ ▄ █▀▄ █▀▄▀▀██▀ ▀▄ ▄▄▄▄█ ▄ █ ▄▄▄ [0m
[47m[30m   ███▄▄▄██▄ █ ▀ █▀▄ ▄▀▄▀▀▀▀▀█▄▄▄█▄▀▄██▄  █▀▄ ▄▀▄▄█▀██▄▄▄█  ▄  [0m
[47m[30m  ▄█▀▄ ▄▄  ▀█▀ ▀▀▀▀ █▀▄█▀▀█▀▄▀█▄▀█▀▄▀ █ ▀███▀▄▄▄█ ▀▄  ▄▄▄▄▀ ▄█ [0m
[47m[30m █ ▄▄▄ ▄▀█ █  ▀▄▀██▀██▄█ ▀█ ▄▄▄▄▀  ▄▄█ ▀▀▀▀█▄ ▄ ███▀▄▄  █▄▀▄▄▄ [0m
[47m[30m ▄█▀▀ ▄▄▄█ ▄▄▄█▄▄▄▄▀▀███▄▀██▄ ▄▀▄█▄▄ ▀█ ▄▄▀██    ▄▀▄▄██▄ ▄█ ▄  [0m
[47m[30m ▄ ▄ ▄▀▄▀ ▀▀▄  ▀ ▄   ██▄ ▄▄██▀██▀ ▀ █▄ ▄▀ █▄▄ ▀███  █▀ █▄    █ [0m
[47m[30m ▀ ▄█▄█▄▄█ █▄█▄▄▄█▀  █  ▀   ▄▀▄▀██▀▄ ▄▀▄████▀▄▄▄▄▄█ ▀█ ██▄▀█▀▄ [0m
[47m[30m ▀ ▄ ▄▄▄▄ ▄▄ ███ ▄  ▄▀█▄▀▄▄▀█▀▀██▄▄█▄██ ▀▀███▀ ▀▄█▀ ▄▀▀▄ ▀▄▄▄█ [0m
[47m[30m ▄ ▀ ▄▀▄▄▀▀▀█▀▄▀███   ▀ █▀█▀▀▀ ▄  ▄▀█▄█▄▀ ███▀▄▄█ █ ▀▄▄▄▀▄▄▀█▄ [0m
[47m[30m █▄▀▄ ▀▄▄ ▀▀▀██ ▀ ▀▄▄▄█▀▀██▀ █▀█▀▄▀▀██ ▀▀   █▀█ ▄▄ ▀▄▀█▀ ▄▀▄▄  [0m
[47m[30m   ▄█▄▄▄▄█▀ ▄▀▄ ▄▀▀▀ ▀ ▄▀█▄█▄ ▀█▄▀▄▄ ▄▄▄▀▀▀█▀  ▄ █▀ ▀▄███ █▄▄█ [0m
[47m[30m ███▄▀ ▄ ▄▀█   ▄▄▀█▄▄▀▄▄▀ ▀ ▀██▄▄▄ ▄▄█ █▀▀▀██ █▄▄▄████▄█▄█  █  [0m
[47m[30m ▄▄▄▄▄▄▄ ▀ █▄██ ▀  ▀▄█▄██▀▄▀ █ ▄ █ ▄ ▄▀ ▀ ▄▀▀ ▀▄▀ █ ▀█ ▄ ██ ▀▄ [0m
[47m[30m █ ▄▄▄ █ █ ▀ █▀▀▄ ▄▀▀▄███▄█ ▄█▄▄▄█▄▀▄▄█   ▄▀▄ █ ▄▄▄ ▄█▄▄▄█▄▄▀▄ [0m
[47m[30m █ ███ █ █▄ █▄▄██ ▀    ███▀   ▄▀▀ ▄  ▀█ █▄▀▀█  ▄▄▄▀▄▀   █ ▀▀ █ [0m
[47m[30m █▄▄▄▄▄█ ▄  ▄█▄▄█▄▄▄▀ ▀ ▄█▀ ▀▀ ▄▄ █ █▄▀█▀▀██▀▀▄▄█▄ █▄█▀▀ ▀▄ ▄█ [0m
[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m[37m▀[47m[30m[0m
[47m[30m[0m
2025-09-19T22:10:12: 📷 QR Code saved as: C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\src\core\qr-code.png
2025-09-19T22:10:24: {"level":50,"time":1758300024152,"pid":14948,"hostname":"SAURABH","node":{"tag":"stream:error","attrs":{"code":"515"}},"msg":"stream errored out"}
2025-09-19T22:10:24: 🔌 Connection closed. Reason: undefined
2025-09-19T22:10:24: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T22:10:25: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758299950756,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14948,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:10:25: 🧹 Removed stale process lock
2025-09-19T22:10:25: 🔒 Process lock acquired (PID: 14948)
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14948
}
2025-09-19T22:10:25: ⏰ Starting 240 second startup grace period...
2025-09-19T22:10:25: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299950756, processId: 14948 },
  timestamp: 1758300025203
}
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758299950756, willExpireAt: 1758300190756 },
  timestamp: 1758300025203
}
2025-09-19T22:10:25: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:10:25: ⏰ Startup grace period: 240 seconds
2025-09-19T22:10:25: 📋 Message rules loaded: 8 types
2025-09-19T22:10:25: ℹ️ [10:10:25 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 74452,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:10:25: ✅ Safety Manager initialized
2025-09-19T22:10:25: 📁 Loaded 0 sent messages from file
2025-09-19T22:10:25: 📁 Loaded 0 customer histories from file
2025-09-19T22:10:25: 📁 Loaded 0 message hashes from file
2025-09-19T22:10:25: 📁 Loaded statistics from file
2025-09-19T22:10:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:10:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:10:25: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:10:25: 🔄 Starting WhatsApp connection...
2025-09-19T22:10:25: 🔄 Initializing WhatsApp client...
2025-09-19T22:10:25: ✅ WhatsApp connection started
2025-09-19T22:10:25: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:10:25: 🔄 Connecting to WhatsApp...
2025-09-19T22:10:28: ✅ WhatsApp connected successfully!
2025-09-19T22:10:28: 📱 Session established successfully
2025-09-19T22:10:28: 🔒 Session will be monitored for stability
2025-09-19T22:10:40: 💾 Data synced to files successfully
2025-09-19T22:11:10: 💾 Data synced to files successfully
2025-09-19T22:11:40: 💾 Data synced to files successfully
2025-09-19T22:12:10: 💾 Data synced to files successfully
2025-09-19T22:12:40: 💾 Data synced to files successfully
2025-09-19T22:13:10: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:13:10: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:13:10: ℹ️ [10:13:10 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 14948 },
  timestamp: 1758300190813
}
2025-09-19T22:13:10: ℹ️ [10:13:10 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 14948 },
  timestamp: 1758300190814
}
2025-09-19T22:13:10: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:13:10: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:13:10: 💾 Data synced to files successfully
2025-09-19T22:13:40: 💾 Data synced to files successfully
2025-09-19T22:14:10: 💾 Data synced to files successfully
2025-09-19T22:14:25: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:14:25: ℹ️ [10:14:25 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 14948 },
  timestamp: 1758300265223
}
2025-09-19T22:14:25: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:14:40: 💾 Data synced to files successfully
2025-09-19T22:15:10: 💾 Data synced to files successfully
2025-09-19T22:15:40: 💾 Data synced to files successfully
2025-09-19T22:16:10: 💾 Data synced to files successfully
2025-09-19T22:16:40: 💾 Data synced to files successfully
2025-09-19T22:17:10: 💾 Data synced to files successfully
2025-09-19T22:17:40: 💾 Data synced to files successfully
2025-09-19T22:18:10: 💾 Data synced to files successfully
2025-09-19T22:18:40: 💾 Data synced to files successfully
2025-09-19T22:19:10: 💾 Data synced to files successfully
2025-09-19T22:19:27: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:19:40: 💾 Data synced to files successfully
2025-09-19T22:20:10: 💾 Data synced to files successfully
2025-09-19T22:20:40: 💾 Data synced to files successfully
2025-09-19T22:21:10: 💾 Data synced to files successfully
2025-09-19T22:21:40: 💾 Data synced to files successfully
2025-09-19T22:22:01: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:22:01: 📝 Loaded 12 template types
2025-09-19T22:22:01: 📝 Enhanced Logger initialized
2025-09-19T22:22:01: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:22:01:    Auth Mode: both
2025-09-19T22:22:01:    QR Enabled: true
2025-09-19T22:22:01:    Phone Enabled: true
2025-09-19T22:22:01:    Session Persistence: true
2025-09-19T22:22:01:    Max Reconnect Attempts: 10
2025-09-19T22:22:01:    Default Phone: None
2025-09-19T22:22:01: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:22:01: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:22:01: 🔧 Developer Configuration initialized
2025-09-19T22:22:01: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758300721221,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16060,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:22:01: 🔧 Developer Configuration initialized
2025-09-19T22:22:01: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:22:01: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:22:01: ⏰ 4-minute startup delay active
2025-09-19T22:22:01: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:22:01: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:22:01: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758300721221,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16060,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:22:01: 📁 Loaded 0 sent messages from file
2025-09-19T22:22:01: 📝 Enhanced Logger initialized
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:22:01: 📁 Loaded 0 customer histories from file
2025-09-19T22:22:01: 📁 Loaded 0 message hashes from file
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:22:01: 📁 Loaded statistics from file
2025-09-19T22:22:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:22:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:22:01: 🧹 Lock file already cleaned up
2025-09-19T22:22:01: 🧹 Removed stale process lock
2025-09-19T22:22:01: 🔒 Process lock acquired (PID: 16060)
2025-09-19T22:22:01: 🔒 Process lock acquired (PID: 16060)
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16060
}
2025-09-19T22:22:01: ⏰ Starting 240 second startup grace period...
2025-09-19T22:22:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16060
}
2025-09-19T22:22:01: ⏰ Starting 240 second startup grace period...
2025-09-19T22:22:01: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758300721221, processId: 16060 },
  timestamp: 1758300721258
}
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758300721221, willExpireAt: 1758300961221 },
  timestamp: 1758300721259
}
2025-09-19T22:22:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:22:01: ⏰ Startup grace period: 240 seconds
2025-09-19T22:22:01: 📋 Message rules loaded: 8 types
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758300721221, processId: 16060 },
  timestamp: 1758300721260
}
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758300721221, willExpireAt: 1758300961221 },
  timestamp: 1758300721260
}
2025-09-19T22:22:01: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:22:01: ⏰ Startup grace period: 240 seconds
2025-09-19T22:22:01: 📋 Message rules loaded: 8 types
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 43,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:22:01: ℹ️ [10:22:01 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 44,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:22:01: ✅ Safety Manager initialized
2025-09-19T22:22:01: 📁 Loaded 0 sent messages from file
2025-09-19T22:22:01: 📁 Loaded 0 customer histories from file
2025-09-19T22:22:01: 📁 Loaded 0 message hashes from file
2025-09-19T22:22:01: 📁 Loaded statistics from file
2025-09-19T22:22:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:22:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:22:01: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:22:01: 🔄 Starting WhatsApp connection...
2025-09-19T22:22:01: 🔄 Initializing WhatsApp client...
2025-09-19T22:22:01: ✅ WhatsApp connection started
2025-09-19T22:22:01: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:22:01: 📞 Attempting to request pairing code...
2025-09-19T22:22:01: 💡 To use phone authentication:
2025-09-19T22:22:01:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:22:01:    2. Select "Phone Number Authentication"
2025-09-19T22:22:01:    3. Enter your phone number
2025-09-19T22:22:01:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:22:01: 🔄 Connecting to WhatsApp...
2025-09-19T22:22:03: ✅ WhatsApp connected successfully!
2025-09-19T22:22:03: 📱 Session established successfully
2025-09-19T22:22:03: 🔒 Session will be monitored for stability
2025-09-19T22:22:31: 💾 Data synced to files successfully
2025-09-19T22:23:01: 💾 Data synced to files successfully
2025-09-19T22:23:18: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:23:31: 💾 Data synced to files successfully
2025-09-19T22:23:57: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:24:01: 💾 Data synced to files successfully
2025-09-19T22:24:05: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:24:23: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:24:31: 💾 Data synced to files successfully
2025-09-19T22:25:01: 💾 Data synced to files successfully
2025-09-19T22:25:31: 💾 Data synced to files successfully
2025-09-19T22:26:01: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:26:01: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:26:01: ℹ️ [10:26:01 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 16060 },
  timestamp: 1758300961276
}
2025-09-19T22:26:01: ℹ️ [10:26:01 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 16060 },
  timestamp: 1758300961277
}
2025-09-19T22:26:01: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:26:01: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:26:01: 💾 Data synced to files successfully
2025-09-19T22:26:21: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:26:31: 💾 Data synced to files successfully
2025-09-19T22:27:01: 💾 Data synced to files successfully
2025-09-19T22:27:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:27:18: 📝 Loaded 12 template types
2025-09-19T22:27:18: 📝 Enhanced Logger initialized
2025-09-19T22:27:18: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:27:18:    Auth Mode: both
2025-09-19T22:27:18:    QR Enabled: true
2025-09-19T22:27:18:    Phone Enabled: true
2025-09-19T22:27:18:    Session Persistence: true
2025-09-19T22:27:18:    Max Reconnect Attempts: 10
2025-09-19T22:27:18:    Default Phone: None
2025-09-19T22:27:18: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:27:18: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:27:18: 🔧 Developer Configuration initialized
2025-09-19T22:27:18: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301038765,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14104,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:27:18: 🔧 Developer Configuration initialized
2025-09-19T22:27:18: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:27:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:27:18: ⏰ 4-minute startup delay active
2025-09-19T22:27:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:27:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:27:18: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301038765,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14104,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:27:18: 📁 Loaded 0 sent messages from file
2025-09-19T22:27:18: 📝 Enhanced Logger initialized
2025-09-19T22:27:18: 📁 Loaded 0 customer histories from file
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:27:18: 📁 Loaded 0 message hashes from file
2025-09-19T22:27:18: 📁 Loaded statistics from file
2025-09-19T22:27:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:27:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:27:18: 🧹 Lock file already cleaned up
2025-09-19T22:27:18: 🧹 Removed stale process lock
2025-09-19T22:27:18: 🔒 Process lock acquired (PID: 14104)
2025-09-19T22:27:18: 🔒 Process lock acquired (PID: 14104)
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14104
}
2025-09-19T22:27:18: ⏰ Starting 240 second startup grace period...
2025-09-19T22:27:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14104
}
2025-09-19T22:27:18: ⏰ Starting 240 second startup grace period...
2025-09-19T22:27:18: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301038765, processId: 14104 },
  timestamp: 1758301038791
}
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301038765, willExpireAt: 1758301278765 },
  timestamp: 1758301038792
}
2025-09-19T22:27:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:27:18: ⏰ Startup grace period: 240 seconds
2025-09-19T22:27:18: 📋 Message rules loaded: 8 types
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301038765, processId: 14104 },
  timestamp: 1758301038792
}
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301038765, willExpireAt: 1758301278765 },
  timestamp: 1758301038792
}
2025-09-19T22:27:18: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:27:18: ⏰ Startup grace period: 240 seconds
2025-09-19T22:27:18: 📋 Message rules loaded: 8 types
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 28,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:27:18: ℹ️ [10:27:18 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 29,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:27:18: ✅ Safety Manager initialized
2025-09-19T22:27:18: 📁 Loaded 0 sent messages from file
2025-09-19T22:27:18: 📁 Loaded 0 customer histories from file
2025-09-19T22:27:18: 📁 Loaded 0 message hashes from file
2025-09-19T22:27:18: 📁 Loaded statistics from file
2025-09-19T22:27:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:27:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:27:18: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:27:18: 🔄 Starting WhatsApp connection...
2025-09-19T22:27:18: 🔄 Initializing WhatsApp client...
2025-09-19T22:27:18: ✅ WhatsApp connection started
2025-09-19T22:27:18: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:27:18: 📞 Attempting to request pairing code...
2025-09-19T22:27:18: 💡 To use phone authentication:
2025-09-19T22:27:18:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:27:18:    2. Select "Phone Number Authentication"
2025-09-19T22:27:18:    3. Enter your phone number
2025-09-19T22:27:18:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:27:18: 🔄 Connecting to WhatsApp...
2025-09-19T22:27:21: ✅ WhatsApp connected successfully!
2025-09-19T22:27:21: 📱 Session established successfully
2025-09-19T22:27:21: 🔒 Session will be monitored for stability
2025-09-19T22:27:48: 💾 Data synced to files successfully
2025-09-19T22:28:18: 💾 Data synced to files successfully
2025-09-19T22:28:48: 💾 Data synced to files successfully
2025-09-19T22:29:00: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:29:00: 📝 Loaded 12 template types
2025-09-19T22:29:00: 📝 Enhanced Logger initialized
2025-09-19T22:29:00: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:29:00:    Auth Mode: both
2025-09-19T22:29:00:    QR Enabled: true
2025-09-19T22:29:00:    Phone Enabled: true
2025-09-19T22:29:00:    Session Persistence: true
2025-09-19T22:29:00:    Max Reconnect Attempts: 10
2025-09-19T22:29:00:    Default Phone: None
2025-09-19T22:29:00: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:29:00: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:29:00: 🔧 Developer Configuration initialized
2025-09-19T22:29:00: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301140230,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19604,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:29:00: 🔧 Developer Configuration initialized
2025-09-19T22:29:00: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:29:00: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:29:00: ⏰ 4-minute startup delay active
2025-09-19T22:29:00: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:29:00: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:29:00: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301140230,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19604,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:29:00: 📁 Loaded 0 sent messages from file
2025-09-19T22:29:00: 📝 Enhanced Logger initialized
2025-09-19T22:29:00: 📁 Loaded 0 customer histories from file
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:29:00: 📁 Loaded 0 message hashes from file
2025-09-19T22:29:00: 📁 Loaded statistics from file
2025-09-19T22:29:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:29:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:29:00: 🧹 Lock file already cleaned up
2025-09-19T22:29:00: 🧹 Removed stale process lock
2025-09-19T22:29:00: 🔒 Process lock acquired (PID: 19604)
2025-09-19T22:29:00: 🔒 Process lock acquired (PID: 19604)
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19604
}
2025-09-19T22:29:00: ⏰ Starting 240 second startup grace period...
2025-09-19T22:29:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19604
}
2025-09-19T22:29:00: ⏰ Starting 240 second startup grace period...
2025-09-19T22:29:00: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301140230, processId: 19604 },
  timestamp: 1758301140303
}
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301140230, willExpireAt: 1758301380230 },
  timestamp: 1758301140307
}
2025-09-19T22:29:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:29:00: ⏰ Startup grace period: 240 seconds
2025-09-19T22:29:00: 📋 Message rules loaded: 8 types
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301140230, willExpireAt: 1758301380230 },
  timestamp: 1758301140304
}
2025-09-19T22:29:00: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:29:00: ⏰ Startup grace period: 240 seconds
2025-09-19T22:29:00: 📋 Message rules loaded: 8 types
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301140230, processId: 19604 },
  timestamp: 1758301140307
}
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 81,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:29:00: ℹ️ [10:29:00 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 82,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:29:00: ✅ Safety Manager initialized
2025-09-19T22:29:00: 📁 Loaded 0 sent messages from file
2025-09-19T22:29:00: 📁 Loaded 0 customer histories from file
2025-09-19T22:29:00: 📁 Loaded 0 message hashes from file
2025-09-19T22:29:00: 📁 Loaded statistics from file
2025-09-19T22:29:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:29:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:29:00: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:29:00: 🔄 Starting WhatsApp connection...
2025-09-19T22:29:00: 🔄 Initializing WhatsApp client...
2025-09-19T22:29:00: ✅ WhatsApp connection started
2025-09-19T22:29:00: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:29:00: 📞 Attempting to request pairing code...
2025-09-19T22:29:00: 💡 To use phone authentication:
2025-09-19T22:29:00:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:29:00:    2. Select "Phone Number Authentication"
2025-09-19T22:29:00:    3. Enter your phone number
2025-09-19T22:29:00:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:29:00: 🔄 Connecting to WhatsApp...
2025-09-19T22:29:02: ✅ WhatsApp connected successfully!
2025-09-19T22:29:02: 📱 Session established successfully
2025-09-19T22:29:02: 🔒 Session will be monitored for stability
2025-09-19T22:29:30: 💾 Data synced to files successfully
2025-09-19T22:30:00: 💾 Data synced to files successfully
2025-09-19T22:30:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:30:22: 📝 Loaded 12 template types
2025-09-19T22:30:22: 📝 Enhanced Logger initialized
2025-09-19T22:30:22: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:30:22:    Auth Mode: both
2025-09-19T22:30:22:    QR Enabled: true
2025-09-19T22:30:22:    Phone Enabled: true
2025-09-19T22:30:22:    Session Persistence: true
2025-09-19T22:30:22:    Max Reconnect Attempts: 10
2025-09-19T22:30:22:    Default Phone: None
2025-09-19T22:30:22: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:30:22: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:30:22: 🔧 Developer Configuration initialized
2025-09-19T22:30:22: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301222406,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3124,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:30:22: 🔧 Developer Configuration initialized
2025-09-19T22:30:22: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:30:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:30:22: ⏰ 4-minute startup delay active
2025-09-19T22:30:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:30:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:30:22: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301222406,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 3124,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:30:22: 📁 Loaded 0 sent messages from file
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:30:22: 📁 Loaded 0 customer histories from file
2025-09-19T22:30:22: 📝 Enhanced Logger initialized
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:30:22: 📁 Loaded 0 message hashes from file
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:30:22: 📁 Loaded statistics from file
2025-09-19T22:30:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:30:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:30:22: 🧹 Removed stale process lock
2025-09-19T22:30:22: 🧹 Lock file already cleaned up
2025-09-19T22:30:22: 🔒 Process lock acquired (PID: 3124)
2025-09-19T22:30:22: 🔒 Process lock acquired (PID: 3124)
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3124
}
2025-09-19T22:30:22: ⏰ Starting 240 second startup grace period...
2025-09-19T22:30:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 3124
}
2025-09-19T22:30:22: ⏰ Starting 240 second startup grace period...
2025-09-19T22:30:22: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301222406, processId: 3124 },
  timestamp: 1758301222467
}
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301222406, willExpireAt: 1758301462406 },
  timestamp: 1758301222469
}
2025-09-19T22:30:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:30:22: ⏰ Startup grace period: 240 seconds
2025-09-19T22:30:22: 📋 Message rules loaded: 8 types
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301222406, processId: 3124 },
  timestamp: 1758301222471
}
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301222406, willExpireAt: 1758301462406 },
  timestamp: 1758301222472
}
2025-09-19T22:30:22: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:30:22: ⏰ Startup grace period: 240 seconds
2025-09-19T22:30:22: 📋 Message rules loaded: 8 types
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 70,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:30:22: ℹ️ [10:30:22 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 72,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:30:22: ✅ Safety Manager initialized
2025-09-19T22:30:22: 📁 Loaded 0 sent messages from file
2025-09-19T22:30:22: 📁 Loaded 0 customer histories from file
2025-09-19T22:30:22: 📁 Loaded 0 message hashes from file
2025-09-19T22:30:22: 📁 Loaded statistics from file
2025-09-19T22:30:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:30:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:30:22: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:30:22: 🔄 Starting WhatsApp connection...
2025-09-19T22:30:22: 🔄 Initializing WhatsApp client...
2025-09-19T22:30:22: ✅ WhatsApp connection started
2025-09-19T22:30:22: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:30:22: 📞 Attempting to request pairing code...
2025-09-19T22:30:22: 💡 To use phone authentication:
2025-09-19T22:30:22:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:30:22:    2. Select "Phone Number Authentication"
2025-09-19T22:30:22:    3. Enter your phone number
2025-09-19T22:30:22:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:30:22: 🔄 Connecting to WhatsApp...
2025-09-19T22:30:24: ✅ WhatsApp connected successfully!
2025-09-19T22:30:24: 📱 Session established successfully
2025-09-19T22:30:24: 🔒 Session will be monitored for stability
2025-09-19T22:30:52: 💾 Data synced to files successfully
2025-09-19T22:31:22: 💾 Data synced to files successfully
2025-09-19T22:31:52: 💾 Data synced to files successfully
2025-09-19T22:32:22: 💾 Data synced to files successfully
2025-09-19T22:32:52: 💾 Data synced to files successfully
2025-09-19T22:33:22: 💾 Data synced to files successfully
2025-09-19T22:33:52: 💾 Data synced to files successfully
2025-09-19T22:34:22: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:34:22: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:34:22: ℹ️ [10:34:22 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 3124 },
  timestamp: 1758301462488
}
2025-09-19T22:34:22: ℹ️ [10:34:22 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 3124 },
  timestamp: 1758301462491
}
2025-09-19T22:34:22: 💾 Data synced to files successfully
2025-09-19T22:34:22: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:34:22: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:34:52: 💾 Data synced to files successfully
2025-09-19T22:35:22: 💾 Data synced to files successfully
2025-09-19T22:35:52: 💾 Data synced to files successfully
2025-09-19T22:36:07: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:36:07: 📝 Loaded 12 template types
2025-09-19T22:36:07: 📝 Enhanced Logger initialized
2025-09-19T22:36:07: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:36:07:    Auth Mode: both
2025-09-19T22:36:07:    QR Enabled: true
2025-09-19T22:36:07:    Phone Enabled: true
2025-09-19T22:36:07:    Session Persistence: true
2025-09-19T22:36:07:    Max Reconnect Attempts: 10
2025-09-19T22:36:07:    Default Phone: None
2025-09-19T22:36:07: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:36:07: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:36:07: 🔧 Developer Configuration initialized
2025-09-19T22:36:07: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301567601,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10100,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:36:07: 🔧 Developer Configuration initialized
2025-09-19T22:36:07: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:36:07: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:36:07: ⏰ 4-minute startup delay active
2025-09-19T22:36:07: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:36:07: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:36:07: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301567601,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 10100,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:36:07: 📁 Loaded 0 sent messages from file
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:36:07: 📁 Loaded 0 customer histories from file
2025-09-19T22:36:07: 📝 Enhanced Logger initialized
2025-09-19T22:36:07: 📁 Loaded 0 message hashes from file
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:36:07: 📁 Loaded statistics from file
2025-09-19T22:36:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:36:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:36:07: 🧹 Removed stale process lock
2025-09-19T22:36:07: 🧹 Removed stale process lock
2025-09-19T22:36:07: 🔒 Process lock acquired (PID: 10100)
2025-09-19T22:36:07: 🔒 Process lock acquired (PID: 10100)
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10100
}
2025-09-19T22:36:07: ⏰ Starting 240 second startup grace period...
2025-09-19T22:36:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 10100
}
2025-09-19T22:36:07: ⏰ Starting 240 second startup grace period...
2025-09-19T22:36:07: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301567601, willExpireAt: 1758301807601 },
  timestamp: 1758301567683
}
2025-09-19T22:36:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:36:07: ⏰ Startup grace period: 240 seconds
2025-09-19T22:36:07: 📋 Message rules loaded: 8 types
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301567601, processId: 10100 },
  timestamp: 1758301567682
}
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301567601, processId: 10100 },
  timestamp: 1758301567685
}
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301567601, willExpireAt: 1758301807601 },
  timestamp: 1758301567686
}
2025-09-19T22:36:07: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:36:07: ⏰ Startup grace period: 240 seconds
2025-09-19T22:36:07: 📋 Message rules loaded: 8 types
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 87,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:36:07: ✅ Safety Manager initialized
2025-09-19T22:36:07: ℹ️ [10:36:07 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 89,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:36:07: 📁 Loaded 0 sent messages from file
2025-09-19T22:36:07: 📁 Loaded 0 customer histories from file
2025-09-19T22:36:07: 📁 Loaded 0 message hashes from file
2025-09-19T22:36:07: 📁 Loaded statistics from file
2025-09-19T22:36:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:36:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:36:07: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:36:07: 🔄 Starting WhatsApp connection...
2025-09-19T22:36:07: 🔄 Initializing WhatsApp client...
2025-09-19T22:36:07: ✅ WhatsApp connection started
2025-09-19T22:36:07: 🔧 Initializing admin commands...
2025-09-19T22:36:07: 📨 Message handler attached to WhatsApp socket
2025-09-19T22:36:07: ✅ Admin commands system initialized
2025-09-19T22:36:07: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:36:07: 📞 Attempting to request pairing code...
2025-09-19T22:36:07: 💡 To use phone authentication:
2025-09-19T22:36:07:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:36:07:    2. Select "Phone Number Authentication"
2025-09-19T22:36:07:    3. Enter your phone number
2025-09-19T22:36:07:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:36:07: 🔄 Connecting to WhatsApp...
2025-09-19T22:36:10: ✅ WhatsApp connected successfully!
2025-09-19T22:36:10: 📱 Session established successfully
2025-09-19T22:36:10: 🔒 Session will be monitored for stability
2025-09-19T22:36:37: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:36:37: {"level":30,"time":1758301597127,"pid":10100,"hostname":"SAURABH","msg":"Admin commands received message: \"STATUS\" from 917375938371@s.whatsapp.net"}
2025-09-19T22:36:37: {"level":30,"time":1758301597129,"pid":10100,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182, 917375938371, 919166758467, 916375623182"}
2025-09-19T22:36:37: {"level":30,"time":1758301597129,"pid":10100,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-19T22:36:37: {"level":30,"time":1758301597129,"pid":10100,"hostname":"SAURABH","msg":"Admin command received: STATUS from 917375938371@s.whatsapp.net"}
2025-09-19T22:36:37: {"level":50,"time":1758301597131,"pid":10100,"hostname":"SAURABH","msg":"Error handling status command:"}
2025-09-19T22:36:37: 🔍 [917375938371] Starting comprehensive message safety check...
2025-09-19T22:36:37: 📋 [917375938371] Order: N/A, Type: N/A
2025-09-19T22:36:37: 📤 [917375938371] All safety checks passed - sending message...
2025-09-19T22:36:37: 💾 Data synced to files successfully
2025-09-19T22:36:38: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-19T22:36:38: ✅ [917375938371] Message sent successfully (1601ms)
2025-09-19T22:36:38: 📧 [917375938371] Message ID: 3EB01ECA788876D0CD6A19
2025-09-19T22:36:38: 🔍 [919166758467] Starting comprehensive message safety check...
2025-09-19T22:36:38: 📋 [919166758467] Order: N/A, Type: N/A
2025-09-19T22:36:38: 📤 [919166758467] All safety checks passed - sending message...
2025-09-19T22:36:40: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-19T22:36:40: ✅ [919166758467] Message sent successfully (1543ms)
2025-09-19T22:36:40: 📧 [919166758467] Message ID: 3EB07F21C8FD1D0FA53B29
2025-09-19T22:36:40: 🔍 [916375623182] Starting comprehensive message safety check...
2025-09-19T22:36:40: 📋 [916375623182] Order: N/A, Type: N/A
2025-09-19T22:36:40: 📤 [916375623182] All safety checks passed - sending message...
2025-09-19T22:36:41: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-19T22:36:41: ✅ [916375623182] Message sent successfully (1412ms)
2025-09-19T22:36:41: 📧 [916375623182] Message ID: 3EB0DE0D54703016E103D0
2025-09-19T22:37:07: 💾 Data synced to files successfully
2025-09-19T22:37:37: 💾 Data synced to files successfully
2025-09-19T22:38:07: 💾 Data synced to files successfully
2025-09-19T22:38:14: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:38:14: 📝 Loaded 12 template types
2025-09-19T22:38:14: 📝 Enhanced Logger initialized
2025-09-19T22:38:14: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:38:14:    Auth Mode: both
2025-09-19T22:38:14:    QR Enabled: true
2025-09-19T22:38:14:    Phone Enabled: true
2025-09-19T22:38:14:    Session Persistence: true
2025-09-19T22:38:14:    Max Reconnect Attempts: 10
2025-09-19T22:38:14:    Default Phone: None
2025-09-19T22:38:14: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:38:14: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:38:14: 🔧 Developer Configuration initialized
2025-09-19T22:38:14: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301694720,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7552,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:38:14: 🔧 Developer Configuration initialized
2025-09-19T22:38:14: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:38:14: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:38:14: ⏰ 4-minute startup delay active
2025-09-19T22:38:14: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:38:14: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:38:14: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301694720,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7552,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:38:14: 📁 Loaded 0 sent messages from file
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:38:14: 📁 Loaded 0 customer histories from file
2025-09-19T22:38:14: 📝 Enhanced Logger initialized
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:38:14: 📁 Loaded 0 message hashes from file
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:38:14: 📁 Loaded statistics from file
2025-09-19T22:38:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:38:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:38:14: 🧹 Removed stale process lock
2025-09-19T22:38:14: 🧹 Removed stale process lock
2025-09-19T22:38:14: 🔒 Process lock acquired (PID: 7552)
2025-09-19T22:38:14: 🔒 Process lock acquired (PID: 7552)
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7552
}
2025-09-19T22:38:14: ⏰ Starting 240 second startup grace period...
2025-09-19T22:38:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7552
}
2025-09-19T22:38:14: ⏰ Starting 240 second startup grace period...
2025-09-19T22:38:14: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301694720, processId: 7552 },
  timestamp: 1758301694785
}
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301694720, willExpireAt: 1758301934720 },
  timestamp: 1758301694785
}
2025-09-19T22:38:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:38:14: ⏰ Startup grace period: 240 seconds
2025-09-19T22:38:14: 📋 Message rules loaded: 8 types
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301694720, processId: 7552 },
  timestamp: 1758301694787
}
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301694720, willExpireAt: 1758301934720 },
  timestamp: 1758301694787
}
2025-09-19T22:38:14: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:38:14: ⏰ Startup grace period: 240 seconds
2025-09-19T22:38:14: 📋 Message rules loaded: 8 types
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 70,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:38:14: ✅ Safety Manager initialized
2025-09-19T22:38:14: ℹ️ [10:38:14 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 74,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:38:14: 📁 Loaded 0 sent messages from file
2025-09-19T22:38:14: 📁 Loaded 0 customer histories from file
2025-09-19T22:38:14: 📁 Loaded 0 message hashes from file
2025-09-19T22:38:14: 📁 Loaded statistics from file
2025-09-19T22:38:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:38:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:38:14: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:38:14: 🔄 Starting WhatsApp connection...
2025-09-19T22:38:14: 🔄 Initializing WhatsApp client...
2025-09-19T22:38:14: ✅ WhatsApp connection started
2025-09-19T22:38:14: 🔧 Initializing admin commands...
2025-09-19T22:38:14: 📨 Message handler attached to WhatsApp socket
2025-09-19T22:38:14: ✅ Admin commands system initialized
2025-09-19T22:38:14: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:38:14: 📞 Attempting to request pairing code...
2025-09-19T22:38:14: 💡 To use phone authentication:
2025-09-19T22:38:14:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:38:14:    2. Select "Phone Number Authentication"
2025-09-19T22:38:14:    3. Enter your phone number
2025-09-19T22:38:14:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:38:14: 🔄 Connecting to WhatsApp...
2025-09-19T22:38:16: ✅ WhatsApp connected successfully!
2025-09-19T22:38:16: 📱 Session established successfully
2025-09-19T22:38:16: 🔒 Session will be monitored for stability
2025-09-19T22:38:44: 💾 Data synced to files successfully
2025-09-19T22:38:51: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:38:51: {"level":30,"time":1758301731106,"pid":7552,"hostname":"SAURABH","msg":"Admin commands received message: \"STATUS\" from 917375938371@s.whatsapp.net"}
2025-09-19T22:38:51: {"level":30,"time":1758301731106,"pid":7552,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182, 917375938371, 919166758467, 916375623182"}
2025-09-19T22:38:51: {"level":30,"time":1758301731106,"pid":7552,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-19T22:38:51: {"level":30,"time":1758301731106,"pid":7552,"hostname":"SAURABH","msg":"Admin command received: STATUS from 917375938371@s.whatsapp.net"}
2025-09-19T22:38:51: 🔍 [917375938371] Starting comprehensive message safety check...
2025-09-19T22:38:51: 📋 [917375938371] Order: N/A, Type: N/A
2025-09-19T22:38:51: 📤 [917375938371] All safety checks passed - sending message...
2025-09-19T22:38:51: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-19T22:38:51: ✅ [917375938371] Message sent successfully (354ms)
2025-09-19T22:38:51: 📧 [917375938371] Message ID: 3EB0ED887DC0557D6ACA19
2025-09-19T22:38:51: 🔍 [919166758467] Starting comprehensive message safety check...
2025-09-19T22:38:51: 📋 [919166758467] Order: N/A, Type: N/A
2025-09-19T22:38:51: 📤 [919166758467] All safety checks passed - sending message...
2025-09-19T22:38:51: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-19T22:38:51: ✅ [919166758467] Message sent successfully (326ms)
2025-09-19T22:38:51: 📧 [919166758467] Message ID: 3EB075F223A50173957C34
2025-09-19T22:38:51: 🔍 [916375623182] Starting comprehensive message safety check...
2025-09-19T22:38:51: 📋 [916375623182] Order: N/A, Type: N/A
2025-09-19T22:38:51: 📤 [916375623182] All safety checks passed - sending message...
2025-09-19T22:38:52: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-19T22:38:52: ✅ [916375623182] Message sent successfully (322ms)
2025-09-19T22:38:52: 📧 [916375623182] Message ID: 3EB0D3631639AB64BE84E8
2025-09-19T22:39:14: 💾 Data synced to files successfully
2025-09-19T22:39:44: 💾 Data synced to files successfully
2025-09-19T22:40:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:40:17: 📝 Loaded 12 template types
2025-09-19T22:40:17: 📝 Enhanced Logger initialized
2025-09-19T22:40:17: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:40:17:    Auth Mode: both
2025-09-19T22:40:17:    QR Enabled: true
2025-09-19T22:40:17:    Phone Enabled: true
2025-09-19T22:40:17:    Session Persistence: true
2025-09-19T22:40:17:    Max Reconnect Attempts: 10
2025-09-19T22:40:17:    Default Phone: None
2025-09-19T22:40:17: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:40:17: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:40:17: 🔧 Developer Configuration initialized
2025-09-19T22:40:17: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301817510,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19896,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:40:17: 🔧 Developer Configuration initialized
2025-09-19T22:40:17: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:40:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:40:17: ⏰ 4-minute startup delay active
2025-09-19T22:40:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:40:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:40:17: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301817510,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19896,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:40:17: 📁 Loaded 0 sent messages from file
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:40:17: 📁 Loaded 0 customer histories from file
2025-09-19T22:40:17: 📝 Enhanced Logger initialized
2025-09-19T22:40:17: 📁 Loaded 0 message hashes from file
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:40:17: 📁 Loaded statistics from file
2025-09-19T22:40:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:40:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:40:17: 🧹 Lock file already cleaned up
2025-09-19T22:40:17: 🧹 Removed stale process lock
2025-09-19T22:40:17: 🔒 Process lock acquired (PID: 19896)
2025-09-19T22:40:17: 🔒 Process lock acquired (PID: 19896)
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19896
}
2025-09-19T22:40:17: ⏰ Starting 240 second startup grace period...
2025-09-19T22:40:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19896
}
2025-09-19T22:40:17: ⏰ Starting 240 second startup grace period...
2025-09-19T22:40:17: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301817510, processId: 19896 },
  timestamp: 1758301817569
}
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301817510, willExpireAt: 1758302057510 },
  timestamp: 1758301817569
}
2025-09-19T22:40:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:40:17: ⏰ Startup grace period: 240 seconds
2025-09-19T22:40:17: 📋 Message rules loaded: 8 types
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301817510, processId: 19896 },
  timestamp: 1758301817571
}
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301817510, willExpireAt: 1758302057510 },
  timestamp: 1758301817571
}
2025-09-19T22:40:17: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:40:17: ⏰ Startup grace period: 240 seconds
2025-09-19T22:40:17: 📋 Message rules loaded: 8 types
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 64,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:40:17: ℹ️ [10:40:17 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 65,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:40:17: ✅ Safety Manager initialized
2025-09-19T22:40:17: 📁 Loaded 0 sent messages from file
2025-09-19T22:40:17: 📁 Loaded 0 customer histories from file
2025-09-19T22:40:17: 📁 Loaded 0 message hashes from file
2025-09-19T22:40:17: 📁 Loaded statistics from file
2025-09-19T22:40:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:40:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:40:17: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:40:17: 🔄 Starting WhatsApp connection...
2025-09-19T22:40:17: 🔄 Initializing WhatsApp client...
2025-09-19T22:40:17: ✅ WhatsApp connection started
2025-09-19T22:40:17: 🔧 Initializing admin commands...
2025-09-19T22:40:17: 📨 Message handler attached to WhatsApp socket
2025-09-19T22:40:17: ✅ Admin commands system initialized
2025-09-19T22:40:17: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:40:17: 📞 Attempting to request pairing code...
2025-09-19T22:40:17: 💡 To use phone authentication:
2025-09-19T22:40:17:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:40:17:    2. Select "Phone Number Authentication"
2025-09-19T22:40:17:    3. Enter your phone number
2025-09-19T22:40:17:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:40:17: 🔄 Connecting to WhatsApp...
2025-09-19T22:40:20: ✅ WhatsApp connected successfully!
2025-09-19T22:40:20: 📱 Session established successfully
2025-09-19T22:40:20: 🔒 Session will be monitored for stability
2025-09-19T22:40:47: 💾 Data synced to files successfully
2025-09-19T22:41:17: 💾 Data synced to files successfully
2025-09-19T22:41:47: 💾 Data synced to files successfully
2025-09-19T22:42:17: 💾 Data synced to files successfully
2025-09-19T22:42:24: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-19T22:42:24: 📝 Loaded 12 template types
2025-09-19T22:42:24: 📝 Enhanced Logger initialized
2025-09-19T22:42:24: 🔧 WhatsApp Authentication Configuration:
2025-09-19T22:42:24:    Auth Mode: both
2025-09-19T22:42:24:    QR Enabled: true
2025-09-19T22:42:24:    Phone Enabled: true
2025-09-19T22:42:24:    Session Persistence: true
2025-09-19T22:42:24:    Max Reconnect Attempts: 10
2025-09-19T22:42:24:    Default Phone: None
2025-09-19T22:42:24: 🔒 Session validation enabled (check every 300s)
2025-09-19T22:42:24: 🔧 WhatsApp client initialized with auth mode: both
2025-09-19T22:42:24: 🔧 Developer Configuration initialized
2025-09-19T22:42:24: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:42:24: 🔧 Developer Configuration initialized
2025-09-19T22:42:24: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-19T22:42:24: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-19T22:42:24: ⏰ 4-minute startup delay active
2025-09-19T22:42:24: 🔒 Triple-layer duplicate prevention enabled
2025-09-19T22:42:24: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-19T22:42:24: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T22:42:24: 📁 Loaded 0 sent messages from file
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T22:42:24: 📁 Loaded 0 customer histories from file
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T22:42:24: 📁 Loaded 0 message hashes from file
2025-09-19T22:42:24: 🗑️ Deleted old log file: bot-2025-09-19T16-29-39-063Z.log
2025-09-19T22:42:24: 📝 Enhanced Logger initialized
2025-09-19T22:42:24: 🧹 Removed stale process lock
2025-09-19T22:42:24: 📁 Loaded statistics from file
2025-09-19T22:42:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:42:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:42:24: 🧹 Removed stale process lock
2025-09-19T22:42:24: 🔒 Process lock acquired (PID: 8720)
2025-09-19T22:42:24: 🔒 Process lock acquired (PID: 8720)
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-19T22:42:24: ⏰ Starting 240 second startup grace period...
2025-09-19T22:42:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-19T22:42:24: ⏰ Starting 240 second startup grace period...
2025-09-19T22:42:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758301944814
}
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758301944814
}
2025-09-19T22:42:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:42:24: ⏰ Startup grace period: 240 seconds
2025-09-19T22:42:24: 📋 Message rules loaded: 8 types
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758301944816
}
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758301944816
}
2025-09-19T22:42:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T22:42:24: ⏰ Startup grace period: 240 seconds
2025-09-19T22:42:24: 📋 Message rules loaded: 8 types
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 42,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:42:24: ℹ️ [10:42:24 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 44,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T22:42:24: ✅ Safety Manager initialized
2025-09-19T22:42:24: 📁 Loaded 0 sent messages from file
2025-09-19T22:42:24: 📁 Loaded 0 customer histories from file
2025-09-19T22:42:24: 📁 Loaded 0 message hashes from file
2025-09-19T22:42:24: 📁 Loaded statistics from file
2025-09-19T22:42:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:42:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T22:42:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T22:42:24: 🔄 Starting WhatsApp connection...
2025-09-19T22:42:24: 🔄 Initializing WhatsApp client...
2025-09-19T22:42:24: ✅ WhatsApp connection started
2025-09-19T22:42:24: 🔧 Initializing admin commands...
2025-09-19T22:42:24: 📨 Message handler attached to WhatsApp socket
2025-09-19T22:42:24: ✅ Admin commands system initialized
2025-09-19T22:42:24: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T22:42:24: 📞 Attempting to request pairing code...
2025-09-19T22:42:24: 💡 To use phone authentication:
2025-09-19T22:42:24:    1. Use the dashboard at http://localhost:3001
2025-09-19T22:42:24:    2. Select "Phone Number Authentication"
2025-09-19T22:42:24:    3. Enter your phone number
2025-09-19T22:42:24:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T22:42:24: 🔄 Connecting to WhatsApp...
2025-09-19T22:42:28: ✅ WhatsApp connected successfully!
2025-09-19T22:42:28: 📱 Session established successfully
2025-09-19T22:42:28: 🔒 Session will be monitored for stability
2025-09-19T22:42:52: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:42:52: {"level":30,"time":1758301972919,"pid":8720,"hostname":"SAURABH","msg":"Admin commands received message: \"STATUS\" from 917375938371@s.whatsapp.net"}
2025-09-19T22:42:52: {"level":30,"time":1758301972920,"pid":8720,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182, 917375938371, 919166758467, 916375623182"}
2025-09-19T22:42:52: {"level":30,"time":1758301972920,"pid":8720,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-19T22:42:52: {"level":30,"time":1758301972920,"pid":8720,"hostname":"SAURABH","msg":"Admin command received: STATUS from 917375938371@s.whatsapp.net"}
2025-09-19T22:42:52: 🔍 [917375938371] Starting comprehensive message safety check...
2025-09-19T22:42:52: 📋 [917375938371] Order: N/A, Type: N/A
2025-09-19T22:42:52: 📤 [917375938371] All safety checks passed - sending message...
2025-09-19T22:42:53: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-19T22:42:53: ✅ [917375938371] Message sent successfully (717ms)
2025-09-19T22:42:53: 📧 [917375938371] Message ID: 3EB099793A446E63B61910
2025-09-19T22:42:53: 🔍 [919166758467] Starting comprehensive message safety check...
2025-09-19T22:42:53: 📋 [919166758467] Order: N/A, Type: N/A
2025-09-19T22:42:53: 📤 [919166758467] All safety checks passed - sending message...
2025-09-19T22:42:54: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-19T22:42:54: ✅ [919166758467] Message sent successfully (748ms)
2025-09-19T22:42:54: 📧 [919166758467] Message ID: 3EB0F51850A201B2B299FD
2025-09-19T22:42:54: 🔍 [916375623182] Starting comprehensive message safety check...
2025-09-19T22:42:54: 📋 [916375623182] Order: N/A, Type: N/A
2025-09-19T22:42:54: 📤 [916375623182] All safety checks passed - sending message...
2025-09-19T22:42:54: 💾 Data synced to files successfully
2025-09-19T22:42:55: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-19T22:42:55: ✅ [916375623182] Message sent successfully (933ms)
2025-09-19T22:42:55: 📧 [916375623182] Message ID: 3EB0D88A4C2B02225B87C8
2025-09-19T22:43:24: 💾 Data synced to files successfully
2025-09-19T22:43:54: 💾 Data synced to files successfully
2025-09-19T22:44:24: 💾 Data synced to files successfully
2025-09-19T22:44:36: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:44:36: {"level":30,"time":1758302076459,"pid":8720,"hostname":"SAURABH","msg":"Admin commands received message: \"HELP\" from 917375938371@s.whatsapp.net"}
2025-09-19T22:44:36: {"level":30,"time":1758302076459,"pid":8720,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182, 917375938371, 919166758467, 916375623182"}
2025-09-19T22:44:36: {"level":30,"time":1758302076459,"pid":8720,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-19T22:44:36: {"level":30,"time":1758302076459,"pid":8720,"hostname":"SAURABH","msg":"Admin command received: HELP from 917375938371@s.whatsapp.net"}
2025-09-19T22:44:36: 🔍 [917375938371] Starting comprehensive message safety check...
2025-09-19T22:44:36: 📋 [917375938371] Order: N/A, Type: N/A
2025-09-19T22:44:36: 📤 [917375938371] All safety checks passed - sending message...
2025-09-19T22:44:37: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-19T22:44:37: ✅ [917375938371] Message sent successfully (708ms)
2025-09-19T22:44:37: 📧 [917375938371] Message ID: 3EB0228B738CD3C1336209
2025-09-19T22:44:37: 🔍 [919166758467] Starting comprehensive message safety check...
2025-09-19T22:44:37: 📋 [919166758467] Order: N/A, Type: N/A
2025-09-19T22:44:37: 📤 [919166758467] All safety checks passed - sending message...
2025-09-19T22:44:37: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-19T22:44:37: ✅ [919166758467] Message sent successfully (762ms)
2025-09-19T22:44:37: 📧 [919166758467] Message ID: 3EB0B77CAC881442A53E15
2025-09-19T22:44:37: 🔍 [916375623182] Starting comprehensive message safety check...
2025-09-19T22:44:37: 📋 [916375623182] Order: N/A, Type: N/A
2025-09-19T22:44:37: 📤 [916375623182] All safety checks passed - sending message...
2025-09-19T22:44:38: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-19T22:44:38: ✅ [916375623182] Message sent successfully (926ms)
2025-09-19T22:44:38: 📧 [916375623182] Message ID: 3EB049130F33FF86A40116
2025-09-19T22:44:54: 💾 Data synced to files successfully
2025-09-19T22:45:24: 💾 Data synced to files successfully
2025-09-19T22:45:37: 📨 Received message from: 917375938371@s.whatsapp.net
2025-09-19T22:45:37: {"level":30,"time":1758302137721,"pid":8720,"hostname":"SAURABH","msg":"Admin commands received message: \"LOGS\" from 917375938371@s.whatsapp.net"}
2025-09-19T22:45:37: {"level":30,"time":1758302137721,"pid":8720,"hostname":"SAURABH","msg":"Checking if sender 917375938371 is admin. Admin phones: 917375938371, 919166758467, 916375623182, 917375938371, 919166758467, 916375623182"}
2025-09-19T22:45:37: {"level":30,"time":1758302137721,"pid":8720,"hostname":"SAURABH","msg":"Admin phone match found: 917375938371"}
2025-09-19T22:45:37: {"level":30,"time":1758302137721,"pid":8720,"hostname":"SAURABH","msg":"Admin command received: LOGS from 917375938371@s.whatsapp.net"}
2025-09-19T22:45:37: 🔍 [917375938371] Starting comprehensive message safety check...
2025-09-19T22:45:37: 📋 [917375938371] Order: N/A, Type: N/A
2025-09-19T22:45:37: 📤 [917375938371] All safety checks passed - sending message...
2025-09-19T22:45:38: ✅ Message sent to 917375938371@s.whatsapp.net
2025-09-19T22:45:38: ✅ [917375938371] Message sent successfully (887ms)
2025-09-19T22:45:38: 📧 [917375938371] Message ID: 3EB0CD1DBF6F6EC6E6748D
2025-09-19T22:45:38: 🔍 [919166758467] Starting comprehensive message safety check...
2025-09-19T22:45:38: 📋 [919166758467] Order: N/A, Type: N/A
2025-09-19T22:45:38: 📤 [919166758467] All safety checks passed - sending message...
2025-09-19T22:45:39: ✅ Message sent to 919166758467@s.whatsapp.net
2025-09-19T22:45:39: ✅ [919166758467] Message sent successfully (793ms)
2025-09-19T22:45:39: 📧 [919166758467] Message ID: 3EB03CEBDCED2BA416F1C9
2025-09-19T22:45:39: 🔍 [916375623182] Starting comprehensive message safety check...
2025-09-19T22:45:39: 📋 [916375623182] Order: N/A, Type: N/A
2025-09-19T22:45:39: 📤 [916375623182] All safety checks passed - sending message...
2025-09-19T22:45:40: ✅ Message sent to 916375623182@s.whatsapp.net
2025-09-19T22:45:40: ✅ [916375623182] Message sent successfully (957ms)
2025-09-19T22:45:40: 📧 [916375623182] Message ID: 3EB047321DBC5197EDDD96
2025-09-19T22:45:54: 💾 Data synced to files successfully
2025-09-19T22:46:24: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:46:24: ✅ Startup grace period ended - message sending now allowed
2025-09-19T22:46:24: ℹ️ [10:46:24 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758302184825
}
2025-09-19T22:46:24: ℹ️ [10:46:24 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758302184822
}
2025-09-19T22:46:24: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:46:24: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T22:46:24: 💾 Data synced to files successfully
2025-09-19T22:46:54: 💾 Data synced to files successfully
2025-09-19T22:47:24: 💾 Data synced to files successfully
2025-09-19T22:47:54: 💾 Data synced to files successfully
2025-09-19T22:48:24: 💾 Data synced to files successfully
2025-09-19T22:48:54: 💾 Data synced to files successfully
2025-09-19T22:49:24: 💾 Data synced to files successfully
2025-09-19T22:49:54: 💾 Data synced to files successfully
2025-09-19T22:50:24: 💾 Data synced to files successfully
2025-09-19T22:50:54: 💾 Data synced to files successfully
2025-09-19T22:51:24: 💾 Data synced to files successfully
2025-09-19T22:51:54: 💾 Data synced to files successfully
2025-09-19T22:52:24: 💾 Data synced to files successfully
2025-09-19T22:52:54: 💾 Data synced to files successfully
2025-09-19T22:53:24: 💾 Data synced to files successfully
2025-09-19T22:53:54: 💾 Data synced to files successfully
2025-09-19T22:54:24: 💾 Data synced to files successfully
2025-09-19T22:54:54: 💾 Data synced to files successfully
2025-09-19T22:55:24: 💾 Data synced to files successfully
2025-09-19T22:55:54: 💾 Data synced to files successfully
2025-09-19T22:56:24: 💾 Data synced to files successfully
2025-09-19T22:56:54: 💾 Data synced to files successfully
2025-09-19T22:57:24: 💾 Data synced to files successfully
2025-09-19T22:57:54: 💾 Data synced to files successfully
2025-09-19T22:58:24: 💾 Data synced to files successfully
2025-09-19T22:58:55: 💾 Data synced to files successfully
2025-09-19T22:59:25: 💾 Data synced to files successfully
2025-09-19T22:59:55: 💾 Data synced to files successfully
2025-09-19T23:00:25: 💾 Data synced to files successfully
2025-09-19T23:00:55: 💾 Data synced to files successfully
2025-09-19T23:01:25: 💾 Data synced to files successfully
2025-09-19T23:01:55: 💾 Data synced to files successfully
2025-09-19T23:02:25: 💾 Data synced to files successfully
2025-09-19T23:02:55: 💾 Data synced to files successfully
2025-09-19T23:03:25: 💾 Data synced to files successfully
2025-09-19T23:03:55: 💾 Data synced to files successfully
2025-09-19T23:04:25: 💾 Data synced to files successfully
2025-09-19T23:04:55: 💾 Data synced to files successfully
2025-09-19T23:05:25: 💾 Data synced to files successfully
2025-09-19T23:05:55: 💾 Data synced to files successfully
2025-09-19T23:06:25: 💾 Data synced to files successfully
2025-09-19T23:06:55: 💾 Data synced to files successfully
2025-09-19T23:07:25: 💾 Data synced to files successfully
2025-09-19T23:07:55: 💾 Data synced to files successfully
2025-09-19T23:08:25: 💾 Data synced to files successfully
2025-09-19T23:08:55: 💾 Data synced to files successfully
2025-09-19T23:09:25: 💾 Data synced to files successfully
2025-09-19T23:09:55: 💾 Data synced to files successfully
2025-09-19T23:10:25: 💾 Data synced to files successfully
2025-09-19T23:10:55: 💾 Data synced to files successfully
2025-09-19T23:11:25: 💾 Data synced to files successfully
2025-09-19T23:11:55: 💾 Data synced to files successfully
2025-09-19T23:12:25: 💾 Data synced to files successfully
2025-09-19T23:12:55: 💾 Data synced to files successfully
2025-09-19T23:15:23: 🔌 Connection closed. Reason: undefined
2025-09-19T23:15:23: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T23:15:23: 💾 Data synced to files successfully
2025-09-19T23:15:24: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T23:15:24: 🧹 Removed stale process lock
2025-09-19T23:15:24: 🔒 Process lock acquired (PID: 8720)
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-19T23:15:24: ⏰ Starting 240 second startup grace period...
2025-09-19T23:15:24: 🚫 All message sending is BLOCKED during grace period
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758303924271
}
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758303924271
}
2025-09-19T23:15:24: 🛡️ Enhanced Safety Manager initialized
2025-09-19T23:15:24: ⏰ Startup grace period: 240 seconds
2025-09-19T23:15:24: 📋 Message rules loaded: 8 types
2025-09-19T23:15:24: ℹ️ [11:15:24 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 1979498,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T23:15:24: ✅ Safety Manager initialized
2025-09-19T23:15:24: 📁 Loaded 0 sent messages from file
2025-09-19T23:15:24: 📁 Loaded 0 customer histories from file
2025-09-19T23:15:24: 📁 Loaded 0 message hashes from file
2025-09-19T23:15:24: 📁 Loaded statistics from file
2025-09-19T23:15:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T23:15:24: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T23:15:24: ✅ Duplicate Prevention Manager initialized
2025-09-19T23:15:24: 🔄 Starting WhatsApp connection...
2025-09-19T23:15:24: 🔄 Initializing WhatsApp client...
2025-09-19T23:15:24: ✅ WhatsApp connection started
2025-09-19T23:15:24: 🔧 Initializing admin commands...
2025-09-19T23:15:24: 📨 Message handler attached to WhatsApp socket
2025-09-19T23:15:24: ✅ Admin commands system initialized
2025-09-19T23:15:24: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T23:15:24: 📞 Attempting to request pairing code...
2025-09-19T23:15:24: 💡 To use phone authentication:
2025-09-19T23:15:24:    1. Use the dashboard at http://localhost:3001
2025-09-19T23:15:24:    2. Select "Phone Number Authentication"
2025-09-19T23:15:24:    3. Enter your phone number
2025-09-19T23:15:24:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T23:15:24: 🔄 Connecting to WhatsApp...
2025-09-19T23:15:25: ✅ WhatsApp connected successfully!
2025-09-19T23:15:25: 📱 Session established successfully
2025-09-19T23:15:25: 🔒 Session will be monitored for stability
2025-09-19T23:15:53: 💾 Data synced to files successfully
2025-09-19T23:16:23: 💾 Data synced to files successfully
2025-09-19T23:16:53: 💾 Data synced to files successfully
2025-09-19T23:17:23: 💾 Data synced to files successfully
2025-09-19T23:17:53: 💾 Data synced to files successfully
2025-09-19T23:18:23: 💾 Data synced to files successfully
2025-09-19T23:35:38: 🔌 Connection closed. Reason: undefined
2025-09-19T23:35:38: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T23:35:38: ✅ Startup grace period ended - message sending now allowed
2025-09-19T23:35:38: 💾 Data synced to files successfully
2025-09-19T23:35:38: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T23:35:38: ℹ️ [11:35:38 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758305138962
}
2025-09-19T23:35:39: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T23:35:39: 🧹 Removed stale process lock
2025-09-19T23:35:39: 🔒 Process lock acquired (PID: 8720)
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-19T23:35:39: ⏰ Starting 240 second startup grace period...
2025-09-19T23:35:39: 🚫 All message sending is BLOCKED during grace period
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758305139967
}
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758305139967
}
2025-09-19T23:35:39: 🛡️ Enhanced Safety Manager initialized
2025-09-19T23:35:39: ⏰ Startup grace period: 240 seconds
2025-09-19T23:35:39: 📋 Message rules loaded: 8 types
2025-09-19T23:35:39: ℹ️ [11:35:39 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 3195195,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T23:35:39: ✅ Safety Manager initialized
2025-09-19T23:35:39: 📁 Loaded 0 sent messages from file
2025-09-19T23:35:39: 📁 Loaded 0 customer histories from file
2025-09-19T23:35:39: 📁 Loaded 0 message hashes from file
2025-09-19T23:35:39: 📁 Loaded statistics from file
2025-09-19T23:35:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T23:35:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T23:35:39: ✅ Duplicate Prevention Manager initialized
2025-09-19T23:35:39: 🔄 Starting WhatsApp connection...
2025-09-19T23:35:39: 🔄 Initializing WhatsApp client...
2025-09-19T23:35:39: ✅ WhatsApp connection started
2025-09-19T23:35:39: 🔧 Initializing admin commands...
2025-09-19T23:35:39: 📨 Message handler attached to WhatsApp socket
2025-09-19T23:35:39: ✅ Admin commands system initialized
2025-09-19T23:35:39: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T23:35:39: 📞 Attempting to request pairing code...
2025-09-19T23:35:39: 💡 To use phone authentication:
2025-09-19T23:35:39:    1. Use the dashboard at http://localhost:3001
2025-09-19T23:35:39:    2. Select "Phone Number Authentication"
2025-09-19T23:35:39:    3. Enter your phone number
2025-09-19T23:35:39:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T23:35:39: 🔄 Connecting to WhatsApp...
2025-09-19T23:35:41: ✅ WhatsApp connected successfully!
2025-09-19T23:35:41: 📱 Session established successfully
2025-09-19T23:35:41: 🔒 Session will be monitored for stability
2025-09-19T23:36:08: 💾 Data synced to files successfully
2025-09-19T23:36:38: 💾 Data synced to files successfully
2025-09-19T23:37:08: 💾 Data synced to files successfully
2025-09-19T23:37:39: 💾 Data synced to files successfully
2025-09-19T23:38:09: 💾 Data synced to files successfully
2025-09-19T23:38:39: 💾 Data synced to files successfully
2025-09-19T23:43:08: 🔌 Connection closed. Reason: undefined
2025-09-19T23:43:08: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-19T23:43:08: ✅ Startup grace period ended - message sending now allowed
2025-09-19T23:43:08: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-19T23:43:08: 💾 Data synced to files successfully
2025-09-19T23:43:08: ℹ️ [11:43:08 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758305588629
}
2025-09-19T23:43:09: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-19T23:43:09: 🧹 Removed stale process lock
2025-09-19T23:43:09: 🔒 Process lock acquired (PID: 8720)
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-19T23:43:09: ⏰ Starting 240 second startup grace period...
2025-09-19T23:43:09: 🚫 All message sending is BLOCKED during grace period
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758305589646
}
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758305589646
}
2025-09-19T23:43:09: 🛡️ Enhanced Safety Manager initialized
2025-09-19T23:43:09: ⏰ Startup grace period: 240 seconds
2025-09-19T23:43:09: 📋 Message rules loaded: 8 types
2025-09-19T23:43:09: ℹ️ [11:43:09 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 3644871,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-19T23:43:09: ✅ Safety Manager initialized
2025-09-19T23:43:09: 📁 Loaded 0 sent messages from file
2025-09-19T23:43:09: 📁 Loaded 0 customer histories from file
2025-09-19T23:43:09: 📁 Loaded 0 message hashes from file
2025-09-19T23:43:09: 📁 Loaded statistics from file
2025-09-19T23:43:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T23:43:09: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-19T23:43:09: ✅ Duplicate Prevention Manager initialized
2025-09-19T23:43:09: 🔄 Starting WhatsApp connection...
2025-09-19T23:43:09: 🔄 Initializing WhatsApp client...
2025-09-19T23:43:09: ✅ WhatsApp connection started
2025-09-19T23:43:09: 🔧 Initializing admin commands...
2025-09-19T23:43:09: 📨 Message handler attached to WhatsApp socket
2025-09-19T23:43:09: ✅ Admin commands system initialized
2025-09-19T23:43:09: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-19T23:43:09: 📞 Attempting to request pairing code...
2025-09-19T23:43:09: 💡 To use phone authentication:
2025-09-19T23:43:09:    1. Use the dashboard at http://localhost:3001
2025-09-19T23:43:09:    2. Select "Phone Number Authentication"
2025-09-19T23:43:09:    3. Enter your phone number
2025-09-19T23:43:09:    4. Get the pairing code and enter it in WhatsApp
2025-09-19T23:43:09: 🔄 Connecting to WhatsApp...
2025-09-19T23:43:11: ✅ WhatsApp connected successfully!
2025-09-19T23:43:11: 📱 Session established successfully
2025-09-19T23:43:11: 🔒 Session will be monitored for stability
2025-09-19T23:43:38: 💾 Data synced to files successfully
2025-09-19T23:44:08: 💾 Data synced to files successfully
2025-09-19T23:44:38: 💾 Data synced to files successfully
2025-09-19T23:45:08: 💾 Data synced to files successfully
2025-09-19T23:45:38: 💾 Data synced to files successfully
2025-09-19T23:46:08: 💾 Data synced to files successfully
2025-09-20T00:03:40: 🔌 Connection closed. Reason: undefined
2025-09-20T00:03:40: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-20T00:03:40: ✅ Startup grace period ended - message sending now allowed
2025-09-20T00:03:40: 💾 Data synced to files successfully
2025-09-20T00:03:40: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T00:03:40: ℹ️ [12:03:40 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758306820398
}
2025-09-20T00:03:41: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T00:03:41: 🧹 Removed stale process lock
2025-09-20T00:03:41: 🔒 Process lock acquired (PID: 8720)
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T00:03:41: ⏰ Starting 240 second startup grace period...
2025-09-20T00:03:41: 🚫 All message sending is BLOCKED during grace period
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758306821396
}
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758306821396
}
2025-09-20T00:03:41: 🛡️ Enhanced Safety Manager initialized
2025-09-20T00:03:41: ⏰ Startup grace period: 240 seconds
2025-09-20T00:03:41: 📋 Message rules loaded: 8 types
2025-09-20T00:03:41: ℹ️ [12:03:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 4876622,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T00:03:41: ✅ Safety Manager initialized
2025-09-20T00:03:41: 📁 Loaded 0 sent messages from file
2025-09-20T00:03:41: 📁 Loaded 0 customer histories from file
2025-09-20T00:03:41: 📁 Loaded 0 message hashes from file
2025-09-20T00:03:41: 📁 Loaded statistics from file
2025-09-20T00:03:41: ✅ Duplicate Prevention Manager initialized
2025-09-20T00:03:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T00:03:41: ✅ Duplicate Prevention Manager initialized
2025-09-20T00:03:41: 🔄 Starting WhatsApp connection...
2025-09-20T00:03:41: 🔄 Initializing WhatsApp client...
2025-09-20T00:03:41: ✅ WhatsApp connection started
2025-09-20T00:03:41: 🔧 Initializing admin commands...
2025-09-20T00:03:41: 📨 Message handler attached to WhatsApp socket
2025-09-20T00:03:41: ✅ Admin commands system initialized
2025-09-20T00:03:41: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T00:03:41: 📞 Attempting to request pairing code...
2025-09-20T00:03:41: 💡 To use phone authentication:
2025-09-20T00:03:41:    1. Use the dashboard at http://localhost:3001
2025-09-20T00:03:41:    2. Select "Phone Number Authentication"
2025-09-20T00:03:41:    3. Enter your phone number
2025-09-20T00:03:41:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T00:03:41: 🔄 Connecting to WhatsApp...
2025-09-20T00:03:43: ✅ WhatsApp connected successfully!
2025-09-20T00:03:43: 📱 Session established successfully
2025-09-20T00:03:43: 🔒 Session will be monitored for stability
2025-09-20T00:04:10: 💾 Data synced to files successfully
2025-09-20T00:04:40: 💾 Data synced to files successfully
2025-09-20T00:05:10: 💾 Data synced to files successfully
2025-09-20T00:05:40: 💾 Data synced to files successfully
2025-09-20T00:06:10: 💾 Data synced to files successfully
2025-09-20T00:06:40: 💾 Data synced to files successfully
2025-09-20T00:07:10: 💾 Data synced to files successfully
2025-09-20T00:07:40: 💾 Data synced to files successfully
2025-09-20T00:07:41: ✅ Startup grace period ended - message sending now allowed
2025-09-20T00:07:41: ℹ️ [12:07:41 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758307061399
}
2025-09-20T00:07:41: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T00:08:10: 💾 Data synced to files successfully
2025-09-20T00:08:40: 💾 Data synced to files successfully
2025-09-20T00:09:10: 💾 Data synced to files successfully
2025-09-20T00:09:40: 💾 Data synced to files successfully
2025-09-20T00:10:10: 💾 Data synced to files successfully
2025-09-20T00:10:40: 💾 Data synced to files successfully
2025-09-20T00:11:10: 💾 Data synced to files successfully
2025-09-20T00:11:40: 💾 Data synced to files successfully
2025-09-20T00:12:10: 💾 Data synced to files successfully
2025-09-20T00:12:40: 💾 Data synced to files successfully
2025-09-20T00:13:10: 💾 Data synced to files successfully
2025-09-20T00:13:40: 💾 Data synced to files successfully
2025-09-20T00:14:10: 💾 Data synced to files successfully
2025-09-20T00:14:40: 💾 Data synced to files successfully
2025-09-20T00:15:10: 💾 Data synced to files successfully
2025-09-20T00:15:40: 💾 Data synced to files successfully
2025-09-20T00:16:10: 💾 Data synced to files successfully
2025-09-20T00:16:40: 💾 Data synced to files successfully
2025-09-20T00:17:10: 💾 Data synced to files successfully
2025-09-20T00:17:40: 💾 Data synced to files successfully
2025-09-20T00:18:10: 💾 Data synced to files successfully
2025-09-20T00:18:40: 💾 Data synced to files successfully
2025-09-20T00:19:10: 💾 Data synced to files successfully
2025-09-20T00:19:40: 💾 Data synced to files successfully
2025-09-20T00:20:10: 💾 Data synced to files successfully
2025-09-20T00:20:40: 💾 Data synced to files successfully
2025-09-20T00:21:10: 💾 Data synced to files successfully
2025-09-20T00:21:40: 💾 Data synced to files successfully
2025-09-20T00:22:10: 💾 Data synced to files successfully
2025-09-20T00:22:40: 💾 Data synced to files successfully
2025-09-20T00:23:10: 💾 Data synced to files successfully
2025-09-20T00:23:40: 💾 Data synced to files successfully
2025-09-20T00:24:10: 💾 Data synced to files successfully
2025-09-20T00:24:40: 💾 Data synced to files successfully
2025-09-20T00:25:10: 💾 Data synced to files successfully
2025-09-20T00:25:40: 💾 Data synced to files successfully
2025-09-20T00:26:10: 💾 Data synced to files successfully
2025-09-20T00:26:40: 💾 Data synced to files successfully
2025-09-20T00:27:10: 💾 Data synced to files successfully
2025-09-20T00:27:40: 💾 Data synced to files successfully
2025-09-20T00:28:10: 💾 Data synced to files successfully
2025-09-20T00:28:40: 💾 Data synced to files successfully
2025-09-20T00:29:10: 💾 Data synced to files successfully
2025-09-20T00:29:40: 💾 Data synced to files successfully
2025-09-20T00:30:10: 💾 Data synced to files successfully
2025-09-20T00:30:40: 💾 Data synced to files successfully
2025-09-20T00:31:10: 💾 Data synced to files successfully
2025-09-20T00:31:40: 💾 Data synced to files successfully
2025-09-20T00:32:10: 💾 Data synced to files successfully
2025-09-20T00:32:40: 💾 Data synced to files successfully
2025-09-20T00:33:10: 💾 Data synced to files successfully
2025-09-20T00:33:40: 💾 Data synced to files successfully
2025-09-20T00:34:10: 💾 Data synced to files successfully
2025-09-20T00:34:40: 💾 Data synced to files successfully
2025-09-20T00:35:10: 💾 Data synced to files successfully
2025-09-20T00:35:40: 💾 Data synced to files successfully
2025-09-20T00:36:10: 💾 Data synced to files successfully
2025-09-20T00:36:40: 💾 Data synced to files successfully
2025-09-20T00:37:10: 💾 Data synced to files successfully
2025-09-20T00:37:40: 💾 Data synced to files successfully
2025-09-20T00:38:10: 💾 Data synced to files successfully
2025-09-20T00:38:40: 💾 Data synced to files successfully
2025-09-20T00:39:10: 💾 Data synced to files successfully
2025-09-20T00:39:40: 💾 Data synced to files successfully
2025-09-20T00:40:10: 💾 Data synced to files successfully
2025-09-20T00:40:40: 💾 Data synced to files successfully
2025-09-20T00:41:10: 💾 Data synced to files successfully
2025-09-20T00:41:40: 💾 Data synced to files successfully
2025-09-20T00:42:10: 💾 Data synced to files successfully
2025-09-20T00:42:40: 💾 Data synced to files successfully
2025-09-20T00:43:10: 💾 Data synced to files successfully
2025-09-20T00:43:40: 💾 Data synced to files successfully
2025-09-20T00:44:10: 💾 Data synced to files successfully
2025-09-20T00:44:40: 💾 Data synced to files successfully
2025-09-20T00:45:10: 💾 Data synced to files successfully
2025-09-20T00:45:40: 💾 Data synced to files successfully
2025-09-20T00:46:10: 💾 Data synced to files successfully
2025-09-20T00:46:40: 💾 Data synced to files successfully
2025-09-20T00:47:10: 💾 Data synced to files successfully
2025-09-20T00:47:41: 💾 Data synced to files successfully
2025-09-20T00:48:11: 💾 Data synced to files successfully
2025-09-20T00:48:41: 💾 Data synced to files successfully
2025-09-20T00:49:11: 💾 Data synced to files successfully
2025-09-20T00:49:41: 💾 Data synced to files successfully
2025-09-20T00:50:11: 💾 Data synced to files successfully
2025-09-20T00:50:41: 💾 Data synced to files successfully
2025-09-20T00:51:11: 💾 Data synced to files successfully
2025-09-20T00:51:41: 💾 Data synced to files successfully
2025-09-20T00:52:11: 💾 Data synced to files successfully
2025-09-20T00:52:41: 💾 Data synced to files successfully
2025-09-20T00:53:11: 💾 Data synced to files successfully
2025-09-20T00:53:41: 💾 Data synced to files successfully
2025-09-20T00:54:11: 💾 Data synced to files successfully
2025-09-20T00:54:41: 💾 Data synced to files successfully
2025-09-20T00:55:11: 💾 Data synced to files successfully
2025-09-20T00:55:41: 💾 Data synced to files successfully
2025-09-20T00:56:11: 💾 Data synced to files successfully
2025-09-20T00:56:41: 💾 Data synced to files successfully
2025-09-20T00:57:11: 💾 Data synced to files successfully
2025-09-20T00:57:41: 💾 Data synced to files successfully
2025-09-20T00:58:11: 💾 Data synced to files successfully
2025-09-20T00:58:41: 💾 Data synced to files successfully
2025-09-20T00:59:11: 💾 Data synced to files successfully
2025-09-20T00:59:41: 💾 Data synced to files successfully
2025-09-20T01:00:11: 💾 Data synced to files successfully
2025-09-20T01:00:32: 🔌 Connection closed. Reason: undefined
2025-09-20T01:00:32: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-20T01:00:32: {"level":50,"time":1758310232891,"pid":8720,"hostname":"SAURABH","msg":"error in sending keep alive"}
2025-09-20T01:00:33: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:00:33: 🧹 Removed stale process lock
2025-09-20T01:00:33: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:00:33: ⏰ Starting 240 second startup grace period...
2025-09-20T01:00:33: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758310233945
}
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758310233945
}
2025-09-20T01:00:33: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:00:33: ⏰ Startup grace period: 240 seconds
2025-09-20T01:00:33: 📋 Message rules loaded: 8 types
2025-09-20T01:00:33: ℹ️ [1:00:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 8289172,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:00:33: ✅ Safety Manager initialized
2025-09-20T01:00:33: 📁 Loaded 0 sent messages from file
2025-09-20T01:00:33: 📁 Loaded 0 customer histories from file
2025-09-20T01:00:33: 📁 Loaded 0 message hashes from file
2025-09-20T01:00:33: 📁 Loaded statistics from file
2025-09-20T01:00:33: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:00:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:00:33: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:00:33: 🔄 Starting WhatsApp connection...
2025-09-20T01:00:33: 🔄 Initializing WhatsApp client...
2025-09-20T01:00:33: ✅ WhatsApp connection started
2025-09-20T01:00:33: 🔧 Initializing admin commands...
2025-09-20T01:00:33: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:00:33: ✅ Admin commands system initialized
2025-09-20T01:00:33: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:00:33: 📞 Attempting to request pairing code...
2025-09-20T01:00:33: 💡 To use phone authentication:
2025-09-20T01:00:33:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:00:33:    2. Select "Phone Number Authentication"
2025-09-20T01:00:33:    3. Enter your phone number
2025-09-20T01:00:33:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:00:33: 🔄 Connecting to WhatsApp...
2025-09-20T01:00:41: 💾 Data synced to files successfully
2025-09-20T01:00:45: 🔌 Connection closed. Reason: undefined
2025-09-20T01:00:45: 🔄 Reconnecting in 2s... (Attempt 2/10)
2025-09-20T01:00:47: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:00:47: 🧹 Removed stale process lock
2025-09-20T01:00:47: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:00:47: ⏰ Starting 240 second startup grace period...
2025-09-20T01:00:47: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758310247077
}
2025-09-20T01:00:47: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:00:47: ⏰ Startup grace period: 240 seconds
2025-09-20T01:00:47: 📋 Message rules loaded: 8 types
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758310247077
}
2025-09-20T01:00:47: ℹ️ [1:00:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 8302306,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:00:47: ✅ Safety Manager initialized
2025-09-20T01:00:47: 📁 Loaded 0 sent messages from file
2025-09-20T01:00:47: 📁 Loaded 0 customer histories from file
2025-09-20T01:00:47: 📁 Loaded 0 message hashes from file
2025-09-20T01:00:47: 📁 Loaded statistics from file
2025-09-20T01:00:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:00:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:00:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:00:47: 🔄 Starting WhatsApp connection...
2025-09-20T01:00:47: 🔄 Initializing WhatsApp client...
2025-09-20T01:00:47: ✅ WhatsApp connection started
2025-09-20T01:00:47: 🔧 Initializing admin commands...
2025-09-20T01:00:47: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:00:47: ✅ Admin commands system initialized
2025-09-20T01:00:47: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:00:47: 📞 Attempting to request pairing code...
2025-09-20T01:00:47: 💡 To use phone authentication:
2025-09-20T01:00:47:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:00:47:    2. Select "Phone Number Authentication"
2025-09-20T01:00:47:    3. Enter your phone number
2025-09-20T01:00:47:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:00:47: 🔄 Connecting to WhatsApp...
2025-09-20T01:00:47: 🔌 Connection closed. Reason: undefined
2025-09-20T01:00:47: 🔄 Reconnecting in 4s... (Attempt 3/10)
2025-09-20T01:00:51: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:00:51: 🧹 Removed stale process lock
2025-09-20T01:00:51: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:00:51: ⏰ Starting 240 second startup grace period...
2025-09-20T01:00:51: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758310251127
}
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758310251128
}
2025-09-20T01:00:51: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:00:51: ⏰ Startup grace period: 240 seconds
2025-09-20T01:00:51: 📋 Message rules loaded: 8 types
2025-09-20T01:00:51: ℹ️ [1:00:51 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 8306354,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:00:51: ✅ Safety Manager initialized
2025-09-20T01:00:51: 📁 Loaded 0 sent messages from file
2025-09-20T01:00:51: 📁 Loaded 0 customer histories from file
2025-09-20T01:00:51: 📁 Loaded 0 message hashes from file
2025-09-20T01:00:51: 📁 Loaded statistics from file
2025-09-20T01:00:51: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:00:51: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:00:51: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:00:51: 🔄 Starting WhatsApp connection...
2025-09-20T01:00:51: 🔄 Initializing WhatsApp client...
2025-09-20T01:00:51: ✅ WhatsApp connection started
2025-09-20T01:00:51: 🔧 Initializing admin commands...
2025-09-20T01:00:51: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:00:51: ✅ Admin commands system initialized
2025-09-20T01:00:51: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:00:51: 📞 Attempting to request pairing code...
2025-09-20T01:00:51: 💡 To use phone authentication:
2025-09-20T01:00:51:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:00:51:    2. Select "Phone Number Authentication"
2025-09-20T01:00:51:    3. Enter your phone number
2025-09-20T01:00:51:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:00:51: 🔄 Connecting to WhatsApp...
2025-09-20T01:01:02: 🔌 Connection closed. Reason: undefined
2025-09-20T01:01:02: 🔄 Reconnecting in 8s... (Attempt 4/10)
2025-09-20T01:01:10: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:01:10: 🧹 Removed stale process lock
2025-09-20T01:01:10: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:01:10: ⏰ Starting 240 second startup grace period...
2025-09-20T01:01:10: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758310270231
}
2025-09-20T01:01:10: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:01:10: ⏰ Startup grace period: 240 seconds
2025-09-20T01:01:10: 📋 Message rules loaded: 8 types
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758310270231
}
2025-09-20T01:01:10: ℹ️ [1:01:10 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 8325458,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:01:10: ✅ Safety Manager initialized
2025-09-20T01:01:10: 📁 Loaded 0 sent messages from file
2025-09-20T01:01:10: 📁 Loaded 0 customer histories from file
2025-09-20T01:01:10: 📁 Loaded 0 message hashes from file
2025-09-20T01:01:10: 📁 Loaded statistics from file
2025-09-20T01:01:10: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:01:10: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:01:10: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:01:10: 🔄 Starting WhatsApp connection...
2025-09-20T01:01:10: 🔄 Initializing WhatsApp client...
2025-09-20T01:01:10: ✅ WhatsApp connection started
2025-09-20T01:01:10: 🔧 Initializing admin commands...
2025-09-20T01:01:10: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:01:10: ✅ Admin commands system initialized
2025-09-20T01:01:10: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:01:10: 📞 Attempting to request pairing code...
2025-09-20T01:01:10: 💡 To use phone authentication:
2025-09-20T01:01:10:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:01:10:    2. Select "Phone Number Authentication"
2025-09-20T01:01:10:    3. Enter your phone number
2025-09-20T01:01:10:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:01:10: 🔄 Connecting to WhatsApp...
2025-09-20T01:01:11: 💾 Data synced to files successfully
2025-09-20T01:01:17: 🔌 Connection closed. Reason: undefined
2025-09-20T01:01:17: 🔄 Reconnecting in 16s... (Attempt 5/10)
2025-09-20T01:01:33: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:01:33: 🧹 Removed stale process lock
2025-09-20T01:01:33: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:01:33: ⏰ Starting 240 second startup grace period...
2025-09-20T01:01:33: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758310293342
}
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758310293343
}
2025-09-20T01:01:33: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:01:33: ⏰ Startup grace period: 240 seconds
2025-09-20T01:01:33: 📋 Message rules loaded: 8 types
2025-09-20T01:01:33: ℹ️ [1:01:33 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 8348569,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:01:33: ✅ Safety Manager initialized
2025-09-20T01:01:33: 📁 Loaded 0 sent messages from file
2025-09-20T01:01:33: 📁 Loaded 0 customer histories from file
2025-09-20T01:01:33: 📁 Loaded 0 message hashes from file
2025-09-20T01:01:33: 📁 Loaded statistics from file
2025-09-20T01:01:33: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:01:33: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:01:33: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:01:33: 🔄 Starting WhatsApp connection...
2025-09-20T01:01:33: 🔄 Initializing WhatsApp client...
2025-09-20T01:01:33: ✅ WhatsApp connection started
2025-09-20T01:01:33: 🔧 Initializing admin commands...
2025-09-20T01:01:33: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:01:33: ✅ Admin commands system initialized
2025-09-20T01:01:33: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:01:33: 📞 Attempting to request pairing code...
2025-09-20T01:01:33: 💡 To use phone authentication:
2025-09-20T01:01:33:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:01:33:    2. Select "Phone Number Authentication"
2025-09-20T01:01:33:    3. Enter your phone number
2025-09-20T01:01:33:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:01:33: 🔄 Connecting to WhatsApp...
2025-09-20T01:01:41: 💾 Data synced to files successfully
2025-09-20T01:01:44: 🔌 Connection closed. Reason: undefined
2025-09-20T01:01:44: 🔄 Reconnecting in 30s... (Attempt 6/10)
2025-09-20T01:02:11: 💾 Data synced to files successfully
2025-09-20T01:02:14: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:02:14: 🧹 Removed stale process lock
2025-09-20T01:02:14: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:02:14: ⏰ Starting 240 second startup grace period...
2025-09-20T01:02:14: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758310334470
}
2025-09-20T01:02:14: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:02:14: ⏰ Startup grace period: 240 seconds
2025-09-20T01:02:14: 📋 Message rules loaded: 8 types
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758310334469
}
2025-09-20T01:02:14: ℹ️ [1:02:14 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 8389696,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:02:14: ✅ Safety Manager initialized
2025-09-20T01:02:14: 📁 Loaded 0 sent messages from file
2025-09-20T01:02:14: 📁 Loaded 0 customer histories from file
2025-09-20T01:02:14: 📁 Loaded 0 message hashes from file
2025-09-20T01:02:14: 📁 Loaded statistics from file
2025-09-20T01:02:14: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:02:14: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:02:14: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:02:14: 🔄 Starting WhatsApp connection...
2025-09-20T01:02:14: 🔄 Initializing WhatsApp client...
2025-09-20T01:02:14: ✅ WhatsApp connection started
2025-09-20T01:02:14: 🔧 Initializing admin commands...
2025-09-20T01:02:14: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:02:14: ✅ Admin commands system initialized
2025-09-20T01:02:14: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:02:14: 📞 Attempting to request pairing code...
2025-09-20T01:02:14: 💡 To use phone authentication:
2025-09-20T01:02:14:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:02:14:    2. Select "Phone Number Authentication"
2025-09-20T01:02:14:    3. Enter your phone number
2025-09-20T01:02:14:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:02:14: 🔄 Connecting to WhatsApp...
2025-09-20T01:02:28: ✅ WhatsApp connected successfully!
2025-09-20T01:02:28: 📱 Session established successfully
2025-09-20T01:02:28: 🔒 Session will be monitored for stability
2025-09-20T01:02:41: 💾 Data synced to files successfully
2025-09-20T01:03:11: 💾 Data synced to files successfully
2025-09-20T01:03:41: 💾 Data synced to files successfully
2025-09-20T01:04:11: 💾 Data synced to files successfully
2025-09-20T01:04:33: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:04:33: ℹ️ [1:04:33 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758310473962
}
2025-09-20T01:04:33: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:04:41: 💾 Data synced to files successfully
2025-09-20T01:04:47: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:04:47: ℹ️ [1:04:47 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758310487088
}
2025-09-20T01:04:47: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:04:51: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:04:51: ℹ️ [1:04:51 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758310491136
}
2025-09-20T01:04:51: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:05:10: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:05:10: ℹ️ [1:05:10 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758310510236
}
2025-09-20T01:05:10: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:05:11: 💾 Data synced to files successfully
2025-09-20T01:05:33: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:05:33: ℹ️ [1:05:33 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758310533345
}
2025-09-20T01:05:33: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:05:41: 💾 Data synced to files successfully
2025-09-20T01:06:11: 💾 Data synced to files successfully
2025-09-20T01:06:14: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:06:14: ℹ️ [1:06:14 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758310574480
}
2025-09-20T01:06:14: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:06:41: 💾 Data synced to files successfully
2025-09-20T01:07:11: 💾 Data synced to files successfully
2025-09-20T01:07:41: 💾 Data synced to files successfully
2025-09-20T01:08:11: 💾 Data synced to files successfully
2025-09-20T01:08:41: 💾 Data synced to files successfully
2025-09-20T01:09:11: 💾 Data synced to files successfully
2025-09-20T01:09:41: 💾 Data synced to files successfully
2025-09-20T01:10:11: 💾 Data synced to files successfully
2025-09-20T01:10:41: 💾 Data synced to files successfully
2025-09-20T01:11:11: 💾 Data synced to files successfully
2025-09-20T01:11:41: 💾 Data synced to files successfully
2025-09-20T01:12:11: 💾 Data synced to files successfully
2025-09-20T01:12:41: 💾 Data synced to files successfully
2025-09-20T01:13:11: 💾 Data synced to files successfully
2025-09-20T01:13:41: 💾 Data synced to files successfully
2025-09-20T01:14:11: 💾 Data synced to files successfully
2025-09-20T01:14:41: 💾 Data synced to files successfully
2025-09-20T01:15:11: 💾 Data synced to files successfully
2025-09-20T01:15:41: 💾 Data synced to files successfully
2025-09-20T01:16:11: 💾 Data synced to files successfully
2025-09-20T01:16:41: 💾 Data synced to files successfully
2025-09-20T01:17:11: 💾 Data synced to files successfully
2025-09-20T01:17:41: 💾 Data synced to files successfully
2025-09-20T01:18:11: 💾 Data synced to files successfully
2025-09-20T01:18:41: 💾 Data synced to files successfully
2025-09-20T01:19:11: 💾 Data synced to files successfully
2025-09-20T01:19:41: 💾 Data synced to files successfully
2025-09-20T01:20:11: 💾 Data synced to files successfully
2025-09-20T01:20:41: 💾 Data synced to files successfully
2025-09-20T01:21:11: 💾 Data synced to files successfully
2025-09-20T01:21:41: 💾 Data synced to files successfully
2025-09-20T01:21:53: 🔌 Connection closed. Reason: undefined
2025-09-20T01:21:53: 🔄 Reconnecting in 1s... (Attempt 1/10)
2025-09-20T01:21:53: {"level":50,"time":1758311513086,"pid":8720,"hostname":"SAURABH","msg":"error in sending keep alive"}
2025-09-20T01:21:54: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:21:54: 🧹 Removed stale process lock
2025-09-20T01:21:54: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:21:54: ⏰ Starting 240 second startup grace period...
2025-09-20T01:21:54: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311514169
}
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311514170
}
2025-09-20T01:21:54: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:21:54: ⏰ Startup grace period: 240 seconds
2025-09-20T01:21:54: 📋 Message rules loaded: 8 types
2025-09-20T01:21:54: ℹ️ [1:21:54 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9569399,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:21:54: ✅ Safety Manager initialized
2025-09-20T01:21:54: 📁 Loaded 0 sent messages from file
2025-09-20T01:21:54: 📁 Loaded 0 customer histories from file
2025-09-20T01:21:54: 📁 Loaded 0 message hashes from file
2025-09-20T01:21:54: 📁 Loaded statistics from file
2025-09-20T01:21:54: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:21:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:21:54: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:21:54: 🔄 Starting WhatsApp connection...
2025-09-20T01:21:54: 🔄 Initializing WhatsApp client...
2025-09-20T01:21:54: ✅ WhatsApp connection started
2025-09-20T01:21:54: 🔧 Initializing admin commands...
2025-09-20T01:21:54: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:21:54: ✅ Admin commands system initialized
2025-09-20T01:21:54: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:21:54: 📞 Attempting to request pairing code...
2025-09-20T01:21:54: 💡 To use phone authentication:
2025-09-20T01:21:54:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:21:54:    2. Select "Phone Number Authentication"
2025-09-20T01:21:54:    3. Enter your phone number
2025-09-20T01:21:54:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:21:54: 🔄 Connecting to WhatsApp...
2025-09-20T01:22:05: 🔌 Connection closed. Reason: undefined
2025-09-20T01:22:05: 🔄 Reconnecting in 2s... (Attempt 2/10)
2025-09-20T01:22:07: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:22:07: 🧹 Removed stale process lock
2025-09-20T01:22:07: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:22:07: ⏰ Starting 240 second startup grace period...
2025-09-20T01:22:07: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311527394
}
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311527395
}
2025-09-20T01:22:07: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:22:07: ⏰ Startup grace period: 240 seconds
2025-09-20T01:22:07: 📋 Message rules loaded: 8 types
2025-09-20T01:22:07: ℹ️ [1:22:07 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9582621,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:22:07: ✅ Safety Manager initialized
2025-09-20T01:22:07: 📁 Loaded 0 sent messages from file
2025-09-20T01:22:07: 📁 Loaded 0 customer histories from file
2025-09-20T01:22:07: 📁 Loaded 0 message hashes from file
2025-09-20T01:22:07: 📁 Loaded statistics from file
2025-09-20T01:22:07: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:07: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:22:07: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:07: 🔄 Starting WhatsApp connection...
2025-09-20T01:22:07: 🔄 Initializing WhatsApp client...
2025-09-20T01:22:07: ✅ WhatsApp connection started
2025-09-20T01:22:07: 🔧 Initializing admin commands...
2025-09-20T01:22:07: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:22:07: ✅ Admin commands system initialized
2025-09-20T01:22:07: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:22:07: 📞 Attempting to request pairing code...
2025-09-20T01:22:07: 💡 To use phone authentication:
2025-09-20T01:22:07:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:22:07:    2. Select "Phone Number Authentication"
2025-09-20T01:22:07:    3. Enter your phone number
2025-09-20T01:22:07:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:22:07: 🔄 Connecting to WhatsApp...
2025-09-20T01:22:11: 💾 Data synced to files successfully
2025-09-20T01:22:18: 🔌 Connection closed. Reason: undefined
2025-09-20T01:22:18: 🔄 Reconnecting in 4s... (Attempt 3/10)
2025-09-20T01:22:22: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:22:22: 🧹 Removed stale process lock
2025-09-20T01:22:22: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:22:22: ⏰ Starting 240 second startup grace period...
2025-09-20T01:22:22: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311542533
}
2025-09-20T01:22:22: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:22:22: ⏰ Startup grace period: 240 seconds
2025-09-20T01:22:22: 📋 Message rules loaded: 8 types
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311542532
}
2025-09-20T01:22:22: ℹ️ [1:22:22 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9597760,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:22:22: ✅ Safety Manager initialized
2025-09-20T01:22:22: 📁 Loaded 0 sent messages from file
2025-09-20T01:22:22: 📁 Loaded 0 customer histories from file
2025-09-20T01:22:22: 📁 Loaded 0 message hashes from file
2025-09-20T01:22:22: 📁 Loaded statistics from file
2025-09-20T01:22:22: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:22:22: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:22: 🔄 Starting WhatsApp connection...
2025-09-20T01:22:22: 🔄 Initializing WhatsApp client...
2025-09-20T01:22:22: ✅ WhatsApp connection started
2025-09-20T01:22:22: 🔧 Initializing admin commands...
2025-09-20T01:22:22: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:22:22: ✅ Admin commands system initialized
2025-09-20T01:22:22: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:22:22: 📞 Attempting to request pairing code...
2025-09-20T01:22:22: 💡 To use phone authentication:
2025-09-20T01:22:22:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:22:22:    2. Select "Phone Number Authentication"
2025-09-20T01:22:22:    3. Enter your phone number
2025-09-20T01:22:22:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:22:22: 🔄 Connecting to WhatsApp...
2025-09-20T01:22:33: 🔌 Connection closed. Reason: undefined
2025-09-20T01:22:33: 🔄 Reconnecting in 8s... (Attempt 4/10)
2025-09-20T01:22:41: 💾 Data synced to files successfully
2025-09-20T01:22:41: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:22:41: 🧹 Removed stale process lock
2025-09-20T01:22:41: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:22:41: ⏰ Starting 240 second startup grace period...
2025-09-20T01:22:41: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311561647
}
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311561647
}
2025-09-20T01:22:41: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:22:41: ⏰ Startup grace period: 240 seconds
2025-09-20T01:22:41: 📋 Message rules loaded: 8 types
2025-09-20T01:22:41: ℹ️ [1:22:41 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9616878,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:22:41: ✅ Safety Manager initialized
2025-09-20T01:22:41: 📁 Loaded 0 sent messages from file
2025-09-20T01:22:41: 📁 Loaded 0 customer histories from file
2025-09-20T01:22:41: 📁 Loaded 0 message hashes from file
2025-09-20T01:22:41: 📁 Loaded statistics from file
2025-09-20T01:22:41: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:41: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:22:41: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:41: 🔄 Starting WhatsApp connection...
2025-09-20T01:22:41: 🔄 Initializing WhatsApp client...
2025-09-20T01:22:41: ✅ WhatsApp connection started
2025-09-20T01:22:41: 🔧 Initializing admin commands...
2025-09-20T01:22:41: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:22:41: ✅ Admin commands system initialized
2025-09-20T01:22:41: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:22:41: 📞 Attempting to request pairing code...
2025-09-20T01:22:41: 💡 To use phone authentication:
2025-09-20T01:22:41:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:22:41:    2. Select "Phone Number Authentication"
2025-09-20T01:22:41:    3. Enter your phone number
2025-09-20T01:22:41:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:22:41: 🔄 Connecting to WhatsApp...
2025-09-20T01:22:41: 🔌 Connection closed. Reason: undefined
2025-09-20T01:22:41: 🔄 Reconnecting in 16s... (Attempt 5/10)
2025-09-20T01:22:57: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:22:57: 🧹 Removed stale process lock
2025-09-20T01:22:57: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:22:57: ⏰ Starting 240 second startup grace period...
2025-09-20T01:22:57: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311577718
}
2025-09-20T01:22:57: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:22:57: ⏰ Startup grace period: 240 seconds
2025-09-20T01:22:57: 📋 Message rules loaded: 8 types
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311577718
}
2025-09-20T01:22:57: ℹ️ [1:22:57 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9632944,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:22:57: ✅ Safety Manager initialized
2025-09-20T01:22:57: 📁 Loaded 0 sent messages from file
2025-09-20T01:22:57: 📁 Loaded 0 customer histories from file
2025-09-20T01:22:57: 📁 Loaded 0 message hashes from file
2025-09-20T01:22:57: 📁 Loaded statistics from file
2025-09-20T01:22:57: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:57: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:22:57: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:22:57: 🔄 Starting WhatsApp connection...
2025-09-20T01:22:57: 🔄 Initializing WhatsApp client...
2025-09-20T01:22:57: ✅ WhatsApp connection started
2025-09-20T01:22:57: 🔧 Initializing admin commands...
2025-09-20T01:22:57: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:22:57: ✅ Admin commands system initialized
2025-09-20T01:22:57: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:22:57: 📞 Attempting to request pairing code...
2025-09-20T01:22:57: 💡 To use phone authentication:
2025-09-20T01:22:57:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:22:57:    2. Select "Phone Number Authentication"
2025-09-20T01:22:57:    3. Enter your phone number
2025-09-20T01:22:57:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:22:57: 🔄 Connecting to WhatsApp...
2025-09-20T01:23:08: 🔌 Connection closed. Reason: undefined
2025-09-20T01:23:08: 🔄 Reconnecting in 30s... (Attempt 6/10)
2025-09-20T01:23:11: 💾 Data synced to files successfully
2025-09-20T01:23:38: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:23:38: 🧹 Removed stale process lock
2025-09-20T01:23:38: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:23:38: ⏰ Starting 240 second startup grace period...
2025-09-20T01:23:38: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311618852
}
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311618852
}
2025-09-20T01:23:38: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:23:38: ⏰ Startup grace period: 240 seconds
2025-09-20T01:23:38: 📋 Message rules loaded: 8 types
2025-09-20T01:23:38: ℹ️ [1:23:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9674079,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:23:38: ✅ Safety Manager initialized
2025-09-20T01:23:38: 📁 Loaded 0 sent messages from file
2025-09-20T01:23:38: 📁 Loaded 0 customer histories from file
2025-09-20T01:23:38: 📁 Loaded 0 message hashes from file
2025-09-20T01:23:38: 📁 Loaded statistics from file
2025-09-20T01:23:38: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:23:38: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:23:38: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:23:38: 🔄 Starting WhatsApp connection...
2025-09-20T01:23:38: 🔄 Initializing WhatsApp client...
2025-09-20T01:23:38: ✅ WhatsApp connection started
2025-09-20T01:23:38: 🔧 Initializing admin commands...
2025-09-20T01:23:38: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:23:38: ✅ Admin commands system initialized
2025-09-20T01:23:38: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:23:38: 📞 Attempting to request pairing code...
2025-09-20T01:23:38: 💡 To use phone authentication:
2025-09-20T01:23:38:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:23:38:    2. Select "Phone Number Authentication"
2025-09-20T01:23:38:    3. Enter your phone number
2025-09-20T01:23:38:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:23:38: 🔄 Connecting to WhatsApp...
2025-09-20T01:23:38: 🔌 Connection closed. Reason: undefined
2025-09-20T01:23:38: 🔄 Reconnecting in 30s... (Attempt 7/10)
2025-09-20T01:23:41: 💾 Data synced to files successfully
2025-09-20T01:24:08: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:24:08: 🧹 Removed stale process lock
2025-09-20T01:24:08: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:24:08: ⏰ Starting 240 second startup grace period...
2025-09-20T01:24:08: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311648921
}
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311648922
}
2025-09-20T01:24:08: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:24:08: ⏰ Startup grace period: 240 seconds
2025-09-20T01:24:08: 📋 Message rules loaded: 8 types
2025-09-20T01:24:08: ℹ️ [1:24:08 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9704150,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:24:08: ✅ Safety Manager initialized
2025-09-20T01:24:08: 📁 Loaded 0 sent messages from file
2025-09-20T01:24:08: 📁 Loaded 0 customer histories from file
2025-09-20T01:24:08: 📁 Loaded 0 message hashes from file
2025-09-20T01:24:08: 📁 Loaded statistics from file
2025-09-20T01:24:08: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:24:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:24:08: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:24:08: 🔄 Starting WhatsApp connection...
2025-09-20T01:24:08: 🔄 Initializing WhatsApp client...
2025-09-20T01:24:08: ✅ WhatsApp connection started
2025-09-20T01:24:08: 🔧 Initializing admin commands...
2025-09-20T01:24:08: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:24:08: ✅ Admin commands system initialized
2025-09-20T01:24:08: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:24:08: 📞 Attempting to request pairing code...
2025-09-20T01:24:08: 💡 To use phone authentication:
2025-09-20T01:24:08:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:24:08:    2. Select "Phone Number Authentication"
2025-09-20T01:24:08:    3. Enter your phone number
2025-09-20T01:24:08:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:24:08: 🔄 Connecting to WhatsApp...
2025-09-20T01:24:08: 🔌 Connection closed. Reason: undefined
2025-09-20T01:24:08: 🔄 Reconnecting in 30s... (Attempt 8/10)
2025-09-20T01:24:11: 💾 Data synced to files successfully
2025-09-20T01:24:38: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:24:38: ℹ️ [1:24:38 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:24:38: ℹ️ [1:24:38 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:24:38: ℹ️ [1:24:38 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:24:38: 🧹 Removed stale process lock
2025-09-20T01:24:38: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:24:38: ℹ️ [1:24:38 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:24:38: ⏰ Starting 240 second startup grace period...
2025-09-20T01:24:38: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:24:38: ℹ️ [1:24:38 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311678990
}
2025-09-20T01:24:38: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:24:38: ⏰ Startup grace period: 240 seconds
2025-09-20T01:24:38: 📋 Message rules loaded: 8 types
2025-09-20T01:24:38: ℹ️ [1:24:38 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311678989
}
2025-09-20T01:24:39: ℹ️ [1:24:38 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9734220,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:24:39: ✅ Safety Manager initialized
2025-09-20T01:24:39: 📁 Loaded 0 sent messages from file
2025-09-20T01:24:39: 📁 Loaded 0 customer histories from file
2025-09-20T01:24:39: 📁 Loaded 0 message hashes from file
2025-09-20T01:24:39: 📁 Loaded statistics from file
2025-09-20T01:24:39: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:24:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:24:39: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:24:39: 🔄 Starting WhatsApp connection...
2025-09-20T01:24:39: 🔄 Initializing WhatsApp client...
2025-09-20T01:24:39: ✅ WhatsApp connection started
2025-09-20T01:24:39: 🔧 Initializing admin commands...
2025-09-20T01:24:39: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:24:39: ✅ Admin commands system initialized
2025-09-20T01:24:39: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:24:39: 📞 Attempting to request pairing code...
2025-09-20T01:24:39: 💡 To use phone authentication:
2025-09-20T01:24:39:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:24:39:    2. Select "Phone Number Authentication"
2025-09-20T01:24:39:    3. Enter your phone number
2025-09-20T01:24:39:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:24:39: 🔄 Connecting to WhatsApp...
2025-09-20T01:24:41: 💾 Data synced to files successfully
2025-09-20T01:24:50: 🔌 Connection closed. Reason: undefined
2025-09-20T01:24:50: 🔄 Reconnecting in 30s... (Attempt 9/10)
2025-09-20T01:25:11: 💾 Data synced to files successfully
2025-09-20T01:25:20: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:25:20: 🧹 Removed stale process lock
2025-09-20T01:25:20: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:25:20: ⏰ Starting 240 second startup grace period...
2025-09-20T01:25:20: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311720104
}
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311720104
}
2025-09-20T01:25:20: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:25:20: ⏰ Startup grace period: 240 seconds
2025-09-20T01:25:20: 📋 Message rules loaded: 8 types
2025-09-20T01:25:20: ℹ️ [1:25:20 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9775331,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:25:20: ✅ Safety Manager initialized
2025-09-20T01:25:20: 📁 Loaded 0 sent messages from file
2025-09-20T01:25:20: 📁 Loaded 0 customer histories from file
2025-09-20T01:25:20: 📁 Loaded 0 message hashes from file
2025-09-20T01:25:20: 📁 Loaded statistics from file
2025-09-20T01:25:20: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:25:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:25:20: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:25:20: 🔄 Starting WhatsApp connection...
2025-09-20T01:25:20: 🔄 Initializing WhatsApp client...
2025-09-20T01:25:20: ✅ WhatsApp connection started
2025-09-20T01:25:20: 🔧 Initializing admin commands...
2025-09-20T01:25:20: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:25:20: ✅ Admin commands system initialized
2025-09-20T01:25:20: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:25:20: 📞 Attempting to request pairing code...
2025-09-20T01:25:20: 💡 To use phone authentication:
2025-09-20T01:25:20:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:25:20:    2. Select "Phone Number Authentication"
2025-09-20T01:25:20:    3. Enter your phone number
2025-09-20T01:25:20:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:25:20: 🔄 Connecting to WhatsApp...
2025-09-20T01:25:31: 🔌 Connection closed. Reason: undefined
2025-09-20T01:25:31: 🔄 Reconnecting in 30s... (Attempt 10/10)
2025-09-20T01:25:41: 💾 Data synced to files successfully
2025-09-20T01:25:54: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:25:54: ℹ️ [1:25:54 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758311754184
}
2025-09-20T01:25:54: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:26:01: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758301944776,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8720,
  nodeVersion: 'v22.19.0'
}
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T01:26:01: 🧹 Removed stale process lock
2025-09-20T01:26:01: 🔒 Process lock acquired (PID: 8720)
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8720
}
2025-09-20T01:26:01: ⏰ Starting 240 second startup grace period...
2025-09-20T01:26:01: 🚫 All message sending is BLOCKED during grace period
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, willExpireAt: 1758302184776 },
  timestamp: 1758311761254
}
2025-09-20T01:26:01: 🛡️ Enhanced Safety Manager initialized
2025-09-20T01:26:01: ⏰ Startup grace period: 240 seconds
2025-09-20T01:26:01: 📋 Message rules loaded: 8 types
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758301944776, processId: 8720 },
  timestamp: 1758311761254
}
2025-09-20T01:26:01: ℹ️ [1:26:01 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 9816482,
  gracePeriodActive: false,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T01:26:01: ✅ Safety Manager initialized
2025-09-20T01:26:01: 📁 Loaded 0 sent messages from file
2025-09-20T01:26:01: 📁 Loaded 0 customer histories from file
2025-09-20T01:26:01: 📁 Loaded 0 message hashes from file
2025-09-20T01:26:01: 📁 Loaded statistics from file
2025-09-20T01:26:01: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:26:01: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T01:26:01: ✅ Duplicate Prevention Manager initialized
2025-09-20T01:26:01: 🔄 Starting WhatsApp connection...
2025-09-20T01:26:01: 🔄 Initializing WhatsApp client...
2025-09-20T01:26:01: ✅ WhatsApp connection started
2025-09-20T01:26:01: 🔧 Initializing admin commands...
2025-09-20T01:26:01: 📨 Message handler attached to WhatsApp socket
2025-09-20T01:26:01: ✅ Admin commands system initialized
2025-09-20T01:26:01: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T01:26:01: 📞 Attempting to request pairing code...
2025-09-20T01:26:01: 💡 To use phone authentication:
2025-09-20T01:26:01:    1. Use the dashboard at http://localhost:3001
2025-09-20T01:26:01:    2. Select "Phone Number Authentication"
2025-09-20T01:26:01:    3. Enter your phone number
2025-09-20T01:26:01:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T01:26:01: 🔄 Connecting to WhatsApp...
2025-09-20T01:26:07: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:26:07: ℹ️ [1:26:07 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758311767418
}
2025-09-20T01:26:07: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:26:11: 💾 Data synced to files successfully
2025-09-20T01:26:12: 🔌 Connection closed. Reason: undefined
2025-09-20T01:26:12: ❌ Max reconnection attempts reached. Please restart the bot or check your internet connection.
2025-09-20T01:26:12: 💡 You can visit http://localhost:3001 to see the status and authenticate again.
2025-09-20T01:26:22: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:26:22: ℹ️ [1:26:22 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758311782549
}
2025-09-20T01:26:22: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:26:41: 💾 Data synced to files successfully
2025-09-20T01:26:41: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:26:41: ℹ️ [1:26:41 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758311801655
}
2025-09-20T01:26:41: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:26:57: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:26:57: ℹ️ [1:26:57 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758311817727
}
2025-09-20T01:26:57: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:27:11: 💾 Data synced to files successfully
2025-09-20T01:27:38: ✅ Startup grace period ended - message sending now allowed
2025-09-20T01:27:38: ℹ️ [1:27:38 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758311858863
}
2025-09-20T01:27:38: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T01:27:41: 💾 Data synced to files successfully
2025-09-20T02:10:13: ✅ Startup grace period ended - message sending now allowed
2025-09-20T02:10:13: ✅ Startup grace period ended - message sending now allowed
2025-09-20T02:10:13: ✅ Startup grace period ended - message sending now allowed
2025-09-20T02:10:13: ✅ Startup grace period ended - message sending now allowed
2025-09-20T02:10:13: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T02:10:13: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T02:10:13: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T02:10:13: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T02:10:13: 💾 Data synced to files successfully
2025-09-20T02:10:13: ℹ️ [2:10:13 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758314413873
}
2025-09-20T02:10:13: ℹ️ [2:10:13 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758314413874
}
2025-09-20T02:10:13: ℹ️ [2:10:13 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758314413874
}
2025-09-20T02:10:13: ℹ️ [2:10:13 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 8720 },
  timestamp: 1758314413874
}
2025-09-20T02:10:43: 💾 Data synced to files successfully
2025-09-20T02:11:13: 💾 Data synced to files successfully
2025-09-20T02:11:43: 💾 Data synced to files successfully
2025-09-20T02:12:13: 💾 Data synced to files successfully
2025-09-20T02:12:43: 💾 Data synced to files successfully
2025-09-20T02:13:13: 💾 Data synced to files successfully
2025-09-20T02:13:43: 💾 Data synced to files successfully
2025-09-20T02:14:13: 💾 Data synced to files successfully
2025-09-20T02:14:43: 💾 Data synced to files successfully
2025-09-20T02:15:13: 💾 Data synced to files successfully
2025-09-20T03:26:15: 💾 Data synced to files successfully
2025-09-20T04:08:25: 💾 Data synced to files successfully
2025-09-20T04:08:55: 💾 Data synced to files successfully
2025-09-20T04:09:25: 💾 Data synced to files successfully
2025-09-20T04:09:55: 💾 Data synced to files successfully
2025-09-20T04:10:25: 💾 Data synced to files successfully
2025-09-20T04:10:55: 💾 Data synced to files successfully
2025-09-20T04:11:25: 💾 Data synced to files successfully
2025-09-20T04:11:55: 💾 Data synced to files successfully
2025-09-20T04:12:25: 💾 Data synced to files successfully
2025-09-20T04:12:55: 💾 Data synced to files successfully
2025-09-20T04:13:25: 💾 Data synced to files successfully
2025-09-20T04:13:55: 💾 Data synced to files successfully
2025-09-20T04:14:25: 💾 Data synced to files successfully
2025-09-20T04:14:55: 💾 Data synced to files successfully
2025-09-20T04:15:25: 💾 Data synced to files successfully
2025-09-20T04:15:55: 💾 Data synced to files successfully
2025-09-20T04:16:25: 💾 Data synced to files successfully
2025-09-20T04:16:55: 💾 Data synced to files successfully
2025-09-20T04:17:25: 💾 Data synced to files successfully
2025-09-20T04:17:55: 💾 Data synced to files successfully
2025-09-20T04:18:25: 💾 Data synced to files successfully
2025-09-20T04:18:55: 💾 Data synced to files successfully
2025-09-20T04:19:25: 💾 Data synced to files successfully
2025-09-20T04:19:55: 💾 Data synced to files successfully
2025-09-20T04:20:25: 💾 Data synced to files successfully
2025-09-20T04:20:55: 💾 Data synced to files successfully
2025-09-20T04:21:25: 💾 Data synced to files successfully
2025-09-20T04:21:55: 💾 Data synced to files successfully
2025-09-20T04:22:25: 💾 Data synced to files successfully
2025-09-20T04:22:55: 💾 Data synced to files successfully
2025-09-20T04:23:25: 💾 Data synced to files successfully
2025-09-20T04:23:55: 💾 Data synced to files successfully
2025-09-20T04:24:25: 💾 Data synced to files successfully
2025-09-20T04:24:55: 💾 Data synced to files successfully
2025-09-20T04:25:25: 💾 Data synced to files successfully
2025-09-20T04:25:55: 💾 Data synced to files successfully
2025-09-20T04:26:25: 💾 Data synced to files successfully
2025-09-20T04:26:55: 💾 Data synced to files successfully
2025-09-20T04:27:25: 💾 Data synced to files successfully
2025-09-20T04:54:18: 💾 Data synced to files successfully
2025-09-20T04:54:48: 💾 Data synced to files successfully
2025-09-20T04:55:18: 💾 Data synced to files successfully
2025-09-20T04:55:48: 💾 Data synced to files successfully
2025-09-20T04:56:18: 💾 Data synced to files successfully
2025-09-20T04:56:48: 💾 Data synced to files successfully
2025-09-20T04:57:18: 💾 Data synced to files successfully
2025-09-20T04:57:48: 💾 Data synced to files successfully
2025-09-20T04:58:18: 💾 Data synced to files successfully
2025-09-20T04:58:48: 💾 Data synced to files successfully
2025-09-20T04:59:18: 💾 Data synced to files successfully
2025-09-20T04:59:48: 💾 Data synced to files successfully
2025-09-20T05:00:18: 💾 Data synced to files successfully
2025-09-20T05:00:48: 💾 Data synced to files successfully
2025-09-20T05:01:18: 💾 Data synced to files successfully
2025-09-20T05:01:48: 💾 Data synced to files successfully
2025-09-20T05:02:18: 💾 Data synced to files successfully
2025-09-20T05:02:48: 💾 Data synced to files successfully
2025-09-20T05:03:18: 💾 Data synced to files successfully
2025-09-20T05:03:48: 💾 Data synced to files successfully
2025-09-20T05:04:18: 💾 Data synced to files successfully
2025-09-20T05:04:48: 💾 Data synced to files successfully
2025-09-20T05:05:18: 💾 Data synced to files successfully
2025-09-20T05:05:48: 💾 Data synced to files successfully
2025-09-20T05:06:18: 💾 Data synced to files successfully
2025-09-20T05:06:48: 💾 Data synced to files successfully
2025-09-20T05:07:18: 💾 Data synced to files successfully
2025-09-20T05:07:48: 💾 Data synced to files successfully
2025-09-20T05:08:18: 💾 Data synced to files successfully
2025-09-20T05:08:48: 💾 Data synced to files successfully
2025-09-20T05:09:18: 💾 Data synced to files successfully
2025-09-20T05:09:48: 💾 Data synced to files successfully
2025-09-20T05:10:18: 💾 Data synced to files successfully
2025-09-20T05:10:48: 💾 Data synced to files successfully
2025-09-20T05:11:18: 💾 Data synced to files successfully
2025-09-20T05:14:43: 💾 Data synced to files successfully
2025-09-20T05:15:13: 💾 Data synced to files successfully
2025-09-20T05:15:43: 💾 Data synced to files successfully
2025-09-20T05:16:13: 💾 Data synced to files successfully
2025-09-20T05:16:43: 💾 Data synced to files successfully
2025-09-20T05:17:13: 💾 Data synced to files successfully
2025-09-20T05:17:43: 💾 Data synced to files successfully
2025-09-20T05:18:13: 💾 Data synced to files successfully
2025-09-20T05:27:21: 💾 Data synced to files successfully
2025-09-20T05:27:51: 💾 Data synced to files successfully
2025-09-20T05:28:21: 💾 Data synced to files successfully
2025-09-20T05:28:51: 💾 Data synced to files successfully
2025-09-20T05:29:21: 💾 Data synced to files successfully
2025-09-20T05:29:51: 💾 Data synced to files successfully
2025-09-20T05:30:21: 💾 Data synced to files successfully
2025-09-20T05:30:51: 💾 Data synced to files successfully
2025-09-20T05:31:21: 💾 Data synced to files successfully
2025-09-20T05:44:32: 💾 Data synced to files successfully
2025-09-20T05:45:02: 💾 Data synced to files successfully
2025-09-20T05:45:32: 💾 Data synced to files successfully
2025-09-20T05:46:02: 💾 Data synced to files successfully
2025-09-20T05:46:32: 💾 Data synced to files successfully
2025-09-20T05:47:02: 💾 Data synced to files successfully
2025-09-20T05:47:32: 💾 Data synced to files successfully
2025-09-20T06:02:45: 💾 Data synced to files successfully
2025-09-20T06:03:15: 💾 Data synced to files successfully
2025-09-20T06:03:45: 💾 Data synced to files successfully
2025-09-20T06:04:15: 💾 Data synced to files successfully
2025-09-20T06:04:45: 💾 Data synced to files successfully
2025-09-20T06:05:15: 💾 Data synced to files successfully
2025-09-20T06:05:45: 💾 Data synced to files successfully
2025-09-20T06:26:05: 💾 Data synced to files successfully
2025-09-20T06:53:34: 💾 Data synced to files successfully
2025-09-20T06:54:04: 💾 Data synced to files successfully
2025-09-20T06:54:34: 💾 Data synced to files successfully
2025-09-20T06:55:04: 💾 Data synced to files successfully
2025-09-20T06:55:34: 💾 Data synced to files successfully
2025-09-20T06:56:04: 💾 Data synced to files successfully
2025-09-20T06:56:34: 💾 Data synced to files successfully
2025-09-20T07:19:01: 💾 Data synced to files successfully
2025-09-20T07:19:45: 💾 Data synced to files successfully
2025-09-20T07:20:15: 💾 Data synced to files successfully
2025-09-20T07:20:45: 💾 Data synced to files successfully
2025-09-20T07:21:15: 💾 Data synced to files successfully
2025-09-20T07:21:45: 💾 Data synced to files successfully
2025-09-20T07:22:15: 💾 Data synced to files successfully
2025-09-20T07:22:45: 💾 Data synced to files successfully
2025-09-20T07:27:23: 💾 Data synced to files successfully
2025-09-20T07:27:53: 💾 Data synced to files successfully
2025-09-20T07:28:23: 💾 Data synced to files successfully
2025-09-20T07:28:53: 💾 Data synced to files successfully
2025-09-20T07:29:23: 💾 Data synced to files successfully
2025-09-20T07:29:53: 💾 Data synced to files successfully
2025-09-20T07:30:23: 💾 Data synced to files successfully
2025-09-20T07:30:53: 💾 Data synced to files successfully
2025-09-20T07:31:23: 💾 Data synced to files successfully
2025-09-20T07:31:53: 💾 Data synced to files successfully
2025-09-20T07:32:23: 💾 Data synced to files successfully
2025-09-20T07:32:53: 💾 Data synced to files successfully
2025-09-20T07:33:23: 💾 Data synced to files successfully
2025-09-20T07:33:53: 💾 Data synced to files successfully
2025-09-20T07:34:23: 💾 Data synced to files successfully
2025-09-20T07:34:53: 💾 Data synced to files successfully
2025-09-20T07:35:23: 💾 Data synced to files successfully
2025-09-20T07:35:53: 💾 Data synced to files successfully
2025-09-20T07:36:23: 💾 Data synced to files successfully
2025-09-20T07:36:53: 💾 Data synced to files successfully
2025-09-20T07:37:23: 💾 Data synced to files successfully
2025-09-20T07:37:53: 💾 Data synced to files successfully
2025-09-20T07:38:23: 💾 Data synced to files successfully
2025-09-20T07:38:53: 💾 Data synced to files successfully
2025-09-20T08:11:51: 💾 Data synced to files successfully
2025-09-20T09:37:55: 💾 Data synced to files successfully
2025-09-20T09:38:25: 💾 Data synced to files successfully
2025-09-20T09:38:55: 💾 Data synced to files successfully
2025-09-20T09:39:25: 💾 Data synced to files successfully
2025-09-20T09:39:55: 💾 Data synced to files successfully
2025-09-20T09:40:25: 💾 Data synced to files successfully
2025-09-20T09:40:55: 💾 Data synced to files successfully
2025-09-20T10:08:27: 💾 Data synced to files successfully
2025-09-20T11:05:12: 💾 Data synced to files successfully
2025-09-20T11:05:42: 💾 Data synced to files successfully
2025-09-20T11:06:12: 💾 Data synced to files successfully
2025-09-20T11:06:42: 💾 Data synced to files successfully
2025-09-20T11:07:12: 💾 Data synced to files successfully
2025-09-20T11:07:42: 💾 Data synced to files successfully
2025-09-20T11:08:12: 💾 Data synced to files successfully
2025-09-20T11:08:42: 💾 Data synced to files successfully
2025-09-20T11:09:12: 💾 Data synced to files successfully
2025-09-20T11:09:42: 💾 Data synced to files successfully
2025-09-20T11:10:12: 💾 Data synced to files successfully
2025-09-20T11:10:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:10:47: 📝 Loaded 12 template types
2025-09-20T11:10:47: 📝 Enhanced Logger initialized
2025-09-20T11:10:47: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:10:47:    Auth Mode: both
2025-09-20T11:10:47:    QR Enabled: true
2025-09-20T11:10:47:    Phone Enabled: true
2025-09-20T11:10:47:    Session Persistence: true
2025-09-20T11:10:47:    Max Reconnect Attempts: 10
2025-09-20T11:10:47:    Default Phone: None
2025-09-20T11:10:47: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:10:47: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:10:47: 🔧 Developer Configuration initialized
2025-09-20T11:10:47: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758346847719,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12656,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:10:47: 🔧 Developer Configuration initialized
2025-09-20T11:10:47: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:10:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:10:47: ⏰ 4-minute startup delay active
2025-09-20T11:10:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:10:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:10:47: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758346847719,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 12656,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:10:47: 📁 Loaded 0 sent messages from file
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:10:47: 📁 Loaded 0 customer histories from file
2025-09-20T11:10:47: 📁 Loaded 0 message hashes from file
2025-09-20T11:10:47: 🗑️ Deleted old log file: bot-2025-09-19T16-38-10-344Z.log
2025-09-20T11:10:47: 📝 Enhanced Logger initialized
2025-09-20T11:10:47: 📁 Loaded statistics from file
2025-09-20T11:10:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:10:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:10:47: 🧹 Removed stale process lock
2025-09-20T11:10:47: 🧹 Lock file already cleaned up
2025-09-20T11:10:47: 🔒 Process lock acquired (PID: 12656)
2025-09-20T11:10:47: 🔒 Process lock acquired (PID: 12656)
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12656
}
2025-09-20T11:10:47: ⏰ Starting 240 second startup grace period...
2025-09-20T11:10:47: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 12656
}
2025-09-20T11:10:47: ⏰ Starting 240 second startup grace period...
2025-09-20T11:10:47: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758346847719, processId: 12656 },
  timestamp: 1758346847960
}
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758346847719, willExpireAt: 1758347087719 },
  timestamp: 1758346847961
}
2025-09-20T11:10:47: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:10:47: ⏰ Startup grace period: 240 seconds
2025-09-20T11:10:47: 📋 Message rules loaded: 8 types
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758346847719, processId: 12656 },
  timestamp: 1758346847964
}
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758346847719, willExpireAt: 1758347087719 },
  timestamp: 1758346847964
}
2025-09-20T11:10:47: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:10:47: ⏰ Startup grace period: 240 seconds
2025-09-20T11:10:47: 📋 Message rules loaded: 8 types
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 247,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:10:47: ℹ️ [11:10:47 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 253,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:10:47: ✅ Safety Manager initialized
2025-09-20T11:10:47: 📁 Loaded 0 sent messages from file
2025-09-20T11:10:47: 📁 Loaded 0 customer histories from file
2025-09-20T11:10:47: 📁 Loaded 0 message hashes from file
2025-09-20T11:10:47: 📁 Loaded statistics from file
2025-09-20T11:10:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:10:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:10:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:10:47: 🔄 Starting WhatsApp connection...
2025-09-20T11:10:47: 🔄 Initializing WhatsApp client...
2025-09-20T11:10:48: ✅ WhatsApp connection started
2025-09-20T11:10:48: 🔧 Initializing admin commands...
2025-09-20T11:10:48: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:10:48: ✅ Admin commands system initialized
2025-09-20T11:10:48: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:10:48: 📞 Attempting to request pairing code...
2025-09-20T11:10:48: 💡 To use phone authentication:
2025-09-20T11:10:48:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:10:48:    2. Select "Phone Number Authentication"
2025-09-20T11:10:48:    3. Enter your phone number
2025-09-20T11:10:48:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:10:48: 🔄 Connecting to WhatsApp...
2025-09-20T11:10:51: ✅ WhatsApp connected successfully!
2025-09-20T11:10:51: 📱 Session established successfully
2025-09-20T11:10:51: 🔒 Session will be monitored for stability
2025-09-20T11:11:17: 💾 Data synced to files successfully
2025-09-20T11:11:47: 💾 Data synced to files successfully
2025-09-20T11:12:17: 💾 Data synced to files successfully
2025-09-20T11:12:47: 💾 Data synced to files successfully
2025-09-20T11:13:17: 💾 Data synced to files successfully
2025-09-20T11:13:47: 💾 Data synced to files successfully
2025-09-20T11:14:17: 💾 Data synced to files successfully
2025-09-20T11:14:47: 💾 Data synced to files successfully
2025-09-20T11:14:47: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:14:47: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:14:47: ℹ️ [11:14:47 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 12656 },
  timestamp: 1758347087965
}
2025-09-20T11:14:47: ℹ️ [11:14:47 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 12656 },
  timestamp: 1758347087975
}
2025-09-20T11:14:47: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:14:47: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:15:17: 💾 Data synced to files successfully
2025-09-20T11:15:47: 💾 Data synced to files successfully
2025-09-20T11:16:17: 💾 Data synced to files successfully
2025-09-20T11:16:47: 💾 Data synced to files successfully
2025-09-20T11:17:17: 💾 Data synced to files successfully
2025-09-20T11:18:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:18:53: 📝 Loaded 12 template types
2025-09-20T11:18:53: 📝 Enhanced Logger initialized
2025-09-20T11:18:53: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:18:53:    Auth Mode: both
2025-09-20T11:18:53:    QR Enabled: true
2025-09-20T11:18:53:    Phone Enabled: true
2025-09-20T11:18:53:    Session Persistence: true
2025-09-20T11:18:53:    Max Reconnect Attempts: 10
2025-09-20T11:18:53:    Default Phone: None
2025-09-20T11:18:53: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:18:53: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:18:53: 🔧 Developer Configuration initialized
2025-09-20T11:18:53: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758347333901,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 23144,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:18:53: 🔧 Developer Configuration initialized
2025-09-20T11:18:53: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:18:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:18:53: ⏰ 4-minute startup delay active
2025-09-20T11:18:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:18:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:18:53: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758347333901,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 23144,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:18:53: 📁 Loaded 0 sent messages from file
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:18:53: 📁 Loaded 0 customer histories from file
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:18:53: 📁 Loaded 0 message hashes from file
2025-09-20T11:18:53: 🗑️ Deleted old log file: bot-2025-09-19T16-38-43-900Z.log
2025-09-20T11:18:53: 📝 Enhanced Logger initialized
2025-09-20T11:18:53: 📁 Loaded statistics from file
2025-09-20T11:18:53: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:18:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:18:53: 🧹 Removed stale process lock
2025-09-20T11:18:53: 🧹 Lock file already cleaned up
2025-09-20T11:18:53: 🔒 Process lock acquired (PID: 23144)
2025-09-20T11:18:53: 🔒 Process lock acquired (PID: 23144)
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 23144
}
2025-09-20T11:18:53: ⏰ Starting 240 second startup grace period...
2025-09-20T11:18:53: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 23144
}
2025-09-20T11:18:53: ⏰ Starting 240 second startup grace period...
2025-09-20T11:18:53: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347333901, processId: 23144 },
  timestamp: 1758347333946
}
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347333901, willExpireAt: 1758347573901 },
  timestamp: 1758347333946
}
2025-09-20T11:18:53: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:18:53: ⏰ Startup grace period: 240 seconds
2025-09-20T11:18:53: 📋 Message rules loaded: 8 types
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347333901, processId: 23144 },
  timestamp: 1758347333948
}
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347333901, willExpireAt: 1758347573901 },
  timestamp: 1758347333948
}
2025-09-20T11:18:53: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:18:53: ⏰ Startup grace period: 240 seconds
2025-09-20T11:18:53: 📋 Message rules loaded: 8 types
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 50,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:18:53: ✅ Safety Manager initialized
2025-09-20T11:18:53: ℹ️ [11:18:53 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 51,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:18:53: 📁 Loaded 0 sent messages from file
2025-09-20T11:18:53: 📁 Loaded 0 customer histories from file
2025-09-20T11:18:53: 📁 Loaded 0 message hashes from file
2025-09-20T11:18:53: 📁 Loaded statistics from file
2025-09-20T11:18:53: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:18:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:18:53: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:18:53: 🔄 Starting WhatsApp connection...
2025-09-20T11:18:53: 🔄 Initializing WhatsApp client...
2025-09-20T11:18:54: ✅ WhatsApp connection started
2025-09-20T11:18:54: 🔧 Initializing admin commands...
2025-09-20T11:18:54: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:18:54: ✅ Admin commands system initialized
2025-09-20T11:18:54: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:18:54: 📞 Attempting to request pairing code...
2025-09-20T11:18:54: 💡 To use phone authentication:
2025-09-20T11:18:54:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:18:54:    2. Select "Phone Number Authentication"
2025-09-20T11:18:54:    3. Enter your phone number
2025-09-20T11:18:54:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:18:54: 🔄 Connecting to WhatsApp...
2025-09-20T11:18:56: ✅ WhatsApp connected successfully!
2025-09-20T11:18:56: 📱 Session established successfully
2025-09-20T11:18:56: 🔒 Session will be monitored for stability
2025-09-20T11:19:23: 💾 Data synced to files successfully
2025-09-20T11:19:53: 💾 Data synced to files successfully
2025-09-20T11:20:23: 💾 Data synced to files successfully
2025-09-20T11:20:53: 💾 Data synced to files successfully
2025-09-20T11:21:23: 💾 Data synced to files successfully
2025-09-20T11:21:53: 💾 Data synced to files successfully
2025-09-20T11:22:23: 💾 Data synced to files successfully
2025-09-20T11:22:53: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:22:53: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:22:53: ℹ️ [11:22:53 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 23144 },
  timestamp: 1758347573964
}
2025-09-20T11:22:53: ℹ️ [11:22:53 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 23144 },
  timestamp: 1758347573966
}
2025-09-20T11:22:53: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:22:53: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:22:53: 💾 Data synced to files successfully
2025-09-20T11:23:24: 💾 Data synced to files successfully
2025-09-20T11:23:54: 💾 Data synced to files successfully
2025-09-20T11:24:24: 💾 Data synced to files successfully
2025-09-20T11:24:54: 💾 Data synced to files successfully
2025-09-20T11:25:24: 💾 Data synced to files successfully
2025-09-20T11:25:52: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:25:52: 📝 Loaded 12 template types
2025-09-20T11:25:52: 📝 Enhanced Logger initialized
2025-09-20T11:25:52: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:25:52:    Auth Mode: both
2025-09-20T11:25:52:    QR Enabled: true
2025-09-20T11:25:52:    Phone Enabled: true
2025-09-20T11:25:52:    Session Persistence: true
2025-09-20T11:25:52:    Max Reconnect Attempts: 10
2025-09-20T11:25:52:    Default Phone: None
2025-09-20T11:25:52: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:25:52: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:25:52: 🔧 Developer Configuration initialized
2025-09-20T11:25:52: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758347752849,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16432,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:25:52: 🔧 Developer Configuration initialized
2025-09-20T11:25:52: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:25:52: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:25:52: ⏰ 4-minute startup delay active
2025-09-20T11:25:52: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:25:52: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:25:52: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758347752849,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16432,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:25:52: 📁 Loaded 0 sent messages from file
2025-09-20T11:25:52: 📁 Loaded 0 customer histories from file
2025-09-20T11:25:52: 📁 Loaded 0 message hashes from file
2025-09-20T11:25:52: 🗑️ Deleted old log file: bot-2025-09-19T16-39-10-784Z.log
2025-09-20T11:25:52: 📝 Enhanced Logger initialized
2025-09-20T11:25:52: 📁 Loaded statistics from file
2025-09-20T11:25:52: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:25:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:25:52: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T11:25:52: 🧹 Removed stale process lock
2025-09-20T11:25:52: 🔒 Process lock acquired (PID: 16432)
2025-09-20T11:25:52: 🔒 Process lock acquired (PID: 16432)
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16432
}
2025-09-20T11:25:52: ⏰ Starting 240 second startup grace period...
2025-09-20T11:25:52: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16432
}
2025-09-20T11:25:52: ⏰ Starting 240 second startup grace period...
2025-09-20T11:25:52: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347752849, processId: 16432 },
  timestamp: 1758347752897
}
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347752849, willExpireAt: 1758347992849 },
  timestamp: 1758347752898
}
2025-09-20T11:25:52: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:25:52: ⏰ Startup grace period: 240 seconds
2025-09-20T11:25:52: 📋 Message rules loaded: 8 types
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347752849, willExpireAt: 1758347992849 },
  timestamp: 1758347752900
}
2025-09-20T11:25:52: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:25:52: ⏰ Startup grace period: 240 seconds
2025-09-20T11:25:52: 📋 Message rules loaded: 8 types
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758347752849, processId: 16432 },
  timestamp: 1758347752900
}
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 57,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:25:52: ✅ Safety Manager initialized
2025-09-20T11:25:52: ℹ️ [11:25:52 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 59,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:25:52: 📁 Loaded 0 sent messages from file
2025-09-20T11:25:52: 📁 Loaded 0 customer histories from file
2025-09-20T11:25:52: 📁 Loaded 0 message hashes from file
2025-09-20T11:25:52: 📁 Loaded statistics from file
2025-09-20T11:25:52: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:25:52: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:25:52: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:25:52: 🔄 Starting WhatsApp connection...
2025-09-20T11:25:52: 🔄 Initializing WhatsApp client...
2025-09-20T11:25:52: ✅ WhatsApp connection started
2025-09-20T11:25:52: 🔧 Initializing admin commands...
2025-09-20T11:25:52: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:25:52: ✅ Admin commands system initialized
2025-09-20T11:25:52: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:25:52: 📞 Attempting to request pairing code...
2025-09-20T11:25:52: 💡 To use phone authentication:
2025-09-20T11:25:52:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:25:52:    2. Select "Phone Number Authentication"
2025-09-20T11:25:52:    3. Enter your phone number
2025-09-20T11:25:52:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:25:52: 🔄 Connecting to WhatsApp...
2025-09-20T11:25:55: ✅ WhatsApp connected successfully!
2025-09-20T11:25:55: 📱 Session established successfully
2025-09-20T11:25:55: 🔒 Session will be monitored for stability
2025-09-20T11:26:22: 💾 Data synced to files successfully
2025-09-20T11:26:52: 💾 Data synced to files successfully
2025-09-20T11:27:22: 💾 Data synced to files successfully
2025-09-20T11:27:52: 💾 Data synced to files successfully
2025-09-20T11:28:22: 💾 Data synced to files successfully
2025-09-20T11:28:52: 💾 Data synced to files successfully
2025-09-20T11:29:22: 💾 Data synced to files successfully
2025-09-20T11:29:52: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:29:52: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:29:52: ℹ️ [11:29:52 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 16432 },
  timestamp: 1758347992920
}
2025-09-20T11:29:52: ℹ️ [11:29:52 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 16432 },
  timestamp: 1758347992925
}
2025-09-20T11:29:52: 💾 Data synced to files successfully
2025-09-20T11:29:52: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:29:52: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:30:22: 💾 Data synced to files successfully
2025-09-20T11:30:28: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:30:28: 📝 Loaded 12 template types
2025-09-20T11:30:28: 📝 Enhanced Logger initialized
2025-09-20T11:30:28: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:30:28:    Auth Mode: both
2025-09-20T11:30:28:    QR Enabled: true
2025-09-20T11:30:28:    Phone Enabled: true
2025-09-20T11:30:28:    Session Persistence: true
2025-09-20T11:30:28:    Max Reconnect Attempts: 10
2025-09-20T11:30:28:    Default Phone: None
2025-09-20T11:30:28: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:30:28: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:30:28: 🔧 Developer Configuration initialized
2025-09-20T11:30:28: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758348028923,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 192,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:30:28: 🔧 Developer Configuration initialized
2025-09-20T11:30:28: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:30:28: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:30:28: ⏰ 4-minute startup delay active
2025-09-20T11:30:28: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:30:28: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:30:28: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758348028923,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 192,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:30:28: 📁 Loaded 0 sent messages from file
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:30:28: 📁 Loaded 0 customer histories from file
2025-09-20T11:30:28: 📁 Loaded 0 message hashes from file
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:30:28: 🗑️ Deleted old log file: bot-2025-09-19T16-52-01-241Z.log
2025-09-20T11:30:28: 📝 Enhanced Logger initialized
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:30:28: 📁 Loaded statistics from file
2025-09-20T11:30:28: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:30:28: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:30:28: 🧹 Removed stale process lock
2025-09-20T11:30:28: 🧹 Lock file already cleaned up
2025-09-20T11:30:28: 🔒 Process lock acquired (PID: 192)
2025-09-20T11:30:28: 🔒 Process lock acquired (PID: 192)
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 192
}
2025-09-20T11:30:28: ⏰ Starting 240 second startup grace period...
2025-09-20T11:30:28: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 192
}
2025-09-20T11:30:28: ⏰ Starting 240 second startup grace period...
2025-09-20T11:30:28: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:30:28: ℹ️ [11:30:28 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348028923, processId: 192 },
  timestamp: 1758348028994
}
2025-09-20T11:30:29: ℹ️ [11:30:28 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348028923, willExpireAt: 1758348268923 },
  timestamp: 1758348028994
}
2025-09-20T11:30:29: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:30:29: ⏰ Startup grace period: 240 seconds
2025-09-20T11:30:29: 📋 Message rules loaded: 8 types
2025-09-20T11:30:29: ℹ️ [11:30:29 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348028923, processId: 192 },
  timestamp: 1758348028996
}
2025-09-20T11:30:29: ℹ️ [11:30:29 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348028923, willExpireAt: 1758348268923 },
  timestamp: 1758348028996
}
2025-09-20T11:30:29: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:30:29: ⏰ Startup grace period: 240 seconds
2025-09-20T11:30:29: 📋 Message rules loaded: 8 types
2025-09-20T11:30:29: ℹ️ [11:30:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 79,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:30:29: ℹ️ [11:30:29 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 84,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:30:29: ✅ Safety Manager initialized
2025-09-20T11:30:29: 📁 Loaded 0 sent messages from file
2025-09-20T11:30:29: 📁 Loaded 0 customer histories from file
2025-09-20T11:30:29: 📁 Loaded 0 message hashes from file
2025-09-20T11:30:29: 📁 Loaded statistics from file
2025-09-20T11:30:29: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:30:29: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:30:29: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:30:29: 🔄 Starting WhatsApp connection...
2025-09-20T11:30:29: 🔄 Initializing WhatsApp client...
2025-09-20T11:30:29: ✅ WhatsApp connection started
2025-09-20T11:30:29: 🔧 Initializing admin commands...
2025-09-20T11:30:29: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:30:29: ✅ Admin commands system initialized
2025-09-20T11:30:29: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:30:29: 📞 Attempting to request pairing code...
2025-09-20T11:30:29: 💡 To use phone authentication:
2025-09-20T11:30:29:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:30:29:    2. Select "Phone Number Authentication"
2025-09-20T11:30:29:    3. Enter your phone number
2025-09-20T11:30:29:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:30:29: 🔄 Connecting to WhatsApp...
2025-09-20T11:30:31: ✅ WhatsApp connected successfully!
2025-09-20T11:30:31: 📱 Session established successfully
2025-09-20T11:30:31: 🔒 Session will be monitored for stability
2025-09-20T11:30:58: 💾 Data synced to files successfully
2025-09-20T11:31:28: 💾 Data synced to files successfully
2025-09-20T11:31:59: 💾 Data synced to files successfully
2025-09-20T11:32:29: 💾 Data synced to files successfully
2025-09-20T11:32:59: 💾 Data synced to files successfully
2025-09-20T11:33:29: 💾 Data synced to files successfully
2025-09-20T11:33:59: 💾 Data synced to files successfully
2025-09-20T11:34:29: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:34:29: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:34:29: ℹ️ [11:34:29 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 192 },
  timestamp: 1758348269014
}
2025-09-20T11:34:29: ℹ️ [11:34:29 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 192 },
  timestamp: 1758348269021
}
2025-09-20T11:34:29: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:34:29: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:34:29: 💾 Data synced to files successfully
2025-09-20T11:34:59: 💾 Data synced to files successfully
2025-09-20T11:35:29: 💾 Data synced to files successfully
2025-09-20T11:35:59: 💾 Data synced to files successfully
2025-09-20T11:36:29: 💾 Data synced to files successfully
2025-09-20T11:36:59: 💾 Data synced to files successfully
2025-09-20T11:37:03: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:37:03: 📝 Loaded 12 template types
2025-09-20T11:37:03: 📝 Enhanced Logger initialized
2025-09-20T11:37:03: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:37:03:    Auth Mode: both
2025-09-20T11:37:03:    QR Enabled: true
2025-09-20T11:37:03:    Phone Enabled: true
2025-09-20T11:37:03:    Session Persistence: true
2025-09-20T11:37:03:    Max Reconnect Attempts: 10
2025-09-20T11:37:03:    Default Phone: None
2025-09-20T11:37:03: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:37:03: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:37:03: 🔧 Developer Configuration initialized
2025-09-20T11:37:03: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758348423368,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 20912,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:37:03: 🔧 Developer Configuration initialized
2025-09-20T11:37:03: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:37:03: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:37:03: ⏰ 4-minute startup delay active
2025-09-20T11:37:03: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:37:03: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:37:03: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758348423368,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 20912,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:37:03: 📁 Loaded 0 sent messages from file
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:37:03: 📁 Loaded 0 customer histories from file
2025-09-20T11:37:03: 📁 Loaded 0 message hashes from file
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:37:03: 🗑️ Deleted old log file: bot-2025-09-19T16-57-18-781Z.log
2025-09-20T11:37:03: 📝 Enhanced Logger initialized
2025-09-20T11:37:03: 📁 Loaded statistics from file
2025-09-20T11:37:03: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:37:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:37:03: 🧹 Removed stale process lock
2025-09-20T11:37:03: 🧹 Removed stale process lock
2025-09-20T11:37:03: 🔒 Process lock acquired (PID: 20912)
2025-09-20T11:37:03: 🔒 Process lock acquired (PID: 20912)
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 20912
}
2025-09-20T11:37:03: ⏰ Starting 240 second startup grace period...
2025-09-20T11:37:03: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 20912
}
2025-09-20T11:37:03: ⏰ Starting 240 second startup grace period...
2025-09-20T11:37:03: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348423368, processId: 20912 },
  timestamp: 1758348423410
}
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348423368, willExpireAt: 1758348663368 },
  timestamp: 1758348423411
}
2025-09-20T11:37:03: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:37:03: ⏰ Startup grace period: 240 seconds
2025-09-20T11:37:03: 📋 Message rules loaded: 8 types
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348423368, willExpireAt: 1758348663368 },
  timestamp: 1758348423414
}
2025-09-20T11:37:03: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:37:03: ⏰ Startup grace period: 240 seconds
2025-09-20T11:37:03: 📋 Message rules loaded: 8 types
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348423368, processId: 20912 },
  timestamp: 1758348423413
}
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 48,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:37:03: ℹ️ [11:37:03 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 50,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:37:03: ✅ Safety Manager initialized
2025-09-20T11:37:03: 📁 Loaded 0 sent messages from file
2025-09-20T11:37:03: 📁 Loaded 0 customer histories from file
2025-09-20T11:37:03: 📁 Loaded 0 message hashes from file
2025-09-20T11:37:03: 📁 Loaded statistics from file
2025-09-20T11:37:03: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:37:03: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:37:03: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:37:03: 🔄 Starting WhatsApp connection...
2025-09-20T11:37:03: 🔄 Initializing WhatsApp client...
2025-09-20T11:37:03: ✅ WhatsApp connection started
2025-09-20T11:37:03: 🔧 Initializing admin commands...
2025-09-20T11:37:03: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:37:03: ✅ Admin commands system initialized
2025-09-20T11:37:03: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:37:03: 📞 Attempting to request pairing code...
2025-09-20T11:37:03: 💡 To use phone authentication:
2025-09-20T11:37:03:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:37:03:    2. Select "Phone Number Authentication"
2025-09-20T11:37:03:    3. Enter your phone number
2025-09-20T11:37:03:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:37:03: 🔄 Connecting to WhatsApp...
2025-09-20T11:37:05: ✅ WhatsApp connected successfully!
2025-09-20T11:37:05: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T11:37:05: 📱 Session established successfully
2025-09-20T11:37:05: 🔒 Session will be monitored for stability
2025-09-20T11:37:33: 💾 Data synced to files successfully
2025-09-20T11:38:03: 💾 Data synced to files successfully
2025-09-20T11:38:33: 💾 Data synced to files successfully
2025-09-20T11:39:03: 💾 Data synced to files successfully
2025-09-20T11:39:33: 💾 Data synced to files successfully
2025-09-20T11:40:03: 💾 Data synced to files successfully
2025-09-20T11:40:33: 💾 Data synced to files successfully
2025-09-20T11:41:03: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:41:03: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:41:03: ℹ️ [11:41:03 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 20912 },
  timestamp: 1758348663428
}
2025-09-20T11:41:03: 💾 Data synced to files successfully
2025-09-20T11:41:03: ℹ️ [11:41:03 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 20912 },
  timestamp: 1758348663430
}
2025-09-20T11:41:03: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:41:03: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:41:33: 💾 Data synced to files successfully
2025-09-20T11:41:58: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:41:58: 📝 Loaded 12 template types
2025-09-20T11:41:58: 📝 Enhanced Logger initialized
2025-09-20T11:41:58: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:41:58:    Auth Mode: both
2025-09-20T11:41:58:    QR Enabled: true
2025-09-20T11:41:58:    Phone Enabled: true
2025-09-20T11:41:58:    Session Persistence: true
2025-09-20T11:41:58:    Max Reconnect Attempts: 10
2025-09-20T11:41:58:    Default Phone: None
2025-09-20T11:41:58: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:41:58: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:41:58: 🔧 Developer Configuration initialized
2025-09-20T11:41:58: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758348718953,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 20620,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:41:58: 🔧 Developer Configuration initialized
2025-09-20T11:41:58: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:41:58: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:41:58: ⏰ 4-minute startup delay active
2025-09-20T11:41:58: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:41:58: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:41:58: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758348718953,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 20620,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:41:58: 📁 Loaded 0 sent messages from file
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:41:58: 📁 Loaded 0 customer histories from file
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:41:58: 📁 Loaded 0 message hashes from file
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:41:58: 🗑️ Deleted old log file: bot-2025-09-19T16-59-00-277Z.log
2025-09-20T11:41:58: 📝 Enhanced Logger initialized
2025-09-20T11:41:58: 📁 Loaded statistics from file
2025-09-20T11:41:58: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:41:58: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:41:58: 🧹 Removed stale process lock
2025-09-20T11:41:58: 🧹 Removed stale process lock
2025-09-20T11:41:58: 🔒 Process lock acquired (PID: 20620)
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 20620
}
2025-09-20T11:41:58: ⏰ Starting 240 second startup grace period...
2025-09-20T11:41:58: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:41:58: 🔒 Process lock acquired (PID: 20620)
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348718953, processId: 20620 },
  timestamp: 1758348718992
}
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348718953, willExpireAt: 1758348958953 },
  timestamp: 1758348718993
}
2025-09-20T11:41:58: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:41:58: ⏰ Startup grace period: 240 seconds
2025-09-20T11:41:58: 📋 Message rules loaded: 8 types
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 20620
}
2025-09-20T11:41:58: ⏰ Starting 240 second startup grace period...
2025-09-20T11:41:58: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:41:58: ℹ️ [11:41:58 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 44,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:41:58: ✅ Safety Manager initialized
2025-09-20T11:41:59: ℹ️ [11:41:59 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348718953, processId: 20620 },
  timestamp: 1758348718998
}
2025-09-20T11:41:59: ℹ️ [11:41:59 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758348718953, willExpireAt: 1758348958953 },
  timestamp: 1758348718998
}
2025-09-20T11:41:59: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:41:59: ⏰ Startup grace period: 240 seconds
2025-09-20T11:41:59: 📋 Message rules loaded: 8 types
2025-09-20T11:41:59: 📁 Loaded 0 sent messages from file
2025-09-20T11:41:59: ℹ️ [11:41:59 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 47,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:41:59: 📁 Loaded 0 customer histories from file
2025-09-20T11:41:59: 📁 Loaded 0 message hashes from file
2025-09-20T11:41:59: 📁 Loaded statistics from file
2025-09-20T11:41:59: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:41:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:41:59: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:41:59: 🔄 Starting WhatsApp connection...
2025-09-20T11:41:59: 🔄 Initializing WhatsApp client...
2025-09-20T11:41:59: ✅ WhatsApp connection started
2025-09-20T11:41:59: 🔧 Initializing admin commands...
2025-09-20T11:41:59: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:41:59: ✅ Admin commands system initialized
2025-09-20T11:41:59: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:41:59: 📞 Attempting to request pairing code...
2025-09-20T11:41:59: 💡 To use phone authentication:
2025-09-20T11:41:59:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:41:59:    2. Select "Phone Number Authentication"
2025-09-20T11:41:59:    3. Enter your phone number
2025-09-20T11:41:59:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:41:59: 🔄 Connecting to WhatsApp...
2025-09-20T11:42:00: ✅ WhatsApp connected successfully!
2025-09-20T11:42:00: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T11:42:00: 📱 Session established successfully
2025-09-20T11:42:00: 🔒 Session will be monitored for stability
2025-09-20T11:42:28: 💾 Data synced to files successfully
2025-09-20T11:42:59: 💾 Data synced to files successfully
2025-09-20T11:43:29: 💾 Data synced to files successfully
2025-09-20T11:43:59: 💾 Data synced to files successfully
2025-09-20T11:44:29: 💾 Data synced to files successfully
2025-09-20T11:44:59: 💾 Data synced to files successfully
2025-09-20T11:45:29: 💾 Data synced to files successfully
2025-09-20T11:45:59: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:45:59: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:45:59: ℹ️ [11:45:59 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 20620 },
  timestamp: 1758348959010
}
2025-09-20T11:45:59: ℹ️ [11:45:59 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 20620 },
  timestamp: 1758348959013
}
2025-09-20T11:45:59: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:45:59: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:45:59: 💾 Data synced to files successfully
2025-09-20T11:46:29: 💾 Data synced to files successfully
2025-09-20T11:46:59: 💾 Data synced to files successfully
2025-09-20T11:47:02: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:47:02: 📝 Loaded 12 template types
2025-09-20T11:47:02: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T11:47:02: 📝 Enhanced Logger initialized
2025-09-20T11:47:02: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:47:02:    Auth Mode: both
2025-09-20T11:47:02:    QR Enabled: true
2025-09-20T11:47:02:    Phone Enabled: true
2025-09-20T11:47:02:    Session Persistence: true
2025-09-20T11:47:02:    Max Reconnect Attempts: 10
2025-09-20T11:47:02:    Default Phone: None
2025-09-20T11:47:02: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:47:02: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:47:02: 🔧 Developer Configuration initialized
2025-09-20T11:47:02: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758349022887,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19140,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:47:02: 🔧 Developer Configuration initialized
2025-09-20T11:47:02: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:47:02: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:47:02: ⏰ 4-minute startup delay active
2025-09-20T11:47:02: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:47:02: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:47:02: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758349022887,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19140,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:47:02: 📁 Loaded 0 sent messages from file
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:47:02: 📁 Loaded 0 customer histories from file
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:47:02: 📁 Loaded 0 message hashes from file
2025-09-20T11:47:02: 🗑️ Deleted old log file: bot-2025-09-19T17-00-22-436Z.log
2025-09-20T11:47:02: 📝 Enhanced Logger initialized
2025-09-20T11:47:02: 📁 Loaded statistics from file
2025-09-20T11:47:02: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:47:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:47:02: 🧹 Lock file already cleaned up
2025-09-20T11:47:02: 🧹 Removed stale process lock
2025-09-20T11:47:02: 🔒 Process lock acquired (PID: 19140)
2025-09-20T11:47:02: 🔒 Process lock acquired (PID: 19140)
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19140
}
2025-09-20T11:47:02: ⏰ Starting 240 second startup grace period...
2025-09-20T11:47:02: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19140
}
2025-09-20T11:47:02: ⏰ Starting 240 second startup grace period...
2025-09-20T11:47:02: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349022887, processId: 19140 },
  timestamp: 1758349022927
}
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349022887, willExpireAt: 1758349262887 },
  timestamp: 1758349022928
}
2025-09-20T11:47:02: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:47:02: ⏰ Startup grace period: 240 seconds
2025-09-20T11:47:02: 📋 Message rules loaded: 8 types
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349022887, processId: 19140 },
  timestamp: 1758349022930
}
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349022887, willExpireAt: 1758349262887 },
  timestamp: 1758349022930
}
2025-09-20T11:47:02: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:47:02: ⏰ Startup grace period: 240 seconds
2025-09-20T11:47:02: 📋 Message rules loaded: 8 types
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 47,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:47:02: ✅ Safety Manager initialized
2025-09-20T11:47:02: ℹ️ [11:47:02 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 49,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:47:02: 📁 Loaded 0 sent messages from file
2025-09-20T11:47:02: 📁 Loaded 0 customer histories from file
2025-09-20T11:47:02: 📁 Loaded 0 message hashes from file
2025-09-20T11:47:02: 📁 Loaded statistics from file
2025-09-20T11:47:02: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:47:02: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:47:02: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:47:02: 🔄 Starting WhatsApp connection...
2025-09-20T11:47:02: 🔄 Initializing WhatsApp client...
2025-09-20T11:47:02: ✅ WhatsApp connection started
2025-09-20T11:47:02: 🔧 Initializing admin commands...
2025-09-20T11:47:02: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:47:02: ✅ Admin commands system initialized
2025-09-20T11:47:02: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:47:02: 📞 Attempting to request pairing code...
2025-09-20T11:47:02: 💡 To use phone authentication:
2025-09-20T11:47:02:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:47:02:    2. Select "Phone Number Authentication"
2025-09-20T11:47:02:    3. Enter your phone number
2025-09-20T11:47:02:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:47:02: 🔄 Connecting to WhatsApp...
2025-09-20T11:47:04: ✅ WhatsApp connected successfully!
2025-09-20T11:47:04: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T11:47:04: 📱 Session established successfully
2025-09-20T11:47:04: 🔒 Session will be monitored for stability
2025-09-20T11:47:32: 💾 Data synced to files successfully
2025-09-20T11:48:02: 💾 Data synced to files successfully
2025-09-20T11:48:32: 💾 Data synced to files successfully
2025-09-20T11:49:02: 💾 Data synced to files successfully
2025-09-20T11:49:32: 💾 Data synced to files successfully
2025-09-20T11:50:02: 💾 Data synced to files successfully
2025-09-20T11:50:33: 💾 Data synced to files successfully
2025-09-20T11:51:02: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:51:02: ✅ Startup grace period ended - message sending now allowed
2025-09-20T11:51:02: ℹ️ [11:51:02 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 19140 },
  timestamp: 1758349262947
}
2025-09-20T11:51:02: ℹ️ [11:51:02 am] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 19140 },
  timestamp: 1758349262952
}
2025-09-20T11:51:02: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:51:02: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T11:51:03: 💾 Data synced to files successfully
2025-09-20T11:51:33: 💾 Data synced to files successfully
2025-09-20T11:52:03: 💾 Data synced to files successfully
2025-09-20T11:52:33: 💾 Data synced to files successfully
2025-09-20T11:53:03: 💾 Data synced to files successfully
2025-09-20T11:53:33: 💾 Data synced to files successfully
2025-09-20T11:54:03: 💾 Data synced to files successfully
2025-09-20T11:54:33: 💾 Data synced to files successfully
2025-09-20T11:55:03: 💾 Data synced to files successfully
2025-09-20T11:55:33: 💾 Data synced to files successfully
2025-09-20T11:56:03: 💾 Data synced to files successfully
2025-09-20T11:56:33: 💾 Data synced to files successfully
2025-09-20T11:57:03: 💾 Data synced to files successfully
2025-09-20T11:57:33: 💾 Data synced to files successfully
2025-09-20T11:57:39: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T11:57:39: 📝 Loaded 12 template types
2025-09-20T11:57:39: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T11:57:39: 📝 Enhanced Logger initialized
2025-09-20T11:57:39: 🔧 WhatsApp Authentication Configuration:
2025-09-20T11:57:39:    Auth Mode: both
2025-09-20T11:57:39:    QR Enabled: true
2025-09-20T11:57:39:    Phone Enabled: true
2025-09-20T11:57:39:    Session Persistence: true
2025-09-20T11:57:39:    Max Reconnect Attempts: 10
2025-09-20T11:57:39:    Default Phone: None
2025-09-20T11:57:39: 🔒 Session validation enabled (check every 300s)
2025-09-20T11:57:39: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T11:57:39: 🔧 Developer Configuration initialized
2025-09-20T11:57:39: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758349659148,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16724,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:57:39: 🔧 Developer Configuration initialized
2025-09-20T11:57:39: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T11:57:39: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T11:57:39: ⏰ 4-minute startup delay active
2025-09-20T11:57:39: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T11:57:39: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T11:57:39: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758349659148,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 16724,
  nodeVersion: 'v22.19.0'
}
2025-09-20T11:57:39: 📁 Loaded 0 sent messages from file
2025-09-20T11:57:39: 📁 Loaded 0 customer histories from file
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T11:57:39: 📁 Loaded 0 message hashes from file
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:57:39: 🗑️ Deleted old log file: bot-2025-09-19T17-06-07-654Z.log
2025-09-20T11:57:39: 📝 Enhanced Logger initialized
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T11:57:39: 📁 Loaded statistics from file
2025-09-20T11:57:39: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:57:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:57:39: 🧹 Lock file already cleaned up
2025-09-20T11:57:39: 🧹 Removed stale process lock
2025-09-20T11:57:39: 🔒 Process lock acquired (PID: 16724)
2025-09-20T11:57:39: 🔒 Process lock acquired (PID: 16724)
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16724
}
2025-09-20T11:57:39: ⏰ Starting 240 second startup grace period...
2025-09-20T11:57:39: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 16724
}
2025-09-20T11:57:39: ⏰ Starting 240 second startup grace period...
2025-09-20T11:57:39: 🚫 All message sending is BLOCKED during grace period
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349659148, processId: 16724 },
  timestamp: 1758349659189
}
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349659148, willExpireAt: 1758349899148 },
  timestamp: 1758349659189
}
2025-09-20T11:57:39: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:57:39: ⏰ Startup grace period: 240 seconds
2025-09-20T11:57:39: 📋 Message rules loaded: 8 types
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349659148, willExpireAt: 1758349899148 },
  timestamp: 1758349659193
}
2025-09-20T11:57:39: 🛡️ Enhanced Safety Manager initialized
2025-09-20T11:57:39: ⏰ Startup grace period: 240 seconds
2025-09-20T11:57:39: 📋 Message rules loaded: 8 types
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758349659148, processId: 16724 },
  timestamp: 1758349659192
}
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 48,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:57:39: ℹ️ [11:57:39 am] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 49,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T11:57:39: ✅ Safety Manager initialized
2025-09-20T11:57:39: 📁 Loaded 0 sent messages from file
2025-09-20T11:57:39: 📁 Loaded 0 customer histories from file
2025-09-20T11:57:39: 📁 Loaded 0 message hashes from file
2025-09-20T11:57:39: 📁 Loaded statistics from file
2025-09-20T11:57:39: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:57:39: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T11:57:39: ✅ Duplicate Prevention Manager initialized
2025-09-20T11:57:39: 🔄 Starting WhatsApp connection...
2025-09-20T11:57:39: 🔄 Initializing WhatsApp client...
2025-09-20T11:57:39: ✅ WhatsApp connection started
2025-09-20T11:57:39: 🔧 Initializing admin commands...
2025-09-20T11:57:39: 📨 Message handler attached to WhatsApp socket
2025-09-20T11:57:39: ✅ Admin commands system initialized
2025-09-20T11:57:39: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T11:57:39: 📞 Attempting to request pairing code...
2025-09-20T11:57:39: 💡 To use phone authentication:
2025-09-20T11:57:39:    1. Use the dashboard at http://localhost:3001
2025-09-20T11:57:39:    2. Select "Phone Number Authentication"
2025-09-20T11:57:39:    3. Enter your phone number
2025-09-20T11:57:39:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T11:57:39: 🔄 Connecting to WhatsApp...
2025-09-20T11:57:44: ✅ WhatsApp connected successfully!
2025-09-20T11:57:44: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T11:57:44: 📱 Session established successfully
2025-09-20T11:57:44: 🔒 Session will be monitored for stability
2025-09-20T11:58:09: 💾 Data synced to files successfully
2025-09-20T11:58:39: 💾 Data synced to files successfully
2025-09-20T12:43:47: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T12:43:47: 📝 Loaded 12 template types
2025-09-20T12:43:47: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T12:43:47: 📝 Enhanced Logger initialized
2025-09-20T12:43:47: 🔧 WhatsApp Authentication Configuration:
2025-09-20T12:43:47:    Auth Mode: both
2025-09-20T12:43:47:    QR Enabled: true
2025-09-20T12:43:47:    Phone Enabled: true
2025-09-20T12:43:47:    Session Persistence: true
2025-09-20T12:43:47:    Max Reconnect Attempts: 10
2025-09-20T12:43:47:    Default Phone: None
2025-09-20T12:43:47: 🔒 Session validation enabled (check every 300s)
2025-09-20T12:43:47: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T12:43:47: 🔧 Developer Configuration initialized
2025-09-20T12:43:47: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758352427344,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14172,
  nodeVersion: 'v22.19.0'
}
2025-09-20T12:43:47: 🔧 Developer Configuration initialized
2025-09-20T12:43:47: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T12:43:47: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T12:43:47: ⏰ 4-minute startup delay active
2025-09-20T12:43:47: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T12:43:47: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T12:43:47: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758352427344,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14172,
  nodeVersion: 'v22.19.0'
}
2025-09-20T12:43:47: 📁 Loaded 0 sent messages from file
2025-09-20T12:43:47: 📁 Loaded 0 customer histories from file
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T12:43:47: 📁 Loaded 0 message hashes from file
2025-09-20T12:43:47: 📁 Loaded statistics from file
2025-09-20T12:43:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:43:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T12:43:47: 🗑️ Deleted old log file: bot-2025-09-19T17-10-17-548Z.log
2025-09-20T12:43:47: 📝 Enhanced Logger initialized
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T12:43:47: 🧹 Removed stale process lock
2025-09-20T12:43:47: 🧹 Lock file already cleaned up
2025-09-20T12:43:47: 🔒 Process lock acquired (PID: 14172)
2025-09-20T12:43:47: 🔒 Process lock acquired (PID: 14172)
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14172
}
2025-09-20T12:43:47: ⏰ Starting 240 second startup grace period...
2025-09-20T12:43:47: 🚫 All message sending is BLOCKED during grace period
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14172
}
2025-09-20T12:43:47: ⏰ Starting 240 second startup grace period...
2025-09-20T12:43:47: 🚫 All message sending is BLOCKED during grace period
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352427344, processId: 14172 },
  timestamp: 1758352427427
}
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352427344, willExpireAt: 1758352667344 },
  timestamp: 1758352427428
}
2025-09-20T12:43:47: 🛡️ Enhanced Safety Manager initialized
2025-09-20T12:43:47: ⏰ Startup grace period: 240 seconds
2025-09-20T12:43:47: 📋 Message rules loaded: 8 types
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352427344, processId: 14172 },
  timestamp: 1758352427428
}
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352427344, willExpireAt: 1758352667344 },
  timestamp: 1758352427428
}
2025-09-20T12:43:47: 🛡️ Enhanced Safety Manager initialized
2025-09-20T12:43:47: ⏰ Startup grace period: 240 seconds
2025-09-20T12:43:47: 📋 Message rules loaded: 8 types
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 86,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T12:43:47: ✅ Safety Manager initialized
2025-09-20T12:43:47: ℹ️ [12:43:47 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 87,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T12:43:47: 📁 Loaded 0 sent messages from file
2025-09-20T12:43:47: 📁 Loaded 0 customer histories from file
2025-09-20T12:43:47: 📁 Loaded 0 message hashes from file
2025-09-20T12:43:47: 📁 Loaded statistics from file
2025-09-20T12:43:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:43:47: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T12:43:47: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:43:47: 🔄 Starting WhatsApp connection...
2025-09-20T12:43:47: 🔄 Initializing WhatsApp client...
2025-09-20T12:43:47: ✅ WhatsApp connection started
2025-09-20T12:43:47: 🔧 Initializing admin commands...
2025-09-20T12:43:47: 📨 Message handler attached to WhatsApp socket
2025-09-20T12:43:47: ✅ Admin commands system initialized
2025-09-20T12:43:47: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T12:43:47: 📞 Attempting to request pairing code...
2025-09-20T12:43:47: 💡 To use phone authentication:
2025-09-20T12:43:47:    1. Use the dashboard at http://localhost:3001
2025-09-20T12:43:47:    2. Select "Phone Number Authentication"
2025-09-20T12:43:47:    3. Enter your phone number
2025-09-20T12:43:47:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T12:43:47: 🔄 Connecting to WhatsApp...
2025-09-20T12:43:49: ✅ WhatsApp connected successfully!
2025-09-20T12:43:49: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T12:43:49: 📱 Session established successfully
2025-09-20T12:43:49: 🔒 Session will be monitored for stability
2025-09-20T12:44:17: 💾 Data synced to files successfully
2025-09-20T12:44:47: 💾 Data synced to files successfully
2025-09-20T12:45:17: 💾 Data synced to files successfully
2025-09-20T12:45:47: 💾 Data synced to files successfully
2025-09-20T12:46:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T12:46:18: 📝 Loaded 12 template types
2025-09-20T12:46:18: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T12:46:18: 📝 Enhanced Logger initialized
2025-09-20T12:46:18: 🔧 WhatsApp Authentication Configuration:
2025-09-20T12:46:18:    Auth Mode: both
2025-09-20T12:46:18:    QR Enabled: true
2025-09-20T12:46:18:    Phone Enabled: true
2025-09-20T12:46:18:    Session Persistence: true
2025-09-20T12:46:18:    Max Reconnect Attempts: 10
2025-09-20T12:46:18:    Default Phone: None
2025-09-20T12:46:18: 🔒 Session validation enabled (check every 300s)
2025-09-20T12:46:18: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T12:46:18: 🔧 Developer Configuration initialized
2025-09-20T12:46:18: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758352578790,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19660,
  nodeVersion: 'v22.19.0'
}
2025-09-20T12:46:18: 🔧 Developer Configuration initialized
2025-09-20T12:46:18: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T12:46:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T12:46:18: ⏰ 4-minute startup delay active
2025-09-20T12:46:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T12:46:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T12:46:18: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758352578790,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19660,
  nodeVersion: 'v22.19.0'
}
2025-09-20T12:46:18: 📁 Loaded 0 sent messages from file
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T12:46:18: 📁 Loaded 0 customer histories from file
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T12:46:18: 📁 Loaded 0 message hashes from file
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T12:46:18: 📁 Loaded statistics from file
2025-09-20T12:46:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:46:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T12:46:18: 🗑️ Deleted old log file: bot-2025-09-19T17-12-24-799Z.log
2025-09-20T12:46:18: 📝 Enhanced Logger initialized
2025-09-20T12:46:18: 🧹 Removed stale process lock
2025-09-20T12:46:18: 🧹 Lock file already cleaned up
2025-09-20T12:46:18: 🔒 Process lock acquired (PID: 19660)
2025-09-20T12:46:18: 🔒 Process lock acquired (PID: 19660)
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19660
}
2025-09-20T12:46:18: ⏰ Starting 240 second startup grace period...
2025-09-20T12:46:18: 🚫 All message sending is BLOCKED during grace period
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19660
}
2025-09-20T12:46:18: ⏰ Starting 240 second startup grace period...
2025-09-20T12:46:18: 🚫 All message sending is BLOCKED during grace period
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352578790, processId: 19660 },
  timestamp: 1758352578818
}
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352578790, willExpireAt: 1758352818790 },
  timestamp: 1758352578818
}
2025-09-20T12:46:18: 🛡️ Enhanced Safety Manager initialized
2025-09-20T12:46:18: ⏰ Startup grace period: 240 seconds
2025-09-20T12:46:18: 📋 Message rules loaded: 8 types
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352578790, willExpireAt: 1758352818790 },
  timestamp: 1758352578819
}
2025-09-20T12:46:18: 🛡️ Enhanced Safety Manager initialized
2025-09-20T12:46:18: ⏰ Startup grace period: 240 seconds
2025-09-20T12:46:18: 📋 Message rules loaded: 8 types
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352578790, processId: 19660 },
  timestamp: 1758352578819
}
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 30,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T12:46:18: ℹ️ [12:46:18 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 30,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T12:46:18: ✅ Safety Manager initialized
2025-09-20T12:46:18: 📁 Loaded 0 sent messages from file
2025-09-20T12:46:18: 📁 Loaded 0 customer histories from file
2025-09-20T12:46:18: 📁 Loaded 0 message hashes from file
2025-09-20T12:46:18: 📁 Loaded statistics from file
2025-09-20T12:46:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:46:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T12:46:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:46:18: 🔄 Starting WhatsApp connection...
2025-09-20T12:46:18: 🔄 Initializing WhatsApp client...
2025-09-20T12:46:18: ✅ WhatsApp connection started
2025-09-20T12:46:18: 🔧 Initializing admin commands...
2025-09-20T12:46:18: 📨 Message handler attached to WhatsApp socket
2025-09-20T12:46:18: ✅ Admin commands system initialized
2025-09-20T12:46:18: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T12:46:18: 📞 Attempting to request pairing code...
2025-09-20T12:46:18: 💡 To use phone authentication:
2025-09-20T12:46:18:    1. Use the dashboard at http://localhost:3001
2025-09-20T12:46:18:    2. Select "Phone Number Authentication"
2025-09-20T12:46:18:    3. Enter your phone number
2025-09-20T12:46:18:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T12:46:18: 🔄 Connecting to WhatsApp...
2025-09-20T12:46:21: ✅ WhatsApp connected successfully!
2025-09-20T12:46:21: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T12:46:21: 📱 Session established successfully
2025-09-20T12:46:21: 🔒 Session will be monitored for stability
2025-09-20T12:46:48: 💾 Data synced to files successfully
2025-09-20T12:47:18: 💾 Data synced to files successfully
2025-09-20T12:47:48: 💾 Data synced to files successfully
2025-09-20T12:48:18: 💾 Data synced to files successfully
2025-09-20T12:48:48: 💾 Data synced to files successfully
2025-09-20T12:49:18: 💾 Data synced to files successfully
2025-09-20T12:49:48: 💾 Data synced to files successfully
2025-09-20T12:50:18: ✅ Startup grace period ended - message sending now allowed
2025-09-20T12:50:18: ✅ Startup grace period ended - message sending now allowed
2025-09-20T12:50:18: ℹ️ [12:50:18 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 19660 },
  timestamp: 1758352818836
}
2025-09-20T12:50:18: ℹ️ [12:50:18 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 19660 },
  timestamp: 1758352818840
}
2025-09-20T12:50:18: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T12:50:18: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T12:50:18: 💾 Data synced to files successfully
2025-09-20T12:50:48: 💾 Data synced to files successfully
2025-09-20T12:51:18: 💾 Data synced to files successfully
2025-09-20T12:51:48: 💾 Data synced to files successfully
2025-09-20T12:52:18: 💾 Data synced to files successfully
2025-09-20T12:52:48: 💾 Data synced to files successfully
2025-09-20T12:53:08: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T12:53:08: 📝 Loaded 12 template types
2025-09-20T12:53:08: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T12:53:08: 📝 Enhanced Logger initialized
2025-09-20T12:53:08: 🔧 WhatsApp Authentication Configuration:
2025-09-20T12:53:08:    Auth Mode: both
2025-09-20T12:53:08:    QR Enabled: true
2025-09-20T12:53:08:    Phone Enabled: true
2025-09-20T12:53:08:    Session Persistence: true
2025-09-20T12:53:08:    Max Reconnect Attempts: 10
2025-09-20T12:53:08:    Default Phone: None
2025-09-20T12:53:08: 🔒 Session validation enabled (check every 300s)
2025-09-20T12:53:08: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T12:53:08: 🔧 Developer Configuration initialized
2025-09-20T12:53:08: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758352988046,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14584,
  nodeVersion: 'v22.19.0'
}
2025-09-20T12:53:08: 🔧 Developer Configuration initialized
2025-09-20T12:53:08: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T12:53:08: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T12:53:08: ⏰ 4-minute startup delay active
2025-09-20T12:53:08: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T12:53:08: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T12:53:08: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758352988046,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 14584,
  nodeVersion: 'v22.19.0'
}
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T12:53:08: 📁 Loaded 0 sent messages from file
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T12:53:08: 📁 Loaded 0 customer histories from file
2025-09-20T12:53:08: 📁 Loaded 0 message hashes from file
2025-09-20T12:53:08: 📁 Loaded statistics from file
2025-09-20T12:53:08: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:53:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T12:53:08: 🗑️ Deleted old log file: bot-2025-09-20T05-40-47-932Z.log
2025-09-20T12:53:08: 📝 Enhanced Logger initialized
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T12:53:08: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T12:53:08: 🧹 Removed stale process lock
2025-09-20T12:53:08: 🔒 Process lock acquired (PID: 14584)
2025-09-20T12:53:08: 🔒 Process lock acquired (PID: 14584)
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14584
}
2025-09-20T12:53:08: ⏰ Starting 240 second startup grace period...
2025-09-20T12:53:08: 🚫 All message sending is BLOCKED during grace period
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 14584
}
2025-09-20T12:53:08: ⏰ Starting 240 second startup grace period...
2025-09-20T12:53:08: 🚫 All message sending is BLOCKED during grace period
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352988046, processId: 14584 },
  timestamp: 1758352988072
}
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352988046, willExpireAt: 1758353228046 },
  timestamp: 1758352988073
}
2025-09-20T12:53:08: 🛡️ Enhanced Safety Manager initialized
2025-09-20T12:53:08: ⏰ Startup grace period: 240 seconds
2025-09-20T12:53:08: 📋 Message rules loaded: 8 types
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352988046, willExpireAt: 1758353228046 },
  timestamp: 1758352988073
}
2025-09-20T12:53:08: 🛡️ Enhanced Safety Manager initialized
2025-09-20T12:53:08: ⏰ Startup grace period: 240 seconds
2025-09-20T12:53:08: 📋 Message rules loaded: 8 types
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758352988046, processId: 14584 },
  timestamp: 1758352988073
}
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 28,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T12:53:08: ✅ Safety Manager initialized
2025-09-20T12:53:08: ℹ️ [12:53:08 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 29,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T12:53:08: 📁 Loaded 0 sent messages from file
2025-09-20T12:53:08: 📁 Loaded 0 customer histories from file
2025-09-20T12:53:08: 📁 Loaded 0 message hashes from file
2025-09-20T12:53:08: 📁 Loaded statistics from file
2025-09-20T12:53:08: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:53:08: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T12:53:08: ✅ Duplicate Prevention Manager initialized
2025-09-20T12:53:08: 🔄 Starting WhatsApp connection...
2025-09-20T12:53:08: 🔄 Initializing WhatsApp client...
2025-09-20T12:53:08: ✅ WhatsApp connection started
2025-09-20T12:53:08: 🔧 Initializing admin commands...
2025-09-20T12:53:08: 📨 Message handler attached to WhatsApp socket
2025-09-20T12:53:08: ✅ Admin commands system initialized
2025-09-20T12:53:08: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T12:53:08: 📞 Attempting to request pairing code...
2025-09-20T12:53:08: 💡 To use phone authentication:
2025-09-20T12:53:08:    1. Use the dashboard at http://localhost:3001
2025-09-20T12:53:08:    2. Select "Phone Number Authentication"
2025-09-20T12:53:08:    3. Enter your phone number
2025-09-20T12:53:08:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T12:53:08: 🔄 Connecting to WhatsApp...
2025-09-20T12:53:09: ✅ WhatsApp connected successfully!
2025-09-20T12:53:09: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T12:53:09: 📱 Session established successfully
2025-09-20T12:53:09: 🔒 Session will be monitored for stability
2025-09-20T12:53:38: 💾 Data synced to files successfully
2025-09-20T12:54:08: 💾 Data synced to files successfully
2025-09-20T12:54:38: 💾 Data synced to files successfully
2025-09-20T12:55:08: 💾 Data synced to files successfully
2025-09-20T12:55:38: 💾 Data synced to files successfully
2025-09-20T12:56:08: 💾 Data synced to files successfully
2025-09-20T12:56:38: 💾 Data synced to files successfully
2025-09-20T12:57:08: ✅ Startup grace period ended - message sending now allowed
2025-09-20T12:57:08: ✅ Startup grace period ended - message sending now allowed
2025-09-20T12:57:08: ℹ️ [12:57:08 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 14584 },
  timestamp: 1758353228087
}
2025-09-20T12:57:08: ℹ️ [12:57:08 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 14584 },
  timestamp: 1758353228090
}
2025-09-20T12:57:08: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T12:57:08: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T12:57:08: 💾 Data synced to files successfully
2025-09-20T12:57:38: 💾 Data synced to files successfully
2025-09-20T12:58:08: 💾 Data synced to files successfully
2025-09-20T12:58:38: 💾 Data synced to files successfully
2025-09-20T12:59:08: 💾 Data synced to files successfully
2025-09-20T12:59:38: 💾 Data synced to files successfully
2025-09-20T13:00:08: 💾 Data synced to files successfully
2025-09-20T13:00:38: 💾 Data synced to files successfully
2025-09-20T13:01:08: 💾 Data synced to files successfully
2025-09-20T13:01:38: 💾 Data synced to files successfully
2025-09-20T13:02:08: 💾 Data synced to files successfully
2025-09-20T13:02:38: 💾 Data synced to files successfully
2025-09-20T13:03:08: 💾 Data synced to files successfully
2025-09-20T13:03:38: 💾 Data synced to files successfully
2025-09-20T13:04:08: 💾 Data synced to files successfully
2025-09-20T13:04:35: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:04:35: 📝 Loaded 12 template types
2025-09-20T13:04:35: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:04:35: 📝 Enhanced Logger initialized
2025-09-20T13:04:35: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:04:35:    Auth Mode: both
2025-09-20T13:04:35:    QR Enabled: true
2025-09-20T13:04:35:    Phone Enabled: true
2025-09-20T13:04:35:    Session Persistence: true
2025-09-20T13:04:35:    Max Reconnect Attempts: 10
2025-09-20T13:04:35:    Default Phone: None
2025-09-20T13:04:35: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:04:35: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:04:35: 🔧 Developer Configuration initialized
2025-09-20T13:04:35: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758353675707,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1356,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:04:35: 🔧 Developer Configuration initialized
2025-09-20T13:04:35: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:04:35: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:04:35: ⏰ 4-minute startup delay active
2025-09-20T13:04:35: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:04:35: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:04:35: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758353675707,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 1356,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:04:35: 📁 Loaded 0 sent messages from file
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:04:35: 📁 Loaded 0 customer histories from file
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:04:35: 📁 Loaded 0 message hashes from file
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:04:35: 📁 Loaded statistics from file
2025-09-20T13:04:35: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:04:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:04:35: 🗑️ Deleted old log file: bot-2025-09-20T05-48-53-925Z.log
2025-09-20T13:04:35: 📝 Enhanced Logger initialized
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:04:35: 🧹 Removed stale process lock
2025-09-20T13:04:35: 🧹 Removed stale process lock
2025-09-20T13:04:35: 🔒 Process lock acquired (PID: 1356)
2025-09-20T13:04:35: 🔒 Process lock acquired (PID: 1356)
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1356
}
2025-09-20T13:04:35: ⏰ Starting 240 second startup grace period...
2025-09-20T13:04:35: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 1356
}
2025-09-20T13:04:35: ⏰ Starting 240 second startup grace period...
2025-09-20T13:04:35: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758353675707, willExpireAt: 1758353915707 },
  timestamp: 1758353675742
}
2025-09-20T13:04:35: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:04:35: ⏰ Startup grace period: 240 seconds
2025-09-20T13:04:35: 📋 Message rules loaded: 8 types
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758353675707, processId: 1356 },
  timestamp: 1758353675741
}
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758353675707, willExpireAt: 1758353915707 },
  timestamp: 1758353675744
}
2025-09-20T13:04:35: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:04:35: ⏰ Startup grace period: 240 seconds
2025-09-20T13:04:35: 📋 Message rules loaded: 8 types
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 37,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758353675707, processId: 1356 },
  timestamp: 1758353675744
}
2025-09-20T13:04:35: ℹ️ [1:04:35 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 38,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:04:35: ✅ Safety Manager initialized
2025-09-20T13:04:35: 📁 Loaded 0 sent messages from file
2025-09-20T13:04:35: 📁 Loaded 0 customer histories from file
2025-09-20T13:04:35: 📁 Loaded 0 message hashes from file
2025-09-20T13:04:35: 📁 Loaded statistics from file
2025-09-20T13:04:35: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:04:35: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:04:35: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:04:35: 🔄 Starting WhatsApp connection...
2025-09-20T13:04:35: 🔄 Initializing WhatsApp client...
2025-09-20T13:04:35: ✅ WhatsApp connection started
2025-09-20T13:04:35: 🔧 Initializing admin commands...
2025-09-20T13:04:35: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:04:35: ✅ Admin commands system initialized
2025-09-20T13:04:35: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:04:35: 📞 Attempting to request pairing code...
2025-09-20T13:04:35: 💡 To use phone authentication:
2025-09-20T13:04:35:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:04:35:    2. Select "Phone Number Authentication"
2025-09-20T13:04:35:    3. Enter your phone number
2025-09-20T13:04:35:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:04:35: 🔄 Connecting to WhatsApp...
2025-09-20T13:04:37: ✅ WhatsApp connected successfully!
2025-09-20T13:04:37: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:04:37: 📱 Session established successfully
2025-09-20T13:04:37: 🔒 Session will be monitored for stability
2025-09-20T13:05:05: 💾 Data synced to files successfully
2025-09-20T13:05:35: 💾 Data synced to files successfully
2025-09-20T13:06:05: 💾 Data synced to files successfully
2025-09-20T13:06:35: 💾 Data synced to files successfully
2025-09-20T13:07:05: 💾 Data synced to files successfully
2025-09-20T13:07:35: 💾 Data synced to files successfully
2025-09-20T13:08:05: 💾 Data synced to files successfully
2025-09-20T13:08:35: ✅ Startup grace period ended - message sending now allowed
2025-09-20T13:08:35: ✅ Startup grace period ended - message sending now allowed
2025-09-20T13:08:35: ℹ️ [1:08:35 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 1356 },
  timestamp: 1758353915748
}
2025-09-20T13:08:35: ℹ️ [1:08:35 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 1356 },
  timestamp: 1758353915757
}
2025-09-20T13:08:35: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T13:08:35: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T13:08:35: 💾 Data synced to files successfully
2025-09-20T13:09:05: 💾 Data synced to files successfully
2025-09-20T13:09:35: 💾 Data synced to files successfully
2025-09-20T13:10:05: 💾 Data synced to files successfully
2025-09-20T13:10:35: 💾 Data synced to files successfully
2025-09-20T13:11:05: 💾 Data synced to files successfully
2025-09-20T13:11:35: 💾 Data synced to files successfully
2025-09-20T13:12:05: 💾 Data synced to files successfully
2025-09-20T13:12:35: 💾 Data synced to files successfully
2025-09-20T13:13:05: 💾 Data synced to files successfully
2025-09-20T13:13:35: 💾 Data synced to files successfully
2025-09-20T13:14:05: 💾 Data synced to files successfully
2025-09-20T13:14:35: 💾 Data synced to files successfully
2025-09-20T13:14:53: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:14:53: 📝 Loaded 12 template types
2025-09-20T13:14:53: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:14:53: 📝 Enhanced Logger initialized
2025-09-20T13:14:53: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:14:53:    Auth Mode: both
2025-09-20T13:14:53:    QR Enabled: true
2025-09-20T13:14:53:    Phone Enabled: true
2025-09-20T13:14:53:    Session Persistence: true
2025-09-20T13:14:53:    Max Reconnect Attempts: 10
2025-09-20T13:14:53:    Default Phone: None
2025-09-20T13:14:53: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:14:53: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:14:53: 🔧 Developer Configuration initialized
2025-09-20T13:14:53: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354293886,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11412,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:14:53: 🔧 Developer Configuration initialized
2025-09-20T13:14:53: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:14:53: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:14:53: ⏰ 4-minute startup delay active
2025-09-20T13:14:53: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:14:53: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:14:53: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354293886,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 11412,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:14:53: 📁 Loaded 0 sent messages from file
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:14:53: 📁 Loaded 0 customer histories from file
2025-09-20T13:14:53: 📁 Loaded 0 message hashes from file
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:14:53: 🗑️ Deleted old log file: bot-2025-09-20T05-55-52-873Z.log
2025-09-20T13:14:53: 📝 Enhanced Logger initialized
2025-09-20T13:14:53: 📁 Loaded statistics from file
2025-09-20T13:14:53: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:14:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:14:53: 🧹 Removed stale process lock
2025-09-20T13:14:53: 🧹 Lock file already cleaned up
2025-09-20T13:14:53: 🔒 Process lock acquired (PID: 11412)
2025-09-20T13:14:53: 🔒 Process lock acquired (PID: 11412)
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11412
}
2025-09-20T13:14:53: ⏰ Starting 240 second startup grace period...
2025-09-20T13:14:53: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 11412
}
2025-09-20T13:14:53: ⏰ Starting 240 second startup grace period...
2025-09-20T13:14:53: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354293886, processId: 11412 },
  timestamp: 1758354293952
}
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354293886, willExpireAt: 1758354533886 },
  timestamp: 1758354293953
}
2025-09-20T13:14:53: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:14:53: ⏰ Startup grace period: 240 seconds
2025-09-20T13:14:53: 📋 Message rules loaded: 8 types
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354293886, willExpireAt: 1758354533886 },
  timestamp: 1758354293962
}
2025-09-20T13:14:53: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:14:53: ⏰ Startup grace period: 240 seconds
2025-09-20T13:14:53: 📋 Message rules loaded: 8 types
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354293886, processId: 11412 },
  timestamp: 1758354293962
}
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 80,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:14:53: ℹ️ [1:14:53 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 84,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:14:53: ✅ Safety Manager initialized
2025-09-20T13:14:53: 📁 Loaded 0 sent messages from file
2025-09-20T13:14:53: 📁 Loaded 0 customer histories from file
2025-09-20T13:14:53: 📁 Loaded 0 message hashes from file
2025-09-20T13:14:53: 📁 Loaded statistics from file
2025-09-20T13:14:53: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:14:53: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:14:53: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:14:53: 🔄 Starting WhatsApp connection...
2025-09-20T13:14:53: 🔄 Initializing WhatsApp client...
2025-09-20T13:14:54: ✅ WhatsApp connection started
2025-09-20T13:14:54: 🔧 Initializing admin commands...
2025-09-20T13:14:54: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:14:54: ✅ Admin commands system initialized
2025-09-20T13:14:54: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:14:54: 📞 Attempting to request pairing code...
2025-09-20T13:14:54: 💡 To use phone authentication:
2025-09-20T13:14:54:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:14:54:    2. Select "Phone Number Authentication"
2025-09-20T13:14:54:    3. Enter your phone number
2025-09-20T13:14:54:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:14:54: 🔄 Connecting to WhatsApp...
2025-09-20T13:14:56: ✅ WhatsApp connected successfully!
2025-09-20T13:14:56: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:14:56: 📱 Session established successfully
2025-09-20T13:14:56: 🔒 Session will be monitored for stability
2025-09-20T13:15:23: 💾 Data synced to files successfully
2025-09-20T13:15:53: 💾 Data synced to files successfully
2025-09-20T13:16:23: 💾 Data synced to files successfully
2025-09-20T13:16:53: 💾 Data synced to files successfully
2025-09-20T13:17:23: 💾 Data synced to files successfully
2025-09-20T13:17:53: 💾 Data synced to files successfully
2025-09-20T13:18:15: 🔥🔥🔥 BOT.JS FILE IS BEING EXECUTED! 🔥🔥🔥
2025-09-20T13:18:17: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:18:17: 📝 Loaded 12 template types
2025-09-20T13:18:17: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:18:17: 📝 Enhanced Logger initialized
2025-09-20T13:18:17: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:18:17:    Auth Mode: both
2025-09-20T13:18:17:    QR Enabled: true
2025-09-20T13:18:17:    Phone Enabled: true
2025-09-20T13:18:17:    Session Persistence: true
2025-09-20T13:18:17:    Max Reconnect Attempts: 10
2025-09-20T13:18:17:    Default Phone: None
2025-09-20T13:18:17: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:18:17: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:18:17: 🔧 Developer Configuration initialized
2025-09-20T13:18:17: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354497870,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19808,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:18:17: 🔧 Developer Configuration initialized
2025-09-20T13:18:17: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:18:17: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:18:17: ⏰ 4-minute startup delay active
2025-09-20T13:18:17: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:18:17: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:18:17: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354497870,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 19808,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:18:17: 📁 Loaded 0 sent messages from file
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:18:17: 📁 Loaded 0 customer histories from file
2025-09-20T13:18:17: 📁 Loaded 0 message hashes from file
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:18:17: 🗑️ Deleted old log file: bot-2025-09-20T06-00-28-960Z.log
2025-09-20T13:18:17: 📝 Enhanced Logger initialized
2025-09-20T13:18:17: 📁 Loaded statistics from file
2025-09-20T13:18:17: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:18:17: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:18:17: 🧹 Lock file already cleaned up
2025-09-20T13:18:17: 🧹 Removed stale process lock
2025-09-20T13:18:17: 🔒 Process lock acquired (PID: 19808)
2025-09-20T13:18:17: 🔒 Process lock acquired (PID: 19808)
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19808
}
2025-09-20T13:18:17: ⏰ Starting 240 second startup grace period...
2025-09-20T13:18:17: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 19808
}
2025-09-20T13:18:17: ⏰ Starting 240 second startup grace period...
2025-09-20T13:18:17: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354497870, processId: 19808 },
  timestamp: 1758354497967
}
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354497870, willExpireAt: 1758354737870 },
  timestamp: 1758354497968
}
2025-09-20T13:18:17: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:18:17: ⏰ Startup grace period: 240 seconds
2025-09-20T13:18:17: 📋 Message rules loaded: 8 types
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354497870, processId: 19808 },
  timestamp: 1758354497970
}
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354497870, willExpireAt: 1758354737870 },
  timestamp: 1758354497970
}
2025-09-20T13:18:17: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:18:17: ⏰ Startup grace period: 240 seconds
2025-09-20T13:18:17: 📋 Message rules loaded: 8 types
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 106,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:18:17: ℹ️ [1:18:17 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 114,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:18:17: ✅ Safety Manager initialized
2025-09-20T13:18:17: 📁 Loaded 0 sent messages from file
2025-09-20T13:18:17: 📁 Loaded 0 customer histories from file
2025-09-20T13:18:17: 📁 Loaded 0 message hashes from file
2025-09-20T13:18:18: 📁 Loaded statistics from file
2025-09-20T13:18:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:18:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:18:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:18:18: 🔄 Starting WhatsApp connection...
2025-09-20T13:18:18: 🔄 Initializing WhatsApp client...
2025-09-20T13:18:18: ✅ WhatsApp connection started
2025-09-20T13:18:18: 🔧 Initializing admin commands...
2025-09-20T13:18:18: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:18:18: ✅ Admin commands system initialized
2025-09-20T13:18:18: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:18:18: 📞 Attempting to request pairing code...
2025-09-20T13:18:18: 💡 To use phone authentication:
2025-09-20T13:18:18:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:18:18:    2. Select "Phone Number Authentication"
2025-09-20T13:18:18:    3. Enter your phone number
2025-09-20T13:18:18:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:18:18: 🔄 Connecting to WhatsApp...
2025-09-20T13:18:20: ✅ WhatsApp connected successfully!
2025-09-20T13:18:20: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:18:20: 📱 Session established successfully
2025-09-20T13:18:20: 🔒 Session will be monitored for stability
2025-09-20T13:18:47: 💾 Data synced to files successfully
2025-09-20T13:19:17: 💾 Data synced to files successfully
2025-09-20T13:20:12: 🔥🔥🔥 BOT.JS FILE IS BEING EXECUTED! 🔥🔥🔥
2025-09-20T13:20:15: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:20:15: 📝 Loaded 12 template types
2025-09-20T13:20:15: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:20:15: 📝 Enhanced Logger initialized
2025-09-20T13:20:15: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:20:15:    Auth Mode: both
2025-09-20T13:20:15:    QR Enabled: true
2025-09-20T13:20:15:    Phone Enabled: true
2025-09-20T13:20:15:    Session Persistence: true
2025-09-20T13:20:15:    Max Reconnect Attempts: 10
2025-09-20T13:20:15:    Default Phone: None
2025-09-20T13:20:15: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:20:15: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:20:15: 🔧 Developer Configuration initialized
2025-09-20T13:20:15: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354615045,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 20308,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:20:15: 🔧 Developer Configuration initialized
2025-09-20T13:20:15: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:20:15: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:20:15: ⏰ 4-minute startup delay active
2025-09-20T13:20:15: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:20:15: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:20:15: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354615045,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 20308,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:20:15: 📁 Loaded 0 sent messages from file
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:20:15: 📁 Loaded 0 customer histories from file
2025-09-20T13:20:15: 📁 Loaded 0 message hashes from file
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:20:15: 🗑️ Deleted old log file: bot-2025-09-20T06-07-03-390Z.log
2025-09-20T13:20:15: 📝 Enhanced Logger initialized
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:20:15: 📁 Loaded statistics from file
2025-09-20T13:20:15: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:20:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:20:15: 🧹 Removed stale process lock
2025-09-20T13:20:15: 🧹 Lock file already cleaned up
2025-09-20T13:20:15: 🔒 Process lock acquired (PID: 20308)
2025-09-20T13:20:15: 🔒 Process lock acquired (PID: 20308)
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 20308
}
2025-09-20T13:20:15: ⏰ Starting 240 second startup grace period...
2025-09-20T13:20:15: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 20308
}
2025-09-20T13:20:15: ⏰ Starting 240 second startup grace period...
2025-09-20T13:20:15: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354615045, processId: 20308 },
  timestamp: 1758354615120
}
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354615045, processId: 20308 },
  timestamp: 1758354615123
}
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354615045, willExpireAt: 1758354855045 },
  timestamp: 1758354615121
}
2025-09-20T13:20:15: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:20:15: ⏰ Startup grace period: 240 seconds
2025-09-20T13:20:15: 📋 Message rules loaded: 8 types
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354615045, willExpireAt: 1758354855045 },
  timestamp: 1758354615123
}
2025-09-20T13:20:15: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:20:15: ⏰ Startup grace period: 240 seconds
2025-09-20T13:20:15: 📋 Message rules loaded: 8 types
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 82,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:20:15: ✅ Safety Manager initialized
2025-09-20T13:20:15: ℹ️ [1:20:15 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 83,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:20:15: 📁 Loaded 0 sent messages from file
2025-09-20T13:20:15: 📁 Loaded 0 customer histories from file
2025-09-20T13:20:15: 📁 Loaded 0 message hashes from file
2025-09-20T13:20:15: 📁 Loaded statistics from file
2025-09-20T13:20:15: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:20:15: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:20:15: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:20:15: 🔄 Starting WhatsApp connection...
2025-09-20T13:20:15: 🔄 Initializing WhatsApp client...
2025-09-20T13:20:15: ✅ WhatsApp connection started
2025-09-20T13:20:15: 🔧 Initializing admin commands...
2025-09-20T13:20:15: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:20:15: ✅ Admin commands system initialized
2025-09-20T13:20:15: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:20:15: 📞 Attempting to request pairing code...
2025-09-20T13:20:15: 💡 To use phone authentication:
2025-09-20T13:20:15:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:20:15:    2. Select "Phone Number Authentication"
2025-09-20T13:20:15:    3. Enter your phone number
2025-09-20T13:20:15:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:20:15: 🔄 Connecting to WhatsApp...
2025-09-20T13:20:16: ✅ WhatsApp connected successfully!
2025-09-20T13:20:16: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:20:16: 📱 Session established successfully
2025-09-20T13:20:16: 🔒 Session will be monitored for stability
2025-09-20T13:20:45: 💾 Data synced to files successfully
2025-09-20T13:21:15: 💾 Data synced to files successfully
2025-09-20T13:21:25: 🔥🔥🔥 BOT.JS CONSTRUCTOR CALLED! 🔥🔥🔥
2025-09-20T13:21:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:21:25: 📝 Loaded 12 template types
2025-09-20T13:21:25: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:21:25: 📝 Enhanced Logger initialized
2025-09-20T13:21:25: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:21:25:    Auth Mode: both
2025-09-20T13:21:25:    QR Enabled: true
2025-09-20T13:21:25:    Phone Enabled: true
2025-09-20T13:21:25:    Session Persistence: true
2025-09-20T13:21:25:    Max Reconnect Attempts: 10
2025-09-20T13:21:25:    Default Phone: None
2025-09-20T13:21:25: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:21:25: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:21:25: 🔧 Developer Configuration initialized
2025-09-20T13:21:25: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354685940,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 21384,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:21:25: 🔧 Developer Configuration initialized
2025-09-20T13:21:25: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:21:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:21:25: ⏰ 4-minute startup delay active
2025-09-20T13:21:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:21:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:21:25: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354685940,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 21384,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:21:25: 📁 Loaded 0 sent messages from file
2025-09-20T13:21:25: 📁 Loaded 0 customer histories from file
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:21:25: 📁 Loaded 0 message hashes from file
2025-09-20T13:21:25: 🗑️ Deleted old log file: bot-2025-09-20T06-11-58-971Z.log
2025-09-20T13:21:25: 📝 Enhanced Logger initialized
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:21:25: 📁 Loaded statistics from file
2025-09-20T13:21:25: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:21:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:21:25: 🧹 Removed stale process lock
2025-09-20T13:21:25: 🧹 Lock file already cleaned up
2025-09-20T13:21:25: 🔒 Process lock acquired (PID: 21384)
2025-09-20T13:21:25: 🔒 Process lock acquired (PID: 21384)
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 21384
}
2025-09-20T13:21:25: ⏰ Starting 240 second startup grace period...
2025-09-20T13:21:25: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 21384
}
2025-09-20T13:21:25: ⏰ Starting 240 second startup grace period...
2025-09-20T13:21:25: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354685940, willExpireAt: 1758354925940 },
  timestamp: 1758354685984
}
2025-09-20T13:21:25: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:21:25: ⏰ Startup grace period: 240 seconds
2025-09-20T13:21:25: 📋 Message rules loaded: 8 types
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354685940, processId: 21384 },
  timestamp: 1758354685984
}
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354685940, processId: 21384 },
  timestamp: 1758354685985
}
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354685940, willExpireAt: 1758354925940 },
  timestamp: 1758354685986
}
2025-09-20T13:21:25: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:21:25: ⏰ Startup grace period: 240 seconds
2025-09-20T13:21:25: 📋 Message rules loaded: 8 types
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 47,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:21:25: ℹ️ [1:21:25 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 48,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:21:25: ✅ Safety Manager initialized
2025-09-20T13:21:25: 📁 Loaded 0 sent messages from file
2025-09-20T13:21:25: 📁 Loaded 0 customer histories from file
2025-09-20T13:21:25: 📁 Loaded 0 message hashes from file
2025-09-20T13:21:25: 📁 Loaded statistics from file
2025-09-20T13:21:25: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:21:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:21:25: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:21:25: 🔄 Starting WhatsApp connection...
2025-09-20T13:21:25: 🔄 Initializing WhatsApp client...
2025-09-20T13:21:26: ✅ WhatsApp connection started
2025-09-20T13:21:26: 🔧 Initializing admin commands...
2025-09-20T13:21:26: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:21:26: ✅ Admin commands system initialized
2025-09-20T13:21:26: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:21:26: 📞 Attempting to request pairing code...
2025-09-20T13:21:26: 💡 To use phone authentication:
2025-09-20T13:21:26:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:21:26:    2. Select "Phone Number Authentication"
2025-09-20T13:21:26:    3. Enter your phone number
2025-09-20T13:21:26:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:21:26: 🔄 Connecting to WhatsApp...
2025-09-20T13:21:28: ✅ WhatsApp connected successfully!
2025-09-20T13:21:28: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:21:28: 📱 Session established successfully
2025-09-20T13:21:28: 🔒 Session will be monitored for stability
2025-09-20T13:21:55: 💾 Data synced to files successfully
2025-09-20T13:22:25: 💾 Data synced to files successfully
2025-09-20T13:22:55: 💾 Data synced to files successfully
2025-09-20T13:23:25: 💾 Data synced to files successfully
2025-09-20T13:23:55: 💾 Data synced to files successfully
2025-09-20T13:24:26: 💾 Data synced to files successfully
2025-09-20T13:24:54: 🔥🔥🔥 BOT.JS CONSTRUCTOR CALLED! 🔥🔥🔥
2025-09-20T13:24:54: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:24:54: 📝 Loaded 12 template types
2025-09-20T13:24:54: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:24:54: 📝 Enhanced Logger initialized
2025-09-20T13:24:54: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:24:54:    Auth Mode: both
2025-09-20T13:24:54:    QR Enabled: true
2025-09-20T13:24:54:    Phone Enabled: true
2025-09-20T13:24:54:    Session Persistence: true
2025-09-20T13:24:54:    Max Reconnect Attempts: 10
2025-09-20T13:24:54:    Default Phone: None
2025-09-20T13:24:54: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:24:54: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:24:54: 🔧 Developer Configuration initialized
2025-09-20T13:24:54: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354894718,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7152,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:24:54: 🔧 Developer Configuration initialized
2025-09-20T13:24:54: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:24:54: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:24:54: ⏰ 4-minute startup delay active
2025-09-20T13:24:54: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:24:54: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:24:54: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758354894718,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 7152,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:24:54: 📁 Loaded 0 sent messages from file
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:24:54: 📁 Loaded 0 customer histories from file
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:24:54: 📁 Loaded 0 message hashes from file
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:24:54: 🗑️ Deleted old log file: bot-2025-09-20T06-17-02-906Z.log
2025-09-20T13:24:54: 📝 Enhanced Logger initialized
2025-09-20T13:24:54: 📁 Loaded statistics from file
2025-09-20T13:24:54: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:24:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:24:54: 🧹 Removed stale process lock
2025-09-20T13:24:54: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T13:24:54: 🔒 Process lock acquired (PID: 7152)
2025-09-20T13:24:54: 🔒 Process lock acquired (PID: 7152)
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7152
}
2025-09-20T13:24:54: ⏰ Starting 240 second startup grace period...
2025-09-20T13:24:54: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 7152
}
2025-09-20T13:24:54: ⏰ Starting 240 second startup grace period...
2025-09-20T13:24:54: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354894718, willExpireAt: 1758355134718 },
  timestamp: 1758354894767
}
2025-09-20T13:24:54: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:24:54: ⏰ Startup grace period: 240 seconds
2025-09-20T13:24:54: 📋 Message rules loaded: 8 types
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354894718, processId: 7152 },
  timestamp: 1758354894767
}
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354894718, processId: 7152 },
  timestamp: 1758354894768
}
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758354894718, willExpireAt: 1758355134718 },
  timestamp: 1758354894768
}
2025-09-20T13:24:54: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:24:54: ⏰ Startup grace period: 240 seconds
2025-09-20T13:24:54: 📋 Message rules loaded: 8 types
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 52,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:24:54: ℹ️ [1:24:54 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 53,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:24:54: ✅ Safety Manager initialized
2025-09-20T13:24:54: 📁 Loaded 0 sent messages from file
2025-09-20T13:24:54: 📁 Loaded 0 customer histories from file
2025-09-20T13:24:54: 📁 Loaded 0 message hashes from file
2025-09-20T13:24:54: 📁 Loaded statistics from file
2025-09-20T13:24:54: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:24:54: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:24:54: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:24:54: 🔄 Starting WhatsApp connection...
2025-09-20T13:24:54: 🔄 Initializing WhatsApp client...
2025-09-20T13:24:54: ✅ WhatsApp connection started
2025-09-20T13:24:54: 🔧 Initializing admin commands...
2025-09-20T13:24:54: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:24:54: ✅ Admin commands system initialized
2025-09-20T13:24:54: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:24:54: 📞 Attempting to request pairing code...
2025-09-20T13:24:54: 💡 To use phone authentication:
2025-09-20T13:24:54:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:24:54:    2. Select "Phone Number Authentication"
2025-09-20T13:24:54:    3. Enter your phone number
2025-09-20T13:24:54:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:24:54: 🔄 Connecting to WhatsApp...
2025-09-20T13:24:57: ✅ WhatsApp connected successfully!
2025-09-20T13:24:57: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:24:57: 📱 Session established successfully
2025-09-20T13:24:57: 🔒 Session will be monitored for stability
2025-09-20T13:25:24: 💾 Data synced to files successfully
2025-09-20T13:25:54: 💾 Data synced to files successfully
2025-09-20T13:26:50: 🔥🔥🔥 BOT.JS CONSTRUCTOR CALLED! 🔥🔥🔥
2025-09-20T13:26:50: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:26:50: 📝 Loaded 12 template types
2025-09-20T13:26:50: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:26:50: 📝 Enhanced Logger initialized
2025-09-20T13:26:50: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:26:50:    Auth Mode: both
2025-09-20T13:26:50:    QR Enabled: true
2025-09-20T13:26:50:    Phone Enabled: true
2025-09-20T13:26:50:    Session Persistence: true
2025-09-20T13:26:50:    Max Reconnect Attempts: 10
2025-09-20T13:26:50:    Default Phone: None
2025-09-20T13:26:50: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:26:50: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:26:50: 🔧 Developer Configuration initialized
2025-09-20T13:26:50: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355010256,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 23508,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:26:50: 🔧 Developer Configuration initialized
2025-09-20T13:26:50: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:26:50: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:26:50: ⏰ 4-minute startup delay active
2025-09-20T13:26:50: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:26:50: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:26:50: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355010256,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 23508,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:26:50: 📁 Loaded 0 sent messages from file
2025-09-20T13:26:50: 📁 Loaded 0 customer histories from file
2025-09-20T13:26:50: 📁 Loaded 0 message hashes from file
2025-09-20T13:26:50: 📁 Loaded statistics from file
2025-09-20T13:26:50: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:26:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:26:50: 🗑️ Deleted old log file: bot-2025-09-20T06-27-39-173Z.log
2025-09-20T13:26:50: 📝 Enhanced Logger initialized
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:26:50: 🧹 Removed stale process lock
2025-09-20T13:26:50: 🧹 Removed stale process lock
2025-09-20T13:26:50: 🔒 Process lock acquired (PID: 23508)
2025-09-20T13:26:50: 🔒 Process lock acquired (PID: 23508)
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 23508
}
2025-09-20T13:26:50: ⏰ Starting 240 second startup grace period...
2025-09-20T13:26:50: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 23508
}
2025-09-20T13:26:50: ⏰ Starting 240 second startup grace period...
2025-09-20T13:26:50: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355010256, processId: 23508 },
  timestamp: 1758355010309
}
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355010256, willExpireAt: 1758355250256 },
  timestamp: 1758355010309
}
2025-09-20T13:26:50: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:26:50: ⏰ Startup grace period: 240 seconds
2025-09-20T13:26:50: 📋 Message rules loaded: 8 types
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355010256, processId: 23508 },
  timestamp: 1758355010311
}
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355010256, willExpireAt: 1758355250256 },
  timestamp: 1758355010311
}
2025-09-20T13:26:50: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:26:50: ⏰ Startup grace period: 240 seconds
2025-09-20T13:26:50: 📋 Message rules loaded: 8 types
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 57,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:26:50: ℹ️ [1:26:50 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 58,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:26:50: ✅ Safety Manager initialized
2025-09-20T13:26:50: 📁 Loaded 0 sent messages from file
2025-09-20T13:26:50: 📁 Loaded 0 customer histories from file
2025-09-20T13:26:50: 📁 Loaded 0 message hashes from file
2025-09-20T13:26:50: 📁 Loaded statistics from file
2025-09-20T13:26:50: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:26:50: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:26:50: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:26:50: 🔄 Starting WhatsApp connection...
2025-09-20T13:26:50: 🔄 Initializing WhatsApp client...
2025-09-20T13:26:50: ✅ WhatsApp connection started
2025-09-20T13:26:50: 🔧 Initializing admin commands...
2025-09-20T13:26:50: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:26:50: ✅ Admin commands system initialized
2025-09-20T13:26:50: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:26:50: 📞 Attempting to request pairing code...
2025-09-20T13:26:50: 💡 To use phone authentication:
2025-09-20T13:26:50:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:26:50:    2. Select "Phone Number Authentication"
2025-09-20T13:26:50:    3. Enter your phone number
2025-09-20T13:26:50:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:26:50: 🔄 Connecting to WhatsApp...
2025-09-20T13:26:52: ✅ WhatsApp connected successfully!
2025-09-20T13:26:52: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:26:52: 📱 Session established successfully
2025-09-20T13:26:52: 🔒 Session will be monitored for stability
2025-09-20T13:27:20: 💾 Data synced to files successfully
2025-09-20T13:27:50: 💾 Data synced to files successfully
2025-09-20T13:28:20: 💾 Data synced to files successfully
2025-09-20T13:28:25: 🔥🔥🔥 BOT.JS CONSTRUCTOR CALLED! 🔥🔥🔥
2025-09-20T13:28:25: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:28:25: 📝 Loaded 12 template types
2025-09-20T13:28:25: 🔥 DEBUG: Bot initialize method called - NEW VERSION RUNNING!
2025-09-20T13:28:25: 📝 Enhanced Logger initialized
2025-09-20T13:28:25: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:28:25:    Auth Mode: both
2025-09-20T13:28:25:    QR Enabled: true
2025-09-20T13:28:25:    Phone Enabled: true
2025-09-20T13:28:25:    Session Persistence: true
2025-09-20T13:28:25:    Max Reconnect Attempts: 10
2025-09-20T13:28:25:    Default Phone: None
2025-09-20T13:28:25: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:28:25: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:28:25: 🔧 Developer Configuration initialized
2025-09-20T13:28:25: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355105308,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 22708,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:28:25: 🔧 Developer Configuration initialized
2025-09-20T13:28:25: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:28:25: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:28:25: ⏰ 4-minute startup delay active
2025-09-20T13:28:25: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:28:25: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:28:25: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355105308,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 22708,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:28:25: 📁 Loaded 0 sent messages from file
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:28:25: 📁 Loaded 0 customer histories from file
2025-09-20T13:28:25: 📁 Loaded 0 message hashes from file
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:28:25: 🗑️ Deleted old log file: bot-2025-09-20T06-52-27-630Z.log
2025-09-20T13:28:25: 📝 Enhanced Logger initialized
2025-09-20T13:28:25: 📁 Loaded statistics from file
2025-09-20T13:28:25: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:28:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:28:25: 🧹 Removed stale process lock
2025-09-20T13:28:25: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T13:28:25: 🔒 Process lock acquired (PID: 22708)
2025-09-20T13:28:25: 🔒 Process lock acquired (PID: 22708)
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 22708
}
2025-09-20T13:28:25: ⏰ Starting 240 second startup grace period...
2025-09-20T13:28:25: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 22708
}
2025-09-20T13:28:25: ⏰ Starting 240 second startup grace period...
2025-09-20T13:28:25: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355105308, willExpireAt: 1758355345308 },
  timestamp: 1758355105360
}
2025-09-20T13:28:25: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:28:25: ⏰ Startup grace period: 240 seconds
2025-09-20T13:28:25: 📋 Message rules loaded: 8 types
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355105308, processId: 22708 },
  timestamp: 1758355105360
}
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355105308, processId: 22708 },
  timestamp: 1758355105361
}
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355105308, willExpireAt: 1758355345308 },
  timestamp: 1758355105361
}
2025-09-20T13:28:25: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:28:25: ⏰ Startup grace period: 240 seconds
2025-09-20T13:28:25: 📋 Message rules loaded: 8 types
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 56,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:28:25: ℹ️ [1:28:25 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 57,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:28:25: ✅ Safety Manager initialized
2025-09-20T13:28:25: 📁 Loaded 0 sent messages from file
2025-09-20T13:28:25: 📁 Loaded 0 customer histories from file
2025-09-20T13:28:25: 📁 Loaded 0 message hashes from file
2025-09-20T13:28:25: 📁 Loaded statistics from file
2025-09-20T13:28:25: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:28:25: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:28:25: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:28:25: 🔄 Starting WhatsApp connection...
2025-09-20T13:28:25: 🔄 Initializing WhatsApp client...
2025-09-20T13:28:25: ✅ WhatsApp connection started
2025-09-20T13:28:25: 🔧 Initializing admin commands...
2025-09-20T13:28:25: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:28:25: ✅ Admin commands system initialized
2025-09-20T13:28:25: 🔄 Initializing polling functionality...
2025-09-20T13:28:25: ⏰ Scheduling polling start in 5 seconds...
2025-09-20T13:28:25: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:28:25: 📞 Attempting to request pairing code...
2025-09-20T13:28:25: 💡 To use phone authentication:
2025-09-20T13:28:25:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:28:25:    2. Select "Phone Number Authentication"
2025-09-20T13:28:25:    3. Enter your phone number
2025-09-20T13:28:25:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:28:25: 🔄 Connecting to WhatsApp...
2025-09-20T13:28:28: ✅ WhatsApp connected successfully!
2025-09-20T13:28:28: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:28:28: 📱 Session established successfully
2025-09-20T13:28:28: 🔒 Session will be monitored for stability
2025-09-20T13:28:30: 🚀 About to start polling...
2025-09-20T13:28:30: 🔄 Starting order polling...
2025-09-20T13:28:30: 🔍 Starting processOrders check...
2025-09-20T13:28:30: 📊 Processing orders from Google Sheets...
2025-09-20T13:28:30: ✅ Order polling started (3-minute intervals)
2025-09-20T13:28:55: 💾 Data synced to files successfully
2025-09-20T13:29:25: 💾 Data synced to files successfully
2025-09-20T13:29:55: 💾 Data synced to files successfully
2025-09-20T13:30:25: 💾 Data synced to files successfully
2025-09-20T13:30:55: ❌ Error syncing to files: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\duplicate-prevention-data\customer-history.json'
2025-09-20T13:31:25: ❌ Error syncing to files: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\duplicate-prevention-data\message-hashes.json'
2025-09-20T13:31:30: 🔍 Starting processOrders check...
2025-09-20T13:31:30: 📊 Processing orders from Google Sheets...
2025-09-20T13:31:55: ❌ Error syncing to files: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\duplicate-prevention-data\sent-messages.json'
2025-09-20T13:32:25: ✅ Startup grace period ended - message sending now allowed
2025-09-20T13:32:25: ✅ Startup grace period ended - message sending now allowed
2025-09-20T13:32:25: ❌ Failed to write log: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\logs\bot-2025-09-20T07-58-25-340Z.log'
2025-09-20T13:32:25: ❌ Failed to write log: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\logs\bot-2025-09-20T07-58-25-340Z.log'
2025-09-20T13:32:25: ❌ Error syncing to files: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\duplicate-prevention-data\customer-history.json'
2025-09-20T13:32:25: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T13:32:25: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T13:32:55: ❌ Error syncing to files: ENOENT: no such file or directory, open 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\duplicate-prevention-data\statistics.json'
2025-09-20T13:33:05: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:33:05: 📝 Loaded 12 template types
2025-09-20T13:33:05: 📝 Enhanced Logger initialized
2025-09-20T13:33:05: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:33:05:    Auth Mode: both
2025-09-20T13:33:05:    QR Enabled: true
2025-09-20T13:33:05:    Phone Enabled: true
2025-09-20T13:33:05:    Session Persistence: true
2025-09-20T13:33:05:    Max Reconnect Attempts: 10
2025-09-20T13:33:05:    Default Phone: None
2025-09-20T13:33:05: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:33:05: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:33:05: 🔧 Developer Configuration initialized
2025-09-20T13:33:05: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355385391,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18872,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:33:05: 🔧 Developer Configuration initialized
2025-09-20T13:33:05: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:33:05: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:33:05: ⏰ 4-minute startup delay active
2025-09-20T13:33:05: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:33:05: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:33:05: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355385391,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 18872,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:33:05: 📝 Enhanced Logger initialized
2025-09-20T13:33:05: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:33:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:33:05: 🧹 Removed stale process lock
2025-09-20T13:33:05: 🔒 Process lock acquired (PID: 18872)
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18872
}
2025-09-20T13:33:05: ⏰ Starting 240 second startup grace period...
2025-09-20T13:33:05: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:33:05: 🔒 Process lock acquired (PID: 18872)
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355385391, processId: 18872 },
  timestamp: 1758355385679
}
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355385391, willExpireAt: 1758355625391 },
  timestamp: 1758355385680
}
2025-09-20T13:33:05: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:33:05: ⏰ Startup grace period: 240 seconds
2025-09-20T13:33:05: 📋 Message rules loaded: 8 types
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 18872
}
2025-09-20T13:33:05: ⏰ Starting 240 second startup grace period...
2025-09-20T13:33:05: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 317,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:33:05: ✅ Safety Manager initialized
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355385391, processId: 18872 },
  timestamp: 1758355385712
}
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355385391, willExpireAt: 1758355625391 },
  timestamp: 1758355385713
}
2025-09-20T13:33:05: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:33:05: ⏰ Startup grace period: 240 seconds
2025-09-20T13:33:05: 📋 Message rules loaded: 8 types
2025-09-20T13:33:05: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:33:05: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:33:05: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:33:05: 🔄 Starting WhatsApp connection...
2025-09-20T13:33:05: 🔄 Initializing WhatsApp client...
2025-09-20T13:33:05: ℹ️ [1:33:05 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 330,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:33:05: ✅ WhatsApp connection started
2025-09-20T13:33:05: 🔧 Initializing admin commands...
2025-09-20T13:33:05: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:33:05: ✅ Admin commands system initialized
2025-09-20T13:33:05: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:33:05: 📞 Attempting to request pairing code...
2025-09-20T13:33:05: 💡 To use phone authentication:
2025-09-20T13:33:05:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:33:05:    2. Select "Phone Number Authentication"
2025-09-20T13:33:05:    3. Enter your phone number
2025-09-20T13:33:05:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:33:05: 🔄 Connecting to WhatsApp...
2025-09-20T13:33:07: ✅ WhatsApp connected successfully!
2025-09-20T13:33:07: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:33:07: 📱 Session established successfully
2025-09-20T13:33:07: 🔒 Session will be monitored for stability
2025-09-20T13:33:35: 💾 Data synced to files successfully
2025-09-20T13:34:05: 💾 Data synced to files successfully
2025-09-20T13:34:20: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:34:20: 📝 Loaded 12 template types
2025-09-20T13:34:20: 📝 Enhanced Logger initialized
2025-09-20T13:34:20: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:34:20:    Auth Mode: both
2025-09-20T13:34:20:    QR Enabled: true
2025-09-20T13:34:20:    Phone Enabled: true
2025-09-20T13:34:20:    Session Persistence: true
2025-09-20T13:34:20:    Max Reconnect Attempts: 10
2025-09-20T13:34:20:    Default Phone: None
2025-09-20T13:34:20: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:34:20: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:34:20: 🔧 Developer Configuration initialized
2025-09-20T13:34:20: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355460273,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13556,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:34:20: 🔧 Developer Configuration initialized
2025-09-20T13:34:20: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:34:20: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:34:20: ⏰ 4-minute startup delay active
2025-09-20T13:34:20: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:34:20: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:34:20: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355460273,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 13556,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:34:20: 📝 Enhanced Logger initialized
2025-09-20T13:34:20: 📁 Loaded 0 sent messages from file
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:34:20: 📁 Loaded 0 customer histories from file
2025-09-20T13:34:20: 📁 Loaded 0 message hashes from file
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:34:20: 📁 Loaded statistics from file
2025-09-20T13:34:20: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:34:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:34:20: 🧹 Removed stale process lock
2025-09-20T13:34:20: 🧹 Lock file already cleaned up
2025-09-20T13:34:20: 🔒 Process lock acquired (PID: 13556)
2025-09-20T13:34:20: 🔒 Process lock acquired (PID: 13556)
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13556
}
2025-09-20T13:34:20: ⏰ Starting 240 second startup grace period...
2025-09-20T13:34:20: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 13556
}
2025-09-20T13:34:20: ⏰ Starting 240 second startup grace period...
2025-09-20T13:34:20: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355460273, processId: 13556 },
  timestamp: 1758355460325
}
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355460273, willExpireAt: 1758355700273 },
  timestamp: 1758355460326
}
2025-09-20T13:34:20: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:34:20: ⏰ Startup grace period: 240 seconds
2025-09-20T13:34:20: 📋 Message rules loaded: 8 types
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355460273, processId: 13556 },
  timestamp: 1758355460328
}
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355460273, willExpireAt: 1758355700273 },
  timestamp: 1758355460328
}
2025-09-20T13:34:20: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:34:20: ⏰ Startup grace period: 240 seconds
2025-09-20T13:34:20: 📋 Message rules loaded: 8 types
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 58,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:34:20: ℹ️ [1:34:20 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 61,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:34:20: ✅ Safety Manager initialized
2025-09-20T13:34:20: 📁 Loaded 0 sent messages from file
2025-09-20T13:34:20: 📁 Loaded 0 customer histories from file
2025-09-20T13:34:20: 📁 Loaded 0 message hashes from file
2025-09-20T13:34:20: 📁 Loaded statistics from file
2025-09-20T13:34:20: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:34:20: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:34:20: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:34:20: 🔄 Starting WhatsApp connection...
2025-09-20T13:34:20: 🔄 Initializing WhatsApp client...
2025-09-20T13:34:20: ✅ WhatsApp connection started
2025-09-20T13:34:20: 🔧 Initializing admin commands...
2025-09-20T13:34:20: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:34:20: ✅ Admin commands system initialized
2025-09-20T13:34:20: 🔄 Initializing polling functionality...
2025-09-20T13:34:20: ⏰ Scheduling polling start in 5 seconds...
2025-09-20T13:34:20: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:34:20: 📞 Attempting to request pairing code...
2025-09-20T13:34:20: 💡 To use phone authentication:
2025-09-20T13:34:20:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:34:20:    2. Select "Phone Number Authentication"
2025-09-20T13:34:20:    3. Enter your phone number
2025-09-20T13:34:20:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:34:20: 🔄 Connecting to WhatsApp...
2025-09-20T13:34:22: ✅ WhatsApp connected successfully!
2025-09-20T13:34:22: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:34:22: 📱 Session established successfully
2025-09-20T13:34:22: 🔒 Session will be monitored for stability
2025-09-20T13:34:25: 🚀 About to start polling...
2025-09-20T13:34:25: 🔄 Starting order polling...
2025-09-20T13:34:25: 🔍 Starting processOrders check...
2025-09-20T13:34:25: 📊 Processing orders from Google Sheets...
2025-09-20T13:34:25: ✅ Order polling started (3-minute intervals)
2025-09-20T13:34:50: 💾 Data synced to files successfully
2025-09-20T13:35:20: 💾 Data synced to files successfully
2025-09-20T13:35:50: 💾 Data synced to files successfully
2025-09-20T13:36:20: 💾 Data synced to files successfully
2025-09-20T13:36:50: 💾 Data synced to files successfully
2025-09-20T13:37:20: 💾 Data synced to files successfully
2025-09-20T13:37:25: 🔍 Starting processOrders check...
2025-09-20T13:37:25: 📊 Processing orders from Google Sheets...
2025-09-20T13:37:50: 💾 Data synced to files successfully
2025-09-20T13:38:20: ✅ Startup grace period ended - message sending now allowed
2025-09-20T13:38:20: ✅ Startup grace period ended - message sending now allowed
2025-09-20T13:38:20: ℹ️ [1:38:20 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 13556 },
  timestamp: 1758355700349
}
2025-09-20T13:38:20: ℹ️ [1:38:20 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 13556 },
  timestamp: 1758355700342
}
2025-09-20T13:38:20: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T13:38:20: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T13:38:20: 💾 Data synced to files successfully
2025-09-20T13:38:50: 💾 Data synced to files successfully
2025-09-20T13:39:20: 💾 Data synced to files successfully
2025-09-20T13:39:50: 💾 Data synced to files successfully
2025-09-20T13:40:20: 💾 Data synced to files successfully
2025-09-20T13:40:25: 🔍 Starting processOrders check...
2025-09-20T13:40:25: 📊 Processing orders from Google Sheets...
2025-09-20T13:40:50: 💾 Data synced to files successfully
2025-09-20T13:41:18: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:41:18: 📝 Loaded 12 template types
2025-09-20T13:41:18: 📝 Enhanced Logger initialized
2025-09-20T13:41:18: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:41:18:    Auth Mode: both
2025-09-20T13:41:18:    QR Enabled: true
2025-09-20T13:41:18:    Phone Enabled: true
2025-09-20T13:41:18:    Session Persistence: true
2025-09-20T13:41:18:    Max Reconnect Attempts: 10
2025-09-20T13:41:18:    Default Phone: None
2025-09-20T13:41:18: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:41:18: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:41:18: 🔧 Developer Configuration initialized
2025-09-20T13:41:18: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355878243,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8760,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:41:18: 🔧 Developer Configuration initialized
2025-09-20T13:41:18: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:41:18: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:41:18: ⏰ 4-minute startup delay active
2025-09-20T13:41:18: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:41:18: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:41:18: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:41:18: 🔑 Initializing Google Sheets API...
2025-09-20T13:41:18: ✅ Google Sheets API initialized
2025-09-20T13:41:18: ✅ Google Sheets API initialized
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758355878243,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 8760,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:41:18: 📝 Enhanced Logger initialized
2025-09-20T13:41:18: 📁 Loaded 0 sent messages from file
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:41:18: 📁 Loaded 0 customer histories from file
2025-09-20T13:41:18: 📁 Loaded 0 message hashes from file
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:41:18: 📁 Loaded statistics from file
2025-09-20T13:41:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:41:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:41:18: 🧹 Removed stale process lock
2025-09-20T13:41:18: 🧹 Lock file already cleaned up
2025-09-20T13:41:18: 🔒 Process lock acquired (PID: 8760)
2025-09-20T13:41:18: 🔒 Process lock acquired (PID: 8760)
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8760
}
2025-09-20T13:41:18: ⏰ Starting 240 second startup grace period...
2025-09-20T13:41:18: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 8760
}
2025-09-20T13:41:18: ⏰ Starting 240 second startup grace period...
2025-09-20T13:41:18: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355878243, processId: 8760 },
  timestamp: 1758355878318
}
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355878243, willExpireAt: 1758356118243 },
  timestamp: 1758355878319
}
2025-09-20T13:41:18: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:41:18: ⏰ Startup grace period: 240 seconds
2025-09-20T13:41:18: 📋 Message rules loaded: 8 types
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355878243, processId: 8760 },
  timestamp: 1758355878321
}
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758355878243, willExpireAt: 1758356118243 },
  timestamp: 1758355878323
}
2025-09-20T13:41:18: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:41:18: ⏰ Startup grace period: 240 seconds
2025-09-20T13:41:18: 📋 Message rules loaded: 8 types
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 87,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:41:18: ✅ Safety Manager initialized
2025-09-20T13:41:18: ℹ️ [1:41:18 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 88,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:41:18: 📁 Loaded 0 sent messages from file
2025-09-20T13:41:18: 📁 Loaded 0 customer histories from file
2025-09-20T13:41:18: 📁 Loaded 0 message hashes from file
2025-09-20T13:41:18: 📁 Loaded statistics from file
2025-09-20T13:41:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:41:18: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:41:18: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:41:18: 🔄 Starting WhatsApp connection...
2025-09-20T13:41:18: 🔄 Initializing WhatsApp client...
2025-09-20T13:41:18: ✅ WhatsApp connection started
2025-09-20T13:41:18: 🔧 Initializing admin commands...
2025-09-20T13:41:18: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:41:18: ✅ Admin commands system initialized
2025-09-20T13:41:18: 🔄 Initializing polling functionality...
2025-09-20T13:41:18: ⏰ Scheduling polling start in 5 seconds...
2025-09-20T13:41:18: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:41:18: 📞 Attempting to request pairing code...
2025-09-20T13:41:18: 💡 To use phone authentication:
2025-09-20T13:41:18:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:41:18:    2. Select "Phone Number Authentication"
2025-09-20T13:41:18:    3. Enter your phone number
2025-09-20T13:41:18:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:41:18: 🔄 Connecting to WhatsApp...
2025-09-20T13:41:20: ✅ WhatsApp connected successfully!
2025-09-20T13:41:20: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:41:20: 📱 Session established successfully
2025-09-20T13:41:20: 🔒 Session will be monitored for stability
2025-09-20T13:41:23: 🚀 About to start polling...
2025-09-20T13:41:23: 🔄 Starting order polling...
2025-09-20T13:41:23: 🔍 Starting processOrders check...
2025-09-20T13:41:23: 📊 Processing orders from Google Sheets...
2025-09-20T13:41:23: 🔍 Processing sheet: Main Orders (orders)
2025-09-20T13:41:23: ✅ Order polling started (3-minute intervals)
2025-09-20T13:41:24: Failed to get sheet data from Main Orders: Unable to parse range: Main Orders!A:Z
2025-09-20T13:41:24: No orders found in Main Orders
2025-09-20T13:41:24: 🔍 Processing sheet: Fabric Orders (fabric)
2025-09-20T13:41:24: No orders found in Fabric Orders
2025-09-20T13:41:24: 🔍 Processing sheet: Combined Orders (combined-orders)
2025-09-20T13:41:25: Failed to get sheet data from Combined Orders: Unable to parse range: Combined Orders!A:Z
2025-09-20T13:41:25: No orders found in Combined Orders
2025-09-20T13:41:48: 💾 Data synced to files successfully
2025-09-20T13:42:18: 💾 Data synced to files successfully
2025-09-20T13:42:48: 💾 Data synced to files successfully
2025-09-20T13:43:18: 💾 Data synced to files successfully
2025-09-20T13:43:48: 💾 Data synced to files successfully
2025-09-20T13:44:18: 💾 Data synced to files successfully
2025-09-20T13:44:23: 🔍 Starting processOrders check...
2025-09-20T13:44:23: 📊 Processing orders from Google Sheets...
2025-09-20T13:44:23: 🔍 Processing sheet: Main Orders (orders)
2025-09-20T13:44:24: Failed to get sheet data from Main Orders: Unable to parse range: Main Orders!A:Z
2025-09-20T13:44:24: No orders found in Main Orders
2025-09-20T13:44:24: 🔍 Processing sheet: Fabric Orders (fabric)
2025-09-20T13:44:24: No orders found in Fabric Orders
2025-09-20T13:44:24: 🔍 Processing sheet: Combined Orders (combined-orders)
2025-09-20T13:44:25: Failed to get sheet data from Combined Orders: Unable to parse range: Combined Orders!A:Z
2025-09-20T13:44:25: No orders found in Combined Orders
2025-09-20T13:44:48: 💾 Data synced to files successfully
2025-09-20T13:44:59: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T13:44:59: 📝 Loaded 12 template types
2025-09-20T13:44:59: 📝 Enhanced Logger initialized
2025-09-20T13:44:59: 🔧 WhatsApp Authentication Configuration:
2025-09-20T13:44:59:    Auth Mode: both
2025-09-20T13:44:59:    QR Enabled: true
2025-09-20T13:44:59:    Phone Enabled: true
2025-09-20T13:44:59:    Session Persistence: true
2025-09-20T13:44:59:    Max Reconnect Attempts: 10
2025-09-20T13:44:59:    Default Phone: None
2025-09-20T13:44:59: 🔒 Session validation enabled (check every 300s)
2025-09-20T13:44:59: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T13:44:59: 🔧 Developer Configuration initialized
2025-09-20T13:44:59: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758356099898,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 836,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:44:59: 🔧 Developer Configuration initialized
2025-09-20T13:44:59: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T13:44:59: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T13:44:59: ⏰ 4-minute startup delay active
2025-09-20T13:44:59: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T13:44:59: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T13:44:59: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T13:44:59: 🔑 Initializing Google Sheets API...
2025-09-20T13:44:59: ✅ Google Sheets API initialized
2025-09-20T13:44:59: ✅ Google Sheets API initialized
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758356099898,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 836,
  nodeVersion: 'v22.19.0'
}
2025-09-20T13:44:59: 📝 Enhanced Logger initialized
2025-09-20T13:44:59: 📁 Loaded 0 sent messages from file
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T13:44:59: 📁 Loaded 0 customer histories from file
2025-09-20T13:44:59: 📁 Loaded 0 message hashes from file
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T13:44:59: 📁 Loaded statistics from file
2025-09-20T13:44:59: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:44:59: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:44:59: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T13:44:59: 🧹 Removed stale process lock
2025-09-20T13:44:59: 🔒 Process lock acquired (PID: 836)
2025-09-20T13:44:59: 🔒 Process lock acquired (PID: 836)
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 836
}
2025-09-20T13:44:59: ⏰ Starting 240 second startup grace period...
2025-09-20T13:44:59: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 836
}
2025-09-20T13:44:59: ⏰ Starting 240 second startup grace period...
2025-09-20T13:44:59: 🚫 All message sending is BLOCKED during grace period
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758356099898, processId: 836 },
  timestamp: 1758356099972
}
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758356099898, willExpireAt: 1758356339898 },
  timestamp: 1758356099972
}
2025-09-20T13:44:59: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:44:59: ⏰ Startup grace period: 240 seconds
2025-09-20T13:44:59: 📋 Message rules loaded: 8 types
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758356099898, willExpireAt: 1758356339898 },
  timestamp: 1758356099981
}
2025-09-20T13:44:59: 🛡️ Enhanced Safety Manager initialized
2025-09-20T13:44:59: ⏰ Startup grace period: 240 seconds
2025-09-20T13:44:59: 📋 Message rules loaded: 8 types
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758356099898, processId: 836 },
  timestamp: 1758356099980
}
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 87,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:44:59: ✅ Safety Manager initialized
2025-09-20T13:44:59: ℹ️ [1:44:59 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 93,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T13:44:59: 📁 Loaded 0 sent messages from file
2025-09-20T13:45:00: 📁 Loaded 0 customer histories from file
2025-09-20T13:45:00: 📁 Loaded 0 message hashes from file
2025-09-20T13:45:00: 📁 Loaded statistics from file
2025-09-20T13:45:00: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:45:00: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T13:45:00: ✅ Duplicate Prevention Manager initialized
2025-09-20T13:45:00: 🔄 Starting WhatsApp connection...
2025-09-20T13:45:00: 🔄 Initializing WhatsApp client...
2025-09-20T13:45:00: ✅ WhatsApp connection started
2025-09-20T13:45:00: 🔧 Initializing admin commands...
2025-09-20T13:45:00: 📨 Message handler attached to WhatsApp socket
2025-09-20T13:45:00: ✅ Admin commands system initialized
2025-09-20T13:45:00: 🔄 Initializing polling functionality...
2025-09-20T13:45:00: ⏰ Scheduling polling start in 5 seconds...
2025-09-20T13:45:00: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T13:45:00: 📞 Attempting to request pairing code...
2025-09-20T13:45:00: 💡 To use phone authentication:
2025-09-20T13:45:00:    1. Use the dashboard at http://localhost:3001
2025-09-20T13:45:00:    2. Select "Phone Number Authentication"
2025-09-20T13:45:00:    3. Enter your phone number
2025-09-20T13:45:00:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T13:45:00: 🔄 Connecting to WhatsApp...
2025-09-20T13:45:02: ✅ WhatsApp connected successfully!
2025-09-20T13:45:02: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T13:45:02: 📱 Session established successfully
2025-09-20T13:45:02: 🔒 Session will be monitored for stability
2025-09-20T13:45:05: 🚀 About to start polling...
2025-09-20T13:45:05: 🔄 Starting order polling...
2025-09-20T13:45:05: 🔍 Starting processOrders check...
2025-09-20T13:45:05: 📊 Processing orders from Google Sheets...
2025-09-20T13:45:05: 🔍 Processing sheet: Main Orders (orders)
2025-09-20T13:45:05: 📋 Fetching data from Main Orders (ID: 128vwp1tjsej9itNAkQY1Y-5sJsMv3N1TZi5Pl9Wgn6Y)
2025-09-20T13:45:05: 📋 Using range: Sheet1!A:Z
2025-09-20T13:45:05: ✅ Order polling started (3-minute intervals)
2025-09-20T13:45:06: Failed to get sheet data from Main Orders: Unable to parse range: Sheet1!A:Z
2025-09-20T13:45:06: No orders found in Main Orders
2025-09-20T13:45:06: 🔍 Processing sheet: Fabric Orders (fabric)
2025-09-20T13:45:06: 📋 Fetching data from Fabric Orders (ID: 1tFb4EBzzvdmDNY0bOtyTXAhX1aRqzfq7NzXLhDqYj0o)
2025-09-20T13:45:06: 📋 Using range: Sheet1!A:Z
2025-09-20T13:45:06: Failed to get sheet data from Fabric Orders: Unable to parse range: Sheet1!A:Z
2025-09-20T13:45:06: No orders found in Fabric Orders
2025-09-20T13:45:06: 🔍 Processing sheet: Combined Orders (combined-orders)
2025-09-20T13:45:06: 📋 Fetching data from Combined Orders (ID: 199mFt3yz1cZQUGcF84pZgNQoxCpOS2gHxFGDD71CZVg)
2025-09-20T13:45:06: 📋 Using range: Sheet1!A:Z
2025-09-20T13:45:07: Failed to get sheet data from Combined Orders: Unable to parse range: Sheet1!A:Z
2025-09-20T13:45:07: No orders found in Combined Orders
2025-09-20T13:45:29: 💾 Data synced to files successfully
2025-09-20T13:45:59: 💾 Data synced to files successfully
2025-09-20T13:46:29: 💾 Data synced to files successfully
2025-09-20T13:46:59: 💾 Data synced to files successfully
2025-09-20T13:47:29: 💾 Data synced to files successfully
2025-09-20T15:02:21: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T15:02:21: 📝 Loaded 11 template types
2025-09-20T15:02:21: 📝 Enhanced Logger initialized
2025-09-20T15:02:21: ✅ Atomic State Manager initialized
2025-09-20T15:02:21: ✅ Google credentials loaded from service-account.json file
2025-09-20T15:02:21: 📱 WhatsApp auth status: ✅ credentials, 5 session files
2025-09-20T15:02:21: 🔧 WhatsApp Authentication Configuration:
2025-09-20T15:02:21:    Auth Mode: both
2025-09-20T15:02:21:    QR Enabled: true
2025-09-20T15:02:21:    Phone Enabled: true
2025-09-20T15:02:21:    Session Persistence: true
2025-09-20T15:02:21:    Max Reconnect Attempts: 10
2025-09-20T15:02:21:    Default Phone: None
2025-09-20T15:02:21: 🔒 Session validation enabled (check every 300s)
2025-09-20T15:02:21: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T15:02:21: 🔧 Developer Configuration initialized
2025-09-20T15:02:21: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758360741178,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9392,
  nodeVersion: 'v22.19.0'
}
2025-09-20T15:02:21: 🔧 Developer Configuration initialized
2025-09-20T15:02:21: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T15:02:21: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T15:02:21: ⏰ 4-minute startup delay active
2025-09-20T15:02:21: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T15:02:21: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T15:02:21: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T15:02:21: 🔑 Initializing Google Sheets API...
2025-09-20T15:02:21: ✅ Google Sheets API initialized
2025-09-20T15:02:21: ✅ Google Sheets API initialized
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758360741178,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9392,
  nodeVersion: 'v22.19.0'
}
2025-09-20T15:02:21: 📁 Loaded 0 sent messages from file
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T15:02:21: 📝 Enhanced Logger initialized
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T15:02:21: 📁 Loaded 0 customer histories from file
2025-09-20T15:02:21: 📁 Loaded 0 message hashes from file
2025-09-20T15:02:21: 📁 Loaded statistics from file
2025-09-20T15:02:21: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:02:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T15:02:21: 🧹 Removed stale process lock
2025-09-20T15:02:21: 🧹 Removed stale process lock
2025-09-20T15:02:21: 🔒 Process lock acquired (PID: 9392)
2025-09-20T15:02:21: 🔒 Process lock acquired (PID: 9392)
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9392
}
2025-09-20T15:02:21: ⏰ Starting 240 second startup grace period...
2025-09-20T15:02:21: 🚫 All message sending is BLOCKED during grace period
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9392
}
2025-09-20T15:02:21: ⏰ Starting 240 second startup grace period...
2025-09-20T15:02:21: 🚫 All message sending is BLOCKED during grace period
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360741178, processId: 9392 },
  timestamp: 1758360741302
}
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360741178, willExpireAt: 1758360981178 },
  timestamp: 1758360741302
}
2025-09-20T15:02:21: 🛡️ Enhanced Safety Manager initialized
2025-09-20T15:02:21: ⏰ Startup grace period: 240 seconds
2025-09-20T15:02:21: 📋 Message rules loaded: 8 types
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360741178, willExpireAt: 1758360981178 },
  timestamp: 1758360741303
}
2025-09-20T15:02:21: 🛡️ Enhanced Safety Manager initialized
2025-09-20T15:02:21: ⏰ Startup grace period: 240 seconds
2025-09-20T15:02:21: 📋 Message rules loaded: 8 types
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360741178, processId: 9392 },
  timestamp: 1758360741303
}
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 128,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T15:02:21: ℹ️ [3:02:21 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 132,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T15:02:21: ✅ Safety Manager initialized
2025-09-20T15:02:21: 📁 Loaded 0 sent messages from file
2025-09-20T15:02:21: 📁 Loaded 0 customer histories from file
2025-09-20T15:02:21: 📁 Loaded 0 message hashes from file
2025-09-20T15:02:21: 📁 Loaded statistics from file
2025-09-20T15:02:21: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:02:21: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T15:02:21: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:02:21: 🔄 Starting WhatsApp connection...
2025-09-20T15:02:21: 🔄 Initializing WhatsApp client...
2025-09-20T15:02:21: ✅ WhatsApp connection started
2025-09-20T15:02:21: 🔧 Initializing admin commands...
2025-09-20T15:02:21: 📨 Message handler attached to WhatsApp socket
2025-09-20T15:02:21: ✅ Admin commands system initialized
2025-09-20T15:02:21: 🔄 Initializing polling functionality...
2025-09-20T15:02:21: ✅ WhatsApp connected. Polling will be controlled by bot instance.
2025-09-20T15:02:21: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T15:02:21: 📞 Attempting to request pairing code...
2025-09-20T15:02:21: 💡 To use phone authentication:
2025-09-20T15:02:21:    1. Use the dashboard at http://localhost:3001
2025-09-20T15:02:21:    2. Select "Phone Number Authentication"
2025-09-20T15:02:21:    3. Enter your phone number
2025-09-20T15:02:21:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T15:02:21: 🔄 Connecting to WhatsApp...
2025-09-20T15:02:23: ✅ WhatsApp connected successfully!
2025-09-20T15:02:23: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T15:02:23: 📱 Session established successfully
2025-09-20T15:02:23: 🔒 Session will be monitored for stability
2025-09-20T15:02:51: 💾 Data synced to files successfully
2025-09-20T15:03:21: 💾 Data synced to files successfully
2025-09-20T15:03:51: 💾 Data synced to files successfully
2025-09-20T15:04:21: 💾 Data synced to files successfully
2025-09-20T15:04:51: 💾 Data synced to files successfully
2025-09-20T15:05:22: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T15:05:22: 📝 Loaded 11 template types
2025-09-20T15:05:22: ✅ Atomic State Manager initialized
2025-09-20T15:05:22: 📝 Enhanced Logger initialized
2025-09-20T15:05:22: ✅ Google credentials loaded from service-account.json file
2025-09-20T15:05:22: 📱 WhatsApp auth status: ✅ credentials, 5 session files
2025-09-20T15:05:22: 🔧 WhatsApp Authentication Configuration:
2025-09-20T15:05:22:    Auth Mode: both
2025-09-20T15:05:22:    QR Enabled: true
2025-09-20T15:05:22:    Phone Enabled: true
2025-09-20T15:05:22:    Session Persistence: true
2025-09-20T15:05:22:    Max Reconnect Attempts: 10
2025-09-20T15:05:22:    Default Phone: None
2025-09-20T15:05:22: 🔒 Session validation enabled (check every 300s)
2025-09-20T15:05:22: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T15:05:22: 🔧 Developer Configuration initialized
2025-09-20T15:05:22: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758360922732,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9456,
  nodeVersion: 'v22.19.0'
}
2025-09-20T15:05:22: 🔧 Developer Configuration initialized
2025-09-20T15:05:22: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T15:05:22: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T15:05:22: ⏰ 4-minute startup delay active
2025-09-20T15:05:22: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T15:05:22: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T15:05:22: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T15:05:22: 🔑 Initializing Google Sheets API...
2025-09-20T15:05:22: ✅ Google Sheets API initialized
2025-09-20T15:05:22: ✅ Google Sheets API initialized
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758360922732,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 9456,
  nodeVersion: 'v22.19.0'
}
2025-09-20T15:05:22: 📁 Loaded 0 sent messages from file
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T15:05:22: 📝 Enhanced Logger initialized
2025-09-20T15:05:22: 📁 Loaded 0 customer histories from file
2025-09-20T15:05:22: 📁 Loaded 0 message hashes from file
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T15:05:22: 📁 Loaded statistics from file
2025-09-20T15:05:22: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:05:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T15:05:22: 🧹 Removed stale process lock
2025-09-20T15:05:22: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T15:05:22: 🔒 Process lock acquired (PID: 9456)
2025-09-20T15:05:22: 🔒 Process lock acquired (PID: 9456)
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9456
}
2025-09-20T15:05:22: ⏰ Starting 240 second startup grace period...
2025-09-20T15:05:22: 🚫 All message sending is BLOCKED during grace period
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 9456
}
2025-09-20T15:05:22: ⏰ Starting 240 second startup grace period...
2025-09-20T15:05:22: 🚫 All message sending is BLOCKED during grace period
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360922732, processId: 9456 },
  timestamp: 1758360922767
}
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360922732, willExpireAt: 1758361162732 },
  timestamp: 1758360922767
}
2025-09-20T15:05:22: 🛡️ Enhanced Safety Manager initialized
2025-09-20T15:05:22: ⏰ Startup grace period: 240 seconds
2025-09-20T15:05:22: 📋 Message rules loaded: 8 types
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360922732, processId: 9456 },
  timestamp: 1758360922768
}
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758360922732, willExpireAt: 1758361162732 },
  timestamp: 1758360922768
}
2025-09-20T15:05:22: 🛡️ Enhanced Safety Manager initialized
2025-09-20T15:05:22: ⏰ Startup grace period: 240 seconds
2025-09-20T15:05:22: 📋 Message rules loaded: 8 types
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 37,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T15:05:22: ℹ️ [3:05:22 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 38,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T15:05:22: ✅ Safety Manager initialized
2025-09-20T15:05:22: 📁 Loaded 0 sent messages from file
2025-09-20T15:05:22: 📁 Loaded 0 customer histories from file
2025-09-20T15:05:22: 📁 Loaded 0 message hashes from file
2025-09-20T15:05:22: 📁 Loaded statistics from file
2025-09-20T15:05:22: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:05:22: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T15:05:22: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:05:22: 🔄 Starting WhatsApp connection...
2025-09-20T15:05:22: 🔄 Initializing WhatsApp client...
2025-09-20T15:05:22: ✅ WhatsApp connection started
2025-09-20T15:05:22: 🔧 Initializing admin commands...
2025-09-20T15:05:22: 📨 Message handler attached to WhatsApp socket
2025-09-20T15:05:22: ✅ Admin commands system initialized
2025-09-20T15:05:22: 🔄 Initializing polling functionality...
2025-09-20T15:05:22: ✅ WhatsApp connected. Polling will be controlled by bot instance.
2025-09-20T15:05:22: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T15:05:22: 📞 Attempting to request pairing code...
2025-09-20T15:05:22: 💡 To use phone authentication:
2025-09-20T15:05:22:    1. Use the dashboard at http://localhost:3001
2025-09-20T15:05:22:    2. Select "Phone Number Authentication"
2025-09-20T15:05:22:    3. Enter your phone number
2025-09-20T15:05:22:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T15:05:22: 🔄 Connecting to WhatsApp...
2025-09-20T15:05:25: ✅ WhatsApp connected successfully!
2025-09-20T15:05:25: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T15:05:25: 📱 Session established successfully
2025-09-20T15:05:25: 🔒 Session will be monitored for stability
2025-09-20T15:05:52: 💾 Data synced to files successfully
2025-09-20T15:06:22: 💾 Data synced to files successfully
2025-09-20T15:06:52: 💾 Data synced to files successfully
2025-09-20T15:07:22: 💾 Data synced to files successfully
2025-09-20T15:07:52: 💾 Data synced to files successfully
2025-09-20T15:08:22: 💾 Data synced to files successfully
2025-09-20T15:08:52: 💾 Data synced to files successfully
2025-09-20T15:09:22: ✅ Startup grace period ended - message sending now allowed
2025-09-20T15:09:22: ✅ Startup grace period ended - message sending now allowed
2025-09-20T15:09:22: ℹ️ [3:09:22 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 9456 },
  timestamp: 1758361162785
}
2025-09-20T15:09:22: ℹ️ [3:09:22 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 9456 },
  timestamp: 1758361162788
}
2025-09-20T15:09:22: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T15:09:22: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T15:09:22: 💾 Data synced to files successfully
2025-09-20T15:09:52: 💾 Data synced to files successfully
2025-09-20T15:10:22: 💾 Data synced to files successfully
2025-09-20T15:10:30: ✅ Optimized Message Templates initialized (Hindi only)
2025-09-20T15:10:30: 📝 Loaded 11 template types
2025-09-20T15:10:30: ✅ Atomic State Manager initialized
2025-09-20T15:10:30: 📝 Enhanced Logger initialized
2025-09-20T15:10:30: ✅ Google credentials loaded from service-account.json file
2025-09-20T15:10:30: 📱 WhatsApp auth status: ✅ credentials, 5 session files
2025-09-20T15:10:30: 🔧 WhatsApp Authentication Configuration:
2025-09-20T15:10:30:    Auth Mode: both
2025-09-20T15:10:30:    QR Enabled: true
2025-09-20T15:10:30:    Phone Enabled: true
2025-09-20T15:10:30:    Session Persistence: true
2025-09-20T15:10:30:    Max Reconnect Attempts: 10
2025-09-20T15:10:30:    Default Phone: None
2025-09-20T15:10:30: 🔒 Session validation enabled (check every 300s)
2025-09-20T15:10:30: 🔧 WhatsApp client initialized with auth mode: both
2025-09-20T15:10:30: 🔧 Developer Configuration initialized
2025-09-20T15:10:30: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758361230345,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 21860,
  nodeVersion: 'v22.19.0'
}
2025-09-20T15:10:30: 🔧 Developer Configuration initialized
2025-09-20T15:10:30: 📱 Developer phones whitelisted: 917375938371, 919166758467, 916375623182
2025-09-20T15:10:30: 🛡️ Enhanced WhatsApp Client with comprehensive safety initialized
2025-09-20T15:10:30: ⏰ 4-minute startup delay active
2025-09-20T15:10:30: 🔒 Triple-layer duplicate prevention enabled
2025-09-20T15:10:30: ⚡ Circuit breaker limits: Daily=10, Hourly=3
2025-09-20T15:10:30: 🔄 Initializing Enhanced WhatsApp Client...
2025-09-20T15:10:30: 🔑 Initializing Google Sheets API...
2025-09-20T15:10:30: ✅ Google Sheets API initialized
2025-09-20T15:10:30: ✅ Google Sheets API initialized
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Enhanced Safety Manager initialization started {
  startupTime: 1758361230345,
  gracePeriodMs: 240000,
  dataDir: './safety-data',
  dbPath: 'safety-data\\safety-database.db',
  processId: 21860,
  nodeVersion: 'v22.19.0'
}
2025-09-20T15:10:30: 📁 Loaded 0 sent messages from file
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Data directory created/verified { dataDir: './safety-data' }
2025-09-20T15:10:30: 📝 Enhanced Logger initialized
2025-09-20T15:10:30: 📁 Loaded 0 customer histories from file
2025-09-20T15:10:30: 📁 Loaded 0 message hashes from file
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: SQLite database initialized { dbPath: 'safety-data\\safety-database.db' }
2025-09-20T15:10:30: 📁 Loaded statistics from file
2025-09-20T15:10:30: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:10:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T15:10:30: 🧹 Removed stale process lock
2025-09-20T15:10:30: ⚠️ Warning: Could not remove lock file: EPERM: operation not permitted, unlink 'C:\Users\gssai\OneDrive\Desktop\Whatsapp-Moblie-Bot\safety-data\process.lock'
2025-09-20T15:10:30: 🔒 Process lock acquired (PID: 21860)
2025-09-20T15:10:30: 🔒 Process lock acquired (PID: 21860)
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 21860
}
2025-09-20T15:10:30: ⏰ Starting 240 second startup grace period...
2025-09-20T15:10:30: 🚫 All message sending is BLOCKED during grace period
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Process isolation enforced {
  lockFile: 'safety-data\\process.lock',
  pidFile: 'safety-data\\process.pid',
  processId: 21860
}
2025-09-20T15:10:30: ⏰ Starting 240 second startup grace period...
2025-09-20T15:10:30: 🚫 All message sending is BLOCKED during grace period
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758361230345, processId: 21860 },
  timestamp: 1758361230462
}
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758361230345, willExpireAt: 1758361470345 },
  timestamp: 1758361230463
}
2025-09-20T15:10:30: 🛡️ Enhanced Safety Manager initialized
2025-09-20T15:10:30: ⏰ Startup grace period: 240 seconds
2025-09-20T15:10:30: 📋 Message rules loaded: 8 types
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Grace Period: STARTED {
  action: 'STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758361230345, processId: 21860 },
  timestamp: 1758361230466
}
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Grace Period: GRACE_PERIOD_STARTED {
  action: 'GRACE_PERIOD_STARTED',
  remainingMs: 240000,
  remainingSeconds: 240,
  details: { startupTime: 1758361230345, willExpireAt: 1758361470345 },
  timestamp: 1758361230467
}
2025-09-20T15:10:30: 🛡️ Enhanced Safety Manager initialized
2025-09-20T15:10:30: ⏰ Startup grace period: 240 seconds
2025-09-20T15:10:30: 📋 Message rules loaded: 8 types
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 138,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T15:10:30: ℹ️ [3:10:30 pm] INFO: Enhanced Safety Manager initialization completed successfully {
  initializationDuration: 162,
  gracePeriodActive: true,
  messageRulesCount: 8,
  messageTypes: [
    'welcome',
    'confirmation',
    'ready',
    'delivery',
    'pickup_reminder',
    'payment_reminder',
    'fabric_welcome',
    'fabric_purchase'
  ],
  circuitBreakerLimits: { daily: 10, hourly: 3, similarity: 0.8 },
  databaseReady: true,
  loggerReady: true,
  processIsolationActive: true
}
2025-09-20T15:10:30: ✅ Safety Manager initialized
2025-09-20T15:10:30: 📁 Loaded 0 sent messages from file
2025-09-20T15:10:30: 📁 Loaded 0 customer histories from file
2025-09-20T15:10:30: 📁 Loaded 0 message hashes from file
2025-09-20T15:10:30: 📁 Loaded statistics from file
2025-09-20T15:10:30: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:10:30: 📊 Loaded: 0 sent messages, 0 customer histories, 0 content hashes
2025-09-20T15:10:30: ✅ Duplicate Prevention Manager initialized
2025-09-20T15:10:30: 🔄 Starting WhatsApp connection...
2025-09-20T15:10:30: 🔄 Initializing WhatsApp client...
2025-09-20T15:10:30: ✅ WhatsApp connection started
2025-09-20T15:10:30: 🔧 Initializing admin commands...
2025-09-20T15:10:30: 📨 Message handler attached to WhatsApp socket
2025-09-20T15:10:30: ✅ Admin commands system initialized
2025-09-20T15:10:30: 🔄 Initializing polling functionality...
2025-09-20T15:10:30: ✅ WhatsApp connected. Polling will be controlled by bot instance.
2025-09-20T15:10:30: 🛡️ Enhanced WhatsApp Client fully initialized
2025-09-20T15:10:30: 📞 Attempting to request pairing code...
2025-09-20T15:10:30: 💡 To use phone authentication:
2025-09-20T15:10:30:    1. Use the dashboard at http://localhost:3001
2025-09-20T15:10:30:    2. Select "Phone Number Authentication"
2025-09-20T15:10:30:    3. Enter your phone number
2025-09-20T15:10:30:    4. Get the pairing code and enter it in WhatsApp
2025-09-20T15:10:30: 🔄 Connecting to WhatsApp...
2025-09-20T15:10:32: ✅ WhatsApp connected successfully!
2025-09-20T15:10:32: 🔄 Enhanced client: Connected event received, forwarding...
2025-09-20T15:10:32: 📱 Session established successfully
2025-09-20T15:10:32: 🔒 Session will be monitored for stability
2025-09-20T15:11:00: 💾 Data synced to files successfully
2025-09-20T15:11:30: 💾 Data synced to files successfully
2025-09-20T15:12:00: 💾 Data synced to files successfully
2025-09-20T15:12:30: 💾 Data synced to files successfully
2025-09-20T15:13:00: 💾 Data synced to files successfully
2025-09-20T15:13:30: 💾 Data synced to files successfully
2025-09-20T15:14:00: 💾 Data synced to files successfully
2025-09-20T15:14:30: 💾 Data synced to files successfully
2025-09-20T15:14:30: ✅ Startup grace period ended - message sending now allowed
2025-09-20T15:14:30: ✅ Startup grace period ended - message sending now allowed
2025-09-20T15:14:30: ℹ️ [3:14:30 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 21860 },
  timestamp: 1758361470471
}
2025-09-20T15:14:30: ℹ️ [3:14:30 pm] INFO: Grace Period: ENDED {
  action: 'ENDED',
  remainingMs: 0,
  remainingSeconds: 0,
  details: { totalDuration: 240000, processId: 21860 },
  timestamp: 1758361470475
}
2025-09-20T15:14:30: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T15:14:30: 📋 System Event: grace_period_ended - Startup grace period completed successfully
2025-09-20T15:15:00: 💾 Data synced to files successfully
2025-09-20T15:15:30: 💾 Data synced to files successfully
2025-09-20T15:16:00: 💾 Data synced to files successfully
2025-09-20T15:16:30: 💾 Data synced to files successfully
2025-09-20T15:17:00: 💾 Data synced to files successfully
2025-09-20T15:17:30: 💾 Data synced to files successfully
2025-09-20T15:18:00: 💾 Data synced to files successfully
2025-09-20T15:18:30: 💾 Data synced to files successfully
2025-09-20T15:19:00: 💾 Data synced to files successfully
2025-09-20T15:19:30: 💾 Data synced to files successfully
2025-09-20T15:20:00: 💾 Data synced to files successfully
2025-09-20T15:20:30: 💾 Data synced to files successfully
